{
    "title": "树莓派的奇幻之旅", 
    "description": "", 
    "followers": [
        "https://www.zhihu.com/people/wu-feng-zi-74", 
        "https://www.zhihu.com/people/pan-li-zhu-88", 
        "https://www.zhihu.com/people/luliang1008", 
        "https://www.zhihu.com/people/51redaiyu.com", 
        "https://www.zhihu.com/people/rrir-yiyi", 
        "https://www.zhihu.com/people/yuan-hou-de-pao-xiao", 
        "https://www.zhihu.com/people/xiao-ge-ge-26-63", 
        "https://www.zhihu.com/people/milo-68", 
        "https://www.zhihu.com/people/jeff-gu-94", 
        "https://www.zhihu.com/people/xin-de-kai-shi-52-21", 
        "https://www.zhihu.com/people/Tardis012", 
        "https://www.zhihu.com/people/ying-nian-zao-fei", 
        "https://www.zhihu.com/people/zhi-mo-lei-shang-qing", 
        "https://www.zhihu.com/people/su-nan-59-49", 
        "https://www.zhihu.com/people/yang-hong-da-56", 
        "https://www.zhihu.com/people/q1feng-58", 
        "https://www.zhihu.com/people/yinazh", 
        "https://www.zhihu.com/people/li-xiao-peng-78", 
        "https://www.zhihu.com/people/chu-meng-yi-jia-qin", 
        "https://www.zhihu.com/people/song-ri-jie", 
        "https://www.zhihu.com/people/think-19", 
        "https://www.zhihu.com/people/zhang-wei-jie-97", 
        "https://www.zhihu.com/people/mu-bu-28-20", 
        "https://www.zhihu.com/people/bu-wen-gui-qi-65-96", 
        "https://www.zhihu.com/people/li-cheng-90-57", 
        "https://www.zhihu.com/people/sharkhai-tun", 
        "https://www.zhihu.com/people/pai-gu-deai", 
        "https://www.zhihu.com/people/lao-fang-71-12", 
        "https://www.zhihu.com/people/da-xiong-37-72", 
        "https://www.zhihu.com/people/lumingyi", 
        "https://www.zhihu.com/people/destiny-52-87", 
        "https://www.zhihu.com/people/mast", 
        "https://www.zhihu.com/people/630-hang-kong-hang-tian", 
        "https://www.zhihu.com/people/yang-gang-69-84", 
        "https://www.zhihu.com/people/jacob-zuo", 
        "https://www.zhihu.com/people/xiao-wu-shuang-23", 
        "https://www.zhihu.com/people/maimai-27-99", 
        "https://www.zhihu.com/people/qing-lan-feng-51", 
        "https://www.zhihu.com/people/ji-ban-li", 
        "https://www.zhihu.com/people/zhjchow", 
        "https://www.zhihu.com/people/li-chuang-82", 
        "https://www.zhihu.com/people/lu-ke-71-13", 
        "https://www.zhihu.com/people/chen-yifei-70", 
        "https://www.zhihu.com/people/lu-bin-95-80", 
        "https://www.zhihu.com/people/tian-ren-wu-fang", 
        "https://www.zhihu.com/people/li-ming-39-3-11", 
        "https://www.zhihu.com/people/shi-jia-chen-1994", 
        "https://www.zhihu.com/people/xuan-chen-586", 
        "https://www.zhihu.com/people/bruce-yang-18-70", 
        "https://www.zhihu.com/people/sui-feng-er-fei-72", 
        "https://www.zhihu.com/people/choiyeren", 
        "https://www.zhihu.com/people/zsi-have", 
        "https://www.zhihu.com/people/reed-84-49", 
        "https://www.zhihu.com/people/roll-rock-97", 
        "https://www.zhihu.com/people/jiang-jiang-jiang-jiang-zhu", 
        "https://www.zhihu.com/people/qing-zheng-22-73", 
        "https://www.zhihu.com/people/shu-du-you-xi-84", 
        "https://www.zhihu.com/people/yhy-98-99", 
        "https://www.zhihu.com/people/LEE-GOD-69", 
        "https://www.zhihu.com/people/dou-dou-biao-da-sheng", 
        "https://www.zhihu.com/people/liu-sha-22-64", 
        "https://www.zhihu.com/people/ares-81-37", 
        "https://www.zhihu.com/people/jeremy-yan-85", 
        "https://www.zhihu.com/people/bai-yang-zuo-de-mu-mu-38", 
        "https://www.zhihu.com/people/feng-chen-yi-bu-yi-51", 
        "https://www.zhihu.com/people/xu-yi-mian-22", 
        "https://www.zhihu.com/people/shi-fou-shi-yin-wei-ni-de-yuan-yin", 
        "https://www.zhihu.com/people/fei-xiang-de-cai-dao-34", 
        "https://www.zhihu.com/people/chenweird", 
        "https://www.zhihu.com/people/xiao-qing-74-64", 
        "https://www.zhihu.com/people/hy-q", 
        "https://www.zhihu.com/people/fan-yang-28-34-96", 
        "https://www.zhihu.com/people/hqq-98-28", 
        "https://www.zhihu.com/people/Acemage", 
        "https://www.zhihu.com/people/xu-haden", 
        "https://www.zhihu.com/people/li-zhou-76", 
        "https://www.zhihu.com/people/gao-kai-2-83", 
        "https://www.zhihu.com/people/younghf", 
        "https://www.zhihu.com/people/gabledon", 
        "https://www.zhihu.com/people/huan-ying-66-20", 
        "https://www.zhihu.com/people/jinya-chen", 
        "https://www.zhihu.com/people/chang-sun-yu-xiu-62", 
        "https://www.zhihu.com/people/feng-chen-27-17", 
        "https://www.zhihu.com/people/yixie-bu-zhi-qiu-47", 
        "https://www.zhihu.com/people/xue-ying-yu-11", 
        "https://www.zhihu.com/people/Insider", 
        "https://www.zhihu.com/people/dan-ke-xiang", 
        "https://www.zhihu.com/people/xuan-wang-41", 
        "https://www.zhihu.com/people/sun-guan-chao", 
        "https://www.zhihu.com/people/maxima-91", 
        "https://www.zhihu.com/people/HaveTwoBrush", 
        "https://www.zhihu.com/people/enp4s0", 
        "https://www.zhihu.com/people/da-sheng-26-92", 
        "https://www.zhihu.com/people/zeng-ze-long", 
        "https://www.zhihu.com/people/atusoft", 
        "https://www.zhihu.com/people/zhang-wei-jian-44-91", 
        "https://www.zhihu.com/people/chen-yuan-yuan-20-26", 
        "https://www.zhihu.com/people/mozhi-44-38", 
        "https://www.zhihu.com/people/liqing-80", 
        "https://www.zhihu.com/people/interjc", 
        "https://www.zhihu.com/people/squall-86", 
        "https://www.zhihu.com/people/hehh2001", 
        "https://www.zhihu.com/people/huang-en-da-11", 
        "https://www.zhihu.com/people/lv_v", 
        "https://www.zhihu.com/people/fan-qi-82-32", 
        "https://www.zhihu.com/people/slightun", 
        "https://www.zhihu.com/people/long-yun-34", 
        "https://www.zhihu.com/people/andre-84-25", 
        "https://www.zhihu.com/people/wonghank", 
        "https://www.zhihu.com/people/qianlou", 
        "https://www.zhihu.com/people/driverz", 
        "https://www.zhihu.com/people/alanchenvip", 
        "https://www.zhihu.com/people/galvin-91", 
        "https://www.zhihu.com/people/brian-yan-4", 
        "https://www.zhihu.com/people/bing-cheng-82-41", 
        "https://www.zhihu.com/people/dean-1-72-13", 
        "https://www.zhihu.com/people/ting-zhi-36", 
        "https://www.zhihu.com/people/ji-bu-54-36", 
        "https://www.zhihu.com/people/kong-xin-cai-22", 
        "https://www.zhihu.com/people/xu-yu-zhuo-38", 
        "https://www.zhihu.com/people/m-iao", 
        "https://www.zhihu.com/people/hyman-48", 
        "https://www.zhihu.com/people/yuanlongzeng", 
        "https://www.zhihu.com/people/foristkirito", 
        "https://www.zhihu.com/people/qi-zhu-qu-kan-hai-31", 
        "https://www.zhihu.com/people/Zou.yu", 
        "https://www.zhihu.com/people/momowuy-stanley", 
        "https://www.zhihu.com/people/heylypp", 
        "https://www.zhihu.com/people/a-a-a-wang-63", 
        "https://www.zhihu.com/people/yu-lin-bin-97", 
        "https://www.zhihu.com/people/hanrui", 
        "https://www.zhihu.com/people/Martin-Router-King", 
        "https://www.zhihu.com/people/tanghaohao", 
        "https://www.zhihu.com/people/yi-nan-3-63", 
        "https://www.zhihu.com/people/foo_hack", 
        "https://www.zhihu.com/people/xxxy-17-27", 
        "https://www.zhihu.com/people/guo-zhong-yuan-5", 
        "https://www.zhihu.com/people/shu-ke-bei-ta-88", 
        "https://www.zhihu.com/people/imzjl", 
        "https://www.zhihu.com/people/ssaamm", 
        "https://www.zhihu.com/people/SpectorMercurial", 
        "https://www.zhihu.com/people/garfield", 
        "https://www.zhihu.com/people/wu-zhi-yu-78", 
        "https://www.zhihu.com/people/dot-monkey", 
        "https://www.zhihu.com/people/jin-xiao-ye", 
        "https://www.zhihu.com/people/gao-yu-song", 
        "https://www.zhihu.com/people/he-fei-98-91", 
        "https://www.zhihu.com/people/jyc-1-91", 
        "https://www.zhihu.com/people/shi-ze-kui", 
        "https://www.zhihu.com/people/ta7sudan", 
        "https://www.zhihu.com/people/tangyaming", 
        "https://www.zhihu.com/people/shi-li-4-69", 
        "https://www.zhihu.com/people/liu-xiao-yao-12", 
        "https://www.zhihu.com/people/hui-shuo-hua-de-zhu-57-12", 
        "https://www.zhihu.com/people/grakra", 
        "https://www.zhihu.com/people/feng-zheng-yang-98", 
        "https://www.zhihu.com/people/jianwei-yang", 
        "https://www.zhihu.com/people/yang-zhi-feng-79", 
        "https://www.zhihu.com/people/guukee", 
        "https://www.zhihu.com/people/xie-dong-40", 
        "https://www.zhihu.com/people/veryzhun", 
        "https://www.zhihu.com/people/yao-hao-23", 
        "https://www.zhihu.com/people/guo-lei-9-84", 
        "https://www.zhihu.com/people/jakara", 
        "https://www.zhihu.com/people/chen-xiao-hui-63", 
        "https://www.zhihu.com/people/leonhardli", 
        "https://www.zhihu.com/people/cai-long-67", 
        "https://www.zhihu.com/people/baoz", 
        "https://www.zhihu.com/people/kinglong-29", 
        "https://www.zhihu.com/people/tu-xiao-xia-8", 
        "https://www.zhihu.com/people/san-ri-24", 
        "https://www.zhihu.com/people/xiang-xu-39", 
        "https://www.zhihu.com/people/wang-yi-xi-71", 
        "https://www.zhihu.com/people/peon", 
        "https://www.zhihu.com/people/simon316", 
        "https://www.zhihu.com/people/yangjun-67-56", 
        "https://www.zhihu.com/people/tingjiee", 
        "https://www.zhihu.com/people/kayaklee", 
        "https://www.zhihu.com/people/chen-aaron-23", 
        "https://www.zhihu.com/people/yingjun-2", 
        "https://www.zhihu.com/people/noner-77", 
        "https://www.zhihu.com/people/zheng-tuo-hong", 
        "https://www.zhihu.com/people/xiao-ling-yun-72", 
        "https://www.zhihu.com/people/shenli", 
        "https://www.zhihu.com/people/sulvto", 
        "https://www.zhihu.com/people/wen-shen-te-shi", 
        "https://www.zhihu.com/people/fleurer", 
        "https://www.zhihu.com/people/zhu-ge-yu-61", 
        "https://www.zhihu.com/people/zhao-ji-yuan-39", 
        "https://www.zhihu.com/people/zhi-xi-80-17", 
        "https://www.zhihu.com/people/feng-shun-41", 
        "https://www.zhihu.com/people/guo-ran-95-41", 
        "https://www.zhihu.com/people/wu-dao-46-16", 
        "https://www.zhihu.com/people/ming-ming-zhi-zhong-34-4", 
        "https://www.zhihu.com/people/wang-hai-rui-51", 
        "https://www.zhihu.com/people/gao-xiang-23-45", 
        "https://www.zhihu.com/people/lai-wei-xiang-66", 
        "https://www.zhihu.com/people/li-zhou-8-57", 
        "https://www.zhihu.com/people/guan-guan-78-91-29", 
        "https://www.zhihu.com/people/wang-yu-2-49-42", 
        "https://www.zhihu.com/people/ming-yun-shuang-fu", 
        "https://www.zhihu.com/people/sundaylao-ge", 
        "https://www.zhihu.com/people/yu-wan-cu-mian-65-26", 
        "https://www.zhihu.com/people/teng-ge-men-er", 
        "https://www.zhihu.com/people/leopard", 
        "https://www.zhihu.com/people/matrix-27", 
        "https://www.zhihu.com/people/xu-xian-di", 
        "https://www.zhihu.com/people/mao-zhi-nu", 
        "https://www.zhihu.com/people/fei-li-13", 
        "https://www.zhihu.com/people/blackclover", 
        "https://www.zhihu.com/people/xu-jian-min-48-96", 
        "https://www.zhihu.com/people/shang-ying-zhi-30", 
        "https://www.zhihu.com/people/hitrust", 
        "https://www.zhihu.com/people/xie-tao-47-50", 
        "https://www.zhihu.com/people/li-shao-jun-97", 
        "https://www.zhihu.com/people/zhang-xiao-kai-64", 
        "https://www.zhihu.com/people/yoursylvia", 
        "https://www.zhihu.com/people/he-rui-qing-45", 
        "https://www.zhihu.com/people/isguider", 
        "https://www.zhihu.com/people/dj9399", 
        "https://www.zhihu.com/people/wind-north-47", 
        "https://www.zhihu.com/people/lee-59-69-19", 
        "https://www.zhihu.com/people/zhang-tong-80-23", 
        "https://www.zhihu.com/people/jiu-dong-hui-84", 
        "https://www.zhihu.com/people/xdxben-pao", 
        "https://www.zhihu.com/people/baiduzhidao", 
        "https://www.zhihu.com/people/yixie-tang-68", 
        "https://www.zhihu.com/people/ying-xu-027", 
        "https://www.zhihu.com/people/na-xie-ren-96", 
        "https://www.zhihu.com/people/tianyuechen", 
        "https://www.zhihu.com/people/xiangwangfeng", 
        "https://www.zhihu.com/people/superman-50-74", 
        "https://www.zhihu.com/people/chen-xue-qin-24", 
        "https://www.zhihu.com/people/qia-qia-han-zi", 
        "https://www.zhihu.com/people/chen-se-se-39-47", 
        "https://www.zhihu.com/people/cc-wei", 
        "https://www.zhihu.com/people/ai-sen-hao-wei-er-75", 
        "https://www.zhihu.com/people/yang-fang-fang-70", 
        "https://www.zhihu.com/people/dicong-guan", 
        "https://www.zhihu.com/people/qu-wen-di-fang", 
        "https://www.zhihu.com/people/ying-feng-zou-46", 
        "https://www.zhihu.com/people/swmp", 
        "https://www.zhihu.com/people/yeu-yang", 
        "https://www.zhihu.com/people/bei-feng-37", 
        "https://www.zhihu.com/people/feng-yuan-long-andy", 
        "https://www.zhihu.com/people/ai-mm", 
        "https://www.zhihu.com/people/joshuachang-27", 
        "https://www.zhihu.com/people/bill008", 
        "https://www.zhihu.com/people/zhang-dian-dian-93", 
        "https://www.zhihu.com/people/azeril", 
        "https://www.zhihu.com/people/wangyarui", 
        "https://www.zhihu.com/people/ggggg", 
        "https://www.zhihu.com/people/sherlock-holmes-25-38", 
        "https://www.zhihu.com/people/zhang-wu-di-26-73", 
        "https://www.zhihu.com/people/zhou-xiao-long-3-37", 
        "https://www.zhihu.com/people/jasio-woo", 
        "https://www.zhihu.com/people/yongcanng", 
        "https://www.zhihu.com/people/k4shifz", 
        "https://www.zhihu.com/people/cao-feng-12", 
        "https://www.zhihu.com/people/impzhu-shi-yichong-xin-yang", 
        "https://www.zhihu.com/people/jun-zheng", 
        "https://www.zhihu.com/people/little_cabbage", 
        "https://www.zhihu.com/people/mai-di-wen", 
        "https://www.zhihu.com/people/hut-47", 
        "https://www.zhihu.com/people/ge-jun-22", 
        "https://www.zhihu.com/people/cong-cong-39-93-64", 
        "https://www.zhihu.com/people/mou-ke-xue-de-ke-ji", 
        "https://www.zhihu.com/people/xscape", 
        "https://www.zhihu.com/people/charlie-zha-9", 
        "https://www.zhihu.com/people/wj2014-59", 
        "https://www.zhihu.com/people/clock-dexle", 
        "https://www.zhihu.com/people/liu-ye-36-61", 
        "https://www.zhihu.com/people/wo-xiang-ta-ma", 
        "https://www.zhihu.com/people/zhang-lei-31-82-65", 
        "https://www.zhihu.com/people/wang-long-74-3", 
        "https://www.zhihu.com/people/ling-ling-56-6-40", 
        "https://www.zhihu.com/people/xuean-zhang", 
        "https://www.zhihu.com/people/elespec", 
        "https://www.zhihu.com/people/ceng-yan-65-9", 
        "https://www.zhihu.com/people/jiangjian-53", 
        "https://www.zhihu.com/people/jacob-fe", 
        "https://www.zhihu.com/people/shuomo-7", 
        "https://www.zhihu.com/people/xin-china", 
        "https://www.zhihu.com/people/alpharootbeta", 
        "https://www.zhihu.com/people/liu-yong-gang-92", 
        "https://www.zhihu.com/people/chen-yao-bin-58", 
        "https://www.zhihu.com/people/iamsee123", 
        "https://www.zhihu.com/people/gang-tie-xiong-xin", 
        "https://www.zhihu.com/people/ianf", 
        "https://www.zhihu.com/people/xiao-mao", 
        "https://www.zhihu.com/people/imtao", 
        "https://www.zhihu.com/people/dan-na-25-10", 
        "https://www.zhihu.com/people/allen-44-41-18", 
        "https://www.zhihu.com/people/laizuling", 
        "https://www.zhihu.com/people/gao-han-60-22", 
        "https://www.zhihu.com/people/com-2", 
        "https://www.zhihu.com/people/stesen", 
        "https://www.zhihu.com/people/wu-rui-fu-36"
    ], 
    "article": [
        {
            "url": "https://zhuanlan.zhihu.com/p/40594358", 
            "userName": "晨之清风", 
            "userLink": "https://www.zhihu.com/people/80a128e110a9dc14d818dc13234dc496", 
            "upvote": 36, 
            "title": "树莓派的GPIO控制", 
            "content": "<p>陈拓<a href=\"mailto:chentuo@ms.xab.ac.cn\">chentuo@ms.xab.ac.cn</a> 2018.06.09/2018.06.10</p><p>从网上下载了几张精美的图片，感谢图片的制作者！</p><h2><b>0. 概述</b></h2><p>本文介绍树莓派 Zero W的GPIO控制，并用LED看效果。</p><h2>0.1 树莓派GPIO编号方式</h2><ul><li>功能物理引脚</li></ul><p>从左到右，从上到下：左边奇数，右边偶数：1-40</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-0b3e9e2ec19de7abbcb577aa0e8e7854_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"320\" data-rawheight=\"548\" class=\"content_image\" width=\"320\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;320&#39; height=&#39;548&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"320\" data-rawheight=\"548\" class=\"content_image lazy\" width=\"320\" data-actualsrc=\"https://pic1.zhimg.com/v2-0b3e9e2ec19de7abbcb577aa0e8e7854_b.jpg\"/></figure><ul><li>BCM</li></ul><p>编号侧重CPU寄存器，根据BCM2835的GPIO寄存器编号。</p><ul><li>wiringPi</li></ul><p>编号侧重实现逻辑，把扩展GPIO端口从0开始编号，这种编号方便编程。如图 WiringPi一栏。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-fa31821216d498475c0203360e156cdb_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"649\" data-rawheight=\"415\" class=\"origin_image zh-lightbox-thumb\" width=\"649\" data-original=\"https://pic4.zhimg.com/v2-fa31821216d498475c0203360e156cdb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;649&#39; height=&#39;415&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"649\" data-rawheight=\"415\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"649\" data-original=\"https://pic4.zhimg.com/v2-fa31821216d498475c0203360e156cdb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-fa31821216d498475c0203360e156cdb_b.jpg\"/></figure><p>操作GPIO时一定先要清楚使用那一套编号。</p><h2><b>1. 准备</b></h2><h2>1.1 硬件</h2><ul><li>树莓派（我测试了Pi 3B+和Pi Zero W）</li><li>LED（3mm或5mm）</li><li>1KΩ电阻</li><li>杜邦线</li><li>电脑（我用Windows 7）</li></ul><h2>1.2 GPIO接口</h2><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-072a445b251abbef8eb7cc1e9b841ac4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"501\" data-rawheight=\"460\" class=\"origin_image zh-lightbox-thumb\" width=\"501\" data-original=\"https://pic1.zhimg.com/v2-072a445b251abbef8eb7cc1e9b841ac4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;501&#39; height=&#39;460&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"501\" data-rawheight=\"460\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"501\" data-original=\"https://pic1.zhimg.com/v2-072a445b251abbef8eb7cc1e9b841ac4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-072a445b251abbef8eb7cc1e9b841ac4_b.jpg\"/></figure><h2>1.3 接线</h2><p>首先我们把LED和树莓派连接。LED的正极串联一个1KΩ电阻接树莓派的GPIO17(pin11)，负极接地。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-793e661ae9204122f530cfa657944ace_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"894\" data-rawheight=\"531\" class=\"origin_image zh-lightbox-thumb\" width=\"894\" data-original=\"https://pic3.zhimg.com/v2-793e661ae9204122f530cfa657944ace_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;894&#39; height=&#39;531&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"894\" data-rawheight=\"531\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"894\" data-original=\"https://pic3.zhimg.com/v2-793e661ae9204122f530cfa657944ace_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-793e661ae9204122f530cfa657944ace_b.jpg\"/></figure><h2><b>2. 测试</b></h2><h2>2.1 连接电脑和Pi Zero W</h2><p>用putty连接电脑和Pi Zero W，看本文最后的参考文档。Host Name填raspberrypi.local，端口22，用户名pi，密码raspberry。</p><p><b>注意：boot分区有一个名为ssh的空文本文件，这个ssh文件容易丢失，如果ssh不能登录了，先检查ssh是否丢失。</b></p><h2>2.2 用Shell命令直接控制GPIO</h2><ul><li>使GPIO17从内核空间暴露到用户空间中</li></ul><p>pi@raspberrypi:~ $ sudo echo 17 &gt; /sys/class/gpio/export</p><p>&gt; 是IO重定向符号，IO重定向是指改变linux标准输入和输出的默认设备，指向一个用户定义的设备。echo 17 &gt; export就是把17写入到export文件中。</p><p>执行该操作之后，/sys/class/gpio目录下会增加一个gpio17文件夹。</p><ul><li>查看GPIO17引脚（在Liunx中设备都以文件的形式，引脚也是设备）</li></ul><p>pi@raspberrypi:~ $ cd /sys/class/gpio/gpio17</p><p>pi@raspberrypi:/sys/class/gpio/gpio17 $ ls</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-df06725c5f5467b35086eb657fae9027_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"546\" data-rawheight=\"32\" class=\"origin_image zh-lightbox-thumb\" width=\"546\" data-original=\"https://pic4.zhimg.com/v2-df06725c5f5467b35086eb657fae9027_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;546&#39; height=&#39;32&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"546\" data-rawheight=\"32\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"546\" data-original=\"https://pic4.zhimg.com/v2-df06725c5f5467b35086eb657fae9027_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-df06725c5f5467b35086eb657fae9027_b.jpg\"/></figure><ul><li>设置GPIO17为输出模式</li></ul><p>pi@raspberrypi:/sys/class/gpio/gpio17 $ sudo echo out &gt; direction</p><ul><li>向value文件中输入1，GPIO输出高电平，LED点亮</li></ul><p>pi@raspberrypi:/sys/class/gpio/gpio17 $ sudo echo 1 &gt; value</p><ul><li>向value文件中输入0，GPIO输出低电平，LED熄灭</li></ul><p>pi@raspberrypi:/sys/class/gpio/gpio17 $ sudo echo 0 &gt; value</p><ul><li>返回家目录</li></ul><p>pi@raspberrypi:/sys/class/gpio $ cd ~</p><ul><li>注销GPIO17接口</li></ul><p>pi@raspberrypi:~ $ sudo echo 17 &gt; /sys/class/gpio/unexport</p><h2>2.3 用Shell脚本控制GPIO</h2><ul><li>新建一个名为ledonoff.sh的脚本。</li></ul><p>pi@raspberrypi:~ $ sudo nano ledonoff.sh</p><p>脚本写下面的内容：</p><p>echo $1 &gt; /sys/class/gpio/export</p><p>echo out &gt; /sys/class/gpio/gpio$1/direction</p><p>echo 1 &gt; /sys/class/gpio/gpio$1/value</p><p>sleep 5\t#延时5秒</p><p>echo 0 &gt; /sys/class/gpio/gpio$1/value</p><p>echo $1 &gt; /sys/class/gpio/unexport</p><p>说明：shell脚本可传入参数，例如$1代表第1个参数，$2代表第2个参数，以此类推。</p><ul><li>为ledonoff.sh添加可执行权限</li></ul><p>pi@raspberrypi:~ $ sudo chmod +x ledonoff.sh</p><ul><li>运行脚本</li></ul><p>pi@raspberrypi:~ $ sudo ./ledonoff.sh 17</p><p>运行结果：LED点亮，持续5秒钟关闭。</p><h2>2.4 用Python通过PRI.GPIO命令控制GPIO</h2><p>用Python控制GPIO，最便捷的方法就是使用python类库，比如树莓派系统本身集成的RPi.GPIO。</p><p>在putty的ssh终端输入命令：</p><ul><li>进入python交互界面</li></ul><p>pi@raspberrypi:~ $ python</p><p>&gt;&gt;&gt; 这是python的提示符。</p><ul><li>导入python类库RPi.GPIO，命名为别名为GPIO</li></ul><p>&gt;&gt;&gt; import RPi.GPIO as GPIO</p><p>引入之后，就可以使用 GPIO 模块的函数了。</p><ul><li>设置BOARD编码方式，基于BCM</li></ul><p>树莓派3 GPIO分为如下的三种编码方式：物理引脚BOARD编码，BCM编码，以及 wiringPi 编码。</p><p>&gt;&gt;&gt; GPIO.setmode(GPIO.BCM)</p><ul><li>输出模式</li></ul><p>&gt;&gt;&gt; GPIO.setup(17,GPIO.OUT)</p><ul><li>GPIO17输出高电平，LED点亮</li></ul><p>&gt;&gt;&gt; GPIO.output(17,GPIO.HIGH)</p><ul><li>GPIO17输出低电平，LED熄灭</li></ul><p>&gt;&gt;&gt; GPIO.output(17,GPIO.LOW)</p><ul><li>用完后进行清理</li></ul><p>&gt;&gt;&gt; GPIO.cleanup()</p><ul><li>退出python交互界面</li></ul><p>&gt;&gt;&gt; Ctrl+D</p><h2>2.5 用Python脚本控制GPIO</h2><ul><li>新建一个名为blinky.py的脚本。</li></ul><p>pi@raspberrypi:~ $ sudo nano blinky.py</p><p>脚本写下面的内容：</p><p>import RPi.GPIO as GPIO</p><p>import time</p><p>GPIO.setmode(GPIO.BCM)</p><p>GPIO.setup(17,GPIO.OUT)</p><p>while True:</p><p>    GPIO.output(17,GPIO.HIGH)</p><p>    time.sleep(1)</p><p>    GPIO.output(17,GPIO.LOW)</p><p>    time.sleep(1)</p><p class=\"ztext-empty-paragraph\"><br/></p><p>GPIO.cleanup()</p><p>说明：while True下面的循环体要缩进，用空格或Tab（但不能混用）键缩进就行。</p><ul><li>为blinky.py添加可执行权限</li></ul><p>pi@raspberrypi:~ $ sudo chmod +x blinky.py</p><ul><li>运行Python脚本</li></ul><p>pi@raspberrypi:~ $ sudo python blinky.py</p><p>LED闪烁。</p><ul><li>停止运行</li></ul><p>用 Ctrl+C 来中断循环。</p><h2><b>3. 借助wiringPi GPIO用C语言控制GPIO</b></h2><p>树莓派内核中已经编译自带了gpio的驱动，我们常通过一些第三方写好的库函数来完成具体的操作，比较常见的操作库函数有：</p><ul><li>Python GPIO</li></ul><p>Python GPIO已经集成到了树莓派内核，为树莓派官方资料中推荐且容易上手。python GPIO是一个小型的python库，可以帮助用户完成raspberry相关IO口操作，但是python GPIO库还没有支持SPI、I2C或者1-wire等总线接口。</p><p>常见C语言库有：</p><ul><li>wiringPi (<a href=\"https://link.zhihu.com/?target=http%3A//wiringpi.com/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">wiringpi.com/</span><span class=\"invisible\"></span></a>)</li></ul><p>wiringPi适合那些具有C语言基础，在接触树莓派之前已经接触过单片机或者嵌入式开发的人群。wiringPi的API函数和arduino非常相似，这也使得它广受欢迎。作者给出了大量的说明和示例代码，这些示例代码也包括UART设备，I2C设备和SPI设备等。</p><ul><li>BCM2835 C Library (<a href=\"https://link.zhihu.com/?target=http%3A//www.airspayce.com/mikem/bcm2835/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://www.</span><span class=\"visible\">airspayce.com/mikem/bcm</span><span class=\"invisible\">2835/</span><span class=\"ellipsis\"></span></a>)</li></ul><p>BCM2835 C Library可以理解为使用C语言实现的相关底层驱动，BCM2835 C Library的驱动库包括GPIO. SPI和UART等，可以通过学习BCM2835 C Library熟悉BCM2835相关的寄存器操作。如果有机会开发树莓派上的linux驱动，或自主开发python或PHP扩展驱动，可以从BCM2835 C Library找到不少的“灵感”。</p><h2>3.1 WiringPi GPIO安装</h2><p>WiringPi是应用于树莓派平台的GPIO控制库函数，WiringPi遵守GUN Lv3。wiringPi使用C或者C++开发并且可以被其他语言包转，例如python、ruby或者PHP等。</p><p>wiringPi包括一套gpio控制命令，使用gpio命令可以控制树莓派GPIO管脚。用户可以利用gpio命令通过shell脚本控制或查询GPIO管脚。</p><ul><li>wiringPi安装</li></ul><p>更新列表：</p><p>pi@raspberrypi:~ $ sudo apt-get update</p><p>更新软件：</p><p>pi@raspberrypi:~ $ sudo apt-get upgrade</p><p>安装：</p><p>pi@raspberrypi:~ $ sudo apt-get install wiringpi</p><ul><li>测试</li></ul><p>wiringPi包括一套gpio命令，使用gpio命令可以控制树莓派上的各种接口，通过以下指令可以测试wiringPi是否安装成功。</p><p>pi@raspberrypi:~ $ gpio -v</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-91f8b2bf5a29481a8afef1a43b94906d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"481\" data-rawheight=\"179\" class=\"origin_image zh-lightbox-thumb\" width=\"481\" data-original=\"https://pic2.zhimg.com/v2-91f8b2bf5a29481a8afef1a43b94906d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;481&#39; height=&#39;179&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"481\" data-rawheight=\"179\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"481\" data-original=\"https://pic2.zhimg.com/v2-91f8b2bf5a29481a8afef1a43b94906d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-91f8b2bf5a29481a8afef1a43b94906d_b.jpg\"/></figure><ul><li>查看GPIO图</li></ul><p>pi@raspberrypi:~ $ gpio readall</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4050488dbf5a039898ea47336e076070_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"641\" data-rawheight=\"429\" class=\"origin_image zh-lightbox-thumb\" width=\"641\" data-original=\"https://pic1.zhimg.com/v2-4050488dbf5a039898ea47336e076070_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;641&#39; height=&#39;429&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"641\" data-rawheight=\"429\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"641\" data-original=\"https://pic1.zhimg.com/v2-4050488dbf5a039898ea47336e076070_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4050488dbf5a039898ea47336e076070_b.jpg\"/></figure><h2>3.2 编写代码</h2><ul><li>新建一个名为led_blink.c的源程序</li></ul><p>pi@raspberrypi:~ $ sudo nano led_blink.c</p><ul><li>内容如下</li></ul><p>#include &lt;wiringPi.h&gt;</p><p>int main(void) {</p><p>    wiringPiSetup();</p><p>    pinMode (1, OUTPUT);</p><p>    for(;;) {</p><p>        digitalWrite(1, HIGH);delay (500);</p><p>        digitalWrite(1, LOW);delay (500) ;</p><p>    }</p><p>}</p><p>说明：看看上一小节的图，BCM编号的GPIO17引脚在wiringPi编号中是1。</p><h2>3.3 编译运行</h2><ul><li>编译</li></ul><p>pi@raspberrypi:~ $ gcc led_blink.c -o led_blink -l wiringPi</p><p>-l wiringPi表示动态加载wiringPi共享库。</p><ul><li>运行</li></ul><p>pi@raspberrypi:~ $ sudo ./led_blink</p><p>用 Ctrl+C 来中断循环。</p><h2><b>4. 借助BCM2835 C Library用C语言控制GPIO</b></h2><h2>4.1 下载安装</h2><p>先看看最新版本：<a href=\"https://link.zhihu.com/?target=http%3A//www.airspayce.com/mikem/bcm2835\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://www.</span><span class=\"visible\">airspayce.com/mikem/bcm</span><span class=\"invisible\">2835</span><span class=\"ellipsis\"></span></a></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-448571431b144a8bcfe5f11e98b02381_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"628\" data-rawheight=\"179\" class=\"origin_image zh-lightbox-thumb\" width=\"628\" data-original=\"https://pic2.zhimg.com/v2-448571431b144a8bcfe5f11e98b02381_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;628&#39; height=&#39;179&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"628\" data-rawheight=\"179\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"628\" data-original=\"https://pic2.zhimg.com/v2-448571431b144a8bcfe5f11e98b02381_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-448571431b144a8bcfe5f11e98b02381_b.jpg\"/></figure><ul><li>下载bcm2835-1.56.tar.gz</li></ul><p>pi@raspberrypi:~ $ wget <a href=\"https://link.zhihu.com/?target=http%3A//www.airspayce.com/mikem/bcm2835/bcm2835-1.56.tar.gz\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://www.</span><span class=\"visible\">airspayce.com/mikem/bcm</span><span class=\"invisible\">2835/bcm2835-1.56.tar.gz</span><span class=\"ellipsis\"></span></a></p><ul><li>解压缩</li></ul><p>pi@raspberrypi:~ $ tar xvzf bcm2835-1.56.tar.gz</p><ul><li>配置编译</li></ul><p>进入压缩之后的目录: </p><p>pi@raspberrypi:~ $ cd bcm2835-1.56 </p><p>执行配置命令：</p><p>pi@raspberrypi:~/bcm2835-1.56 $ ./configure</p><p>pi@raspberrypi:~/bcm2835-1.56 $ make</p><ul><li>执行检查</li></ul><p>pi@raspberrypi:~/bcm2835-1.56 $ sudo make check</p><ul><li>安装bcm2835库: </li></ul><p>pi@raspberrypi:~/bcm2835-1.56 $ sudo make install</p><h2>4.2 编写代码</h2><ul><li>新建一个名为blink_led.c的源程序</li></ul><p>pi@raspberrypi:~/bcm2835-1.56 $ cd ~</p><p>pi@raspberrypi:~ $ sudo nano blink_led.c</p><ul><li>内容如下</li></ul><p>#include &lt;bcm2835.h&gt;</p><p>#define PIN RPI_GPIO_P1_12</p><p>int main(int argc, char **argv) {</p><p>    if (!bcm2835_init())</p><p>        return 1;</p><p class=\"ztext-empty-paragraph\"><br/></p><p>    bcm2835_gpio_fsel(PIN, BCM2835_GPIO_FSEL_OUTP);</p><p class=\"ztext-empty-paragraph\"><br/></p><p>    while (1) {</p><p>        bcm2835_gpio_write(PIN, HIGH);</p><p>        bcm2835_delay(500);</p><p>        bcm2835_gpio_write(PIN, LOW);</p><p>        bcm2835_delay(500);</p><p>    }</p><p>    bcm2835_close();</p><p>    return 0;</p><p>} </p><p>说明：GPIO的编号方式不同，采用PCB板的物理接口编号，led连在树莓派Zero W板子的12引脚上。</p><h2>4.3 编译运行</h2><ul><li>编译</li></ul><p>pi@raspberrypi:~ $ gcc blink_led.c -o blink_led -l bcm2835</p><p>-l bcm2835表示动态加载bcm2835共享库</p><ul><li>运行</li></ul><p>sudo ./blink_led</p><p>用 Ctrl+C 来中断循环。</p><p class=\"ztext-empty-paragraph\"><br/></p><h2>参考文档</h2><ol><li>树莓派介绍</li><li>电脑连接树莓派Zero W</li><li>树莓派+温度传感器DS18B20</li><li>树莓派GPIO控制--C语言篇<a href=\"https://link.zhihu.com/?target=https%3A//blog.csdn.net/hu7850/article/details/51785560\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">blog.csdn.net/hu7850/ar</span><span class=\"invisible\">ticle/details/51785560</span><span class=\"ellipsis\"></span></a></li><li>远程控制通讯——基于树莓派 Python gpiozero 远程控制LED灯并返回控制结果<a href=\"https://link.zhihu.com/?target=https%3A//blog.csdn.net/NCTU_to_prove_safety/article/details/65446454\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">blog.csdn.net/NCTU_to_p</span><span class=\"invisible\">rove_safety/article/details/65446454</span><span class=\"ellipsis\"></span></a></li><li>RPi Low-level peripherals <br/><a href=\"https://link.zhihu.com/?target=https%3A//elinux.org/RPi_Low-level_peripherals\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">elinux.org/RPi_Low-leve</span><span class=\"invisible\">l_peripherals</span><span class=\"ellipsis\"></span></a></li><li>樹莓派+溫度感測器實現室內溫度監控：<a href=\"https://link.zhihu.com/?target=http%3A//shumeipai.nxez.com/2013/10/03/raspberry-pi-temperature-sensor-monitors.html\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">shumeipai.nxez.com/2013</span><span class=\"invisible\">/10/03/raspberry-pi-temperature-sensor-monitors.html</span><span class=\"ellipsis\"></span></a></li><li><a href=\"https://link.zhihu.com/?target=http%3A//www.cl.cam.ac.uk/projects/raspberrypi/tutorials/temperature/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Raspberry Pi Temperature Sensor</a><br/><a href=\"https://link.zhihu.com/?target=http%3A//www.cl.cam.ac.uk/projects/raspberrypi/tutorials/temperature/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://www.</span><span class=\"visible\">cl.cam.ac.uk/projects/r</span><span class=\"invisible\">aspberrypi/tutorials/temperature/</span><span class=\"ellipsis\"></span></a></li></ol><a href=\"https://link.zhihu.com/?target=https%3A//wenku.baidu.com/view/423628b3905f804d2b160b4e767f5acfa0c783c1\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">树莓派蓝牙温度传感器 - 百度文库</a><a href=\"https://link.zhihu.com/?target=https%3A//wenku.baidu.com/view/b12e056ab04e852458fb770bf78a6529657d35eb\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">微信小程序蓝牙温度数据采集 - 百度文库</a><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "开发板", 
                    "tagLink": "https://api.zhihu.com/topics/19883423"
                }, 
                {
                    "tag": "GPIO", 
                    "tagLink": "https://api.zhihu.com/topics/20078322"
                }
            ], 
            "comments": [
                {
                    "userName": "上官带瓜", 
                    "userLink": "https://www.zhihu.com/people/0be5560a752988bfdf141a5505a9bdf0", 
                    "content": "优秀[飙泪笑]", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "元丹三品", 
                    "userLink": "https://www.zhihu.com/people/232803c19f6d65cfe2bb47ad9a72b629", 
                    "content": "<p>非常感谢你的这篇文章，我是菜鸟小白，目前正好处于linux学了一点，想把一点想法用raspberry表达出来但是不知道该怎么做，你的这个帖子恰恰好是我这个基础能看懂，而且又把我的痒点都给挠到了。</p><p>再次感谢~~~</p><p>赶紧收藏，并且反复挠痒痒中。</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "dading12345", 
                    "userLink": "https://www.zhihu.com/people/c545387d26cd9a2c36aa7f15a9bb155d", 
                    "content": "您好 能给推荐一个关于树莓派开发的教程吗？。", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/41121832", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "Rain Detection Module 树莓派雨滴检测", 
            "content": "<blockquote>上次有朋友想要一款当室外下雨时，能够自动开打雨伞的的工具。</blockquote><p><b>1Introduction</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-701f5bd14c1dbdbb496d15a461292f99_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"498\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb\" width=\"498\" data-original=\"https://pic2.zhimg.com/v2-701f5bd14c1dbdbb496d15a461292f99_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;498&#39; height=&#39;400&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"498\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"498\" data-original=\"https://pic2.zhimg.com/v2-701f5bd14c1dbdbb496d15a461292f99_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-701f5bd14c1dbdbb496d15a461292f99_b.jpg\"/></figure><p>在下雨时，雨水检测模块将感应到雨滴并向Raspberry Pi发送信号。在雨滴模块上有两根金属线彼此靠近但不会上交叉。当雨水落在电路板上时，两根金属线会导通，因此两根金属线之间会有电压。</p><p>也就是说当有电压产生后，利用8591AD模块即可实现树莓派读取信号的功能。我们可以用8591自带的旋钮来调节灵敏度。</p><p><b>2 What you will need</b></p><ul><li> Raspberry Pi</li><li> Breadboard</li><li> Jumper wires (Male to Male, 2 red and 2 black)</li><li>Rain Detection module<br/></li><li> PCF8591</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c40ebb60b59de5c5a21d5bf2223edde1_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1365\" data-rawheight=\"1161\" class=\"origin_image zh-lightbox-thumb\" width=\"1365\" data-original=\"https://pic2.zhimg.com/v2-c40ebb60b59de5c5a21d5bf2223edde1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1365&#39; height=&#39;1161&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1365\" data-rawheight=\"1161\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1365\" data-original=\"https://pic2.zhimg.com/v2-c40ebb60b59de5c5a21d5bf2223edde1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c40ebb60b59de5c5a21d5bf2223edde1_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3 Python Code</b></p><blockquote><i>#!/usr/bin/env python</i><br/><i>import PCF8591 as ADC</i><br/><i>import RPi.GPIO as GPIO</i><br/><i>import time</i><br/><i>import math</i><br/><br/><i>DO = 17</i><br/><i>GPIO.setmode(GPIO.BCM)</i><br/><br/><i>def setup():</i><br/><i>    ADC.setup(0x48)</i><br/><i>    GPIO.setup(DO, <a href=\"https://link.zhihu.com/?target=http%3A//GPIO.IN\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">GPIO.IN</span><span class=\"invisible\"></span></a>)</i><br/><br/><i>def Print(x):</i><br/><i>    if x == 1:</i><br/><i>        print &#39;&#39;</i><br/><i>        print &#39;   ***************&#39;</i><br/><i>        print &#39;   * Not raining *&#39;</i><br/><i>        print &#39;   ***************&#39;</i><br/><i>        print &#39;&#39;</i><br/><i>    if x == 0:</i><br/><i>        print &#39;&#39;</i><br/><i>        print &#39;   *************&#39;</i><br/><i>        print &#39;   * Raining!! *&#39;</i><br/><i>        print &#39;   *************&#39;</i><br/><i>        print &#39;&#39;</i><br/><br/><i>def loop():</i><br/><i>    status = 1</i><br/><i>    while True:</i><br/><i>        print ADC.read(0)</i><br/> <br/><i>        tmp = GPIO.input(DO);</i><br/><i>        if tmp != status:</i><br/><i>            Print(tmp)</i><br/><i>            status = tmp</i><br/> <br/><i>        time.sleep(0.2)</i><br/><br/><i>if __name__ == &#39;__main__&#39;:</i><br/><i>    try:</i><br/><i>        setup()</i><br/><i>        loop()</i><br/><i>    except KeyboardInterrupt: </i><br/><i>        pass  </i>  </blockquote><p></p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/39668103", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "RPI with Temp. Sensor树莓派之温度传感器", 
            "content": "<p></p><blockquote><i>温度传感器是一种检测温度变化的装置。它们的核心部件是热敏电阻。</i></blockquote><h2><b>Introduction</b></h2><p>该模块是基于热敏电阻原理开发的，其电阻随环境温度的变化而变化很大。当温度升高时，阻值减小;当温度降低时，阻值就会增加。它能实时检测周围的温度变化。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-2848b6f5fb7deea8497b37664911376d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https://pic2.zhimg.com/v2-2848b6f5fb7deea8497b37664911376d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;800&#39; height=&#39;216&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https://pic2.zhimg.com/v2-2848b6f5fb7deea8497b37664911376d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-2848b6f5fb7deea8497b37664911376d_b.jpg\"/></figure><p>此外，我们需要使用ADC0832来将模拟信号转换成数字信号,用于树莓派采集。</p><h2>What you will need</h2><ul><li>树莓派</li><li>网线</li><li>温度传感器</li><li>ADC0832</li><li>杜邦线</li></ul><h2>What you will do</h2><p>1:构建电路</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"521\" data-rawheight=\"172\" class=\"origin_image zh-lightbox-thumb\" width=\"521\" data-original=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;521&#39; height=&#39;172&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"521\" data-rawheight=\"172\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"521\" data-original=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>2:编辑并测试代码</p><p>现在，在模块上触摸热敏电阻，你可以看到当前的温度值显示在屏幕上并相应改变。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-6bc58eeb1dcec63b068d2c079764fc5a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"997\" data-rawheight=\"902\" class=\"origin_image zh-lightbox-thumb\" width=\"997\" data-original=\"https://pic3.zhimg.com/v2-6bc58eeb1dcec63b068d2c079764fc5a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;997&#39; height=&#39;902&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"997\" data-rawheight=\"902\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"997\" data-original=\"https://pic3.zhimg.com/v2-6bc58eeb1dcec63b068d2c079764fc5a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-6bc58eeb1dcec63b068d2c079764fc5a_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport ADC0832\nimport time\nimport math\n\ndef init():\n    ADC0832.setup()\n\ndef loop():\n    while True:\n        analogVal = ADC0832.getResult()\n        Vr = 5 * float(analogVal) / 255\n        Rt = 10000 * Vr / (5 - Vr)\n        temp = 1/(((math.log(Rt / 10000)) / 3950) + (1 / (273.15+25)))\n        temp = temp - 273.15\n        print &#39;temperature = %d C&#39; % temp\n        time.sleep(0.2)\n\nif __name__ == &#39;__main__&#39;:\n    init()\n    try:\n        loop()\n    except KeyboardInterrupt: \n        ADC0832.destroy()\n        print &#39;The end !&#39;</code></pre></div><p></p>", 
            "topic": [
                {
                    "tag": "工程学", 
                    "tagLink": "https://api.zhihu.com/topics/19572885"
                }, 
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/39667949", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "RPIwithVibrationSensor树莓派之震动开关", 
            "content": "<p></p><blockquote><i>振动开关，也称为弹簧开关或冲击传感器，是一种电子开关，它能产生冲击力，并将结果传输给电路装置，从而触发它工作。</i></blockquote><h2><b>Introduction</b></h2><p>工作原理如下:一旦传感器检测到震动，弹簧就会震动并与触发针接触，从而产生触发信号。可通过调节电位计用于设定触发起始程度。</p><p>当开关感应到震动信号时，LED灯会亮起来。可以用于智能小车，防盗功能等。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c7e68c7de06f1e1095e0e1c04734f125_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1040\" data-rawheight=\"778\" class=\"origin_image zh-lightbox-thumb\" width=\"1040\" data-original=\"https://pic2.zhimg.com/v2-c7e68c7de06f1e1095e0e1c04734f125_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1040&#39; height=&#39;778&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1040\" data-rawheight=\"778\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1040\" data-original=\"https://pic2.zhimg.com/v2-c7e68c7de06f1e1095e0e1c04734f125_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c7e68c7de06f1e1095e0e1c04734f125_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>What you will need</h2><ul><li>树莓派</li><li>网线</li><li>震动传感器</li><li>杜邦线</li></ul><h2>What you will do</h2><p>1:构建电路</p><p>将模块的DO连接到树莓派的GPIO11，VCC接+ 3.3 v，GND接0v。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-6b2cefc26e87493e0795d3e342aff9d2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"966\" data-rawheight=\"412\" class=\"origin_image zh-lightbox-thumb\" width=\"966\" data-original=\"https://pic3.zhimg.com/v2-6b2cefc26e87493e0795d3e342aff9d2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;966&#39; height=&#39;412&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"966\" data-rawheight=\"412\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"966\" data-original=\"https://pic3.zhimg.com/v2-6b2cefc26e87493e0795d3e342aff9d2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-6b2cefc26e87493e0795d3e342aff9d2_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>2:编辑并测试代码</p><p>将双色LED模块连接到树莓派的GPIO12。当检测到震动时，将触发LED灯亮。</p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport RPi.GPIO as GPIO\n\nShockPin = 11\nLedPin   = 12\n\nLed_status = 1\n\ndef setup():\n   GPIO.setmode(GPIO.BOARD)       # Numbers GPIOs by physical location\n   GPIO.setup(LedPin, GPIO.OUT)   # Set LedPin&#39;s mode is output\n   GPIO.setup(ShockPin, GPIO.IN, pull_up_down=GPIO.PUD_UP)\n   GPIO.output(LedPin, GPIO.HIGH) # Set LedPin high(+3.3V) to off led\n\ndef swLed(ev=None):\n   global Led_status\n   Led_status = not Led_status\n   GPIO.output(LedPin, Led_status)  # switch led status(on--&gt;off; off--&gt;on)\n       print &#34;led: &#34; + (&#34;on&#34; if Led_status else &#34;off&#34;)\n\ndef loop():\n   GPIO.add_event_detect(ShockPin, GPIO.FALLING, callback=swLed, bouncetime=200) # wait for falling\n   while True:\n       pass   # Don&#39;t do anything\n\ndef destroy():\n   GPIO.output(LedPin, GPIO.LOW)      # led off\n   GPIO.cleanup()                     # Release resource\n\nif __name__ == &#39;__main__&#39;:     # Program start from here\n   setup()\n   try:\n       loop()\n   except KeyboardInterrupt:  # When &#39;Ctrl+C&#39; is pressed, the child program destroy() will be  executed.\n       destroy()</code></pre></div><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/38610414", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "RPI with Hall Sensor   树莓派霍尔传感器", 
            "content": "<p></p><blockquote><i>玩数据采集当然要了解霍尔传感器。</i></blockquote><h2><b>Introduction</b></h2><p><b>霍尔传感器通常用于近距离切换、定位、速度检测和电流传感应用</b>。在霍尔效应的基础上，一个霍尔传感器是根据磁场对其输出电压的不同而变化的。<br/>霍尔传感器可以分为线性（模拟）霍尔传感器和开关霍尔传感器。<b>开关霍尔传感器</b>由电压调整器、霍尔元件、差动放大器、施密特触发器和输出终端组成，并输出<b>数字值</b>。<b>线性霍尔传感器</b>由一个霍尔元件、线性放大器和发射极输出器组成，输出<b>模拟值</b>。<br/>线性霍尔传感器，输出模拟信号(以两种形式)，以及开关霍尔传感器，输出数字信号。如果你将一个比较器添加到线性霍尔传感器，它将能够输出模拟信号和数字信号。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-6fa31019af2e04b34bbf0772f84b3e81_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"827\" data-rawheight=\"554\" class=\"origin_image zh-lightbox-thumb\" width=\"827\" data-original=\"https://pic2.zhimg.com/v2-6fa31019af2e04b34bbf0772f84b3e81_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;827&#39; height=&#39;554&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"827\" data-rawheight=\"554\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"827\" data-original=\"https://pic2.zhimg.com/v2-6fa31019af2e04b34bbf0772f84b3e81_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-6fa31019af2e04b34bbf0772f84b3e81_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>霍尔效应</b></p><p>霍尔效应是一种电磁效应。这是埃德温霍尔在1879年发现的，当时他正在研究金属的导电机理。当导体通过一个均匀的磁场时，就会产生这种效应。电荷载体的自然电子漂移导致磁场作用于Lorentz的力量(在电磁场中对带电粒子施加的力)，这些电荷载体。结果是电荷分离，底部或顶部的正电荷或负电荷聚集在一起。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-8b110211f14438097420f5c70a63ff15_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"817\" data-rawheight=\"354\" class=\"origin_image zh-lightbox-thumb\" width=\"817\" data-original=\"https://pic2.zhimg.com/v2-8b110211f14438097420f5c70a63ff15_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;817&#39; height=&#39;354&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"817\" data-rawheight=\"354\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"817\" data-original=\"https://pic2.zhimg.com/v2-8b110211f14438097420f5c70a63ff15_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-8b110211f14438097420f5c70a63ff15_b.jpg\"/></figure><p><br/><b>霍尔传感器</b></p><p>霍尔传感器是一种基于它的磁场传感器。<br/>通过导体产生的电流会产生一个与电流不同的磁场，而一个霍尔传感器可以用来测量电流，而不会打断电路。通常，传感器被集成在环绕导体周围的缠绕核心或永久磁铁上。</p><h2>What you will need</h2><ul><li>树莓派</li><li>网线</li><li>线性霍尔传感器模块</li><li>双彩色共阴极二极管组件</li><li>开关模块</li></ul><h2>What you will do</h2><p>对于开关霍尔的传感器：</p><p>1:构建电路</p><p>将树莓派的GPIO0连接到交换机模块的模块<br/>将树莓派的GPIO1连接到双色LED模块上<br/>将树莓派的GND连接到开关霍尔模块的GND和双色LED模块的GND。</p><p>连接pin 3.3 V的树莓派到pin+的开关霍尔模块和双颜色LED模块的pin+</p><p>2:编辑并测试代码<br/>将一块磁铁靠近传感器。</p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport RPi.GPIO as GPIO\n\n#Hall sensor is connected to pin 11 (BOARD-Layout!)\nHALL = 11 \n\n#LED is connected to pin 12 (BOARD-Layout!)\nLED  = 12\n\n#Set pin-layout to BOARD\nGPIO.setmode(GPIO.BOARD)\n\n#Avoid error messages if GPIO was not shut down correctly before\nGPIO.setwarnings(False) \n\n#Set HALL-pin to input, use internal pull-up-resistor\nGPIO.setup(HALL,GPIO.IN, pull_up_down=GPIO.PUD_UP) \n\n#Set LED-pin to output. A resistor should be used here!\nGPIO.setup(LED, GPIO.OUT)\n\n#Turn LED off\nGPIO.output(LED, GPIO.LOW)\n\n#This function will be called if a change is detected\ndef change_detected(channel):\n    if GPIO.input(HALL) == GPIO.LOW:\n        print &#39;Magnetic material detected: LED on&#39;\n        GPIO.output(LED, GPIO.HIGH) #LED on\n    else:\n        print &#39;No magnetic material: LED off&#39;\n    GPIO.output(LED, GPIO.LOW) # LED off\n\n# Register event-listener on falling and raising\n# edge on HALL-sensor input. Call &#34;change_detected&#34; as\n# callback\nGPIO.add_event_detect(HALL, GPIO.BOTH, change_detected, bouncetime=25)\n\n# The main-loop does nothing. All is done by the event-listener\ntry:\n    while True:\n        pass\n\n# Quit on Ctrl-c\nexcept KeyboardInterrupt:\n    print &#34;Ctrl-C - quit&#34;\n\n# Cleanup GPIO\nfinally:\n    GPIO.cleanup()</code></pre></div><p>对于线性霍尔传感器，采取以下步骤。<br/>1:构建电路</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"521\" data-rawheight=\"172\" class=\"origin_image zh-lightbox-thumb\" width=\"521\" data-original=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;521&#39; height=&#39;172&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"521\" data-rawheight=\"172\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"521\" data-original=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-321fea76ff4e7b44eaedf939b7f9d2d9_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>线性霍尔传感器的连接针连接到ADC0832的CH0上<br/>2:编辑并测试代码<br/>将一块磁铁靠近传感器。</p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport ADC0832\nimport time\n\ndef init():\n    ADC0832.setup()\n\ndef loop():\n    while True:\n        res = ADC0832.getResult()\n        print &#39;res = %d&#39; % res\n        time.sleep(0.2)\n\nif __name__ == &#39;__main__&#39;:\n    init()\n    try:\n        loop()\n    except KeyboardInterrupt: \n        ADC0832.destroy()\n        print &#39;The end !&#39;</code></pre></div><p></p>", 
            "topic": [
                {
                    "tag": "Arduino", 
                    "tagLink": "https://api.zhihu.com/topics/19581430"
                }, 
                {
                    "tag": "开源硬件", 
                    "tagLink": "https://api.zhihu.com/topics/19581426"
                }, 
                {
                    "tag": "单片机", 
                    "tagLink": "https://api.zhihu.com/topics/19577755"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/38610390", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 1, 
            "title": "RPI with IR Receiver   树莓派之红外接收器", 
            "content": "<p></p><blockquote><i>玩遥控当然少不了IR Receiver。</i></blockquote><h2><b>Introduction</b></h2><p>红外接收器是接收红外信号的组件，可以独立接收红外线和输出信号，与TTL水平兼容。它与普通的塑料封装晶体管的尺寸相似，适用于各种红外遥控和红外传输。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-e23dfe61796bdfed112b5dbbcc0d3efe_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"700\" data-rawheight=\"382\" class=\"origin_image zh-lightbox-thumb\" width=\"700\" data-original=\"https://pic3.zhimg.com/v2-e23dfe61796bdfed112b5dbbcc0d3efe_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;700&#39; height=&#39;382&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"700\" data-rawheight=\"382\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"700\" data-original=\"https://pic3.zhimg.com/v2-e23dfe61796bdfed112b5dbbcc0d3efe_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-e23dfe61796bdfed112b5dbbcc0d3efe_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>What you will need</h2><ul><li>树莓派</li><li>网线</li><li>红外传感器模块</li><li>杜邦线</li></ul><h2>What you will do</h2><p>1:构建电路</p><p>将树莓派的11,12号脚分别接入传感器的信号脚及led引脚</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-f5ddadd0b17dc7750bc1f0cc321e84e3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"949\" data-rawheight=\"698\" class=\"origin_image zh-lightbox-thumb\" width=\"949\" data-original=\"https://pic4.zhimg.com/v2-f5ddadd0b17dc7750bc1f0cc321e84e3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;949&#39; height=&#39;698&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"949\" data-rawheight=\"698\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"949\" data-original=\"https://pic4.zhimg.com/v2-f5ddadd0b17dc7750bc1f0cc321e84e3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-f5ddadd0b17dc7750bc1f0cc321e84e3_b.jpg\"/></figure><p>2:编辑并测试代码</p><p>在这里你可以看到，当接收到红外信号时，模块上的LED灯会亮起来。与此同时，屏幕将提示‘led on...’。</p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport RPi.GPIO as GPIO\n\nIrPin  = 11\nLedPin = 12\n\nLed_status = 1\n\ndef setup():\n    GPIO.setmode(GPIO.BOARD)       # Numbers GPIOs by physical location\n    GPIO.setup(LedPin, GPIO.OUT)   # Set LedPin&#39;s mode is output\n    GPIO.setup(IrPin, GPIO.IN, pull_up_down=GPIO.PUD_UP)\n    GPIO.output(LedPin, GPIO.LOW) # Set LedPin high(+3.3V) to off led\n\ndef swLed(ev=None):\n    global Led_status\n    Led_status = not Led_status\n    GPIO.output(LedPin, Led_status)  # switch led status(on--&gt;off; off--&gt;on)\n    if Led_status == 1:\n        print &#39;led on...&#39;\n    else:\n        print &#39;...led off&#39;\n\ndef loop():\n    GPIO.add_event_detect(IrPin, GPIO.FALLING, callback=swLed) # wait for falling\n    while True:\n        pass   # Don&#39;t do anything\n\ndef destroy():\n    GPIO.output(LedPin, GPIO.LOW)     # led off\n    GPIO.cleanup()                     # Release resource\n\nif __name__ == &#39;__main__&#39;:     # Program start from here\n    setup()\n    try:\n        loop()\n    except KeyboardInterrupt:  # When &#39;Ctrl+C&#39; is pressed, the child program destroy() will be  executed.\n        destroy()</code></pre></div><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "传感器", 
                    "tagLink": "https://api.zhihu.com/topics/19561057"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35921289", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 3, 
            "title": "Tac Switch Test微动开关进行极限测试", 
            "content": "<figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-18eb1dc6264e17f47e4317c228f8377c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"890\" data-rawheight=\"757\" class=\"origin_image zh-lightbox-thumb\" width=\"890\" data-original=\"https://pic1.zhimg.com/v2-18eb1dc6264e17f47e4317c228f8377c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;890&#39; height=&#39;757&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"890\" data-rawheight=\"757\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"890\" data-original=\"https://pic1.zhimg.com/v2-18eb1dc6264e17f47e4317c228f8377c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-18eb1dc6264e17f47e4317c228f8377c_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-3e440268f860524f06e31b4a884156e7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"35\" data-rawheight=\"30\" class=\"content_image\" width=\"35\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;35&#39; height=&#39;30&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"35\" data-rawheight=\"30\" class=\"content_image lazy\" width=\"35\" data-actualsrc=\"https://pic4.zhimg.com/v2-3e440268f860524f06e31b4a884156e7_b.jpg\"/></figure><blockquote><i>前段时间收到Mechanical Test Lab申请，需要可靠性实验室针对产品上微动开关进行极限测试。</i></blockquote><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-edf815b80915cc0fc60895ecf912d2a4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"547\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-edf815b80915cc0fc60895ecf912d2a4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;547&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"547\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-edf815b80915cc0fc60895ecf912d2a4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-edf815b80915cc0fc60895ecf912d2a4_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.gif\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"50\" data-rawheight=\"50\" data-thumbnail=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.jpg\" class=\"content_image\" width=\"50\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;50&#39; height=&#39;50&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"50\" data-rawheight=\"50\" data-thumbnail=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.jpg\" class=\"content_image lazy\" width=\"50\" data-actualsrc=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.gif\"/></figure><p>我们要求：1. 一次可测试5个工位2. 测试按压力度可调3. 按动速率8次/分钟</p><p>4. 由于每种 tac switch 工作电流不一样，我们要求兼容所有测试，所以需要电流可调（最小3v 500ma 最大 48v 10ma）</p><p>5. 通过检测每次cycle产生电流值大小判断是否失效，而且开和关都需要判断</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8a5f4aba0d3893358d10ff81e9f03dd3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"686\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-8a5f4aba0d3893358d10ff81e9f03dd3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;686&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"686\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-8a5f4aba0d3893358d10ff81e9f03dd3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8a5f4aba0d3893358d10ff81e9f03dd3_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.gif\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"50\" data-rawheight=\"50\" data-thumbnail=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.jpg\" class=\"content_image\" width=\"50\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;50&#39; height=&#39;50&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"50\" data-rawheight=\"50\" data-thumbnail=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.jpg\" class=\"content_image lazy\" width=\"50\" data-actualsrc=\"https://pic3.zhimg.com/v2-63dfd53da0567e5cad6c053c510971ea_b.gif\"/></figure><p>在动手之前，我们的问题是：</p><p>1.执行机构选用？2.如何实现每个开关需要单独电源供电？3.通过何种方式调节至所需测试电流？（最大3/0.5=6欧 48/0.01=4.8k欧）4.如何判断失效？</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7e14eec39cd72e68092cb3b88f5685dc_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"659\" data-rawheight=\"105\" class=\"origin_image zh-lightbox-thumb\" width=\"659\" data-original=\"https://pic1.zhimg.com/v2-7e14eec39cd72e68092cb3b88f5685dc_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;659&#39; height=&#39;105&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"659\" data-rawheight=\"105\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"659\" data-original=\"https://pic1.zhimg.com/v2-7e14eec39cd72e68092cb3b88f5685dc_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7e14eec39cd72e68092cb3b88f5685dc_b.jpg\"/></figure><p>1.关于执行机构的选用最开始就想到了电磁铁solenoid，因为之前有一款测试采用的也是一样的线圈驱动，可是这次需要力度可调则很快否定了这一方案。那么用伺服？总觉得没有必要，应该还有更见简洁的机械机构。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-d39e5920c5c08ec30325b7600c85789d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"431\" data-rawheight=\"298\" class=\"origin_image zh-lightbox-thumb\" width=\"431\" data-original=\"https://pic2.zhimg.com/v2-d39e5920c5c08ec30325b7600c85789d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;431&#39; height=&#39;298&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"431\" data-rawheight=\"298\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"431\" data-original=\"https://pic2.zhimg.com/v2-d39e5920c5c08ec30325b7600c85789d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-d39e5920c5c08ec30325b7600c85789d_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>2.每款开关我们开始想选用单独直流100v电源模块供电，无奈发现成本过高，后来又想着自己开发电源，纠结了好几天才发现这个项目开发跑题了，因为主要难度就变成电源开发了而不是测试开关。<br/>所以为了解决主要问题，平衡次要问题。最终决定采用实验室现有电源，所以只需要将电源接口引伸出即可。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-cb0a1cfb0bd539214ac1696f43104338_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"750\" data-rawheight=\"750\" class=\"origin_image zh-lightbox-thumb\" width=\"750\" data-original=\"https://pic1.zhimg.com/v2-cb0a1cfb0bd539214ac1696f43104338_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;750&#39; height=&#39;750&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"750\" data-rawheight=\"750\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"750\" data-original=\"https://pic1.zhimg.com/v2-cb0a1cfb0bd539214ac1696f43104338_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-cb0a1cfb0bd539214ac1696f43104338_b.jpg\"/></figure><p>3.由于不同的开关测试范围不一样，最大的需要 48v 0.01A，最小的需要3v 0.5A，那如何调节至所需电流，我们想到了电阻，可是测试过程中不可能频繁的更换电阻来满足测试，于是想到了碳膜电阻，通过电位计调节。可是这个玩意扭过头的话特别容易烧，我们又在每条线路上接了一个保险。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-9a97d93a7e428e0616464969ecffc022_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"828\" data-rawheight=\"482\" class=\"origin_image zh-lightbox-thumb\" width=\"828\" data-original=\"https://pic3.zhimg.com/v2-9a97d93a7e428e0616464969ecffc022_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;828&#39; height=&#39;482&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"828\" data-rawheight=\"482\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"828\" data-original=\"https://pic3.zhimg.com/v2-9a97d93a7e428e0616464969ecffc022_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-9a97d93a7e428e0616464969ecffc022_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-42352d23a825db9ed989d2c81251beaf_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"532\" data-rawheight=\"294\" class=\"origin_image zh-lightbox-thumb\" width=\"532\" data-original=\"https://pic4.zhimg.com/v2-42352d23a825db9ed989d2c81251beaf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;532&#39; height=&#39;294&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"532\" data-rawheight=\"294\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"532\" data-original=\"https://pic4.zhimg.com/v2-42352d23a825db9ed989d2c81251beaf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-42352d23a825db9ed989d2c81251beaf_b.jpg\"/></figure><p>4.判断失效即意味着需要采集电流，就像文件所提到的，通过判断电流是否超出或低于正常值从而判断开关是<b>Failure to Open </b>还是 <b>Failure to Close</b>，这样的话采集卡必不可少了，由于驱动控制我们想选用PLC，再加上此类测试不需要较高的采样率，10hz 足以，那这个采集就用Modbus通讯来做吧。</p><p>既然大致方向以及确定，那么开始准备所需工具了：</p><h2><i>Hardware</i></h2><ul><li>PLC Fbs-14MCT</li><li>PLC 通讯板 CB5</li><li>ET070 Kinko</li><li>HBS57 High speed motot 2.2N</li><li>行星减速箱 1:6</li><li>4.8K 2W电位计</li><li>Fuse</li><li>ART Modbus采集卡 8ch</li><li>香蕉插座M5*45</li><li>HRB 3206 A-2RZTN 5206-2RZ 双列角接触轴承</li><li>其他配件</li></ul><h2><i>Software</i></h2><ul><li>Solidworks</li><li>Winproladder</li><li>Kinco HMIWare v2.5</li><li>visio</li></ul><h2><i>Mechanism</i></h2><p>通过往负载杆添加砝码从而满足控制每次按压力，也就是砝码的重力。顶端由步进电机驱动，利用曲柄摇杆机构（Crank-rocker mechanism）同时驱动5个测试工位。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-ace39ba13a22d115c482d9fb19d2c25e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"310\" data-rawheight=\"220\" class=\"content_image\" width=\"310\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;310&#39; height=&#39;220&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"310\" data-rawheight=\"220\" class=\"content_image lazy\" width=\"310\" data-actualsrc=\"https://pic3.zhimg.com/v2-ace39ba13a22d115c482d9fb19d2c25e_b.jpg\"/></figure><h2><i>Program</i></h2><p>程序部分大致流程及步骤如下</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ba30d57e77a18a754bef419d997dfd17_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"855\" data-rawheight=\"864\" class=\"origin_image zh-lightbox-thumb\" width=\"855\" data-original=\"https://pic4.zhimg.com/v2-ba30d57e77a18a754bef419d997dfd17_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;855&#39; height=&#39;864&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"855\" data-rawheight=\"864\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"855\" data-original=\"https://pic4.zhimg.com/v2-ba30d57e77a18a754bef419d997dfd17_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ba30d57e77a18a754bef419d997dfd17_b.jpg\"/></figure><p>由于需要判断开失效及关失效，且包含5个station，在处理通讯部分还是比较棘手的。用到的寄存器也相当的多。而且每种开关的失效次数是未知的，为了不影响其他测试工位，需要保证测试继续进行。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-20c763587a7268fae08c686944bc05c7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"376\" data-rawheight=\"787\" class=\"content_image\" width=\"376\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;376&#39; height=&#39;787&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"376\" data-rawheight=\"787\" class=\"content_image lazy\" width=\"376\" data-actualsrc=\"https://pic4.zhimg.com/v2-20c763587a7268fae08c686944bc05c7_b.jpg\"/></figure><p>最后，GUI的编写即将每个sation调节参数区分开来，并添加记录页面观察被测开关于第几次失效。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-07fce3cdf81306c8d4552d440e420b61_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"780\" data-rawheight=\"487\" class=\"origin_image zh-lightbox-thumb\" width=\"780\" data-original=\"https://pic2.zhimg.com/v2-07fce3cdf81306c8d4552d440e420b61_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;780&#39; height=&#39;487&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"780\" data-rawheight=\"487\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"780\" data-original=\"https://pic2.zhimg.com/v2-07fce3cdf81306c8d4552d440e420b61_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-07fce3cdf81306c8d4552d440e420b61_b.jpg\"/></figure>", 
            "topic": [
                {
                    "tag": "自动化测试", 
                    "tagLink": "https://api.zhihu.com/topics/19574587"
                }, 
                {
                    "tag": "开关", 
                    "tagLink": "https://api.zhihu.com/topics/19602041"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37005358", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "树莓派键盘布局 Raspberrypi weird Keyboard Mapping", 
            "content": "<p></p><p></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-3e440268f860524f06e31b4a884156e7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"35\" data-rawheight=\"30\" class=\"content_image\" width=\"35\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;35&#39; height=&#39;30&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"35\" data-rawheight=\"30\" class=\"content_image lazy\" width=\"35\" data-actualsrc=\"https://pic4.zhimg.com/v2-3e440268f860524f06e31b4a884156e7_b.jpg\"/></figure><p><i>前段时间，英国老板跑来问我，为什么他办公室用树莓派键盘输入的跟实际是错误的，比如python编程的时候，需要 print（&#39;&#39;），双引号怎么都找不到实际物理按键。</i></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-1bda447a6988a29a37cf38b82d42c4bf_b.gif\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"400\" data-rawheight=\"120\" data-thumbnail=\"https://pic4.zhimg.com/v2-1bda447a6988a29a37cf38b82d42c4bf_b.jpg\" class=\"content_image\" width=\"400\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;400&#39; height=&#39;120&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"400\" data-rawheight=\"120\" data-thumbnail=\"https://pic4.zhimg.com/v2-1bda447a6988a29a37cf38b82d42c4bf_b.jpg\" class=\"content_image lazy\" width=\"400\" data-actualsrc=\"https://pic4.zhimg.com/v2-1bda447a6988a29a37cf38b82d42c4bf_b.gif\"/></figure><p>你买的是中国这边的键盘，可是树莓派默认设置的是UK的layout，当然映射会不一样。你终于问了一个我可以帮的上忙的问题了。</p><p>其实这个可以通过raspi-cofig里面来更改，不过我还是回个邮件给他</p><p class=\"ztext-empty-paragraph\"><br/></p><p><i>sudo dpkg-reconfigure keyboard-layout</i></p><p>Choose the general pc 101-key PC – other –English（US）- English(US, alternativeinternational)</p><p class=\"ztext-empty-paragraph\"><br/></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-5938fd6770f40c6824eb0923b5b611f2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"886\" data-rawheight=\"268\" class=\"origin_image zh-lightbox-thumb\" width=\"886\" data-original=\"https://pic3.zhimg.com/v2-5938fd6770f40c6824eb0923b5b611f2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;886&#39; height=&#39;268&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"886\" data-rawheight=\"268\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"886\" data-original=\"https://pic3.zhimg.com/v2-5938fd6770f40c6824eb0923b5b611f2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-5938fd6770f40c6824eb0923b5b611f2_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-9ad4f31cef6cd0115c690d593108b174_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"499\" data-rawheight=\"616\" class=\"origin_image zh-lightbox-thumb\" width=\"499\" data-original=\"https://pic1.zhimg.com/v2-9ad4f31cef6cd0115c690d593108b174_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;499&#39; height=&#39;616&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"499\" data-rawheight=\"616\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"499\" data-original=\"https://pic1.zhimg.com/v2-9ad4f31cef6cd0115c690d593108b174_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-9ad4f31cef6cd0115c690d593108b174_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-d95bc50f2019c43f25bc4937ca995108_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"541\" data-rawheight=\"649\" class=\"origin_image zh-lightbox-thumb\" width=\"541\" data-original=\"https://pic1.zhimg.com/v2-d95bc50f2019c43f25bc4937ca995108_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;541&#39; height=&#39;649&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"541\" data-rawheight=\"649\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"541\" data-original=\"https://pic1.zhimg.com/v2-d95bc50f2019c43f25bc4937ca995108_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-d95bc50f2019c43f25bc4937ca995108_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-a7c63269a53ec415ae717175b96f0320_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"605\" data-rawheight=\"512\" class=\"origin_image zh-lightbox-thumb\" width=\"605\" data-original=\"https://pic1.zhimg.com/v2-a7c63269a53ec415ae717175b96f0320_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;605&#39; height=&#39;512&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"605\" data-rawheight=\"512\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"605\" data-original=\"https://pic1.zhimg.com/v2-a7c63269a53ec415ae717175b96f0320_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-a7c63269a53ec415ae717175b96f0320_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-48844f45e50e719d0aae4f135ae255d3_b.jpg\"/></figure><p></p><p></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "Arduino", 
                    "tagLink": "https://api.zhihu.com/topics/19581430"
                }, 
                {
                    "tag": "单片机", 
                    "tagLink": "https://api.zhihu.com/topics/19577755"
                }, 
                {
                    "tag": "开源硬件", 
                    "tagLink": "https://api.zhihu.com/topics/19581426"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/38044793", 
            "userName": "张业生", 
            "userLink": "https://www.zhihu.com/people/2faf27d3bc2f68cb9c3925c060236615", 
            "upvote": 1, 
            "title": "驱动16灯LED彩灯(WS2812B)", 
            "content": "<p>这里驱动的是环状LED彩灯的，带状的LED彩灯会更常见一些，原理其实是一样的。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-784cfaf3e4042f529f38d992a0c02c19_b.jpg\" data-size=\"normal\" data-rawwidth=\"1000\" data-rawheight=\"1500\" class=\"origin_image zh-lightbox-thumb\" width=\"1000\" data-original=\"https://pic2.zhimg.com/v2-784cfaf3e4042f529f38d992a0c02c19_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1000&#39; height=&#39;1500&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1000\" data-rawheight=\"1500\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1000\" data-original=\"https://pic2.zhimg.com/v2-784cfaf3e4042f529f38d992a0c02c19_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-784cfaf3e4042f529f38d992a0c02c19_b.jpg\"/><figcaption>环状LED彩灯正面 / 背面</figcaption></figure><p>用到了一个功能强大的LED灯带驱动包：FastLED</p><a href=\"https://link.zhihu.com/?target=https%3A//github.com/FastLED/FastLED/\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">FastLED/FastLED</a><p>有了这个library，操作这个16灯或者更多灯都很简单了。</p><p><b>1、点亮第一个灯</b></p><p>灯带的每一个led灯都有一个编号的，通过这个编号就可以很方便的操作这个编号下的灯了；比如要点亮第一个LED灯。</p><div class=\"highlight\"><pre><code class=\"language-text\">//\n// GND----------+\n//              |\n// 6  -----(DIN)LED\n//              |\n// VCC----------+\n#include &#34;FastLED.h&#34;\n\n#define NUM_LEDS 16 // led灯数量\n#define DATA_PIN 6  // 数据传输引脚(Digital 6)\n\nCRGB leds[NUM_LEDS];\nvoid setup()\n{\n  FastLED.addLeds&lt;NEOPIXEL, DATA_PIN&gt;(leds, NUM_LEDS); // 初始化所有LED灯\n}\nvoid loop()\n{ \n  leds[0] = CRGB::White;  // 设置第一个led灯的颜色为白色\n  FastLED.show();\n  delay(500);\n  leds[0] = CRGB::Black;  // 设置第一个led灯的颜色为黑色(关)\n  FastLED.show();\n  delay(500);\n}</code></pre></div><p>TIPS:</p><ul><li>leds这个数组长度为led灯数量，代表着每一颗灯</li><ul><li>led[0]表示第一个led；上面代码表现为编号为0的这颗led灯闪烁</li></ul><li><a href=\"https://link.zhihu.com/?target=https%3A//github.com/FastLED/FastLED/wiki/Basic-usage%23setting-up-the-leds\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">这里有更多的资料</a> </li><ul><li>更改灯的颜色</li><li><a href=\"https://link.zhihu.com/?target=https%3A//github.com/FastLED/FastLED/wiki/Controlling-leds\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">不同的方式设置灯的颜色</a></li></ul></ul><div class=\"highlight\"><pre><code class=\"language-text\">// 更改灯的颜色\nleds[0] = CRGB::White; // 白色\nleds[0] = CRGB::Red;   // 红色\nleds[0] = CRGB::HotPink;   // 红色\n// 不同的方式设置灯的颜色\nleds[0].r = 255; \nleds[0].g = 68; \nleds[0].b = 221;\n\nleds[0].setRGB( 255, 68, 221);\n...</code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2、跑马灯效果</b></p><p>LED灯按序号逐个进行点亮即可达到效果</p><div class=\"highlight\"><pre><code class=\"language-text\">// 跑马灯\n#include &#34;FastLED.h&#34;\n\n#define NUM_LEDS 16\n#define DATA_PIN 6\n\nCRGB leds[NUM_LEDS];\nvoid setup()\n{\n  FastLED.addLeds&lt;NEOPIXEL, DATA_PIN&gt;(leds, NUM_LEDS);\n}\nvoid loop()\n{ \n  for (int i = 0; i &lt; NUM_LEDS; i++) {\n    leds[i] = CRGB::Red;\n    FastLED.show();\n    delay(200);\n    leds[i] = CRGB::Black;\n    FastLED.show();\n  }\n}</code></pre></div><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/990640565733711872\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic3.zhimg.com/80/v2-85d0d2a3d6a71b49033a5049ab67adce_b.jpg\" data-lens-id=\"990640565733711872\"><img class=\"thumbnail\" src=\"https://pic3.zhimg.com/80/v2-85d0d2a3d6a71b49033a5049ab67adce_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/990640565733711872</span></span></a><p><b>3、电位器调节灯圈</b></p><p>电位器的可调节圈模拟成LED彩灯圈，这样可以通过调节按钮控制一圈灯的亮暗情况。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-94950110adca5b08d4f9101debe27d9f_b.jpg\" data-size=\"normal\" data-rawwidth=\"256\" data-rawheight=\"300\" class=\"content_image\" width=\"256\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;256&#39; height=&#39;300&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"256\" data-rawheight=\"300\" class=\"content_image lazy\" width=\"256\" data-actualsrc=\"https://pic4.zhimg.com/v2-94950110adca5b08d4f9101debe27d9f_b.jpg\"/><figcaption>电位器</figcaption></figure><div class=\"highlight\"><pre><code class=\"language-cpp\"><span class=\"c1\">// 电位器控制灯圈亮暗\n</span><span class=\"c1\"></span><span class=\"cp\">#include</span> <span class=\"cpf\">&#34;FastLED.h&#34;</span><span class=\"cp\">\n</span><span class=\"cp\"></span>\n<span class=\"cp\">#define NUM_LEDS 16\n</span><span class=\"cp\">#define DATA_PIN 6\n</span><span class=\"cp\"></span>\n<span class=\"n\">CRGB</span> <span class=\"n\">leds</span><span class=\"p\">[</span><span class=\"n\">NUM_LEDS</span><span class=\"p\">];</span>\n<span class=\"kt\">void</span> <span class=\"nf\">setup</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n  <span class=\"n\">FastLED</span><span class=\"p\">.</span><span class=\"n\">addLeds</span><span class=\"o\">&lt;</span><span class=\"n\">NEOPIXEL</span><span class=\"p\">,</span> <span class=\"n\">DATA_PIN</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">leds</span><span class=\"p\">,</span> <span class=\"n\">NUM_LEDS</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n<span class=\"kt\">void</span> <span class=\"nf\">loop</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n  <span class=\"kt\">int</span> <span class=\"n\">val</span> <span class=\"o\">=</span> <span class=\"n\">analogRead</span><span class=\"p\">(</span><span class=\"n\">A0</span><span class=\"p\">);</span>\n  <span class=\"kt\">int</span> <span class=\"n\">numLedsToLight</span> <span class=\"o\">=</span> <span class=\"n\">map</span><span class=\"p\">(</span><span class=\"n\">val</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">1024</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"n\">NUM_LEDS</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">);</span> <span class=\"c1\">// 通过map把0～1023范围的数值映射到0-16个LED灯\n</span><span class=\"c1\"></span>\n  <span class=\"n\">FastLED</span><span class=\"p\">.</span><span class=\"n\">clear</span><span class=\"p\">();</span> <span class=\"c1\">// 清除LED灯的现存状态\n</span><span class=\"c1\"></span>  <span class=\"k\">for</span><span class=\"p\">(</span><span class=\"kt\">int</span> <span class=\"n\">led</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span> <span class=\"n\">led</span> <span class=\"o\">&lt;</span> <span class=\"n\">numLedsToLight</span><span class=\"p\">;</span> <span class=\"n\">led</span><span class=\"o\">++</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"n\">leds</span><span class=\"p\">[</span><span class=\"n\">led</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">CRGB</span><span class=\"o\">::</span><span class=\"n\">Blue</span><span class=\"p\">;</span>\n  <span class=\"p\">}</span>\n  <span class=\"n\">FastLED</span><span class=\"p\">.</span><span class=\"n\">show</span><span class=\"p\">();</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>TIPS:</p><ul><li>电位器读出的模拟信号是0～1024，要映射到16个LED灯，可以采用<a href=\"https://link.zhihu.com/?target=https%3A//www.arduino.cc/reference/en/language/functions/math/map/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">arduino的map函数</a></li><ul><li>map(value, fromLow, fromHigh, toLow, toHigh)</li></ul><li>电位器读出的模拟信号值有可能达不到1024；手上的电位器最大值只有1008，导致电位器调到最大值时，最后一个灯没法亮</li></ul><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/990639744983977984\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic3.zhimg.com/80/v2-03d7ca65d36eec0bc01249721b9a5902_b.jpg\" data-lens-id=\"990639744983977984\"><img class=\"thumbnail\" src=\"https://pic3.zhimg.com/80/v2-03d7ca65d36eec0bc01249721b9a5902_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/990639744983977984</span></span></a><p><b>4、酷炫的彩灯</b></p><p>看下示例代码，color palettes，可以让等很炫酷的展示</p><div class=\"highlight\"><pre><code class=\"language-text\">#include &lt;FastLED.h&gt;\n\n#define LED_PIN     5\n#define NUM_LEDS    50\n#define BRIGHTNESS  64\n#define LED_TYPE    WS2811\n#define COLOR_ORDER GRB\nCRGB leds[NUM_LEDS];\n\n#define UPDATES_PER_SECOND 100\n\nCRGBPalette16 currentPalette;\nTBlendType    currentBlending;\n\nextern CRGBPalette16 myRedWhiteBluePalette;\nextern const TProgmemPalette16 myRedWhiteBluePalette_p PROGMEM;\n\n\nvoid setup() {\n    delay( 3000 ); // power-up safety delay\n    FastLED.addLeds&lt;LED_TYPE, LED_PIN, COLOR_ORDER&gt;(leds, NUM_LEDS).setCorrection( TypicalLEDStrip );\n    FastLED.setBrightness(  BRIGHTNESS );\n    \n    currentPalette = RainbowColors_p;\n    currentBlending = LINEARBLEND;\n}\n\n\nvoid loop()\n{\n    ChangePalettePeriodically();\n    \n    static uint8_t startIndex = 0;\n    startIndex = startIndex + 1; /* motion speed */\n    \n    FillLEDsFromPaletteColors( startIndex);\n    \n    FastLED.show();\n    FastLED.delay(1000 / UPDATES_PER_SECOND);\n}\n\nvoid FillLEDsFromPaletteColors( uint8_t colorIndex)\n{\n    uint8_t brightness = 255;\n    \n    for( int i = 0; i &lt; NUM_LEDS; i++) {\n        leds[i] = ColorFromPalette( currentPalette, colorIndex, brightness, currentBlending);\n        colorIndex += 3;\n    }\n}\n\nvoid ChangePalettePeriodically()\n{\n    uint8_t secondHand = (millis() / 1000) % 60;\n    static uint8_t lastSecond = 99;\n    \n    if( lastSecond != secondHand) {\n        lastSecond = secondHand;\n        if( secondHand ==  0)  { currentPalette = RainbowColors_p;         currentBlending = LINEARBLEND; }\n        if( secondHand == 10)  { currentPalette = RainbowStripeColors_p;   currentBlending = NOBLEND;  }\n        if( secondHand == 15)  { currentPalette = RainbowStripeColors_p;   currentBlending = LINEARBLEND; }\n        if( secondHand == 20)  { SetupPurpleAndGreenPalette();             currentBlending = LINEARBLEND; }\n        if( secondHand == 25)  { SetupTotallyRandomPalette();              currentBlending = LINEARBLEND; }\n        if( secondHand == 30)  { SetupBlackAndWhiteStripedPalette();       currentBlending = NOBLEND; }\n        if( secondHand == 35)  { SetupBlackAndWhiteStripedPalette();       currentBlending = LINEARBLEND; }\n        if( secondHand == 40)  { currentPalette = CloudColors_p;           currentBlending = LINEARBLEND; }\n        if( secondHand == 45)  { currentPalette = PartyColors_p;           currentBlending = LINEARBLEND; }\n        if( secondHand == 50)  { currentPalette = myRedWhiteBluePalette_p; currentBlending = NOBLEND;  }\n        if( secondHand == 55)  { currentPalette = myRedWhiteBluePalette_p; currentBlending = LINEARBLEND; }\n    }\n}\n\n// This function fills the palette with totally random colors.\nvoid SetupTotallyRandomPalette()\n{\n    for( int i = 0; i &lt; 16; i++) {\n        currentPalette[i] = CHSV( random8(), 255, random8());\n    }\n}\n\nvoid SetupBlackAndWhiteStripedPalette()\n{\n    // &#39;black out&#39; all 16 palette entries...\n    fill_solid( currentPalette, 16, CRGB::Black);\n    // and set every fourth one to white.\n    currentPalette[0] = CRGB::White;\n    currentPalette[4] = CRGB::White;\n    currentPalette[8] = CRGB::White;\n    currentPalette[12] = CRGB::White;\n    \n}\n\nvoid SetupPurpleAndGreenPalette()\n{\n    CRGB purple = CHSV( HUE_PURPLE, 255, 255);\n    CRGB green  = CHSV( HUE_GREEN, 255, 255);\n    CRGB black  = CRGB::Black;\n    \n    currentPalette = CRGBPalette16(\n                                   green,  green,  black,  black,\n                                   purple, purple, black,  black,\n                                   green,  green,  black,  black,\n                                   purple, purple, black,  black );\n}\n\nconst TProgmemPalette16 myRedWhiteBluePalette_p PROGMEM =\n{\n    CRGB::Red,\n    CRGB::Gray, // &#39;white&#39; is too bright compared to red and blue\n    CRGB::Blue,\n    CRGB::Black,\n    \n    CRGB::Red,\n    CRGB::Gray,\n    CRGB::Blue,\n    CRGB::Black,\n    \n    CRGB::Red,\n    CRGB::Red,\n    CRGB::Gray,\n    CRGB::Gray,\n    CRGB::Blue,\n    CRGB::Blue,\n    CRGB::Black,\n    CRGB::Black\n};</code></pre></div><p>看效果</p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/990641525419868160\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic1.zhimg.com/80/v2-e9f47ec00caebf4d91a384cd820f12b8_b.jpg\" data-lens-id=\"990641525419868160\"><img class=\"thumbnail\" src=\"https://pic1.zhimg.com/80/v2-e9f47ec00caebf4d91a384cd820f12b8_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/990641525419868160</span></span></a><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/990641636346540032\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic2.zhimg.com/80/v2-13716087441b1be9490e5335652f5f85_b.jpg\" data-lens-id=\"990641636346540032\"><img class=\"thumbnail\" src=\"https://pic2.zhimg.com/80/v2-13716087441b1be9490e5335652f5f85_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/990641636346540032</span></span></a><p class=\"ztext-empty-paragraph\"><br/></p><p>源码地址：</p><a href=\"https://link.zhihu.com/?target=https%3A//github.com/CNBlackJ/iot-lesson/tree/master/uno/FastLedExample\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-f35ceeca11c642572e6bbe524d43e1c4_ipico.jpg\" data-image-width=\"400\" data-image-height=\"400\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">CNBlackJ/iot-lesson</a><p></p>", 
            "topic": [
                {
                    "tag": "LED 灯", 
                    "tagLink": "https://api.zhihu.com/topics/19698005"
                }, 
                {
                    "tag": "Arduino", 
                    "tagLink": "https://api.zhihu.com/topics/19581430"
                }, 
                {
                    "tag": "RGB", 
                    "tagLink": "https://api.zhihu.com/topics/19592921"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37526974", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "RPI Sports Tank 树莓派运动小车智能坦克", 
            "content": "<p></p><p><i>为了满足拥有坦克和飞机的愿望，想着着手做一套去海边溜溜。</i></p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/985537725302394880\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"\" data-name=\"\" data-poster=\"https://pic4.zhimg.com/80/v2-3a7f254c98be6178ed8e4fe3a5ea246f_b.jpg\" data-lens-id=\"985537725302394880\"><img class=\"thumbnail\" src=\"https://pic4.zhimg.com/80/v2-3a7f254c98be6178ed8e4fe3a5ea246f_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/985537725302394880</span></span></a><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic2.zhimg.com/v2-04c83497589f537c1cd683a891a0e4b1_b.jpg\" data-rawwidth=\"1080\" data-rawheight=\"810\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic2.zhimg.com/v2-04c83497589f537c1cd683a891a0e4b1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;810&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1080\" data-rawheight=\"810\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic2.zhimg.com/v2-04c83497589f537c1cd683a891a0e4b1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-04c83497589f537c1cd683a891a0e4b1_b.jpg\"/></figure><h2>01 What you will need</h2><p>SoftwarePython</p><p>Putty </p><p>Fritzing</p><p>Mobilekeyboard app</p><p class=\"ztext-empty-paragraph\"><br/></p><p>hardware</p><p>solidworks</p><p>25mm Dc motor 30w 300rpm</p><p>motor driver 7A/160W双路</p><p>raspberry pi</p><p>18650 cell</p><p>2节4节18650电池盒</p><p>按钮</p><p>XL7015降压模块</p><p>mobilekeyboard</p><p class=\"ztext-empty-paragraph\"><br/></p><h2>02 what you will do</h2><p>Mechanism-10hours</p><p>机械需要用solidworks画好图纸，加工后花两个多小时组装。</p><p>履带加机身采用全铝材料，方便钻孔。履带需加上缓冲弹簧及从动轮，螺丝部位需加入垫片，否则马达运作的时候会产生振动导致结构会产生松动。</p><figure data-size=\"small\"><noscript><img src=\"https://pic2.zhimg.com/v2-f9fb539634001695e54889a2b5f36f7d_b.jpg\" data-rawwidth=\"1080\" data-rawheight=\"756\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic2.zhimg.com/v2-f9fb539634001695e54889a2b5f36f7d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;756&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1080\" data-rawheight=\"756\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic2.zhimg.com/v2-f9fb539634001695e54889a2b5f36f7d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-f9fb539634001695e54889a2b5f36f7d_b.jpg\"/></figure><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-3fba6bb869d2e5c7318919c179ecbc24_b.jpg\" data-rawwidth=\"1080\" data-rawheight=\"458\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-3fba6bb869d2e5c7318919c179ecbc24_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;458&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1080\" data-rawheight=\"458\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-3fba6bb869d2e5c7318919c179ecbc24_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-3fba6bb869d2e5c7318919c179ecbc24_b.jpg\"/></figure><p>另外，马达位置需要一前一后错开，不要装在同一侧，否则转向会产生不顺畅的效果。</p><p>树莓派供电由2节18650电池组成产生7.4vdc电压，并接入Dc降压模块转换至5v供电。在电源端口，串接一个按钮用于启动关闭树莓派系统。</p><p>马达驱动器供电为6-27v，所以此处接入4节18650电池足够，另外此处+-接反将会烧掉驱动器。</p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-18464ac86227d0d2525e94a095c52abf_b.jpg\" data-rawwidth=\"923\" data-rawheight=\"644\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb\" width=\"923\" data-original=\"https://pic4.zhimg.com/v2-18464ac86227d0d2525e94a095c52abf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;923&#39; height=&#39;644&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"923\" data-rawheight=\"644\" data-caption=\"\" data-size=\"small\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"923\" data-original=\"https://pic4.zhimg.com/v2-18464ac86227d0d2525e94a095c52abf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-18464ac86227d0d2525e94a095c52abf_b.jpg\"/></figure><p>每个马达的方向控制可以通过正接或反接驱动器输出口方向来控制，不过此处占用树莓派3个GPIO口，正反转，刹车则通过GPIO对应电平控制：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-c125c76432e4be74b5f5f8c0659a4a7e_b.jpg\" data-rawwidth=\"539\" data-rawheight=\"509\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"539\" data-original=\"https://pic3.zhimg.com/v2-c125c76432e4be74b5f5f8c0659a4a7e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;539&#39; height=&#39;509&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"539\" data-rawheight=\"509\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"539\" data-original=\"https://pic3.zhimg.com/v2-c125c76432e4be74b5f5f8c0659a4a7e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-c125c76432e4be74b5f5f8c0659a4a7e_b.jpg\"/></figure><p>接线图：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-5273d30281e96cb51c7a1d431603025e_b.jpg\" data-rawwidth=\"540\" data-rawheight=\"600\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"540\" data-original=\"https://pic3.zhimg.com/v2-5273d30281e96cb51c7a1d431603025e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;540&#39; height=&#39;600&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"540\" data-rawheight=\"600\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"540\" data-original=\"https://pic3.zhimg.com/v2-5273d30281e96cb51c7a1d431603025e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-5273d30281e96cb51c7a1d431603025e_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>Program-8hours</p><p>起初准备通过红外来遥控方向的，后来图方便想了一下还是通过蓝牙+mobilekeyboard来做，因为mobilekeyboard已经开发好了硬件和安卓app。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-40e0cc94884ab08d517666bc9769db1f_b.jpg\" data-rawwidth=\"396\" data-rawheight=\"706\" data-caption=\"\" data-size=\"normal\" class=\"content_image\" width=\"396\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;396&#39; height=&#39;706&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"396\" data-rawheight=\"706\" data-caption=\"\" data-size=\"normal\" class=\"content_image lazy\" width=\"396\" data-actualsrc=\"https://pic4.zhimg.com/v2-40e0cc94884ab08d517666bc9769db1f_b.jpg\"/></figure><p>程序端，通过putty来调试与编写程序，将方向，前进，后退等GPIO状态分别定义为python函数，将其与键盘上自定义按键关联，当检测到键盘输入对应字符时，执行相应函数。</p><p>导入curse模块，使用while来监控键盘按下并执行相应动作。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-b14f62754dd0c6e17fba02c9af454891_b.jpg\" data-rawwidth=\"585\" data-rawheight=\"578\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"585\" data-original=\"https://pic2.zhimg.com/v2-b14f62754dd0c6e17fba02c9af454891_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;585&#39; height=&#39;578&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"585\" data-rawheight=\"578\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"585\" data-original=\"https://pic2.zhimg.com/v2-b14f62754dd0c6e17fba02c9af454891_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-b14f62754dd0c6e17fba02c9af454891_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-2c2602df2ad184915a26f418ae44f257_b.jpg\" data-rawwidth=\"594\" data-rawheight=\"318\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"594\" data-original=\"https://pic4.zhimg.com/v2-2c2602df2ad184915a26f418ae44f257_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;594&#39; height=&#39;318&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"594\" data-rawheight=\"318\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"594\" data-original=\"https://pic4.zhimg.com/v2-2c2602df2ad184915a26f418ae44f257_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-2c2602df2ad184915a26f418ae44f257_b.jpg\"/></figure><h2>03 test</h2><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-82ad575ee4b636e2c7a6f0caee33a6d5_b.jpg\" data-rawwidth=\"1080\" data-rawheight=\"810\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic2.zhimg.com/v2-82ad575ee4b636e2c7a6f0caee33a6d5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;810&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1080\" data-rawheight=\"810\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic2.zhimg.com/v2-82ad575ee4b636e2c7a6f0caee33a6d5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-82ad575ee4b636e2c7a6f0caee33a6d5_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>最后，在平地和沙滩测试一下越过障碍物，发现螺丝位因为振动容易产生松动，还有由于mobilekeyboard可以响应鼠标操作，有时候会因为误操作将鼠标从程序命令端口切换出来导致无法响应键盘按键，所以这两点都是值得改善的地方。</p><p>另外后续可以加高级功能，如同时响应方向操作，加传感器避障，加摄像头采集等等。</p><p></p>", 
            "topic": [
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }, 
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/36962422", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "Actor Framework-Evaporate Cooler", 
            "content": "<p></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-7265af8c59a05f05f91d1beda667af21_b.jpg\" data-rawwidth=\"35\" data-rawheight=\"30\" data-caption=\"\" data-size=\"normal\" class=\"content_image\" width=\"35\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;35&#39; height=&#39;30&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"35\" data-rawheight=\"30\" data-caption=\"\" data-size=\"normal\" class=\"content_image lazy\" width=\"35\" data-actualsrc=\"https://pic2.zhimg.com/v2-7265af8c59a05f05f91d1beda667af21_b.jpg\"/></figure><p><i>闲来无事，打算将之前玩过的NI demo用actor framework来实现并总结一下</i></p><p class=\"ztext-empty-paragraph\"><br/></p><h2>01 需求</h2><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-f249dd6efe8568be141a611054bc1df9_b.jpg\" data-rawwidth=\"907\" data-rawheight=\"438\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"907\" data-original=\"https://pic2.zhimg.com/v2-f249dd6efe8568be141a611054bc1df9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;907&#39; height=&#39;438&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"907\" data-rawheight=\"438\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"907\" data-original=\"https://pic2.zhimg.com/v2-f249dd6efe8568be141a611054bc1df9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-f249dd6efe8568be141a611054bc1df9_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>Evaporative cooler 为美国应该是西部地区家用的类似空调作用的一封闭容器，向其容器加入介质水，控制风扇将蒸发的水蒸气用于调节室内温度。</p><p>1.水位控制</p><p>    水位过低，开阀</p><p>    水位过高，关阀</p><p>2.温度控制</p><p>    室温过高，打开冷却控制</p><p>        按一定间隔，先打开泵冷却 </p><p>       然后打开风扇</p><p>   室温过低，关闭冷却</p><p>3.持续显示温度，泵，风扇状态</p><p>4.高限数值可调节</p><p>5.双风扇，需自动检测风扇错误</p><h2>2 Actor</h2><p><b>Cooler.lvclass </b>控制 Dual Fan 和 Water Level</p><p><b>Dual Fan.lvclass</b> 管理一对风扇，监测风扇状态</p><p><b>Water Level.lvclass </b>监测水位传感器，控制阀开闭</p><p><b>Cooler Panel.lvclass </b>显示用户界面</p><p><b>Timed Loop Controller.lvclass</b>轮询读取Dual Fan 和 Water Level，Cooler</p><p><b>Level Controller.lvclass </b>抽象类，为water level 和 cooler 实现上下限逻辑控制</p><p><b>Cooler UI with Events.lvclass </b>用户界面交互</p><h2>03 实践总结</h2><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1 类层次</b></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-76c30b17a7d0ce40721ea8b293f3b2f0_b.jpg\" data-rawwidth=\"1294\" data-rawheight=\"727\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1294\" data-original=\"https://pic1.zhimg.com/v2-76c30b17a7d0ce40721ea8b293f3b2f0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1294&#39; height=&#39;727&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1294\" data-rawheight=\"727\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1294\" data-original=\"https://pic1.zhimg.com/v2-76c30b17a7d0ce40721ea8b293f3b2f0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-76c30b17a7d0ce40721ea8b293f3b2f0_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><h2><br/></h2><p><b>2 代码总结</b></p><p><b><i>nested actor</i></b></p><p>Cooler 负责两个nested actor (Dual fan 与 Water Level) 的运行状态（启动，初始化及关闭关闭）。</p><p>Cooler 作为caller actor 使用 <b>Message Enqueuer.lvclass</b> 加入<b>类私有控件</b>进行交互<b>。</b></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-97c5c901c3df125ab114e263d448e4a9_b.jpg\" data-rawwidth=\"698\" data-rawheight=\"805\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"698\" data-original=\"https://pic2.zhimg.com/v2-97c5c901c3df125ab114e263d448e4a9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;698&#39; height=&#39;805&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"698\" data-rawheight=\"805\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"698\" data-original=\"https://pic2.zhimg.com/v2-97c5c901c3df125ab114e263d448e4a9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-97c5c901c3df125ab114e263d448e4a9_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p>Cooler 作为Level Controller的实现。需重写Get New Level.vi 与 Set Output State.vi。</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-6fdc27bdc2f2d60f1ed153f52fd66207_b.jpg\" data-rawwidth=\"392\" data-rawheight=\"800\" data-caption=\"\" data-size=\"normal\" class=\"content_image\" width=\"392\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;392&#39; height=&#39;800&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"392\" data-rawheight=\"800\" data-caption=\"\" data-size=\"normal\" class=\"content_image lazy\" width=\"392\" data-actualsrc=\"https://pic4.zhimg.com/v2-6fdc27bdc2f2d60f1ed153f52fd66207_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><h2><br/></h2><h2><b><i>Time-Delayed Message</i></b></h2><p>Time-Delayed Message 并不属于消息类。它允许设定延迟时间后指定一个message发送至 Actor ，这里的Actor指 Dual Fan，message 指 Power On Msg.</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-37d6fc3d973d5cde729f67f662e99063_b.jpg\" data-rawwidth=\"1031\" data-rawheight=\"406\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1031\" data-original=\"https://pic4.zhimg.com/v2-37d6fc3d973d5cde729f67f662e99063_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1031&#39; height=&#39;406&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1031\" data-rawheight=\"406\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1031\" data-original=\"https://pic4.zhimg.com/v2-37d6fc3d973d5cde729f67f662e99063_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-37d6fc3d973d5cde729f67f662e99063_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><br/>Time-Delayed Message 使用通知器管理延迟时间，我们则可利用此通知器管理剩余或者未来得及发送消息。<br/>Power off fan 之前需要destroy所有所有未来得及发送的消息。</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-c59d1019cedadcc765a756b46d877890_b.jpg\" data-rawwidth=\"1003\" data-rawheight=\"393\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1003\" data-original=\"https://pic1.zhimg.com/v2-c59d1019cedadcc765a756b46d877890_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1003&#39; height=&#39;393&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1003\" data-rawheight=\"393\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1003\" data-original=\"https://pic1.zhimg.com/v2-c59d1019cedadcc765a756b46d877890_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-c59d1019cedadcc765a756b46d877890_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>Actor core中在调用父方法之前启动两个nested actor ，确保cooler向其发送消息之前，nested actor已启动。</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-55363e807a96e6b11ec12ddecc2dd450_b.jpg\" data-rawwidth=\"861\" data-rawheight=\"500\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"861\" data-original=\"https://pic1.zhimg.com/v2-55363e807a96e6b11ec12ddecc2dd450_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;861&#39; height=&#39;500&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"861\" data-rawheight=\"500\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"861\" data-original=\"https://pic1.zhimg.com/v2-55363e807a96e6b11ec12ddecc2dd450_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-55363e807a96e6b11ec12ddecc2dd450_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p><b><i>User Interface</i></b></p><p>需要显示室内温度，泵状态，风扇状态</p><p>运行调节预设温度上下限，用于触发风扇启动条件</p><p>抽象层Cooler UI with Events（UI event）</p><p>使用事件结构，接收cooler发送过来的message，然后其子类为不同事件做出不同反应。</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e1991ede0b178a840fb7257eb958bbf7_b.jpg\" data-rawwidth=\"671\" data-rawheight=\"798\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"671\" data-original=\"https://pic4.zhimg.com/v2-e1991ede0b178a840fb7257eb958bbf7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;671&#39; height=&#39;798&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"671\" data-rawheight=\"798\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"671\" data-original=\"https://pic4.zhimg.com/v2-e1991ede0b178a840fb7257eb958bbf7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e1991ede0b178a840fb7257eb958bbf7_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>再启动UI event actor 前 初始化事件：</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-fd30894012ec205465b02aab03b89021_b.jpg\" data-rawwidth=\"705\" data-rawheight=\"449\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"705\" data-original=\"https://pic2.zhimg.com/v2-fd30894012ec205465b02aab03b89021_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;705&#39; height=&#39;449&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"705\" data-rawheight=\"449\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"705\" data-original=\"https://pic2.zhimg.com/v2-fd30894012ec205465b02aab03b89021_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-fd30894012ec205465b02aab03b89021_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>UI event 需要传递消息至 cooler actor，其私有控件需要加入cooler的消息入队列，并创建访问器：</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-e9eab3b2c0bbf1d5cba9c1cb5ba59a6d_b.jpg\" data-rawwidth=\"302\" data-rawheight=\"445\" data-caption=\"\" data-size=\"normal\" class=\"content_image\" width=\"302\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;302&#39; height=&#39;445&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"302\" data-rawheight=\"445\" data-caption=\"\" data-size=\"normal\" class=\"content_image lazy\" width=\"302\" data-actualsrc=\"https://pic2.zhimg.com/v2-e9eab3b2c0bbf1d5cba9c1cb5ba59a6d_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-018847203b3ee18ff2f3589f2827b4a5_b.jpg\" data-rawwidth=\"632\" data-rawheight=\"311\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"632\" data-original=\"https://pic2.zhimg.com/v2-018847203b3ee18ff2f3589f2827b4a5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;632&#39; height=&#39;311&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"632\" data-rawheight=\"311\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"632\" data-original=\"https://pic2.zhimg.com/v2-018847203b3ee18ff2f3589f2827b4a5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-018847203b3ee18ff2f3589f2827b4a5_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>创建对应update生成事件，并生成message类：</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-b2e53b5fbc495314509ebddcebc0c990_b.jpg\" data-rawwidth=\"256\" data-rawheight=\"188\" data-caption=\"\" data-size=\"normal\" class=\"content_image\" width=\"256\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;256&#39; height=&#39;188&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"256\" data-rawheight=\"188\" data-caption=\"\" data-size=\"normal\" class=\"content_image lazy\" width=\"256\" data-actualsrc=\"https://pic1.zhimg.com/v2-b2e53b5fbc495314509ebddcebc0c990_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>Cooler 类中建立对应方法发送message，更新至UI：</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-6c9bb55698ca5a3b52cc0e52bf43b3bf_b.jpg\" data-rawwidth=\"760\" data-rawheight=\"450\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"760\" data-original=\"https://pic4.zhimg.com/v2-6c9bb55698ca5a3b52cc0e52bf43b3bf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;760&#39; height=&#39;450&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"760\" data-rawheight=\"450\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"760\" data-original=\"https://pic4.zhimg.com/v2-6c9bb55698ca5a3b52cc0e52bf43b3bf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-6c9bb55698ca5a3b52cc0e52bf43b3bf_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-bd1756f54d5062dcbfaf5f798ed3ad08_b.jpg\" data-rawwidth=\"222\" data-rawheight=\"163\" data-caption=\"\" data-size=\"normal\" class=\"content_image\" width=\"222\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;222&#39; height=&#39;163&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"222\" data-rawheight=\"163\" data-caption=\"\" data-size=\"normal\" class=\"content_image lazy\" width=\"222\" data-actualsrc=\"https://pic1.zhimg.com/v2-bd1756f54d5062dcbfaf5f798ed3ad08_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>当风扇状态发生改变，Dual fan 需要更新风扇状态至Cooler：</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-262d1ebdf30258f3ea8175feed3b9e69_b.jpg\" data-rawwidth=\"994\" data-rawheight=\"665\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"994\" data-original=\"https://pic2.zhimg.com/v2-262d1ebdf30258f3ea8175feed3b9e69_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;994&#39; height=&#39;665&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"994\" data-rawheight=\"665\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"994\" data-original=\"https://pic2.zhimg.com/v2-262d1ebdf30258f3ea8175feed3b9e69_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-262d1ebdf30258f3ea8175feed3b9e69_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>将Post Update 封装成一个Vi 供Power On/Off 及 Update.vi 调用：</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-785b7a49ccb4c205a456aa32c2c0fa47_b.jpg\" data-rawwidth=\"1121\" data-rawheight=\"948\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1121\" data-original=\"https://pic4.zhimg.com/v2-785b7a49ccb4c205a456aa32c2c0fa47_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1121&#39; height=&#39;948&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1121\" data-rawheight=\"948\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1121\" data-original=\"https://pic4.zhimg.com/v2-785b7a49ccb4c205a456aa32c2c0fa47_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-785b7a49ccb4c205a456aa32c2c0fa47_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>Cooler Panel 作为 UI event 的实例化子类，用于创建用户操作界面:</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5c69e13be6498e7629e148098cbd025b_b.jpg\" data-rawwidth=\"1277\" data-rawheight=\"756\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1277\" data-original=\"https://pic4.zhimg.com/v2-5c69e13be6498e7629e148098cbd025b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1277&#39; height=&#39;756&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1277\" data-rawheight=\"756\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1277\" data-original=\"https://pic4.zhimg.com/v2-5c69e13be6498e7629e148098cbd025b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5c69e13be6498e7629e148098cbd025b_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>启动 Cooler Panel 及 Cooler actor, 注意此处需先将Set ui 后再 set cooler 否则再cooler panel actor core 中无法发送send deadband msg:</p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-e876f7379bfb6f0714a3376a1bf614c0_b.jpg\" data-rawwidth=\"886\" data-rawheight=\"500\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"886\" data-original=\"https://pic1.zhimg.com/v2-e876f7379bfb6f0714a3376a1bf614c0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;886&#39; height=&#39;500&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"886\" data-rawheight=\"500\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"886\" data-original=\"https://pic1.zhimg.com/v2-e876f7379bfb6f0714a3376a1bf614c0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-e876f7379bfb6f0714a3376a1bf614c0_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"25\" data-caption=\"\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p>", 
            "topic": [], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/36702685", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 2, 
            "title": "Raspberry Pi配置静态IP", 
            "content": "<blockquote>Raspberry Pi配置静态IP在树莓派上有一个静态的IP地址是非常有用的，因为它将使树莓派的SSH更直接关联。</blockquote><p>每次树莓派引导（重新启动）时，它都会有另一个由路由器分配的IP地址。这种变化的IP地址称为动态IP地址。无论什么时候，我们将树莓派重启系统，或者关闭它的电源，IP地址都可能会改变。在每次需要使用SSH或远程关联登录时，在树莓派上指定一个静态IP地址将变得简单。</p> <h2>01 找到默认网关</h2><p>Windows下：<br/></p><div class=\"highlight\"><pre><code class=\"language-text\">ipconfig</code></pre></div><p>linux下：<br/></p><div class=\"highlight\"><pre><code class=\"language-text\">route -n</code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-a66210faf0643358c1362592022c375d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"825\" data-rawheight=\"521\" class=\"origin_image zh-lightbox-thumb\" width=\"825\" data-original=\"https://pic2.zhimg.com/v2-a66210faf0643358c1362592022c375d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;825&#39; height=&#39;521&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"825\" data-rawheight=\"521\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"825\" data-original=\"https://pic2.zhimg.com/v2-a66210faf0643358c1362592022c375d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-a66210faf0643358c1362592022c375d_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>02 找到DNS<br/></h2><p>Windows下：<br/></p><div class=\"highlight\"><pre><code class=\"language-text\">ipconfig /all</code></pre></div><p>linux下：<br/></p><div class=\"highlight\"><pre><code class=\"language-text\">cat /etc/resolv.conf</code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-9660991ff26141ec6b76309b31773cb1_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"826\" data-rawheight=\"521\" class=\"origin_image zh-lightbox-thumb\" width=\"826\" data-original=\"https://pic2.zhimg.com/v2-9660991ff26141ec6b76309b31773cb1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;826&#39; height=&#39;521&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"826\" data-rawheight=\"521\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"826\" data-original=\"https://pic2.zhimg.com/v2-9660991ff26141ec6b76309b31773cb1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-9660991ff26141ec6b76309b31773cb1_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><h2>03 配置网络</h2><p>dhcpcd作为树莓派网络端DHCP配置文件，自诩找到<i><b>nohook lookup-hostname  </b></i><br/>一栏，添加以下代码即可配置。<br/></p><div class=\"highlight\"><pre><code class=\"language-text\">sudo nano /etc/dhcpcd.conf\n</code></pre></div><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7e8e3ccc3e14fb8ca46b660ea9369348_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"825\" data-rawheight=\"521\" class=\"origin_image zh-lightbox-thumb\" width=\"825\" data-original=\"https://pic1.zhimg.com/v2-7e8e3ccc3e14fb8ca46b660ea9369348_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;825&#39; height=&#39;521&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"825\" data-rawheight=\"521\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"825\" data-original=\"https://pic1.zhimg.com/v2-7e8e3ccc3e14fb8ca46b660ea9369348_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7e8e3ccc3e14fb8ca46b660ea9369348_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>04 使用IP Scanner测试</h2><p>❖</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-10bc3b3703e6f8854b25093a9a6db905_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"783\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb\" width=\"783\" data-original=\"https://pic2.zhimg.com/v2-10bc3b3703e6f8854b25093a9a6db905_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;783&#39; height=&#39;640&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"783\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"783\" data-original=\"https://pic2.zhimg.com/v2-10bc3b3703e6f8854b25093a9a6db905_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-10bc3b3703e6f8854b25093a9a6db905_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"25\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-648b79a089501a16f5b77632dab1a5a7_b.jpg\"/></figure><p></p><p></p>", 
            "topic": [
                {
                    "tag": "Linux", 
                    "tagLink": "https://api.zhihu.com/topics/19554300"
                }, 
                {
                    "tag": "IP 地址", 
                    "tagLink": "https://api.zhihu.com/topics/19592543"
                }, 
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35920688", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 2, 
            "title": "剪一刀需要你多大的力？", 
            "content": "<p></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-7e6a5def91118fb2bb11ee661750b8aa_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic3.zhimg.com/v2-7e6a5def91118fb2bb11ee661750b8aa_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><blockquote><i>收到TestLab的任务，市场部决定开发一款 Handtool scissor 专门用于剪切松木（一种建筑材料），需要我们设计一款设备测量每一次的剪切力并替代人工做寿命评估。</i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-852fe1613a16e49fbaf0edaaa7891c1e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic3.zhimg.com/v2-852fe1613a16e49fbaf0edaaa7891c1e_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>以下是Life Test的Work instruction，500次基本测量标准，10mm剪切长度，测量剪切力并做失效报警。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-f74c6fe47405bcd51d3e3fdce794645e_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"849\" data-rawheight=\"180\" class=\"origin_image zh-lightbox-thumb\" width=\"849\" data-original=\"https://pic3.zhimg.com/v2-f74c6fe47405bcd51d3e3fdce794645e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;849&#39; height=&#39;180&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"849\" data-rawheight=\"180\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"849\" data-original=\"https://pic3.zhimg.com/v2-f74c6fe47405bcd51d3e3fdce794645e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-f74c6fe47405bcd51d3e3fdce794645e_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-3ef25133e6a57ebc0cf320876e0a0427_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"472\" data-rawheight=\"275\" class=\"origin_image zh-lightbox-thumb\" width=\"472\" data-original=\"https://pic4.zhimg.com/v2-3ef25133e6a57ebc0cf320876e0a0427_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;472&#39; height=&#39;275&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"472\" data-rawheight=\"275\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"472\" data-original=\"https://pic4.zhimg.com/v2-3ef25133e6a57ebc0cf320876e0a0427_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-3ef25133e6a57ebc0cf320876e0a0427_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>以下是所需的开发资源:</p><h2><b>01 Hardware：</b></h2><ul><li>90W交流直角齿轮减速电机</li><li>凸轮分割器（定做）</li><li>150kg Loadcell压力传感器</li><li>Fatek PLC  B1z</li><li>42两相步进电机BS42HB60-01</li><li>滚轮气缸，压料气缸等</li><li>松下对射开关</li><li>分割器信号感应器</li><li>压料感应开关</li><li>PCMicro mainboard</li><li>Touch Screen module</li><li>Screen</li><li>其他零件<br/></li></ul><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-91b2a4496bbd6e5f11d7a2e1ed9e3b7b_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"909\" data-rawheight=\"231\" class=\"origin_image zh-lightbox-thumb\" width=\"909\" data-original=\"https://pic4.zhimg.com/v2-91b2a4496bbd6e5f11d7a2e1ed9e3b7b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;909&#39; height=&#39;231&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"909\" data-rawheight=\"231\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"909\" data-original=\"https://pic4.zhimg.com/v2-91b2a4496bbd6e5f11d7a2e1ed9e3b7b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-91b2a4496bbd6e5f11d7a2e1ed9e3b7b_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-69592f5fae85051383fe10a2cd0863c9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"273\" data-rawheight=\"311\" class=\"content_image\" width=\"273\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;273&#39; height=&#39;311&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"273\" data-rawheight=\"311\" class=\"content_image lazy\" width=\"273\" data-actualsrc=\"https://pic2.zhimg.com/v2-69592f5fae85051383fe10a2cd0863c9_b.jpg\"/></figure><h2><b>02 Software：</b></h2><ul><li>Labview</li><li>Solidworks</li><li>UG</li><li>Winproladder</li><li>visio<br/><br/></li></ul><h2><b>03 Mechanism</b></h2><p>既然要做全自动测量设备，那当然要考虑送料机构了，我们采用了类似于分度盘的凸轮分割器，木料至于分度盘上，横轴方向自动旋转，纵轴方向自动送料。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-8cd845c5d05836553a43e76be6472ae7_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"707\" data-rawheight=\"557\" class=\"origin_image zh-lightbox-thumb\" width=\"707\" data-original=\"https://pic4.zhimg.com/v2-8cd845c5d05836553a43e76be6472ae7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;707&#39; height=&#39;557&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"707\" data-rawheight=\"557\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"707\" data-original=\"https://pic4.zhimg.com/v2-8cd845c5d05836553a43e76be6472ae7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8cd845c5d05836553a43e76be6472ae7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-65bc3e10d0fb643f98a37c4bbfd7961c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"532\" data-rawheight=\"681\" class=\"origin_image zh-lightbox-thumb\" width=\"532\" data-original=\"https://pic1.zhimg.com/v2-65bc3e10d0fb643f98a37c4bbfd7961c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;532&#39; height=&#39;681&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"532\" data-rawheight=\"681\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"532\" data-original=\"https://pic1.zhimg.com/v2-65bc3e10d0fb643f98a37c4bbfd7961c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-65bc3e10d0fb643f98a37c4bbfd7961c_b.jpg\"/></figure><p>装夹位：</p><p>我用UG分的模，因为手柄位需要CNC加工适配此工具，Loadcell 至于右侧固定位用于检测反作用力，推力气缸则至于左侧。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-8ec36e32ae6dd254c16ddb01c93719f9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"376\" data-rawheight=\"300\" class=\"content_image\" width=\"376\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;376&#39; height=&#39;300&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"376\" data-rawheight=\"300\" class=\"content_image lazy\" width=\"376\" data-actualsrc=\"https://pic2.zhimg.com/v2-8ec36e32ae6dd254c16ddb01c93719f9_b.jpg\"/></figure><p>传感器位置：</p><p>推力气缸极限位感应开关，用于反馈剪切到位信号</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-64668c936bb8facfd93179872d5c260e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"356\" data-rawheight=\"323\" class=\"content_image\" width=\"356\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;356&#39; height=&#39;323&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"356\" data-rawheight=\"323\" class=\"content_image lazy\" width=\"356\" data-actualsrc=\"https://pic3.zhimg.com/v2-64668c936bb8facfd93179872d5c260e_b.jpg\"/></figure><p>对射开关用于检测空料报警，下一步进行反馈分割器旋转信号。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-5b067ef1cd1aae989d59184512880a31_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"339\" data-rawheight=\"318\" class=\"content_image\" width=\"339\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;339&#39; height=&#39;318&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"339\" data-rawheight=\"318\" class=\"content_image lazy\" width=\"339\" data-actualsrc=\"https://pic2.zhimg.com/v2-5b067ef1cd1aae989d59184512880a31_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>割器信号感应器用于感应分割器电机旋转度数。<br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-528bcf4e889ec686b4078736222038f1_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"369\" data-rawheight=\"301\" class=\"content_image\" width=\"369\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;369&#39; height=&#39;301&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"369\" data-rawheight=\"301\" class=\"content_image lazy\" width=\"369\" data-actualsrc=\"https://pic2.zhimg.com/v2-528bcf4e889ec686b4078736222038f1_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>04 Program</b></h2><p>首先PLC端需要配置了一下IO，Flow diagram，错误报警，及步进实际脉冲比:</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1 IO 配置</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>X0           对射开关            </p><p>X1           电机角度感应   </p><p>X2           电机过载保护   </p><p>X3           压料检测            </p><p>X4           剪料到位            </p><p>X5           急停      </p><p class=\"ztext-empty-paragraph\"><br/></p><p>Y0           步进电机            </p><p>Y1           分割器电机        </p><p>Y2           剪切气缸            </p><p>Y3           滚轮压料气缸</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2 动作流程</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>一  旋转工位</p><p>a. 触发条件：</p><p>对射开关置0 &amp; 压料检测置1 &amp; 无报警</p><p class=\"ztext-empty-paragraph\"><br/></p><p>b. 执行动作：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5ca0c1c4130a1a575e29fc52b1fc674b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"222\" data-rawheight=\"642\" class=\"content_image\" width=\"222\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;222&#39; height=&#39;642&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"222\" data-rawheight=\"642\" class=\"content_image lazy\" width=\"222\" data-actualsrc=\"https://pic4.zhimg.com/v2-5ca0c1c4130a1a575e29fc52b1fc674b_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1. 关闭滚轮压料气缸，关闭剪切气缸</p><p>2. 打开分割器电机</p><p>3. 当感应到电机角度感应信号时，停止分割器电机</p><p>4. 木条由重力作用掉至剪刀刀刃口</p><p>5. 打开滚轮压料气缸</p><p>6. 感应压料气缸，无料则报警，有料继续下一步</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>二  正常自动送料</p><p class=\"ztext-empty-paragraph\"><br/></p><p>a. 触发条件： </p><p>上位机信号&amp; 压料检测0&amp;无报警</p><p class=\"ztext-empty-paragraph\"><br/></p><p>b. 执行动作：   </p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-73cb0d06906e07736291ee364e8ac308_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"187\" data-rawheight=\"595\" class=\"content_image\" width=\"187\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;187&#39; height=&#39;595&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"187\" data-rawheight=\"595\" class=\"content_image lazy\" width=\"187\" data-actualsrc=\"https://pic1.zhimg.com/v2-73cb0d06906e07736291ee364e8ac308_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p> 1. 关闭剪切气缸</p><p> 2. 步进电机送料1步距</p><p> 3. 打开剪切气缸，当剪料到位时，关闭剪切气缸</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3 错误报警</b></p><ol><li>电机过载信号</li><li>电机角度不到位超过10秒钟</li><li>急停信号</li><li>来自上位机的无料信号</li></ol><p><b>4 其他参数</b></p><p>送料齿轮减速比  3</p><p>一转脉冲数 1600</p><p>轮子转一圈大致周长  90mm</p><p>一个脉冲代表实际距离  0.018</p><p class=\"ztext-empty-paragraph\"><br/></p><p>这次并未采用美国国家仪器的采集卡，因为用到了PLC，那就干脆用485modbus还有Labview通讯。.</p><p>PLC端用于动作控制，并提供报警反馈，Labview用于发送信号告知PLC执行动作，另外，部分参数plc端提供寄存器地址供Labview端调用读取及写入。</p><h2>5 Labview与PLC通讯</h2><p>PLC端控制电机及气缸动作，并进行报警检测</p><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-d8c6fe0098e158c3065f29f63006aa24_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"664\" data-rawheight=\"722\" class=\"origin_image zh-lightbox-thumb\" width=\"664\" data-original=\"https://pic1.zhimg.com/v2-d8c6fe0098e158c3065f29f63006aa24_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;664&#39; height=&#39;722&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"664\" data-rawheight=\"722\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"664\" data-original=\"https://pic1.zhimg.com/v2-d8c6fe0098e158c3065f29f63006aa24_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-d8c6fe0098e158c3065f29f63006aa24_b.jpg\"/></figure><p>PLC端提供13个寄存器地址供Labview通讯： </p><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-4d225c7253cec3c09949dab9061d4e6a_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"656\" data-rawheight=\"270\" class=\"origin_image zh-lightbox-thumb\" width=\"656\" data-original=\"https://pic3.zhimg.com/v2-4d225c7253cec3c09949dab9061d4e6a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;656&#39; height=&#39;270&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"656\" data-rawheight=\"270\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"656\" data-original=\"https://pic3.zhimg.com/v2-4d225c7253cec3c09949dab9061d4e6a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-4d225c7253cec3c09949dab9061d4e6a_b.jpg\"/></figure><p>Controller 通过扫描并处理PLC反馈来的16进制数值用于目标值读取并写入。</p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-de89703739aeb8b767ef23ab9fd5a2c3_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"419\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-de89703739aeb8b767ef23ab9fd5a2c3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;419&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"419\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-de89703739aeb8b767ef23ab9fd5a2c3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-de89703739aeb8b767ef23ab9fd5a2c3_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic2.zhimg.com/v2-4ca58ce33440e71f3072f30f590c5399_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"759\" data-rawheight=\"464\" class=\"origin_image zh-lightbox-thumb\" width=\"759\" data-original=\"https://pic2.zhimg.com/v2-4ca58ce33440e71f3072f30f590c5399_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;759&#39; height=&#39;464&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"759\" data-rawheight=\"464\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"759\" data-original=\"https://pic2.zhimg.com/v2-4ca58ce33440e71f3072f30f590c5399_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-4ca58ce33440e71f3072f30f590c5399_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>6 Labview与Loadcell 串口通讯</b></h2><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-27762690b8a10c1e7bd17381c6fdc6ed_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"318\" data-rawheight=\"295\" class=\"content_image\" width=\"318\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;318&#39; height=&#39;295&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"318\" data-rawheight=\"295\" class=\"content_image lazy\" width=\"318\" data-actualsrc=\"https://pic2.zhimg.com/v2-27762690b8a10c1e7bd17381c6fdc6ed_b.jpg\"/></figure><p>按照通讯说明，在通讯之前先校准厂家参数，我们之前有买一个数显表，可以看到实际的压力值，然后使用串口通讯软件就可以分析一下变送器发过来的16进制数值。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-4b59a2df58470d88cfc022fede4b288f_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"600\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-4b59a2df58470d88cfc022fede4b288f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;600&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"600\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-4b59a2df58470d88cfc022fede4b288f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-4b59a2df58470d88cfc022fede4b288f_b.jpg\"/></figure><p>同样，进行通讯采集的时候其实就是不断的发送规定的16禁止代码然后得到变送器反馈数据并进一步分析出被测量值。</p><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-a53631f200ece26cb651c76867768f74_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"337\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-a53631f200ece26cb651c76867768f74_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;337&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"337\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-a53631f200ece26cb651c76867768f74_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-a53631f200ece26cb651c76867768f74_b.jpg\"/></figure><p>当得到这组数据的时候还以为算错了，有80kg的剪切力，WTF，这么大的力谁能剪的动这剪刀？</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-5d325ce127358d72beead019ba666922_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"611\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-5d325ce127358d72beead019ba666922_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;611&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"611\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-5d325ce127358d72beead019ba666922_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-5d325ce127358d72beead019ba666922_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>他们说老外力气比较大。</p><p class=\"ztext-empty-paragraph\"><br/></p><p>报表部分：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-cfe362b6857def470bb93b473a8e7a6a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"910\" data-rawheight=\"187\" class=\"origin_image zh-lightbox-thumb\" width=\"910\" data-original=\"https://pic3.zhimg.com/v2-cfe362b6857def470bb93b473a8e7a6a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;910&#39; height=&#39;187&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"910\" data-rawheight=\"187\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"910\" data-original=\"https://pic3.zhimg.com/v2-cfe362b6857def470bb93b473a8e7a6a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-cfe362b6857def470bb93b473a8e7a6a_b.jpg\"/></figure><p>raw data 用于保存每次cycle的测量值，Sum用于汇总测试参数。</p><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>05 PS.</b></h2><p>已经跑了一年了，做的时候有一丢丢难度，可能就在仪器选型，方案定义上面，至于软件的开发就只是时间的问题了。我的软件也可以写的更好一点。</p><p>包括PC，touchscreen所有的配件全部是自己组装的，对windows系统也做了一些阉割，去掉了很多没有的功能。</p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-cfcd5b80e8e310739aa2caa1526d4a73_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"700\" data-rawheight=\"585\" class=\"origin_image zh-lightbox-thumb\" width=\"700\" data-original=\"https://pic4.zhimg.com/v2-cfcd5b80e8e310739aa2caa1526d4a73_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;700&#39; height=&#39;585&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"700\" data-rawheight=\"585\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"700\" data-original=\"https://pic4.zhimg.com/v2-cfcd5b80e8e310739aa2caa1526d4a73_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-cfcd5b80e8e310739aa2caa1526d4a73_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-d60c08719029c0625a3a203da4f53e1d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"350\" data-rawheight=\"251\" class=\"content_image\" width=\"350\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;350&#39; height=&#39;251&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"350\" data-rawheight=\"251\" class=\"content_image lazy\" width=\"350\" data-actualsrc=\"https://pic2.zhimg.com/v2-d60c08719029c0625a3a203da4f53e1d_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>做这个就跟玩树莓派一样，填完一个坑还要耐心的面对下一个未知的坑，这个就跟说的这就是乐趣所在吧。</p><p></p>", 
            "topic": [
                {
                    "tag": "测试", 
                    "tagLink": "https://api.zhihu.com/topics/19551336"
                }, 
                {
                    "tag": "软件测试", 
                    "tagLink": "https://api.zhihu.com/topics/19562409"
                }, 
                {
                    "tag": "LabVIEW", 
                    "tagLink": "https://api.zhihu.com/topics/19599522"
                }, 
                {
                    "tag": "物理学", 
                    "tagLink": "https://api.zhihu.com/topics/19556950"
                }, 
                {
                    "tag": "自然科学", 
                    "tagLink": "https://api.zhihu.com/topics/19553298"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/36176779", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 1, 
            "title": "RFID Card Clone", 
            "content": "<p></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-7e6a5def91118fb2bb11ee661750b8aa_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic3.zhimg.com/v2-7e6a5def91118fb2bb11ee661750b8aa_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><blockquote><i>你有没有了解过你的学生证，厂牌还有公交卡，地铁卡是以一种什么样原理存在？</i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-852fe1613a16e49fbaf0edaaa7891c1e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic3.zhimg.com/v2-852fe1613a16e49fbaf0edaaa7891c1e_b.jpg\"/></figure><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/973150474362462208\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic1.zhimg.com/80/v2-cac4d0d91f6d3117b476a37ac13316a4_b.jpg\" data-lens-id=\"973150474362462208\"><img class=\"thumbnail\" src=\"https://pic1.zhimg.com/80/v2-cac4d0d91f6d3117b476a37ac13316a4_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/973150474362462208</span></span></a><p><b>1 About NFC</b></p><h2><b>NFC (Near Field Communication)</b></h2><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/973149882878509056\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic1.zhimg.com/80/v2-bfca7cae5c7214ec7665a5c32e887078_b.jpg\" data-lens-id=\"973149882878509056\"><img class=\"thumbnail\" src=\"https://pic1.zhimg.com/80/v2-bfca7cae5c7214ec7665a5c32e887078_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/973149882878509056</span></span></a><p>NFC技术是由NXP（当时的Phillips）发明的，NFC（近场通信）是一组短距离（通常高达10厘米）的无线通信技术，旨在提供两种设备之间的轻量和安全通信。</p><p>NFC的操作是在13.56 MHz，它基于一个“启动端”initiator和“目标端”target model，在这个model中，发起者生成一个小的磁场来驱动目标，这意味着目标端将不需要电源。</p><p>这种通信方式被称为被动通信<b>Passive Communication</b>，用于读取和写入小型、廉价的13.56 MHz RFID标签，这些标签是基于ISO14443A等标准的。</p><p>当两个设备都有电源时，主动通信<b>Active communication</b> （点对点）也是可能的，在这种情况下，每个设备交替地创建自己的磁场，从机作为目标，反之亦然。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2 Hardware</b></p><ul><li>Arduino nano</li><li>RFID RC522</li><li>MIFARE Classic (1k)</li></ul><p><b>3 Software</b></p><ul><li>Arduino Ide 1.8.5</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p>硬件连接图如下，Arduino nano v3：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-39a4da9b23ea6401e3499c95331b93e3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"357\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-39a4da9b23ea6401e3499c95331b93e3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;357&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"357\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-39a4da9b23ea6401e3499c95331b93e3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-39a4da9b23ea6401e3499c95331b93e3_b.jpg\"/></figure><p><b>4 RC522 与 PN532</b></p><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-b460fa2085c303d3796c5eaad5b2629a_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"1440\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-b460fa2085c303d3796c5eaad5b2629a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;1440&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"1440\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-b460fa2085c303d3796c5eaad5b2629a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-b460fa2085c303d3796c5eaad5b2629a_b.jpg\"/></figure><p>上方的是RC522，下方为PN532。</p><p>两者都是NXP公司生产的芯片，而且都支持Mifare 1K，4K，UltraLight，和DESFire卡，协议ISO / IEC 14443-4，用于13.56MHz的近场通信，兼容SPI，I2C，UART接口。</p><p>区别在于RC522是一个硬连接的逻辑，寄存器基于前端。所有的硬件和协议抽象逻辑都必须在mirocontroller上实现。另一方面，PN532是一个集成的NFC控制器，因此硬件和协议抽象在PN532中运行，并且与非接触式接口紧密耦合。在host端，为了激活/检测一个标签，必须发送一些命令，而RC522需要多个低层次的寄存器操作，每个操作都会产生一个单独的spi/i2c传输。PN532直接在芯片上执行这个低级寄存器操作（在PN532中），所以操作一个寄存器甚至不需要1微秒。不过host端写入RC522需要花费几百微秒（计算软件开销、spi/i2c传输时间等）。另外，RC522 工作电流为13—26mA/直流3.3V，而PN532为100mA/直流3.3V。</p><p>粗俗的认为，PN532除了兼容RC522的所有功能，还有传输速度，处理数据会更快。不过我们为了实现Mifare 1K卡的复制，用RC522足以。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5Program</b></p><p>在开始前需将环境配置好，我们需要Arduino的MFRC522库文件，硬件上读取与写入都是使用SPI（Serial Peripheral Interface）来实现。</p><p>下载github源码并解压至Arduino IDE 安装路径library文件夹下：</p><p><i><a href=\"https://link.zhihu.com/?target=https%3A//github.com/miguelbalboa/rfid\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/miguelbalboa</span><span class=\"invisible\">/rfid</span><span class=\"ellipsis\"></span></a></i></p><p>读取Mifare 1K卡的UID信息，打卡串口模拟器记录UID值：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-5c452e49035d977c1436a5eca284890a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"715\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https://pic3.zhimg.com/v2-5c452e49035d977c1436a5eca284890a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;800&#39; height=&#39;715&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"800\" data-rawheight=\"715\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https://pic3.zhimg.com/v2-5c452e49035d977c1436a5eca284890a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-5c452e49035d977c1436a5eca284890a_b.jpg\"/></figure><p>初始化之后，需要识别key 值权限来实现身份验证。</p><p>一般的出厂设置值为 KeyA: 0xFF 0xFF 0xFF 0xFF 0xFF 0xFF，还有一些常用key：</p><p>0XD3 0XF7 0XD3 0XF7 0XD3 0XF7</p><p>0XA0 0XA1 0XA2 0XA3 0XA4 0XA5</p><p>0XB0 0XB1 0XB2 0XB3 0XB4 0XB5</p><p>0X4D 0X3A 0X99 0XC3 0X51 0XDD</p><p>0X1A 0X98 0X2C 0X7E 0X45 0X9A</p><p>0XAA 0XBB 0XCC 0XDD 0XEE 0XFF</p><p>0X00 0X00 0X00 0X00 0X00 0X00</p><p>0XAB 0XCD 0XEF 0X12 0X34 0X56</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-68bf2edb8736affbe5cc6b4fe024ea34_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"721\" data-rawheight=\"307\" class=\"origin_image zh-lightbox-thumb\" width=\"721\" data-original=\"https://pic1.zhimg.com/v2-68bf2edb8736affbe5cc6b4fe024ea34_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;721&#39; height=&#39;307&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"721\" data-rawheight=\"307\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"721\" data-original=\"https://pic1.zhimg.com/v2-68bf2edb8736affbe5cc6b4fe024ea34_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-68bf2edb8736affbe5cc6b4fe024ea34_b.jpg\"/></figure><p>识别之后我们94 A6 DC CD 写入新卡：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-f48cea05524c177f2f46432f95d7c62e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"985\" data-rawheight=\"704\" class=\"origin_image zh-lightbox-thumb\" width=\"985\" data-original=\"https://pic3.zhimg.com/v2-f48cea05524c177f2f46432f95d7c62e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;985&#39; height=&#39;704&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"985\" data-rawheight=\"704\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"985\" data-original=\"https://pic3.zhimg.com/v2-f48cea05524c177f2f46432f95d7c62e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-f48cea05524c177f2f46432f95d7c62e_b.jpg\"/></figure><p>提示写入成功：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-3c54447a75b85fed2f84607b1717435a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"655\" data-rawheight=\"272\" class=\"origin_image zh-lightbox-thumb\" width=\"655\" data-original=\"https://pic3.zhimg.com/v2-3c54447a75b85fed2f84607b1717435a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;655&#39; height=&#39;272&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"655\" data-rawheight=\"272\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"655\" data-original=\"https://pic3.zhimg.com/v2-3c54447a75b85fed2f84607b1717435a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-3c54447a75b85fed2f84607b1717435a_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-d03c5481a1d45b12ece7478fde8ab4fb_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"23\" data-rawheight=\"19\" class=\"content_image\" width=\"23\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;23&#39; height=&#39;19&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"23\" data-rawheight=\"19\" class=\"content_image lazy\" width=\"23\" data-actualsrc=\"https://pic4.zhimg.com/v2-d03c5481a1d45b12ece7478fde8ab4fb_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>当然也有可能出现下面这种情况，很有可能是key值不对获取不到写入权限造成。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-54336269505a10187055a114704e4f0d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"691\" data-rawheight=\"272\" class=\"origin_image zh-lightbox-thumb\" width=\"691\" data-original=\"https://pic2.zhimg.com/v2-54336269505a10187055a114704e4f0d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;691&#39; height=&#39;272&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"691\" data-rawheight=\"272\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"691\" data-original=\"https://pic2.zhimg.com/v2-54336269505a10187055a114704e4f0d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-54336269505a10187055a114704e4f0d_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-d03c5481a1d45b12ece7478fde8ab4fb_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"23\" data-rawheight=\"19\" class=\"content_image\" width=\"23\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;23&#39; height=&#39;19&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"23\" data-rawheight=\"19\" class=\"content_image lazy\" width=\"23\" data-actualsrc=\"https://pic4.zhimg.com/v2-d03c5481a1d45b12ece7478fde8ab4fb_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>本demo实现了简单的uid复制案例也是被动通讯如门禁访问，因为启动端是通过识别每张卡的Unique Identifier 来判断卡的权限。</p><p>那如果要实现数据读取及写入，比如食堂卡，地铁卡，公交卡数据写入等，还要更进一步了解NFC <b>数据交换格式</b> <b>Data Exchange Format (NDEF)</b>等知识，从而访问Mifare卡（1 K或4 K）的EEPROM内存扇区来进行解密及修改。</p><p>那想要进一步了解RFID相关，还请关注我也不知道什么时候发布的下一期。</p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "RFID（射频识别）", 
                    "tagLink": "https://api.zhihu.com/topics/19554949"
                }, 
                {
                    "tag": "互联网", 
                    "tagLink": "https://api.zhihu.com/topics/19550517"
                }, 
                {
                    "tag": "Arduino", 
                    "tagLink": "https://api.zhihu.com/topics/19581430"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35915738", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 0, 
            "title": "Photosensitive Timer For Battery Charger", 
            "content": "<p></p><blockquote><i>前段时间收到Battery Test Lab的申请，他们跟我说苦恼于锂电池包充电时间测量，每次都是人工来掐表来读取充电的时间（40-60min），一次需要测试上百个电池，这样既耗费时间又耗费人力。可否设计一款便携式自动记录充电时间的测试仪器？答案当然可以。</i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><p>那如何开始？</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-e0de7821aaf716939fcd5907f595d29e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"100\" data-rawheight=\"100\" class=\"content_image\" width=\"100\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;100&#39; height=&#39;100&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"100\" data-rawheight=\"100\" class=\"content_image lazy\" width=\"100\" data-actualsrc=\"https://pic3.zhimg.com/v2-e0de7821aaf716939fcd5907f595d29e_b.jpg\"/></figure><p>需求分析完是这样的：<br/></p><p>1. 计时器计时显示</p><p>2. 便携体积小，功耗小</p><p>3. 如何判断充电开始信号，开始计时</p><p>4. 如何判断充电结束信号，结束计时</p><p class=\"ztext-empty-paragraph\"><br/></p><p>对于充电信号的采集，无法从充电器内部芯片状态读取，不过我们发现每一款充电器上都有一款指示灯，指示灯的闪烁频率反映着充电状态，<br/>那么，难点是这样： </p><p>1. 选用何种显示屏及光敏电阻？</p><p>2. 计时芯片很多种，选哪种才算低功耗，最好是MA级以下</p><p>3. 如何供电。18650？</p><p>4. 每款充电器的闪烁灯频率都不一样，如何实现一对多模式？</p><p class=\"ztext-empty-paragraph\"><br/></p><p>其中一款的充电模式, 充电完成及待机状态.</p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/970678302389882880\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic4.zhimg.com/80/v2-502c149a086df7f4b1bd26ef240253f7_b.jpg\" data-lens-id=\"970678302389882880\"><img class=\"thumbnail\" src=\"https://pic4.zhimg.com/80/v2-502c149a086df7f4b1bd26ef240253f7_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/970678302389882880</span></span></a><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-dff49e6e6ac6c236019acfb6c84eb9c6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"381\" data-rawheight=\"412\" class=\"content_image\" width=\"381\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;381&#39; height=&#39;412&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"381\" data-rawheight=\"412\" class=\"content_image lazy\" width=\"381\" data-actualsrc=\"https://pic3.zhimg.com/v2-dff49e6e6ac6c236019acfb6c84eb9c6_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>于是，我们开始定义一下所需工具材料</p><h2>1 Hardware</h2><ul><li><b>MSP430主芯片</b></li><li><b>光敏电阻</b></li><li><b>LED显示板</b></li><li><b>3.5mm耳机插头</b></li><li><b>18650锂电池</b></li><li><b>电压过滤芯片</b></li><li><b>电阻电容三极管若干</b></li></ul><h2>2 Software</h2><ul><li><b>C++</b></li><li><b>Solidworks</b> </li><li><b>Chips</b></li></ul><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-e0de7821aaf716939fcd5907f595d29e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"100\" data-rawheight=\"100\" class=\"content_image\" width=\"100\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;100&#39; height=&#39;100&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"100\" data-rawheight=\"100\" class=\"content_image lazy\" width=\"100\" data-actualsrc=\"https://pic3.zhimg.com/v2-e0de7821aaf716939fcd5907f595d29e_b.jpg\"/></figure><p>开始试了一下几款芯片比如STM32，芯片如此强大当然可以成功，可是功耗太大（20ma左右），一节18650电池根本用不了几天，后来发现一款TI德州仪器的一款性能很强的芯片：MSP430，低功耗 4.5uA, 一节18650电池理论上可以用100年，那就是我们需要的。<br/><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-062a81026e52781d6e0bc4ff4145f696_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"545\" data-rawheight=\"312\" class=\"origin_image zh-lightbox-thumb\" width=\"545\" data-original=\"https://pic3.zhimg.com/v2-062a81026e52781d6e0bc4ff4145f696_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;545&#39; height=&#39;312&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"545\" data-rawheight=\"312\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"545\" data-original=\"https://pic3.zhimg.com/v2-062a81026e52781d6e0bc4ff4145f696_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-062a81026e52781d6e0bc4ff4145f696_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-0863e8c666d3831b8bbc421be7efdc0d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"206\" data-rawheight=\"176\" class=\"content_image\" width=\"206\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;206&#39; height=&#39;176&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"206\" data-rawheight=\"176\" class=\"content_image lazy\" width=\"206\" data-actualsrc=\"https://pic2.zhimg.com/v2-0863e8c666d3831b8bbc421be7efdc0d_b.jpg\"/></figure><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-8b361c2be4435c3f83f09d02e5852446_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1003\" data-rawheight=\"729\" class=\"origin_image zh-lightbox-thumb\" width=\"1003\" data-original=\"https://pic3.zhimg.com/v2-8b361c2be4435c3f83f09d02e5852446_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1003&#39; height=&#39;729&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1003\" data-rawheight=\"729\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1003\" data-original=\"https://pic3.zhimg.com/v2-8b361c2be4435c3f83f09d02e5852446_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-8b361c2be4435c3f83f09d02e5852446_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>3 Photosensitive Resistor</h2><p>每种电阻的感光度都不一样，买了几十种回来试了一下，最终使用5528这一款。通过 3.5mm 耳机口跟主板相连接，测试的时候只需要将封装好的光敏电阻放置于充电器状态灯表面即可。 </p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-0307d994fecaa5bed6cacc0b880579ec_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"767\" data-rawheight=\"705\" class=\"origin_image zh-lightbox-thumb\" width=\"767\" data-original=\"https://pic1.zhimg.com/v2-0307d994fecaa5bed6cacc0b880579ec_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;767&#39; height=&#39;705&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"767\" data-rawheight=\"705\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"767\" data-original=\"https://pic1.zhimg.com/v2-0307d994fecaa5bed6cacc0b880579ec_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-0307d994fecaa5bed6cacc0b880579ec_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>4 Package</h2><p>这次没有批量定制pcb，手工焊的板，零件搭配好之后，接下来就是包装了，右侧做了一个电源开关，留出屏幕口，3.5mm外接口，LED点量显示口及功能键口，用Solidwork话的图，材料是铝材，做完之后很美观，还像个产品。</p><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-876b1ef46d739e0a3f31e0df4c97fc80_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"742\" data-rawheight=\"736\" class=\"origin_image zh-lightbox-thumb\" width=\"742\" data-original=\"https://pic1.zhimg.com/v2-876b1ef46d739e0a3f31e0df4c97fc80_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;742&#39; height=&#39;736&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"742\" data-rawheight=\"736\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"742\" data-original=\"https://pic1.zhimg.com/v2-876b1ef46d739e0a3f31e0df4c97fc80_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-876b1ef46d739e0a3f31e0df4c97fc80_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-a2e61882b8fabee56fb6bbd2f94b9e47_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"459\" data-rawheight=\"364\" class=\"origin_image zh-lightbox-thumb\" width=\"459\" data-original=\"https://pic4.zhimg.com/v2-a2e61882b8fabee56fb6bbd2f94b9e47_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;459&#39; height=&#39;364&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"459\" data-rawheight=\"364\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"459\" data-original=\"https://pic4.zhimg.com/v2-a2e61882b8fabee56fb6bbd2f94b9e47_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a2e61882b8fabee56fb6bbd2f94b9e47_b.jpg\"/></figure><figure data-size=\"small\"><noscript><img src=\"https://pic2.zhimg.com/v2-acd6d513b5bbc0675ad75a5cd6f31f7d_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1031\" data-rawheight=\"725\" class=\"origin_image zh-lightbox-thumb\" width=\"1031\" data-original=\"https://pic2.zhimg.com/v2-acd6d513b5bbc0675ad75a5cd6f31f7d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1031&#39; height=&#39;725&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1031\" data-rawheight=\"725\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1031\" data-original=\"https://pic2.zhimg.com/v2-acd6d513b5bbc0675ad75a5cd6f31f7d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-acd6d513b5bbc0675ad75a5cd6f31f7d_b.jpg\"/></figure><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-8e6d59911936bd73d27a66686315227a_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1066\" data-rawheight=\"771\" class=\"origin_image zh-lightbox-thumb\" width=\"1066\" data-original=\"https://pic3.zhimg.com/v2-8e6d59911936bd73d27a66686315227a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1066&#39; height=&#39;771&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1066\" data-rawheight=\"771\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1066\" data-original=\"https://pic3.zhimg.com/v2-8e6d59911936bd73d27a66686315227a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-8e6d59911936bd73d27a66686315227a_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-e3ee40dfcd2886b8ad613c94d5f4d5ce_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"153\" data-rawheight=\"101\" class=\"content_image\" width=\"153\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;153&#39; height=&#39;101&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"153\" data-rawheight=\"101\" class=\"content_image lazy\" width=\"153\" data-actualsrc=\"https://pic3.zhimg.com/v2-e3ee40dfcd2886b8ad613c94d5f4d5ce_b.jpg\"/></figure><h2>5 Program</h2><p>为了满足不同频率的状态灯，我们将前6s设置为自学习状态，通过采集频率大小用于判断处于何种模式，计时开始后，当状态灯频率进入满电状态频率时则停止计时。<br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-cd3451a38d1b638ae934ff9801eb3ce3_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"663\" data-rawheight=\"744\" class=\"origin_image zh-lightbox-thumb\" width=\"663\" data-original=\"https://pic4.zhimg.com/v2-cd3451a38d1b638ae934ff9801eb3ce3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;663&#39; height=&#39;744&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"663\" data-rawheight=\"744\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"663\" data-original=\"https://pic4.zhimg.com/v2-cd3451a38d1b638ae934ff9801eb3ce3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-cd3451a38d1b638ae934ff9801eb3ce3_b.jpg\"/></figure><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-7ffb5f8f6b8d9d0176a932e24d44a73e_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"731\" data-rawheight=\"731\" class=\"origin_image zh-lightbox-thumb\" width=\"731\" data-original=\"https://pic3.zhimg.com/v2-7ffb5f8f6b8d9d0176a932e24d44a73e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;731&#39; height=&#39;731&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"731\" data-rawheight=\"731\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"731\" data-original=\"https://pic3.zhimg.com/v2-7ffb5f8f6b8d9d0176a932e24d44a73e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-7ffb5f8f6b8d9d0176a932e24d44a73e_b.jpg\"/></figure><p>“STUDY”是自学习状态；“LIGHT”显示光强度；“RATIO”显示亮灯占有时间比；“CLOCK”显示计时器时间，时:分:秒。时间精度度为2分/24小时 </p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-d722760d1c5d4c750aab8e45e1668fc3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"494\" data-rawheight=\"825\" class=\"origin_image zh-lightbox-thumb\" width=\"494\" data-original=\"https://pic4.zhimg.com/v2-d722760d1c5d4c750aab8e45e1668fc3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;494&#39; height=&#39;825&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"494\" data-rawheight=\"825\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"494\" data-original=\"https://pic4.zhimg.com/v2-d722760d1c5d4c750aab8e45e1668fc3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-d722760d1c5d4c750aab8e45e1668fc3_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>6 PS</h2><p>难度可能就是根据需求分析出解决方案这一关，然后比较麻烦的就是需要购买大量的元件回来测试，这是一项繁重且问题特别多的工作。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-2bfc0d45cdfc364c28ff13b9c4506396_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"990\" data-rawheight=\"658\" class=\"origin_image zh-lightbox-thumb\" width=\"990\" data-original=\"https://pic3.zhimg.com/v2-2bfc0d45cdfc364c28ff13b9c4506396_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;990&#39; height=&#39;658&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"990\" data-rawheight=\"658\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"990\" data-original=\"https://pic3.zhimg.com/v2-2bfc0d45cdfc364c28ff13b9c4506396_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-2bfc0d45cdfc364c28ff13b9c4506396_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-4c91c690dce3aaeb5a9deacf933d5137_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"491\" data-rawheight=\"472\" class=\"origin_image zh-lightbox-thumb\" width=\"491\" data-original=\"https://pic4.zhimg.com/v2-4c91c690dce3aaeb5a9deacf933d5137_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;491&#39; height=&#39;472&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"491\" data-rawheight=\"472\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"491\" data-original=\"https://pic4.zhimg.com/v2-4c91c690dce3aaeb5a9deacf933d5137_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-4c91c690dce3aaeb5a9deacf933d5137_b.jpg\"/></figure><p></p><p></p>", 
            "topic": [
                {
                    "tag": "计时器", 
                    "tagLink": "https://api.zhihu.com/topics/19721159"
                }, 
                {
                    "tag": "电子产品", 
                    "tagLink": "https://api.zhihu.com/topics/19565023"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35623414", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 2, 
            "title": "树莓派如何实现无键盘鼠标配置ssh和wifi", 
            "content": "<p></p><p></p><blockquote><i>有一次我拿着一块新板PI zero w 问Alex：这玩意那么小，你有没有想过 Pizero 在不使用 usb OTG 和 mini HDMI 配置鼠标键盘和屏幕的前提下如果连上 wifi 并通过ssh连上控制？</i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-66fdfa16cff2e0d5eca010e5db7d3ac6_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"859\" data-rawheight=\"518\" class=\"origin_image zh-lightbox-thumb\" width=\"859\" data-original=\"https://pic3.zhimg.com/v2-66fdfa16cff2e0d5eca010e5db7d3ac6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;859&#39; height=&#39;518&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"859\" data-rawheight=\"518\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"859\" data-original=\"https://pic3.zhimg.com/v2-66fdfa16cff2e0d5eca010e5db7d3ac6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-66fdfa16cff2e0d5eca010e5db7d3ac6_b.jpg\"/></figure><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-225658e59028c79720ab4100e7b38dfe_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"829\" data-rawheight=\"493\" class=\"origin_image zh-lightbox-thumb\" width=\"829\" data-original=\"https://pic3.zhimg.com/v2-225658e59028c79720ab4100e7b38dfe_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;829&#39; height=&#39;493&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"829\" data-rawheight=\"493\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"829\" data-original=\"https://pic3.zhimg.com/v2-225658e59028c79720ab4100e7b38dfe_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-225658e59028c79720ab4100e7b38dfe_b.jpg\"/></figure><p>其实答案只需修改/boot下的文件即可：</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1.将系统镜像写入空白卡。</p><p>2.于 TF卡/boot/目录下新建并命名一个ssh的文件：</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-aff190315b9fdd744be287972bc4e2f2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"405\" data-rawheight=\"178\" class=\"content_image\" width=\"405\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;405&#39; height=&#39;178&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"405\" data-rawheight=\"178\" class=\"content_image lazy\" width=\"405\" data-actualsrc=\"https://pic3.zhimg.com/v2-aff190315b9fdd744be287972bc4e2f2_b.jpg\"/></figure><p>3.新建并命名 wpa-supplicant.conf进行wifi配置： </p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-17b08a21304b3fc50229c2e8bba0b6ab_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"476\" data-rawheight=\"145\" class=\"origin_image zh-lightbox-thumb\" width=\"476\" data-original=\"https://pic4.zhimg.com/v2-17b08a21304b3fc50229c2e8bba0b6ab_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;476&#39; height=&#39;145&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"476\" data-rawheight=\"145\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"476\" data-original=\"https://pic4.zhimg.com/v2-17b08a21304b3fc50229c2e8bba0b6ab_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-17b08a21304b3fc50229c2e8bba0b6ab_b.jpg\"/></figure><blockquote><i>ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev <br/>update_config=1 <br/>country=GB <br/><br/>network={ <br/>    ssid=&#34;wifi name&#34; <br/>    psk=&#34;wifi password&#34; <br/>    key_mgmt=WPA-PSK <br/>    }</i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><p>4.完成后，将TF卡插入raspberry pi 并启动电源。</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image\" width=\"200\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;200&#39; height=&#39;200&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image lazy\" width=\"200\" data-actualsrc=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\"/></figure><h2>Refer to</h2><p class=\"ztext-empty-paragraph\"><br/></p><p><a href=\"https://link.zhihu.com/?target=https%3A//www.sunfounder.com/learn/download/U21hcnRfVmlkZW9fQ2FyX1YyLjBfZm9yX1Jhc3BiZXJyeV9QaV9QaUNhci1WXy5wZGY%3D/dispi\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">sunfounder.com/learn/do</span><span class=\"invisible\">wnload/U21hcnRfVmlkZW9fQ2FyX1YyLjBfZm9yX1Jhc3BiZXJyeV9QaV9QaUNhci1WXy5wZGY=/dispi</span><span class=\"ellipsis\"></span></a></p><p></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }
            ], 
            "comments": [
                {
                    "userName": "大腿腿腿腿腿", 
                    "userLink": "https://www.zhihu.com/people/fedf888ef6e8632c01cb40234f38b6d8", 
                    "content": "你好～向您请教一个问题 我在Windows系统下插入sd卡往boot目录下新建了一个JSON文件，然后sd卡接回树莓派后，JSON文件的内容全部变成了乱码，文本中本身并没有中文，想请问一下这种情况应该怎么办", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "teddy", 
                            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
                            "content": "你可以将保存文本的格式改一下.", 
                            "likes": 0, 
                            "replyToAuthor": "大腿腿腿腿腿"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34614587", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 12, 
            "title": "Raspberry pi 3 B+ vs 3 B", 
            "content": "<p></p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/957975142635180032\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic3.zhimg.com/80/v2-ae5e1a2d889b44c65b6c908939c24f3a_b.jpg\" data-lens-id=\"957975142635180032\"><img class=\"thumbnail\" src=\"https://pic3.zhimg.com/80/v2-ae5e1a2d889b44c65b6c908939c24f3a_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/957975142635180032</span></span></a><p></p><blockquote><i>在Pi day 这天，Raspberry pi 时隔两年发布了新款产品3B plus，对于Pi迷来说除了霍金去给爱因斯坦庆生的头条，自然没有比这个新闻更让人关注了。</i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-7ca2d9d4b4fdbd32581573e868ea0a4b_b.jpg\" data-size=\"small\" data-rawwidth=\"1266\" data-rawheight=\"791\" class=\"origin_image zh-lightbox-thumb\" width=\"1266\" data-original=\"https://pic4.zhimg.com/v2-7ca2d9d4b4fdbd32581573e868ea0a4b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1266&#39; height=&#39;791&#39;&gt;&lt;/svg&gt;\" data-size=\"small\" data-rawwidth=\"1266\" data-rawheight=\"791\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1266\" data-original=\"https://pic4.zhimg.com/v2-7ca2d9d4b4fdbd32581573e868ea0a4b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-7ca2d9d4b4fdbd32581573e868ea0a4b_b.jpg\"/><figcaption>3B+</figcaption></figure><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-f5957218054985a15140395197aa04cf_b.jpg\" data-size=\"small\" data-rawwidth=\"1314\" data-rawheight=\"832\" class=\"origin_image zh-lightbox-thumb\" width=\"1314\" data-original=\"https://pic4.zhimg.com/v2-f5957218054985a15140395197aa04cf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1314&#39; height=&#39;832&#39;&gt;&lt;/svg&gt;\" data-size=\"small\" data-rawwidth=\"1314\" data-rawheight=\"832\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1314\" data-original=\"https://pic4.zhimg.com/v2-f5957218054985a15140395197aa04cf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-f5957218054985a15140395197aa04cf_b.jpg\"/><figcaption>3B</figcaption></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>相比3b来说，虽然只多了个 ’<b>+</b>‘，但还是有不少融入了进来的科技元素的，比如说这两年风行的5G-wifi，还有针对蓝牙的升级，soc的升级，功耗的减少，还有POE(Power Over Ethernet)的增加等等，意味着性能的进一步提升，当然也没有达到自行车升级为摩托车的程度，不过毕竟要在在现有的科技背景下做出这个微型电脑还是不容易的。对此我做了一下对比，黄色背景的表示两者不一样的特征：</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-5ee858c4ce56050920b11817eaf47610_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1073\" data-rawheight=\"559\" class=\"origin_image zh-lightbox-thumb\" width=\"1073\" data-original=\"https://pic1.zhimg.com/v2-5ee858c4ce56050920b11817eaf47610_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1073&#39; height=&#39;559&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1073\" data-rawheight=\"559\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1073\" data-original=\"https://pic1.zhimg.com/v2-5ee858c4ce56050920b11817eaf47610_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-5ee858c4ce56050920b11817eaf47610_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image\" width=\"200\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;200&#39; height=&#39;200&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image lazy\" width=\"200\" data-actualsrc=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\"/></figure><h2><b>元件</b></h2><p>首先CPU的主频做了一下升级，其次在蓝牙，网络接口和功耗上面也做了相应改善，我觉得吸引我最大的两个地方就是<b>5Gwifi的增加和POE的供电方式。</b><br/>带宽一下由100MB增加到250MB~300MB，这意味着当你做web-server等依赖网络一些项目开发，速度也会越来越快。<br/>很多人可能不了解POE（以太网供电）是个什么技术，其实这个已经应用很广泛了，比如摄像头只需要一根网线实现网络与电源的结合，而不需要增加供电装置，我家的wifi接收器使用的也是POE。有了这个，我们在做项目开发的时候也会少了布线工作量，尤其开发的 stand-alone 的项目也会方便很多。<br/><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image\" width=\"200\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;200&#39; height=&#39;200&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image lazy\" width=\"200\" data-actualsrc=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\"/></figure><h2><b>尺寸布局</b></h2><p>3B+的尺寸还是一样，信用卡大小尺寸，在CPU散热这一块做了处理，更新之前做一些比较依赖 cpu 的工作项目会导致CPU这一款热量很集中，之前所做的web server 就感觉很明显，跑起来也很吃力，而这次改良后相信会好很多，wifi 芯片上面增加了 raspberrypi 的 logo，看起来也更加美观，高大上。在右上角还多了2组跳帽，用于供电方式的切换。<br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-44bb1d281f144572dcd138f15f97342a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"778\" data-rawheight=\"458\" class=\"origin_image zh-lightbox-thumb\" width=\"778\" data-original=\"https://pic3.zhimg.com/v2-44bb1d281f144572dcd138f15f97342a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;778&#39; height=&#39;458&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"778\" data-rawheight=\"458\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"778\" data-original=\"https://pic3.zhimg.com/v2-44bb1d281f144572dcd138f15f97342a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-44bb1d281f144572dcd138f15f97342a_b.jpg\"/></figure><p>总之，3B+的发布相信就是两个英文的总结吧：stronger and faster. 关键是同样的价格35刀，换谁都会选3B plus 吧。<br/><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image\" width=\"200\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;200&#39; height=&#39;200&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"200\" data-thumbnail=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.jpg\" class=\"content_image lazy\" width=\"200\" data-actualsrc=\"https://pic1.zhimg.com/v2-7de6005807551a138d6b26457bfda4a4_b.gif\"/></figure><h2><b>Refer to</b></h2><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/957975181243678720\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic1.zhimg.com/80/v2-3047eb2199ff88704063bdb1f6611430_b.jpg\" data-lens-id=\"957975181243678720\"><img class=\"thumbnail\" src=\"https://pic1.zhimg.com/80/v2-3047eb2199ff88704063bdb1f6611430_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/957975181243678720</span></span></a><ul><li><a href=\"https://link.zhihu.com/?target=https%3A//static.raspberrypi.org/files/product-briefs/Raspberry-Pi-Model-Bplus-Product-Brief.pdf\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Raspberry Pi 3 Model B+ product brief</a></li><li><a href=\"https://link.zhihu.com/?target=https%3A//www.raspberrypi.org/documentation/hardware/raspberrypi/mechanical/rpi-3bplus_mechanical.pdf\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Raspberry Pi 3 Model B+ mechanical drawing</a></li><li><a href=\"https://link.zhihu.com/?target=https%3A//www.raspberrypi.org/documentation/hardware/raspberrypi/schematics/rpi-3bplus_reduced_schematic.pdf\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Raspberry Pi 3 Model B+ schematic diagrams</a></li><li><a href=\"https://link.zhihu.com/?target=https%3A//en.wikipedia.org/wiki/Power_over_Ethernet\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">en.wikipedia.org/wiki/P</span><span class=\"invisible\">ower_over_Ethernet</span><span class=\"ellipsis\"></span></a></li><li><a href=\"https://link.zhihu.com/?target=https%3A//www.raspberrypi.org/products/raspberry-pi-3-model-b-plus/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">raspberrypi.org/product</span><span class=\"invisible\">s/raspberry-pi-3-model-b-plus/</span><span class=\"ellipsis\"></span></a></li></ul><p></p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "电子产品", 
                    "tagLink": "https://api.zhihu.com/topics/19565023"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34566913", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 1, 
            "title": "P4 如何使用树莓派控制蜂鸣器Buzzer", 
            "content": "<p></p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/957555823258378240\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic4.zhimg.com/80/v2-6dc70c18016bbf7916f96c3086937897_b.jpg\" data-lens-id=\"957555823258378240\"><img class=\"thumbnail\" src=\"https://pic4.zhimg.com/80/v2-6dc70c18016bbf7916f96c3086937897_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/957555823258378240</span></span></a><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-f61a32398d4a493c42f73175612527b9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"73\" data-rawheight=\"28\" class=\"content_image\" width=\"73\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;73&#39; height=&#39;28&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"73\" data-rawheight=\"28\" class=\"content_image lazy\" width=\"73\" data-actualsrc=\"https://pic2.zhimg.com/v2-f61a32398d4a493c42f73175612527b9_b.jpg\"/></figure><h2><b>Introduction</b></h2><p>此章节我们将学习如何使用树莓派+晶体管来驱动一个有源蜂鸣器，使其发声。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image\" width=\"387\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;387&#39; height=&#39;108&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image lazy\" width=\"387\" data-actualsrc=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\"/></figure><h2><b>What you will need</b></h2><ul><li>树莓派×1 </li><li>线路板×1</li><li>网线×1</li><li>蜂鸣器×1</li><li>NPN 三级管 (8050)×1</li><li>电阻（1KΩ）×1</li><li>跳线</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image\" width=\"387\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;387&#39; height=&#39;108&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image lazy\" width=\"387\" data-actualsrc=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\"/></figure><h2><b>What you will do</b></h2><p><b>作</b>为一种带有集成结构的电子蜂鸣器，它采用直流电源，被广泛应用于计算机、打印机、复印机、报警器、电子玩具、汽车电子设备、电话、语音设备定时器及其它电子产品。蜂鸣器可分为压电蜂鸣器和电磁蜂鸣器。压电蜂鸣器主要由多谐振荡器、压电蜂鸣片、阻抗匹配器、谐振腔、壳、等组成。电磁式蜂鸣器则主要由振荡器、电磁线圈、磁铁、振动膜片、壳体等组成。蜂鸣器又可以分为有源和无源（见下面的图片）。当我们将两个蜂鸣器的引脚朝上放置时，我们能看到绿色电路板的就是无源蜂鸣器，而另外一个没有看到电路板的就是有源蜂鸣器了。</p><p><b>有源蜂鸣器和无源蜂鸣器的区别在于：</b></p><p>有源蜂鸣器有内置振荡源，所以只要它带电就可以发出声音。而无源蜂鸣器没有振荡源，在使用直流信号时，它不会鸣叫，所以你想要驱动它的话，只能利用频率在2K-5K的方波信号。由于存在多个内置振荡电路，有源蜂鸣器通常会比无源蜂鸣器价格更昂贵。</p><b><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8b8a6167bd448caf179e356163c449db_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"953\" data-rawheight=\"343\" class=\"origin_image zh-lightbox-thumb\" width=\"953\" data-original=\"https://pic4.zhimg.com/v2-8b8a6167bd448caf179e356163c449db_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;953&#39; height=&#39;343&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"953\" data-rawheight=\"343\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"953\" data-original=\"https://pic4.zhimg.com/v2-8b8a6167bd448caf179e356163c449db_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8b8a6167bd448caf179e356163c449db_b.jpg\"/></figure></b><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>第一步：如下图所示连接电路</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-c02ccd9d7eeb597d672e2dee83826c22_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"513\" data-rawheight=\"558\" class=\"origin_image zh-lightbox-thumb\" width=\"513\" data-original=\"https://pic3.zhimg.com/v2-c02ccd9d7eeb597d672e2dee83826c22_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;513&#39; height=&#39;558&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"513\" data-rawheight=\"558\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"513\" data-original=\"https://pic3.zhimg.com/v2-c02ccd9d7eeb597d672e2dee83826c22_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-c02ccd9d7eeb597d672e2dee83826c22_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>第二步：使用<b>nano</b>编辑和保存代码</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image\" width=\"387\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;387&#39; height=&#39;108&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image lazy\" width=\"387\" data-actualsrc=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\"/></figure><h2><b>Python code</b></h2><p class=\"ztext-empty-paragraph\"><br/></p><blockquote><i>#!/usr/bin/env python<br/>import RPi.GPIO as GPIO<br/>import time<br/><br/>BeepPin = 11    # pin11<br/><br/>def setup():<br/>    GPIO.setmode(GPIO.BOARD)        # Numbers GPIOs by physical location<br/>    GPIO.setup(BeepPin, GPIO.OUT)   # Set BeepPin&#39;s mode is output<br/>    GPIO.output(BeepPin, GPIO.HIGH) # Set BeepPin high(+3.3V) to off beep<br/><br/>def loop():<br/>    while True:<br/>        GPIO.output(BeepPin, GPIO.LOW)<br/>        time.sleep(0.1)<br/>        GPIO.output(BeepPin, GPIO.HIGH)<br/>        time.sleep(0.1)<br/><br/>def destroy():<br/>    GPIO.output(BeepPin, GPIO.HIGH)    # beep off<br/>    GPIO.cleanup()                     # Release resource<br/><br/>if __name__ == &#39;__main__&#39;:     # Program start from here<br/>    print &#39;Press Ctrl+C to end the program...&#39;<br/>    setup()<br/>    try:<br/>        loop()<br/>    except KeyboardInterrupt:  # When &#39;Ctrl+C&#39; is pressed, the child program destroy() will be  executed.<br/>        destroy()</i></blockquote>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }, 
                {
                    "tag": "电子", 
                    "tagLink": "https://api.zhihu.com/topics/19573169"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34210267", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 6, 
            "title": "想上分？树莓派微信跳一跳之Python操作", 
            "content": "<p></p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/953596986092371968\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic4.zhimg.com/80/v2-5d5369b5c72a270f2d33a6e5897280af_b.jpg\" data-lens-id=\"953596986092371968\"><img class=\"thumbnail\" src=\"https://pic4.zhimg.com/80/v2-5d5369b5c72a270f2d33a6e5897280af_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/953596986092371968</span></span></a><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-58d9bd5a1f8783f2fc41e8e678ff2981_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"26\" data-rawheight=\"26\" class=\"content_image\" width=\"26\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;26&#39; height=&#39;26&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"26\" data-rawheight=\"26\" class=\"content_image lazy\" width=\"26\" data-actualsrc=\"https://pic2.zhimg.com/v2-58d9bd5a1f8783f2fc41e8e678ff2981_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4bf0da3b31aee1bb0cd114946dfc7592_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic3.zhimg.com/v2-4bf0da3b31aee1bb0cd114946dfc7592_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><i>第一次是看到朋友圈有只喵星人在玩这个游戏，那时候去马来西亚旅游了（好多老外也用微信），回来之后发现这游戏越来越火，网上笔算的也有，直接抓包修改分数的也有，Alex给我看了一篇用舵机做的，python+opencv写的代码，我说这个应该labview用视觉也能做吧！于是用python试了一遍，labview也试了一遍。</i></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-9ee29ae3d21a54ca736a035566337131_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic2.zhimg.com/v2-9ee29ae3d21a54ca736a035566337131_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-cfb06138f3cbc092f88d6eccf727228d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"319\" data-rawheight=\"520\" class=\"content_image\" width=\"319\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;319&#39; height=&#39;520&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"319\" data-rawheight=\"520\" class=\"content_image lazy\" width=\"319\" data-actualsrc=\"https://pic2.zhimg.com/v2-cfb06138f3cbc092f88d6eccf727228d_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-7cb04765065e41a3419d8080c6a4d8a2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"320\" data-rawheight=\"320\" class=\"content_image\" width=\"320\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;320&#39; height=&#39;320&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"320\" data-rawheight=\"320\" class=\"content_image lazy\" width=\"320\" data-actualsrc=\"https://pic3.zhimg.com/v2-7cb04765065e41a3419d8080c6a4d8a2_b.jpg\"/></figure><h2><b>Introduction</b></h2><p>玩法的原理看起来很简单，跳跃距离跟按压时间成正比。使用python的PILLOW库工具抓取每次跳跃之前的像素点距离，对应算出按压时间。由于算法已经有了，我这个后人也只是过来乘乘凉而已，来学习一下python的<b>各类库函数用法（PIL等)，OpenCV还有与树莓派通讯（socket）</b>。源码参考末尾。</p><p>比较关建的一步是利用OpenCV (Open Source Computer Vision Library)<b>找出棋子、计算边缘（高斯模糊转化为灰度图）、分析图像，计算距离</b>。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-7b4fc4774078ce79a2423344bfbec6ed_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"479\" data-rawheight=\"803\" class=\"origin_image zh-lightbox-thumb\" width=\"479\" data-original=\"https://pic2.zhimg.com/v2-7b4fc4774078ce79a2423344bfbec6ed_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;479&#39; height=&#39;803&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"479\" data-rawheight=\"803\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"479\" data-original=\"https://pic2.zhimg.com/v2-7b4fc4774078ce79a2423344bfbec6ed_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-7b4fc4774078ce79a2423344bfbec6ed_b.jpg\"/></figure><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-e8c716831f637d125c3c33875646ce57_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"1920\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-e8c716831f637d125c3c33875646ce57_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;1920&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1080\" data-rawheight=\"1920\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-e8c716831f637d125c3c33875646ce57_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e8c716831f637d125c3c33875646ce57_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>具体步骤如下：</p><ol><li>将手机屏幕投影至电脑</li><li>使用PIL 库截取屏幕，将每一次跳跃前图像保存至后台</li><li>利用<i>OpenCV </i>计算跳跃距离，获得按压时间</li><li>利用socket与树莓派建立通讯，windows端发送按压时间</li><li>树莓派端不停监听windows端时间数据，然后控制舵机动作</li></ol><h2><b>What you will need</b></h2><h2><b>硬件</b></h2><ul><li>树莓派</li><li>iphone</li><li>舵机上S3003</li><li>自制电容笔</li><li>自制底座</li><li>杜邦线</li><li>棉签，吸管等</li></ul><h2><b>软件</b></h2><ul><li>python with Pillow，numpy ，pyfirmata，opencv</li><li>Airplayer 镜像工具</li><li>putty</li><li>filezilla</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>What you will do</b></h2><p><b>1. </b>windows端安装运行环境：</p><div class=\"highlight\"><pre><code class=\"language-text\">pip install numpy\npip install opencv-python\npip install PIL</code></pre></div><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-399559ec1f9999a77ce2eb6a72578b70_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"666\" data-rawheight=\"79\" class=\"origin_image zh-lightbox-thumb\" width=\"666\" data-original=\"https://pic1.zhimg.com/v2-399559ec1f9999a77ce2eb6a72578b70_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;666&#39; height=&#39;79&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"666\" data-rawheight=\"79\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"666\" data-original=\"https://pic1.zhimg.com/v2-399559ec1f9999a77ce2eb6a72578b70_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-399559ec1f9999a77ce2eb6a72578b70_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.</b>widows安装Airplay镜像工具，打开iPhone客户端<b>屏幕镜像</b>，这里在windows端一定要<b>全屏显示</b>，因为利用python PIL截屏是按全屏像素定义的。</p><p class=\"ztext-empty-paragraph\"><br/></p><div class=\"highlight\"><pre><code class=\"language-text\">def pull_screenshot():\n    im = ImageGrab.grab((654, 0, 1264, 1080))\n    im.save(&#39;a.png&#39;, &#39;png&#39;)</code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.</b>将python舵机控制程序放至树莓派端（可以使用filezilla），并开启监听端口。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-6b69d9a673f097dbadbc45855d9a3cec_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"736\" data-rawheight=\"118\" class=\"origin_image zh-lightbox-thumb\" width=\"736\" data-original=\"https://pic1.zhimg.com/v2-6b69d9a673f097dbadbc45855d9a3cec_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;736&#39; height=&#39;118&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"736\" data-rawheight=\"118\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"736\" data-original=\"https://pic1.zhimg.com/v2-6b69d9a673f097dbadbc45855d9a3cec_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-6b69d9a673f097dbadbc45855d9a3cec_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic3.zhimg.com/v2-ca9bef0fda89d21975b42e0a35e784fe_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1185\" data-rawheight=\"909\" class=\"origin_image zh-lightbox-thumb\" width=\"1185\" data-original=\"https://pic3.zhimg.com/v2-ca9bef0fda89d21975b42e0a35e784fe_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1185&#39; height=&#39;909&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"1185\" data-rawheight=\"909\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1185\" data-original=\"https://pic3.zhimg.com/v2-ca9bef0fda89d21975b42e0a35e784fe_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-ca9bef0fda89d21975b42e0a35e784fe_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.</b>打开windows端python代码，设置树莓派IP地址，运行程序：</p><div class=\"highlight\"><pre><code class=\"language-text\">ip_addr = &#39;192.168.1.115&#39;</code></pre></div><p>send_time函数用于发送windows端数据，开启9999端口号：</p><p class=\"ztext-empty-paragraph\"><br/></p><div class=\"highlight\"><pre><code class=\"language-text\">def send_time(time):\n    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    s.connect((ip_addr, 9999))\n    s.send(str(time).encode(&#39;utf-8&#39;))\n    s.close()</code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.</b>制作底座和电容笔，调好按压距离。</p><p>我用了跟棉签，外面套根吸管，笔头沾水，然后包着铜线（锡纸会好一点，接触面积大），铜线接树莓派GND也可手抓住。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-67f9b06aa4a799befa960f9087462045_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"529\" data-rawheight=\"365\" class=\"origin_image zh-lightbox-thumb\" width=\"529\" data-original=\"https://pic2.zhimg.com/v2-67f9b06aa4a799befa960f9087462045_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;529&#39; height=&#39;365&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"529\" data-rawheight=\"365\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"529\" data-original=\"https://pic2.zhimg.com/v2-67f9b06aa4a799befa960f9087462045_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-67f9b06aa4a799befa960f9087462045_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>Refer to：</b></h2><p class=\"ztext-empty-paragraph\"><br/></p><p>源码：<a href=\"https://link.zhihu.com/?target=https%3A//github.com/yangyiLTS/wechat_jump_game_iOS\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/yangyiLTS/we</span><span class=\"invisible\">chat_jump_game_iOS</span><span class=\"ellipsis\"></span></a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32526110\" class=\"internal\"><span class=\"invisible\">https://</span><span class=\"visible\">zhuanlan.zhihu.com/p/32</span><span class=\"invisible\">526110</span><span class=\"ellipsis\"></span></a></p><p><a href=\"https://link.zhihu.com/?target=https%3A//opencv.org/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">opencv.org/</span><span class=\"invisible\"></span></a></p><p><a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E7%2594%25B5%25E5%25AE%25B9%25E7%25AC%2594/7622012%3Ffr%3Daladdin\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">https://baike.baidu.com/item/电容笔/7622012?fr=aladdin</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>与我们一起踏上<a href=\"https://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/cgi-bin/settingpage%3Ft%3Dsetting/index%26action%3Dindex%26token%3D200867966%26lang%3Dzh_CN\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">树莓派的奇幻之旅</a>吧~</p><p class=\"ztext-empty-paragraph\"><br/></p><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p><p></p>", 
            "topic": [
                {
                    "tag": "跳一跳", 
                    "tagLink": "https://api.zhihu.com/topics/20141612"
                }, 
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34181738", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 1, 
            "title": "Motor Overspeed Tester", 
            "content": "<p></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;755&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4bf0da3b31aee1bb0cd114946dfc7592_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic3.zhimg.com/v2-4bf0da3b31aee1bb0cd114946dfc7592_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><blockquote>这个项目，是两年前一起跟Alex开发的，主要是模拟检测电机（马达）在给定温度下各项数据(<b>电流，温度，电压，速度</b>）的变化，从而根据其中某些参数评判马达在不同环境下的性能高低，我一直以为叫做performance test（性能测试），做完了才知道是叫overspeed test（超速测试）。</blockquote><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-9ee29ae3d21a54ca736a035566337131_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image\" width=\"38\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;38&#39; height=&#39;36&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"38\" data-rawheight=\"36\" class=\"content_image lazy\" width=\"38\" data-actualsrc=\"https://pic2.zhimg.com/v2-9ee29ae3d21a54ca736a035566337131_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>期间改过几次，一直没有写一下总结，主要难度我觉得在于机械方面的设计还有温度的控制。至于软件开发也是基于labview平台用来采集下数据，做一下报表分析功能而已。</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-6d854c3f0f727df30c37a1529dbee20b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"537\" data-rawheight=\"436\" class=\"origin_image zh-lightbox-thumb\" width=\"537\" data-original=\"https://pic4.zhimg.com/v2-6d854c3f0f727df30c37a1529dbee20b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;537&#39; height=&#39;436&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"537\" data-rawheight=\"436\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"537\" data-original=\"https://pic4.zhimg.com/v2-6d854c3f0f727df30c37a1529dbee20b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-6d854c3f0f727df30c37a1529dbee20b_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>相比之前的版本，结构上省了较多的设计，如果项目上多加点钱的话就做成下面这个构造了：</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-88aefb96709237b3a8370bb37171dca8_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"620\" data-rawheight=\"787\" class=\"origin_image zh-lightbox-thumb\" width=\"620\" data-original=\"https://pic1.zhimg.com/v2-88aefb96709237b3a8370bb37171dca8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;620&#39; height=&#39;787&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"620\" data-rawheight=\"787\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"620\" data-original=\"https://pic1.zhimg.com/v2-88aefb96709237b3a8370bb37171dca8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-88aefb96709237b3a8370bb37171dca8_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;755&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>当初担心的问题有好几个：<br/></p><p><b>1.马达在测试运行时温度是会上升的，那么如何保持监测室温度的恒定</b></p><p><b>2.如何设计使温度气流循环运行</b></p><p><b>3.内部元件是否能经得住高温试验</b></p><p><b>4.速度使用何种方式采集</b></p><p><b>5.如何节约成本等等</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;755&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\"/></figure><h2>控制硬件</h2><p>为了方便测试人员操作，工作台做成抽屉式的，关闭之后，为了使热量能够快速均匀的分布，内部也有风扇循环装置，包括四周钣金内部都加装有隔热材料，只需要调节到给定温度，预热5-10分钟左右就可以达到100摄氏度，最高可以做到180度左右，包括内部的材料都是使用耐高温的，风扇也是，都做了很多项实验，这个功能也是我们一直担心是否能否成功的关键指标。想当初，害怕温控系统做不出来，还找了市场上好多家做恒温箱的厂家看是否能做一下改装，但是发现成本还是太高，也没法达到我们的改良标准。 </p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5a341a8352f39f15a624e1302e7ea1db_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"613\" data-rawheight=\"472\" class=\"origin_image zh-lightbox-thumb\" width=\"613\" data-original=\"https://pic4.zhimg.com/v2-5a341a8352f39f15a624e1302e7ea1db_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;613&#39; height=&#39;472&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"613\" data-rawheight=\"472\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"613\" data-original=\"https://pic4.zhimg.com/v2-5a341a8352f39f15a624e1302e7ea1db_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5a341a8352f39f15a624e1302e7ea1db_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;755&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>上半部分是控制系统，包含有BOE（京东方）的显示屏，主板用的是研域的，ssd硬盘是威刚的（当初256g才200多块钱，Alex还笑话我说当初要是囤点货，现在就发财了），还有NI的采集卡，速度表，温度电流传感器之类的，当初也可以全部采用通讯来做的，不过现在这样做成本也高不了多少，精度指标也有迹可循。七里八里搞起来也搞了个把月。有些朋友瞧不起DIY的，还有国产的一些东西，觉得这些用起来很low，一定要用NI的研华的等等觉得就高大上了，<b>我觉得他们才挺low的，自己手都没动过没亲身实践就觉得牌子大就名气好国产的就差，人云亦云</b>。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-0f46ee10489783ef7fd9591e08acc366_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"759\" data-rawheight=\"484\" class=\"origin_image zh-lightbox-thumb\" width=\"759\" data-original=\"https://pic3.zhimg.com/v2-0f46ee10489783ef7fd9591e08acc366_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;759&#39; height=&#39;484&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"759\" data-rawheight=\"484\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"759\" data-original=\"https://pic3.zhimg.com/v2-0f46ee10489783ef7fd9591e08acc366_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-0f46ee10489783ef7fd9591e08acc366_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;755&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>恒温系统</h2><p>下半部分装有Omron的温控器，还有加热管，这个也是基于一般恒温箱的设计，为了防止热量从四周发散，钣金四周内部也有隔热毯（这玩意刺手的很），风是从顶部发热管出来然后走钣金四周流回监控室，有2度左右的温差，总体来说还是不错的。 </p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-ac7b349e041fb02dd0948a926801c352_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"43\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-ac7b349e041fb02dd0948a926801c352_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;43&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"43\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-ac7b349e041fb02dd0948a926801c352_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-ac7b349e041fb02dd0948a926801c352_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-cd1ff239bd23793f3e35a8c3b89f6564_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"26\" data-rawheight=\"82\" class=\"content_image\" width=\"26\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;26&#39; height=&#39;82&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"26\" data-rawheight=\"82\" class=\"content_image lazy\" width=\"26\" data-actualsrc=\"https://pic1.zhimg.com/v2-cd1ff239bd23793f3e35a8c3b89f6564_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-cd1ff239bd23793f3e35a8c3b89f6564_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"26\" data-rawheight=\"82\" class=\"content_image\" width=\"26\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;26&#39; height=&#39;82&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"26\" data-rawheight=\"82\" class=\"content_image lazy\" width=\"26\" data-actualsrc=\"https://pic1.zhimg.com/v2-cd1ff239bd23793f3e35a8c3b89f6564_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-90c0f8bc11f6c3350614a52acb46c08d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"588\" data-rawheight=\"206\" class=\"origin_image zh-lightbox-thumb\" width=\"588\" data-original=\"https://pic2.zhimg.com/v2-90c0f8bc11f6c3350614a52acb46c08d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;588&#39; height=&#39;206&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"588\" data-rawheight=\"206\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"588\" data-original=\"https://pic2.zhimg.com/v2-90c0f8bc11f6c3350614a52acb46c08d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-90c0f8bc11f6c3350614a52acb46c08d_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-17ed96b1ec8b3a7143f8ec2eba25929a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"552\" data-rawheight=\"348\" class=\"origin_image zh-lightbox-thumb\" width=\"552\" data-original=\"https://pic3.zhimg.com/v2-17ed96b1ec8b3a7143f8ec2eba25929a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;552&#39; height=&#39;348&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"552\" data-rawheight=\"348\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"552\" data-original=\"https://pic3.zhimg.com/v2-17ed96b1ec8b3a7143f8ec2eba25929a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-17ed96b1ec8b3a7143f8ec2eba25929a_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;755&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"755\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"755\" data-original=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4dcf4e366b54316cbed9b4f73246dda4_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2>电路布线</h2><p>布线这一块，外部引出USB及网线等常用接口，为了方便测试马达接线使用，将AC，DC的接头装在了监控室，当然为了耐高温也换成了陶瓷的。把土豆，红薯之类的放在里面烤一会就可以拿出来吃了。 </p><p>当然，如果有足够的预算的话，我觉得屏幕可以加装触摸的，键盘和鼠标如果需要的话也可以另外设计一下结构等等，总之还是大的难点都已经解决，美观就不是问题了。</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-a1bb9ddb2c9ec35b98344ad9b0442501_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"300\" data-rawheight=\"468\" class=\"content_image\" width=\"300\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;300&#39; height=&#39;468&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"300\" data-rawheight=\"468\" class=\"content_image lazy\" width=\"300\" data-actualsrc=\"https://pic2.zhimg.com/v2-a1bb9ddb2c9ec35b98344ad9b0442501_b.jpg\"/></figure><p></p><p></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "可靠性分析", 
                    "tagLink": "https://api.zhihu.com/topics/19770280"
                }, 
                {
                    "tag": "LabVIEW", 
                    "tagLink": "https://api.zhihu.com/topics/19599522"
                }, 
                {
                    "tag": "自动化测试", 
                    "tagLink": "https://api.zhihu.com/topics/19574587"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34130665", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 1, 
            "title": "P3 树莓派如何通过按键控制LED", 
            "content": "<p></p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/952535927516561408\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic4.zhimg.com/80/v2-7e1b4f233393433ceb1b9cb8dbac3567_b.jpg\" data-lens-id=\"952535927516561408\"><img class=\"thumbnail\" src=\"https://pic4.zhimg.com/80/v2-7e1b4f233393433ceb1b9cb8dbac3567_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/952535927516561408</span></span></a><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-27149328d9f01bcf6c6cea468c0634f9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"339\" data-rawheight=\"96\" class=\"content_image\" width=\"339\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;339&#39; height=&#39;96&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"339\" data-rawheight=\"96\" class=\"content_image lazy\" width=\"339\" data-actualsrc=\"https://pic2.zhimg.com/v2-27149328d9f01bcf6c6cea468c0634f9_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>Introduction</b></h2><p>此章节我们将学习如何通过一个按钮打开或者关闭LED。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image\" width=\"387\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;387&#39; height=&#39;108&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image lazy\" width=\"387\" data-actualsrc=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>What you will need</b></h2><ul><li>树莓派×1</li><li>面包板×1</li><li>网线×1</li><li>LED×1</li><li>按钮×1</li><li>电阻（220Ω）×1</li><li>杜邦线</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image\" width=\"387\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;387&#39; height=&#39;108&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image lazy\" width=\"387\" data-actualsrc=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>What you will do</b></h2><p>使用一个常开按钮作为树莓派的一个输出，当这个按钮被按下的时候，连接此按钮的GPIO(通用输入输出)将会变成低电平（0V）。通过编程，我们可以检测到连接至按钮的GPIO的状态。也就是，当这个GPIO变成低电平，那意味着按钮被按下，你可以以此为前提运行相应的代码。在这个实验中，我们会让点亮LED。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-07f2d52d6f81044515aeb74b4de86ef9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"389\" data-rawheight=\"88\" class=\"content_image\" width=\"389\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;389&#39; height=&#39;88&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"389\" data-rawheight=\"88\" class=\"content_image lazy\" width=\"389\" data-actualsrc=\"https://pic2.zhimg.com/v2-07f2d52d6f81044515aeb74b4de86ef9_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p>第一步：如下图所示连接电路</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-a85242243be2aefe1915262e1b129827_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"557\" data-rawheight=\"490\" class=\"origin_image zh-lightbox-thumb\" width=\"557\" data-original=\"https://pic4.zhimg.com/v2-a85242243be2aefe1915262e1b129827_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;557&#39; height=&#39;490&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"557\" data-rawheight=\"490\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"557\" data-original=\"https://pic4.zhimg.com/v2-a85242243be2aefe1915262e1b129827_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a85242243be2aefe1915262e1b129827_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>第二步：使用<b>nano</b>编辑和保存代码</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image\" width=\"387\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;387&#39; height=&#39;108&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"387\" data-rawheight=\"108\" class=\"content_image lazy\" width=\"387\" data-actualsrc=\"https://pic1.zhimg.com/v2-67c4f06fb8721ce3371376d082c19bc0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><h2>Python code</h2><p class=\"ztext-empty-paragraph\"><br/></p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport RPi.GPIO as GPIO\n\nLedPin = 11    # pin11 --- led\nBtnPin = 12    # pin12 --- button\n\nLed_status = 1\n\ndef setup():\n    GPIO.setmode(GPIO.BOARD)       # Numbers GPIOs by physical location\n    GPIO.setup(LedPin, GPIO.OUT)   # Set LedPin&#39;s mode is output\n    GPIO.setup(BtnPin, GPIO.IN, pull_up_down=GPIO.PUD_UP)    # Set BtnPin&#39;s mode is input, and pull up to high level(3.3V)\n    GPIO.output(LedPin, GPIO.HIGH) # Set LedPin high(+3.3V) to off led\n\ndef swLed(ev=None):\n    global Led_status\n    Led_status = not Led_status\n    GPIO.output(LedPin, Led_status)  # switch led status(on--&gt;off; off--&gt;on)\n    if Led_status == 1:\n        print &#39;led off...&#39;\n    else:\n        print &#39;...led on&#39;\n\ndef loop():\n    GPIO.add_event_detect(BtnPin, GPIO.FALLING, calCLEAR\n    lback=swLed) # wait for falling\n    while True:\n        pass   # Don&#39;t do anything\n\ndef destroy():\n    GPIO.output(LedPin, GPIO.HIGH)     # led off\n    GPIO.cleanup()                     # Release resource\n\nif __name__ == &#39;__main__&#39;:     # Program start from here\n    setup()\n    try:\n        loop()\n    except KeyboardInterrupt:  # When &#39;Ctrl+C&#39; is pressed, the child program destroy() will be  executed.\n        destroy()</code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p>更多内容请关注：<a href=\"https://link.zhihu.com/?target=http%3A//www.easytester.cn/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">www.easytester.cn</a></p><p>或者微信公众号：树莓派的奇幻之旅</p><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }, 
                {
                    "tag": "Linux", 
                    "tagLink": "https://api.zhihu.com/topics/19554300"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34067809", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 2, 
            "title": "树莓派+siri语音控制", 
            "content": "<p></p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-294a25593e61754dbf9fa006b027028f_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"102\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-294a25593e61754dbf9fa006b027028f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;102&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"102\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-294a25593e61754dbf9fa006b027028f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-294a25593e61754dbf9fa006b027028f_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-523e8716c0509c31117216574db3f39b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"163\" data-rawheight=\"70\" class=\"content_image\" width=\"163\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;163&#39; height=&#39;70&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"163\" data-rawheight=\"70\" class=\"content_image lazy\" width=\"163\" data-actualsrc=\"https://pic4.zhimg.com/v2-523e8716c0509c31117216574db3f39b_b.jpg\"/></figure><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/951860902182469632\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic3.zhimg.com/80/v2-b71a64e3713c04e76b75e631013e4a9e_b.jpg\" data-lens-id=\"951860902182469632\"><img class=\"thumbnail\" src=\"https://pic3.zhimg.com/80/v2-b71a64e3713c04e76b75e631013e4a9e_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/951860902182469632</span></span></a><p><b>Introduction</b></p><p>先前做了一个利用siri或手机自带的Homekit控制LED或者继电器的实验。PI3亲测可行。遇到了些许坑，以此做一些经验总结。这个实验关键部分是利用HAP-NodeJS（Homekit辅助服务器的一种实现，也叫做homekit bridge，意思是连接将homekit代码连接wifi设备的桥梁，可以将其部署至RPI等平台），其中需要安装javascript的运行环境：node.js（说白了就是开发网页的工具）；利用npm安装一系列模块：node，srp等等。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>what you will need</b></p><p>RaspberryPI3</p><p>杜邦线</p><p>面包板</p><p>LED或者继电器</p><p>装有类似Homekit的APP的手机，我也试了一下eve可以用，如果要用到siri的话，就需要iphone了。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>What you will do</b></p><ol><li>先将树莓派装好系统，最新版的即可，我之前试了几次未成功以为要装回原来的就系统，后来试了之后才发现没有必要。</li><li>用putty连上Rpi</li><li>安装模块：   sudo apt-get install npm git-core libnss-mdns libavahi-compat-libdnssd-dev</li><li>安装新版的nodejs：如果尝试使用apt-get来安装的话，你会发现版本太老导致无法使用，这里需要使用到wget从网上下载linux版本安装。在这里卡住了几次，可以先去一下官网了解一下版本信息： <a href=\"https://link.zhihu.com/?target=http%3A//nodejs.org\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">nodejs.org</span><span class=\"invisible\"></span></a>至 download/release/latest-v5.x.0/.<br/></li></ol><div class=\"highlight\"><pre><code class=\"language-text\">wget https://nodejs.org/download/release/latest-v5.x.0/node-v5.5.0-linux-armv7l.tar.gz\ntar -xvf node-v5.5.0-linux-armv7l.tar.gz\ncd node-v5.5.0-linux-armv7l\nsudo cp -R * /usr/local</code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p>安装成功后检查下版本是否更新:</p><div class=\"highlight\"><pre><code class=\"language-text\">node version</code></pre></div><p>安装node模块，npm全称为 Node Package Manager：</p><div class=\"highlight\"><pre><code class=\"language-text\">sudo npm install -g npm\nsudo npm install -g node-gyp</code></pre></div><p>5. 最后配置HAP-Nodejs：</p><div class=\"highlight\"><pre><code class=\"language-text\">git clone https://github.com/KhaosT/HAP-NodeJS.git\ncd HAP-NodeJS\nnpm rebuild\nsudo npm install node-persist\nsudo npm install srp\nsudo npm install mdns --unsafe-perm\nsudo npm install debug\nsudo npm install ed25519 --unsafe-perm\nsudo npm install curve25519 --unsafe-perm</code></pre></div><p>中途可能会遇到安装error出现有点烦，但是他会告诉你是哪个模块缺失之类的，所以针对这些缺少的模块再安装（sudo npm install）一遍。</p><p>6. 增加新的灯泡辅件,在HAP-NodeJS文件夹下面找到 accessories，里面已经有了一些.js文件，这些文件时javascript代码，你也可以新建一个你需要命名的设备：</p><div class=\"highlight\"><pre><code class=\"language-text\">cd accessories\nnano myLight_accessory.js</code></pre></div><p>将一些代码复制至.js文件，light0和light1是python代码分别用来控制gpio的on和off：</p><div class=\"highlight\"><pre><code class=\"language-text\">var PythonShell = require(&#39;python-shell&#39;);\n// HomeKit types required\nvar types = require(&#34;./types.js&#34;)\nvar exports = module.exports = {};\nvar execute = function(accessory,characteristic,value){ console.log(&#34;executed accessory: &#34; + accessory + &#34;, and characteristic: &#34; + characteristic + &#34;, with value: &#34; +  value + &#34;.&#34;); }\nexports.accessory = {\n displayName: &#34;Light 1&#34;,\n username: &#34;1A:2B:3C:4D:5E:FF&#34;,\n pincode: &#34;031-45-154&#34;,\n services: [{\n   sType: types.ACCESSORY_INFORMATION_STYPE, \n   characteristics: [{\n       cType: types.NAME_CTYPE, \n       onUpdate: null,\n       perms: [&#34;pr&#34;],\n       format: &#34;string&#34;,\n       initialValue: &#34;Light 1&#34;,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Bla&#34;,\n       designedMaxLength: 255    \n   },{\n       cType: types.MANUFACTURER_CTYPE, \n       onUpdate: null,\n       perms: [&#34;pr&#34;],\n       format: &#34;string&#34;,\n       initialValue: &#34;Oltica&#34;,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Bla&#34;,\n       designedMaxLength: 255    \n   },{\n       cType: types.MODEL_CTYPE,\n       onUpdate: null,\n       perms: [&#34;pr&#34;],\n       format: &#34;string&#34;,\n       initialValue: &#34;Rev-1&#34;,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Bla&#34;,\n       designedMaxLength: 255    \n   },{\n       cType: types.SERIAL_NUMBER_CTYPE, \n       onUpdate: null,\n       perms: [&#34;pr&#34;],\n       format: &#34;string&#34;,\n       initialValue: &#34;A1S2NASF88EW&#34;,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Bla&#34;,\n       designedMaxLength: 255    \n   },{\n       cType: types.IDENTIFY_CTYPE, \n       onUpdate: null,\n       perms: [&#34;pw&#34;],\n       format: &#34;bool&#34;,\n       initialValue: false,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Identify Accessory&#34;,\n       designedMaxLength: 1    \n   }]\n },{\n   sType: types.LIGHTBULB_STYPE, \n   characteristics: [{\n       cType: types.NAME_CTYPE,\n       onUpdate: null,\n       perms: [&#34;pr&#34;],\n       format: &#34;string&#34;,\n       initialValue: &#34;Light 1 Light Service&#34;,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Bla&#34;,\n       designedMaxLength: 255   \n   },{\n       cType: types.POWER_STATE_CTYPE,\n       onUpdate: function(value)\n   { \n           console.log(&#34;Change:&#34;,value);\n           if (value) {\n           PythonShell.run(&#39;light1.py&#39;, function (err) {\n                console.log(&#39;On Success&#39;);\n           });\n           } else {\n               PythonShell.run(&#39;light0.py&#39;, function (err) {\n                   console.log(&#34;Off Success&#34;);\n\n               });\n           }\n       },\n       perms: [&#34;pw&#34;,&#34;pr&#34;,&#34;ev&#34;],\n       format: &#34;bool&#34;,\n       initialValue: false,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Turn On the Light&#34;,\n       designedMaxLength: 1    \n   },{\n       cType: types.HUE_CTYPE,\n       onUpdate: function(value) { console.log(&#34;Change:&#34;,value); execute(&#34;Test Accessory 1&#34;, &#34;Light - Hue&#34;, value); },\n       perms: [&#34;pw&#34;,&#34;pr&#34;,&#34;ev&#34;],\n       format: &#34;int&#34;,\n       initialValue: 0,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Doesn’t actually adjust Hue of Light&#34;,\n       designedMinValue: 0,\n       designedMaxValue: 360,\n       designedMinStep: 1,\n       unit: &#34;arcdegrees&#34;\n   },{\n       cType: types.BRIGHTNESS_CTYPE,\n       onUpdate: function(value) { console.log(&#34;Change:&#34;,value); execute(&#34;Test Accessory 1&#34;, &#34;Light - Brightness&#34;, value); },\n       perms: [&#34;pw&#34;,&#34;pr&#34;,&#34;ev&#34;],\n       format: &#34;int&#34;,\n       initialValue: 0,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Doesn’t actually adjust Brightness of Light&#34;,\n       designedMinValue: 0,\n       designedMaxValue: 100,\n       designedMinStep: 1,\n       unit: &#34;%&#34;\n   },{\n       cType: types.SATURATION_CTYPE,\n       onUpdate: function(value) { console.log(&#34;Change:&#34;,value); execute(&#34;Test Accessory 1&#34;, &#34;Light - Saturation&#34;, value); },\n       perms: [&#34;pw&#34;,&#34;pr&#34;,&#34;ev&#34;],\n       format: &#34;int&#34;,\n       initialValue: 0,\n       supportEvents: false,\n       supportBonjour: false,\n       manfDescription: &#34;Doesn’t actually adjust Saturation of Light&#34;,\n       designedMinValue: 0,\n       designedMaxValue: 100,\n       designedMinStep: 1,\n       unit: &#34;%&#34;\n   }]\n }]\n}</code></pre></div><p>在HAP-NodeJS文件夹下新建一个python文件，并编写python代码：<br/></p><div class=\"highlight\"><pre><code class=\"language-text\">cd ..\nmkdir python\ncd python\nnano light1.py</code></pre></div><p>python1.py控制gpio16开:</p><div class=\"highlight\"><pre><code class=\"language-text\">import RPi.GPIO as GPIO\nGPIO.setwarnings(False)\nGPIO.setmode(GPIO.BOARD)\nGPIO.setup(16, GPIO.OUT)\nGPIO.output(16, 1)\n保存并关闭\nnano light0.py</code></pre></div><p>同样复制至light0.py:</p><div class=\"highlight\"><pre><code class=\"language-text\">import RPi.GPIO as GPIO\nGPIO.setwarnings(False)\nGPIO.setmode(GPIO.BOARD)\nGPIO.setup(16, GPIO.OUT)\nGPIO.output(16, 0)</code></pre></div><p>LED接线就不解释了，进行下一步前可以先试运行下代码是否控制成功：</p><div class=\"highlight\"><pre><code class=\"language-text\">python light1.py \npython light0.py </code></pre></div><p>使用npm rebuild，最后开启Homekit Bridge：node Core.js</p><p>这里树莓派和手机需要处于同一wifi下，打开app需要输入匹配代码，即.js文件设置的pincode：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-e7811ff76f752b78fd78de972400adbe_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-e7811ff76f752b78fd78de972400adbe_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-e7811ff76f752b78fd78de972400adbe_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-e7811ff76f752b78fd78de972400adbe_b.jpg\"/></figure><p>设置完成顺利的话即可点击手机控制led了，也可使用siri来语音控制。</p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-446db33efe88028da24c14fcfc23cedf_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"1138\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-446db33efe88028da24c14fcfc23cedf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;1138&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"1138\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-446db33efe88028da24c14fcfc23cedf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-446db33efe88028da24c14fcfc23cedf_b.jpg\"/></figure><p><b>Related</b></p><p>这个项目如果懂js的朋友会好玩很多.<br/>refer to：<br/><a href=\"https://link.zhihu.com/?target=http%3A//www.instructables.com/id/Raspberry-Pi-2-Homekit-from-zero-to-Hey-Siri/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://www.</span><span class=\"visible\">instructables.com/id/Ra</span><span class=\"invisible\">spberry-Pi-2-Homekit-from-zero-to-Hey-Siri/</span><span class=\"ellipsis\"></span></a> <a href=\"https://link.zhihu.com/?target=https%3A//www.makeuseof.com/tag/make-diy-siri-controlled-wi-fi-light/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">makeuseof.com/tag/make-</span><span class=\"invisible\">diy-siri-controlled-wi-fi-light/</span><span class=\"ellipsis\"></span></a><br/><br/>HAP 安装Core.js无法启动问题：<br/><a href=\"https://link.zhihu.com/?target=https%3A//github.com/KhaosT/HAP-NodeJS/issues/482\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/KhaosT/HAP-N</span><span class=\"invisible\">odeJS/issues/482</span><span class=\"ellipsis\"></span></a><br/><br/>制作light_accessory.js<br/><a href=\"https://link.zhihu.com/?target=https%3A//github.com/KhaosT/HAP-NodeJS/issues/191\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/KhaosT/HAP-N</span><span class=\"invisible\">odeJS/issues/191</span><span class=\"ellipsis\"></span></a> <a href=\"https://link.zhihu.com/?target=https%3A//docs.npmjs.com/getting-started/fixing-npm-permissions\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">docs.npmjs.com/getting-</span><span class=\"invisible\">started/fixing-npm-permissions</span><span class=\"ellipsis\"></span></a><br/>HAP-NodeJS:<br/><br/><a href=\"https://link.zhihu.com/?target=https%3A//github.com/KhaosT/HAP-NodeJS\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/KhaosT/HAP-N</span><span class=\"invisible\">odeJS</span><span class=\"ellipsis\"></span></a> </p><p>安装n模块 安装node最新/最稳定版本</p><div class=\"highlight\"><pre><code class=\"language-text\">npm install n -g\nn latest/stable</code></pre></div><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_b.jpg\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;640&#39;&gt;&lt;/svg&gt;\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_b.jpg\"/><figcaption>树莓派的奇幻之旅</figcaption></figure><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Siri", 
                    "tagLink": "https://api.zhihu.com/topics/19580359"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": [
                {
                    "userName": "王玨", 
                    "userLink": "https://www.zhihu.com/people/392f7835d2bd2552dec36c1a661d7201", 
                    "content": "<p>大佬好，有没有好的方法实现无线语音传输到树莓派。有线的话，树莓派小车移动不方便。</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "teddy", 
                            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
                            "content": "<p>当然可以的，前提是你懂js和python，方法就是跟我这个siri voice control控制一样的，同样是控制gpio，只不过控制硬件不一样，我这个控制的是继电器，而你控制的是马达。</p>", 
                            "likes": 0, 
                            "replyToAuthor": "王玨"
                        }, 
                        {
                            "userName": "王玨", 
                            "userLink": "https://www.zhihu.com/people/392f7835d2bd2552dec36c1a661d7201", 
                            "content": "用什么硬件做无线语音传输？", 
                            "likes": 0, 
                            "replyToAuthor": "teddy"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34067668", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 1, 
            "title": "如何解决树莓派无法启动 HDMI/VGA 屏幕显示", 
            "content": "<p></p><p><b>1.一言不合就重装系统</b></p><p>    在装了几百个树莓派系统之后有时候因为HDMI视频接口模式的自动配置而导致无法显示屏幕，那么首先确定你的系统正常（通过是否正常连接putty来判断）,一切正常之后，打开boot过的TF卡，将以下代码复制并替换Config.txt内容，重新插入树莓派重新启动即可：</p><p class=\"ztext-empty-paragraph\"><br/></p><blockquote><i># For more options and information see</i> <i>#</i> <i><a href=\"https://link.zhihu.com/?target=http%3A//rpf.io/configtxt\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">rpf.io/configtxt</span><span class=\"invisible\"></span></a></i> <i># Some settings may impact device functionality. See link above for details</i> <i># uncomment if you get no picture on HDMI for a default &#34;safe&#34; mode</i> <i>#hdmi_safe=1</i> <i># uncomment this if your display has a black border of unused pixels visible</i> <i># and your display can output without overscan</i> <i>#disable_overscan=1</i> <i># uncomment the following to adjust overscan. Use positive numbers if console</i> <i># goes off screen, and negative if there is too much border</i> <i>#overscan_left=16</i> <i>#overscan_right=16</i> <i>#overscan_top=16</i> <i>#overscan_bottom=16</i> <i># uncomment to force a console size. By default it will be display&#39;s size minus</i> <i># overscan.</i> <i>#framebuffer_width=1280</i> <i>#framebuffer_height=720</i> <i># uncomment if hdmi display is not detected and composite is being output</i> <i>hdmi_force_hotplug=1</i> <i># uncomment to force a specific HDMI mode (this will force VGA)</i> <i>hdmi_group=2</i> <i>hdmi_mode=16</i> <i># uncomment to force a HDMI mode rather than DVI. This can make audio work in</i> <i># DMT (computer monitor) modes</i> <i>#hdmi_drive=2</i> <i># uncomment to increase signal to HDMI, if you have interference, blanking, or</i> <i># no display</i> <i>#config_hdmi_boost=4</i> <i># uncomment for composite PAL</i> <i>#sdtv_mode=2</i> <i>#uncomment to overclock the arm. 700 MHz is the default.</i> <i>#arm_freq=800</i> <i># Uncomment some or all of these to enable the optional hardware interfaces</i> <i>#dtparam=i2c_arm=on</i> <i>#dtparam=i2s=on</i> <i>#dtparam=spi=on</i> <i># Uncomment this to enable the lirc-rpi module</i> <i>#dtoverlay=lirc-rpi</i> <i># Additional overlays and parameters are documented /boot/overlays/README</i> <i># Enable audio (loads snd_bcm2835)</i> <i>dtparam=audio=on</i> <i>max_usb_current=1</i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.config.txt</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>    与传统PC不同，树莓派使用config文件来代替传统PC中的<b>BIOS</b>界面，系统配置参数不是使用<b>BIOS</b>（ Basic Input/Output System）进行编辑和存储的，而是存储在一个名为config.txt的可选文本文件中，在ARM CPU和Linux被初始化之前，这是由GPU读取的。因此，它必须位于SD卡的第一个(引导)分区上，与引导代码一起。在 <b>bootcode.bin</b> 和 <b>start.elf</b> 文件的旁边。这个文件通常可以作为<b>/boot/config</b>访问，必须使用root进行编辑。<br/>config文件配置写入完成并在系统重启后，我们使用 <b>vcgencmd</b> 命令来查看当前更改值：<br/>如获取所有config文件中整型设置值：</p><blockquote><i><code>vcgencmd get_config int</code></i></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><i><code><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-5db294d6257341b4594a5634c127c3ee_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1018\" data-rawheight=\"493\" class=\"origin_image zh-lightbox-thumb\" width=\"1018\" data-original=\"https://pic3.zhimg.com/v2-5db294d6257341b4594a5634c127c3ee_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1018&#39; height=&#39;493&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1018\" data-rawheight=\"493\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1018\" data-original=\"https://pic3.zhimg.com/v2-5db294d6257341b4594a5634c127c3ee_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-5db294d6257341b4594a5634c127c3ee_b.jpg\"/></figure></code></i><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.Refer to：</b></p><p><i><a href=\"https://link.zhihu.com/?target=https%3A//www.raspberrypi.org/documentation/configuration/config-txt/README.md\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">raspberrypi.org/documen</span><span class=\"invisible\">tation/configuration/config-txt/README.md</span><span class=\"ellipsis\"></span></a></i></p><p class=\"ztext-empty-paragraph\"><br/></p><p><i><code><b>与我们一起踏上树莓派的奇幻之旅吧~</b></code></i> </p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_b.jpg\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;640&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_b.jpg\"/></figure><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p><p></p><p></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34067130", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 7, 
            "title": "Python+Pyqt+Qt designer+GUI RPI.GPIO Control", 
            "content": "<p></p><figure data-size=\"small\"><noscript><img src=\"https://pic2.zhimg.com/v2-2a14a3492cdcb634f4cc3bf303759659_b.gif\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"600\" data-rawheight=\"508\" data-thumbnail=\"https://pic2.zhimg.com/v2-2a14a3492cdcb634f4cc3bf303759659_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"600\" data-original=\"https://pic2.zhimg.com/v2-2a14a3492cdcb634f4cc3bf303759659_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;600&#39; height=&#39;508&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"small\" data-rawwidth=\"600\" data-rawheight=\"508\" data-thumbnail=\"https://pic2.zhimg.com/v2-2a14a3492cdcb634f4cc3bf303759659_b.jpg\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"600\" data-original=\"https://pic2.zhimg.com/v2-2a14a3492cdcb634f4cc3bf303759659_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-2a14a3492cdcb634f4cc3bf303759659_b.gif\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-aa5f7f382fb8a712fb86863a7bd149da_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"708\" data-rawheight=\"39\" class=\"origin_image zh-lightbox-thumb\" width=\"708\" data-original=\"https://pic3.zhimg.com/v2-aa5f7f382fb8a712fb86863a7bd149da_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;708&#39; height=&#39;39&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"708\" data-rawheight=\"39\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"708\" data-original=\"https://pic3.zhimg.com/v2-aa5f7f382fb8a712fb86863a7bd149da_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-aa5f7f382fb8a712fb86863a7bd149da_b.jpg\"/></figure><a href=\"https://link.zhihu.com/?target=http%3A//v.qq.com/x/page/a05385b3yyc.html\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-a772a2982020f0c43d39432a93d041da_180x120.jpg\" data-image-width=\"320\" data-image-height=\"180\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">实验视频</a><p><b>Introduction</b></p><p>前段时间接到一款测试任务，需要监测一款产品的寿命，需要控制DO以及AI反馈，那么这个用树莓派+Python来做再合适不过了，在入手前也查阅了很多资料，包括如何制作用户界面（GUI），如何多线程控制，以及pyqt的使用，编译环境的配置等等，最让我不能忍的就是在某些中文论坛有些啥都不懂的小菜B也跑来回答问题误导别人，渣渣永远都是渣渣。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>这次的知识点与难点有：</b></p><p><b>1. </b>编译环境的安装及配置</p><p><b>2. </b>Pyqt搭配python用户界面设计及关联</p><p><b>3. </b>python的多线程控制解决GUI无法响应问题</p><p><b>4. </b>ini配置文件的编程</p><p><b>5. </b>RPI.GPIO树莓派的IO点控制</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>What you will need</b></p><p><b>Hardware：</b></p><p><b>1. </b>RPI 3 树莓派3</p><p><b>2. </b>HDMI Screen 7&#34;  触摸屏</p><p><b>3. </b>DuPont Wire Cable Kit 杜邦线</p><p><b>4. </b>Hexagonal Threaded Spacers Kit 六角铜柱</p><p><b>5. </b>Optical coupling isolation module 24V转3.3V 光耦隔离板</p><p><b>6. </b>DC 24V Power Supply 24V直流电源</p><p><b>7. </b>Solenoid Valve 电磁阀</p><p><b>8. </b>1/4W Metal Film Resistors Assortment Kit 电阻包</p><p><b>9. </b>ADS1115 数模转换板 </p><p><b>10 .</b>Force Sensor 力敏传感器</p><p>由于很难避免工具在动作过程中的对力敏传感器的干扰，所以为了减少开发难度，暂将AI这一环节取消了（9,10）。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-2b355fc40ac2e12cfbf2a1e83933b452_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"482\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-2b355fc40ac2e12cfbf2a1e83933b452_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;482&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"482\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-2b355fc40ac2e12cfbf2a1e83933b452_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-2b355fc40ac2e12cfbf2a1e83933b452_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Software：</b></p><p><b>1. </b>eric5（python IDE）</p><p><b>2.</b> PyQt4</p><p><b>3.</b> python3</p><p><b>4.</b> raspbian jessie OS</p><p><b>5.</b> Qt designer 4</p><p><b>6. </b>RPI.GPIO</p><p>软件这一块也是需要花费不少时间的，所以关于环境的配置有时间再重新总结一下。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>What you will do</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1. 使用qt-designer 配置UI图标：</b></p><p>  除了qt-designer 之外，python还可以用到tkinter等模块进行GUI编程操作，但是我觉得有了qt-designer的话可以省下很多敲代码的时间。不过相比labview界面设计的话，qt-designer的用户体验和功能方面还是逊色不少的。</p><p>一个<b>lcdnumber</b> 数值显示循环次数，一个<b>spinbox</b>设置目标循环次数以及三个<b>button</b>控件提供给用户进行常用操作。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-0c93436f85199443495f9d4e3c5cdf60_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"279\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic1.zhimg.com/v2-0c93436f85199443495f9d4e3c5cdf60_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;279&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"279\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic1.zhimg.com/v2-0c93436f85199443495f9d4e3c5cdf60_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-0c93436f85199443495f9d4e3c5cdf60_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>在qt-designer 的右侧有一栏信号栏，可以用于关联按钮的信号事件操作：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-3a4f4bc8b7caad5e0ce4457f292a3938_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"446\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic1.zhimg.com/v2-3a4f4bc8b7caad5e0ce4457f292a3938_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;446&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"446\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic1.zhimg.com/v2-3a4f4bc8b7caad5e0ce4457f292a3938_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-3a4f4bc8b7caad5e0ce4457f292a3938_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>大致的布局完成后即可以使用pyqt4转换为UI的py文件进行进一步编程：</p><blockquote><b><i>pyuic4 -x ..ui &gt;..py</i></b> </blockquote><p>以下大部分为转换后的python代码：</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-bce3cf12a69299b7544a57f831899fad_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"465\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic2.zhimg.com/v2-bce3cf12a69299b7544a57f831899fad_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;465&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"465\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic2.zhimg.com/v2-bce3cf12a69299b7544a57f831899fad_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-bce3cf12a69299b7544a57f831899fad_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>以上代码主要用户配置控件的尺寸，名称等属性，而QtCore.QObject.connect 用于关联控件与想要执行的操作。</p><p><b>定义需要执行的操作方法：</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-62279b99792615f1d84622a88bc7d947_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"602\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-62279b99792615f1d84622a88bc7d947_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;602&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"602\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-62279b99792615f1d84622a88bc7d947_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-62279b99792615f1d84622a88bc7d947_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2. 使用python+pyqtSignal()编写工作线程及线程之间通讯：</b></p><p>为了避免while循环在工作的同时造成主线程界面响应卡死问题，除了UI类以外另外编写了workThread类，用于控制while操作，（通过是否满足界面cycle的设定值以及用户按钮操作来决定是否终止循环）：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-df1a8b7fef60757bf6fe0f24538d90fd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"639\" data-rawheight=\"355\" class=\"origin_image zh-lightbox-thumb\" width=\"639\" data-original=\"https://pic2.zhimg.com/v2-df1a8b7fef60757bf6fe0f24538d90fd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;639&#39; height=&#39;355&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"639\" data-rawheight=\"355\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"639\" data-original=\"https://pic2.zhimg.com/v2-df1a8b7fef60757bf6fe0f24538d90fd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-df1a8b7fef60757bf6fe0f24538d90fd_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>用户启动和停止按钮操作用于控制bt2的True或者False：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5794b1adc06cdc6cf5fb9f8ce8ea2e5b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"83\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-5794b1adc06cdc6cf5fb9f8ce8ea2e5b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;83&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"83\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-5794b1adc06cdc6cf5fb9f8ce8ea2e5b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5794b1adc06cdc6cf5fb9f8ce8ea2e5b_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-fccca95837ba0876420f708a7a258b0a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"138\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-fccca95837ba0876420f708a7a258b0a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;138&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"138\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic3.zhimg.com/v2-fccca95837ba0876420f708a7a258b0a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-fccca95837ba0876420f708a7a258b0a_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>run方法中需要将每次循环完成的信号发送出去：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-9d3275792b39b127b63ca5cc78b1c000_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"409\" data-rawheight=\"108\" class=\"content_image\" width=\"409\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;409&#39; height=&#39;108&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"409\" data-rawheight=\"108\" class=\"content_image lazy\" width=\"409\" data-actualsrc=\"https://pic1.zhimg.com/v2-9d3275792b39b127b63ca5cc78b1c000_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>用户点击启动按钮用于启动workThread(),并将其关联至countTime方法实现cycle数累加:</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-363ba2873937e1542536cdc6a58cb3f0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"120\" class=\"origin_image zh-lightbox-thumb\" width=\"624\" data-original=\"https://pic1.zhimg.com/v2-363ba2873937e1542536cdc6a58cb3f0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;624&#39; height=&#39;120&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"120\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"624\" data-original=\"https://pic1.zhimg.com/v2-363ba2873937e1542536cdc6a58cb3f0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-363ba2873937e1542536cdc6a58cb3f0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>countTime方法：</b> </p><p><b>这里的cycle数为全局变量，因为在两个类中都需要用到cycle值。</b> </p><p class=\"ztext-empty-paragraph\"><br/></p><b><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-863b06c8e5357b73ac08579ba0196602_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"635\" data-rawheight=\"81\" class=\"origin_image zh-lightbox-thumb\" width=\"635\" data-original=\"https://pic3.zhimg.com/v2-863b06c8e5357b73ac08579ba0196602_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;635&#39; height=&#39;81&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"635\" data-rawheight=\"81\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"635\" data-original=\"https://pic3.zhimg.com/v2-863b06c8e5357b73ac08579ba0196602_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-863b06c8e5357b73ac08579ba0196602_b.jpg\"/></figure></b><p class=\"ztext-empty-paragraph\"><br/></p><p><b>最后启动程序界面：</b> </p><p class=\"ztext-empty-paragraph\"><br/></p><b><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-debafe4a465dc60e80d7145a0787749f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"628\" data-rawheight=\"160\" class=\"origin_image zh-lightbox-thumb\" width=\"628\" data-original=\"https://pic4.zhimg.com/v2-debafe4a465dc60e80d7145a0787749f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;628&#39; height=&#39;160&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"628\" data-rawheight=\"160\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"628\" data-original=\"https://pic4.zhimg.com/v2-debafe4a465dc60e80d7145a0787749f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-debafe4a465dc60e80d7145a0787749f_b.jpg\"/></figure></b><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3. 使用init文件读取写入cycle数：</b></p><p>实现这一步骤的目的是为了防止重新启动程序后，仍然保留并显示界面已完成的cycle数。在每次程序初始化之前导入ConfigParser模块用于对test.ini 文件的读取，并将值赋予全局变量cycle.</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-93f2419c8c70ad2757fbf70a6b0e273c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"632\" data-rawheight=\"234\" class=\"origin_image zh-lightbox-thumb\" width=\"632\" data-original=\"https://pic1.zhimg.com/v2-93f2419c8c70ad2757fbf70a6b0e273c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;632&#39; height=&#39;234&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"632\" data-rawheight=\"234\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"632\" data-original=\"https://pic1.zhimg.com/v2-93f2419c8c70ad2757fbf70a6b0e273c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-93f2419c8c70ad2757fbf70a6b0e273c_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>test.ini文件：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-7cb9b60a1ea2d386cf7a7fb9573ab727_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"563\" data-rawheight=\"141\" class=\"origin_image zh-lightbox-thumb\" width=\"563\" data-original=\"https://pic4.zhimg.com/v2-7cb9b60a1ea2d386cf7a7fb9573ab727_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;563&#39; height=&#39;141&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"563\" data-rawheight=\"141\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"563\" data-original=\"https://pic4.zhimg.com/v2-7cb9b60a1ea2d386cf7a7fb9573ab727_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-7cb9b60a1ea2d386cf7a7fb9573ab727_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>而在每次循环需要执行的countTime（）方法中将当前cycle数值写入test.ini：使用with open（...） as...语句</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-888ebcc4957afb6d5a4e7d7123cf84a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"133\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-888ebcc4957afb6d5a4e7d7123cf84a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;133&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"133\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-888ebcc4957afb6d5a4e7d7123cf84a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-888ebcc4957afb6d5a4e7d7123cf84a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4. 树莓派RPI.GPIO的使用：</b> </p><p>这个库函数的熟练使用是进行树莓派编程控制的基础，开始前导入：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-09d2cdb6d6d84496a4beca250fd9a3a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"30\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-09d2cdb6d6d84496a4beca250fd9a3a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;30&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"30\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-09d2cdb6d6d84496a4beca250fd9a3a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-09d2cdb6d6d84496a4beca250fd9a3a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>将模式设置为BCM引脚模式，之前写的C++使用的是wiringPI引脚模式，两者编号是不同的。</p><p>禁用GPIO未关闭时发生的警告信息:</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-f83bf45d02e330aa5b0b024a668dd3c8_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"45\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic1.zhimg.com/v2-f83bf45d02e330aa5b0b024a668dd3c8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;45&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"640\" data-rawheight=\"45\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic1.zhimg.com/v2-f83bf45d02e330aa5b0b024a668dd3c8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-f83bf45d02e330aa5b0b024a668dd3c8_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>在使用过程中，可将GPIO口置为输入高低电平检测或者输出高低电平控制：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-802e574c19b9c34a3ae947a26188f570_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"453\" data-rawheight=\"33\" class=\"origin_image zh-lightbox-thumb\" width=\"453\" data-original=\"https://pic1.zhimg.com/v2-802e574c19b9c34a3ae947a26188f570_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;453&#39; height=&#39;33&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"453\" data-rawheight=\"33\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"453\" data-original=\"https://pic1.zhimg.com/v2-802e574c19b9c34a3ae947a26188f570_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-802e574c19b9c34a3ae947a26188f570_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>最后一张成品图：</b> </p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-d01a8fa6a80d81cea5843848255ad0db_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"560\" data-rawheight=\"587\" class=\"origin_image zh-lightbox-thumb\" width=\"560\" data-original=\"https://pic4.zhimg.com/v2-d01a8fa6a80d81cea5843848255ad0db_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;560&#39; height=&#39;587&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"560\" data-rawheight=\"587\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"560\" data-original=\"https://pic4.zhimg.com/v2-d01a8fa6a80d81cea5843848255ad0db_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-d01a8fa6a80d81cea5843848255ad0db_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Hit</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1. PYQT5 转换成PY代码：</b></p><p><a href=\"https://link.zhihu.com/?target=https%3A//stackoverflow.com/questions/43028904/converting-ui-to-py-with-python-3-6-on-pyqt5\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">stackoverflow.com/quest</span><span class=\"invisible\">ions/43028904/converting-ui-to-py-with-python-3-6-on-pyqt5</span><span class=\"ellipsis\"></span></a></p><p><b>2. PYQT4 转换成PY代码：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-262a15a9381f3a8573fb10672c87540f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"542\" data-rawheight=\"28\" class=\"origin_image zh-lightbox-thumb\" width=\"542\" data-original=\"https://pic4.zhimg.com/v2-262a15a9381f3a8573fb10672c87540f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;542&#39; height=&#39;28&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"542\" data-rawheight=\"28\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"542\" data-original=\"https://pic4.zhimg.com/v2-262a15a9381f3a8573fb10672c87540f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-262a15a9381f3a8573fb10672c87540f_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3. 树莓派无法实现apt-get install等操作：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-00f9ac57e351b49390d7b2e2f3457929_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"586\" data-rawheight=\"81\" class=\"origin_image zh-lightbox-thumb\" width=\"586\" data-original=\"https://pic2.zhimg.com/v2-00f9ac57e351b49390d7b2e2f3457929_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;586&#39; height=&#39;81&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"586\" data-rawheight=\"81\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"586\" data-original=\"https://pic2.zhimg.com/v2-00f9ac57e351b49390d7b2e2f3457929_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-00f9ac57e351b49390d7b2e2f3457929_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Solution:</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-47e1b0a05595924d56da5f82e638d02a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"605\" data-rawheight=\"290\" class=\"origin_image zh-lightbox-thumb\" width=\"605\" data-original=\"https://pic3.zhimg.com/v2-47e1b0a05595924d56da5f82e638d02a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;605&#39; height=&#39;290&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"605\" data-rawheight=\"290\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"605\" data-original=\"https://pic3.zhimg.com/v2-47e1b0a05595924d56da5f82e638d02a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-47e1b0a05595924d56da5f82e638d02a_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.  Pyqt 如何实现multipleprocess进而更新UI：</b></p><p><a href=\"https://link.zhihu.com/?target=http%3A//hgoldfish.com/blogs/article/78/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">hgoldfish.com/blogs/art</span><span class=\"invisible\">icle/78/</span><span class=\"ellipsis\"></span></a></p><p><b>5. ini 读取写入:</b></p><p><a href=\"https://link.zhihu.com/?target=https%3A//stackoverflow.com/questions/8884188/how-to-read-and-write-ini-file-with-python3\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">stackoverflow.com/quest</span><span class=\"invisible\">ions/8884188/how-to-read-and-write-ini-file-with-python3</span><span class=\"ellipsis\"></span></a></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Refer to：</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>一共两个版本，感谢Pierre哥起初用Qtcreator C++给我写的程序，第二个是我后续增加的python版本：</p><p><b>c programming：</b></p><p><a href=\"https://link.zhihu.com/?target=https%3A//github.com/teddypeng/Dry-fire-test\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/teddypeng/Dr</span><span class=\"invisible\">y-fire-test</span><span class=\"ellipsis\"></span></a></p><p><b>python programming：</b></p><p><a href=\"https://link.zhihu.com/?target=https%3A//github.com/teddypeng/Dryfiertest_python\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/teddypeng/Dr</span><span class=\"invisible\">yfiertest_python</span><span class=\"ellipsis\"></span></a></p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"small\"><noscript><img src=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_b.jpg\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;640&#39; height=&#39;640&#39;&gt;&lt;/svg&gt;\" data-size=\"small\" data-rawwidth=\"640\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"640\" data-original=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-54895feaa3f4d3e882a5f69c35ec0af7_b.jpg\"/><figcaption>树莓派的奇幻之旅</figcaption></figure><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }, 
                {
                    "tag": "PyQt", 
                    "tagLink": "https://api.zhihu.com/topics/19701025"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/33979452", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 7, 
            "title": "树莓派（RPI3） vs ROCK 64 测评", 
            "content": "<blockquote>有一次跟老外在酒吧喝酒，我点了一瓶蓝莓酒，旁边年轻老外指着我的酒说他有2个树莓派，我说我有几百个。<br/>‘Really？’<br/>他很惊讶的问我都做了啥，我说有服务器还有一些gpio的控制程序。然后我得意的给他推荐我的公众号。<br/>‘I will follow you’<br/>后来他问我有没有听说过pine64和rock64，我说木有，他说他想用这个做一台便携式的办公用发发邮件之类，装debian系统和gnome桌面。<br/>既然他提了这玩意，那我果断买了一个ROCK64，就像Alex说的，我不用就挂在墙头没事看看也好。</blockquote><hr/><h2><b>元件清单</b></h2><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-39e0e0f411c3bd355301edf70d251b5b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1443\" data-rawheight=\"554\" class=\"origin_image zh-lightbox-thumb\" width=\"1443\" data-original=\"https://pic4.zhimg.com/v2-39e0e0f411c3bd355301edf70d251b5b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1443&#39; height=&#39;554&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1443\" data-rawheight=\"554\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1443\" data-original=\"https://pic4.zhimg.com/v2-39e0e0f411c3bd355301edf70d251b5b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-39e0e0f411c3bd355301edf70d251b5b_b.jpg\"/></figure><p>只找到了pine64的原件图，rock64大同小异。下面做了一下硬件上的对比：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-55b2977ba0e3c6d4ed0ac4fe566ccd95_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"850\" data-rawheight=\"322\" class=\"origin_image zh-lightbox-thumb\" width=\"850\" data-original=\"https://pic2.zhimg.com/v2-55b2977ba0e3c6d4ed0ac4fe566ccd95_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;850&#39; height=&#39;322&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"850\" data-rawheight=\"322\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"850\" data-original=\"https://pic2.zhimg.com/v2-55b2977ba0e3c6d4ed0ac4fe566ccd95_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-55b2977ba0e3c6d4ed0ac4fe566ccd95_b.jpg\"/></figure><p>这样看的话，rock64要比树莓派强，就是抛开cpu，元件数量一个个分开数也比树莓派要多,但是没有CSI和DSI接口，所以连接摄像头就没那么方便了，Alex看到这块板的第一句话就是：Definite 一个电视机盒！</p><p>按官方说法，rock64与pine64是美国设计，中国制造,17年6月出售。虽说官网是英文，但是所有技术资料都是中文，而且RK3288是福州瑞芯微（<a href=\"https://link.zhihu.com/?target=http%3A//www.rock-chips.com/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://www.</span><span class=\"visible\">rock-chips.com/</span><span class=\"invisible\"></span></a>） 生产的，也许更多的是中国设计吧。虽然rock64在国内没有做太多推广，但是跟老外聊天的时候，他说在国外还是有专门的推广的。</p><hr/><h2><b>Desbian安装</b></h2><p>拿到板之后第一个任务就是装debian，树莓派的raspbian系统也是debian的改造版。官方提供的PINE64 installer可以很方便的安装各种系统，当然也少不了安卓TV，感觉就是为电视机盒设计的。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-30b1c7305df94af5155050800b5f5b46_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1163\" data-rawheight=\"687\" class=\"origin_image zh-lightbox-thumb\" width=\"1163\" data-original=\"https://pic3.zhimg.com/v2-30b1c7305df94af5155050800b5f5b46_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1163&#39; height=&#39;687&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1163\" data-rawheight=\"687\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1163\" data-original=\"https://pic3.zhimg.com/v2-30b1c7305df94af5155050800b5f5b46_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-30b1c7305df94af5155050800b5f5b46_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-03c55372c5177d594aba0164e60d63b6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1163\" data-rawheight=\"687\" class=\"origin_image zh-lightbox-thumb\" width=\"1163\" data-original=\"https://pic3.zhimg.com/v2-03c55372c5177d594aba0164e60d63b6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1163&#39; height=&#39;687&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1163\" data-rawheight=\"687\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1163\" data-original=\"https://pic3.zhimg.com/v2-03c55372c5177d594aba0164e60d63b6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-03c55372c5177d594aba0164e60d63b6_b.jpg\"/></figure><p>装上去感觉不错，不过系统自带有用户锁，折腾了一会才知道用户和密码是rock64，天杀的又不讲，我还以为是admin。deban的桌面有点土，操作的话跟raspbian也很像。</p><p>接着，配置Gnome3 桌面：</p><div class=\"highlight\"><pre><code class=\"language-text\">apt-get install gnome</code></pre></div><p>这样就高大上多了，不过，卡的很啊，光Gnome都有1G多，果然还是不行，毕竟树莓派和rock64这类的掌型板还是不能用作日常办公使用，但是我已经很满足了，做做电视机盒子等单方面用途再好不过。</p><hr/><h2><b>PS</b></h2><p>打开网络，居然还能发现有NI的crio，可能是其他部门买的也连上了公司的网，而在windows下却看不到。对于crio和树莓派的使用我们都只是停留在应用层，crio对我而言也跟树莓派一样，都是‘借鉴’别人的成果下发展起来的，我们所崇拜的是开发linux的那一批先驱者。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ae61611c4f710063d9eb7ef2689367cb_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1029\" data-rawheight=\"772\" class=\"origin_image zh-lightbox-thumb\" width=\"1029\" data-original=\"https://pic4.zhimg.com/v2-ae61611c4f710063d9eb7ef2689367cb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1029&#39; height=&#39;772&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1029\" data-rawheight=\"772\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1029\" data-original=\"https://pic4.zhimg.com/v2-ae61611c4f710063d9eb7ef2689367cb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ae61611c4f710063d9eb7ef2689367cb_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><hr/><blockquote>pine64 installer:<br/><a href=\"https://link.zhihu.com/?target=https%3A//github.com/pine64dev/PINE64-Installer/releases/tag/v2.0.0-beta.3\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/pine64dev/PI</span><span class=\"invisible\">NE64-Installer/releases/tag/v2.0.0-beta.3</span><span class=\"ellipsis\"></span></a><br/><br/>Debian guide:<br/><a href=\"https://link.zhihu.com/?target=https%3A//www.debian.org/releases/stable/s390x/install.pdf.zh-cn\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">debian.org/releases/sta</span><span class=\"invisible\">ble/s390x/install.pdf.zh-cn</span><span class=\"ellipsis\"></span></a><br/><br/>Debian graphic desktop:<br/><a href=\"https://link.zhihu.com/?target=https%3A//debian-handbook.info/browse/stable/sect.graphical-desktops.html\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">debian-handbook.info/br</span><span class=\"invisible\">owse/stable/sect.graphical-desktops.html</span><span class=\"ellipsis\"></span></a><br/><br/>install GPIO module：<br/><a href=\"https://link.zhihu.com/?target=https%3A//github.com/swkim01/RPi.GPIO-PineA64\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">github.com/swkim01/RPi.</span><span class=\"invisible\">GPIO-PineA64</span><span class=\"ellipsis\"></span></a></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><p>更多内容请关注：<a href=\"https://link.zhihu.com/?target=http%3A//www.easytester.cn\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">www.easytester.cn</a></p><p>或者微信公众号：树莓派的奇幻之旅</p><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }
            ], 
            "comments": [
                {
                    "userName": "Xie Yipeng", 
                    "userLink": "https://www.zhihu.com/people/61567126d95153acc5ae61099d564a6d", 
                    "content": "求中文资料下载链接", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "teddy", 
                    "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
                    "content": "<p><a href=\"http://link.zhihu.com/?target=https%3A//www.pine64.org/%3Fpage_id%3D7175\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">pine64.org/?</span><span class=\"invisible\">page_id=7175</span><span class=\"ellipsis\"></span></a></p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "知乎用户", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>ROCK64的spec很好找：<a href=\"http://link.zhihu.com/?target=https%3A//www.pine64.org/%3Fpage_id%3D7147\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">pine64.org/?</span><span class=\"invisible\">page_id=7147</span><span class=\"ellipsis\"></span></a></p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/33977573", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 2, 
            "title": "P2 LED Flowing Lights树莓派流水灯制作", 
            "content": "<p></p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/950751399873560576\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic1.zhimg.com/80/v2-cf7f3abeb0e9d7e5c5db79e9ff787f8c_b.jpg\" data-lens-id=\"950751399873560576\"><img class=\"thumbnail\" src=\"https://pic1.zhimg.com/80/v2-cf7f3abeb0e9d7e5c5db79e9ff787f8c_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/950751399873560576</span></span></a><a href=\"https://link.zhihu.com/?target=http%3A//v.qq.com/x/page/p0545gfqpfr.html\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-a772a2982020f0c43d39432a93d041da_180x120.jpg\" data-image-width=\"320\" data-image-height=\"180\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Flowing Lights树莓派流水灯制作</a><h2><b>Introduction</b></h2><p>此章我们将会学习如何让八个LED产生你想要的多种闪烁效果，当然，还是在树莓派的基础上进行试验。</p><h2><b>What you will need</b></h2><ul><ul><li>树莓派×1</li><li>线路板×1</li><li>网络电缆×1</li><li>LED×8</li><li>电阻（220Ω）×8</li><li>跳线</li></ul></ul><h2><b>Experimental Principle（实验原理）</b></h2><p>通过编程由上到下依次设置GPIO0至GPIO7，然后你会看到LED0至LED7被依次点亮。你可以通过控制它们的延迟时间和点亮顺序使得八个LED闪烁出不同的效果。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Python Code（Python 语言）</b></p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport RPi.GPIO as GPIO\nimport time\n\npins = [11, 12, 13, 15, 16, 18, 22, 7]\n\ndef setup():\n    GPIO.setmode(GPIO.BOARD)        # Numbers GPIOs by physical location\n    for pin in pins:\n        GPIO.setup(pin, GPIO.OUT)   # Set all pins&#39; mode is output\n        GPIO.output(pin, GPIO.HIGH) # Set all pins to high(+3.3V) to off led\n\ndef loop():\n    while True:\n        for pin in pins:\n            GPIO.output(pin, GPIO.LOW)    \n            time.sleep(0.5)\n            GPIO.output(pin, GPIO.HIGH)\n\ndef destroy():\n    for pin in pins:\n        GPIO.output(pin, GPIO.HIGH)    # turn off all leds\n    GPIO.cleanup()                     # Release resource\n\nif __name__ == &#39;__main__&#39;:     # Program start from here\n    setup()\n    try:\n        loop()\n    except KeyboardInterrupt:  # When &#39;Ctrl+C&#39; is pressed, the child program destroy() will be  executed.\n        destroy()</code></pre></div><p>更多内容请关注：<a href=\"https://link.zhihu.com/?target=http%3A//www.easytester.cn/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">www.easytester.cn</a></p><p>或者微信公众号：树莓派的奇幻之旅</p><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/33977355", 
            "userName": "teddy", 
            "userLink": "https://www.zhihu.com/people/635f39db64dd135b7b21e04c9c3e60e6", 
            "upvote": 1, 
            "title": "P1 树莓派闪烁LED Blinking LED", 
            "content": "<p></p><a class=\"video-box\" href=\"https://link.zhihu.com/?target=https%3A//www.zhihu.com/video/952188392809701376\" target=\"_blank\" data-video-id=\"\" data-video-playable=\"true\" data-name=\"\" data-poster=\"https://pic1.zhimg.com/80/v2-8a06fc35b98655fee8b55798bdd37a40_b.jpg\" data-lens-id=\"952188392809701376\"><img class=\"thumbnail\" src=\"https://pic1.zhimg.com/80/v2-8a06fc35b98655fee8b55798bdd37a40_b.jpg\"/><span class=\"content\"><span class=\"title\"><span class=\"z-ico-extern-gray\"></span><span class=\"z-ico-extern-blue\"></span></span><span class=\"url\"><span class=\"z-ico-video\"></span>https://www.zhihu.com/video/952188392809701376</span></span></a><h2><b>Introduction</b></h2><p>这一章无我们使用RaspberryPi制作一个闪烁的LED，只要你的想象力足够丰富，你就可以玩很多花样。现在跟着我学习，你会立刻享受到自己动手做的乐趣。</p><h2><b>What you will need</b></h2><ul><li>- 1*Raspberry Pi</li><li>- 1*Breadboard</li><li>- 1*Network cable</li><li>- 1*LED</li><li>- 1*Resistor (220Ω)</li><li>- Jumper wire</li></ul><h2><b>What you will do</b></h2><p>半导体发光二极管是一种可以通过PN结将电能转化为光能的元件。根据它的波长，半导体发光二极管可以分为激光二极管，红外发光二极管和可见光发光二极管，简称发光二极管，通常被称为LED。</p><p>当我们为一个LED提供2v-3v的正向电压时，如果电流流过LED，它就被点亮。通常我们有红、黄、绿、蓝和变色的LED（可以用不同的电压改变颜色）。由于其工作电压低、电流低、亮度稳定和体积小，被广泛使用。</p><p>它们的压降通常在1v-3v之间，这取决于它们的类型。同样，如果提供5ma-30ma电流，发光二极管通常可以发出光，通常我们使用的是10ma-20ma。因此，当使用LED时，有必要将电流限制的电阻器连接起来，以保护LED避免电流过大而损坏。</p><p class=\"ztext-empty-paragraph\"><br/></p><p>在这个实验中，我们将把一个220欧电阻连接到LED的正极，然后将它连接到3.3 V电源，并将LED的负极连接到GPIO0上(见树莓派接线图和上图)。如果我们GPIO0置为1，引脚两端电压是3.5，而LED不会点亮;如果我们GIIO0置为0，输出电压是0，那么LED就会根据上面的原理发光。</p><p class=\"ztext-empty-paragraph\"><br/></p><p>Python code：</p><div class=\"highlight\"><pre><code class=\"language-text\">#!/usr/bin/env python\nimport RPi.GPIO as GPIO \nimport time\n \nLedPin = 11 # pin11 \n\ndef setup():\n GPIO.setmode(GPIO.BOARD) # Numbers GPIOs by physical location\n GPIO.setup(LedPin, GPIO.OUT) # Set LedPin&#39;s mode is output\n GPIO.output(LedPin, GPIO.HIGH) # Set LedPin high(+3.3V) to off led \n\ndef loop():\n while True:\n   print(&#39;led on&#39;)\n   GPIO.output(LedPin, GPIO.LOW) # led on\n   time.sleep(1)\n   print(&#39;led off&#39;)\n   GPIO.output(LedPin, GPIO.HIGH) # led off\n   time.sleep(1) \n\ndef destroy():\n GPIO.output(LedPin, GPIO.HIGH) # led off\n GPIO.cleanup() # Release resource \n\nif __name__ == &#39;__main__&#39;: # Program start from here\n setup()\n try:\n   loop()\n except KeyboardInterrupt: # When &#39;Ctrl+C&#39; is pressed, the child program destroy() will be executed.\n   destroy()</code></pre></div><p>更多内容请关注：<a href=\"https://link.zhihu.com/?target=http%3A//www.easytester.cn/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">www.easytester.cn</a></p><p>或者微信公众号：树莓派的奇幻之旅</p><p><a href=\"https://link.zhihu.com/?target=http%3A//weixin.qq.com/r/Nyj_5kPEph7ZrQeF930l\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">weixin.qq.com/r/Nyj_5kP</span><span class=\"invisible\">Eph7ZrQeF930l</span><span class=\"ellipsis\"></span></a> (二维码自动识别)</p><p></p>", 
            "topic": [
                {
                    "tag": "树莓派（Raspberry Pi）", 
                    "tagLink": "https://api.zhihu.com/topics/19737690"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": []
        }
    ], 
    "url": "https://zhuanlan.zhihu.com/c_157077184"
}
