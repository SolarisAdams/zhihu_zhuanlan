{
    "title": "多旋翼无人机技术开发深度剖析", 
    "description": "", 
    "followers": [
        "https://www.zhihu.com/people/han-xu-88-90", 
        "https://www.zhihu.com/people/zuo-xiang-he", 
        "https://www.zhihu.com/people/zhang-yong-lei-44", 
        "https://www.zhihu.com/people/feng-liu-ren-wu-10", 
        "https://www.zhihu.com/people/zaerox-chang", 
        "https://www.zhihu.com/people/he-xiao-bai-61-42", 
        "https://www.zhihu.com/people/bitowang", 
        "https://www.zhihu.com/people/xie-xuan-72-60", 
        "https://www.zhihu.com/people/codenart", 
        "https://www.zhihu.com/people/ji-mo-sha-zhou-leng-4", 
        "https://www.zhihu.com/people/zzz-7-43", 
        "https://www.zhihu.com/people/duan-yu-70-99", 
        "https://www.zhihu.com/people/kuoping-huo", 
        "https://www.zhihu.com/people/sun-jian-wen-4", 
        "https://www.zhihu.com/people/libin-sui", 
        "https://www.zhihu.com/people/bi-yong-jian-51", 
        "https://www.zhihu.com/people/ni-wa-wa-26-54", 
        "https://www.zhihu.com/people/kakaFT", 
        "https://www.zhihu.com/people/miao-dong-long", 
        "https://www.zhihu.com/people/you-ren-34-26", 
        "https://www.zhihu.com/people/hua-feng-72-12", 
        "https://www.zhihu.com/people/xue-zhe-23-58", 
        "https://www.zhihu.com/people/juljl", 
        "https://www.zhihu.com/people/chehche", 
        "https://www.zhihu.com/people/li-peixin", 
        "https://www.zhihu.com/people/qian-qiu-xue-16", 
        "https://www.zhihu.com/people/george-26-12", 
        "https://www.zhihu.com/people/wu-xian-90-81", 
        "https://www.zhihu.com/people/yyc-47-2", 
        "https://www.zhihu.com/people/yu-xin-le-84", 
        "https://www.zhihu.com/people/wwykaka", 
        "https://www.zhihu.com/people/zhang-wei-xian-81", 
        "https://www.zhihu.com/people/yi-xing-xing-81", 
        "https://www.zhihu.com/people/mao-bo-he-30-51", 
        "https://www.zhihu.com/people/lian-zhi-wen", 
        "https://www.zhihu.com/people/hum-75", 
        "https://www.zhihu.com/people/yanghuoer", 
        "https://www.zhihu.com/people/crc-55-45", 
        "https://www.zhihu.com/people/yu-yu-68-20-45", 
        "https://www.zhihu.com/people/smart-5-16", 
        "https://www.zhihu.com/people/nian-tang-81-19", 
        "https://www.zhihu.com/people/xtreme-88", 
        "https://www.zhihu.com/people/wu-jun-jie-80-87", 
        "https://www.zhihu.com/people/ma-yuan-bing-31", 
        "https://www.zhihu.com/people/mrchen-xian-sheng-40", 
        "https://www.zhihu.com/people/wang-yang-jie-41", 
        "https://www.zhihu.com/people/zhang-cso", 
        "https://www.zhihu.com/people/a-la-deng-shen-ding-ding", 
        "https://www.zhihu.com/people/null-45-14", 
        "https://www.zhihu.com/people/he-he-26-96-74", 
        "https://www.zhihu.com/people/john-rudolf-96", 
        "https://www.zhihu.com/people/hai-lu-xiang-jie", 
        "https://www.zhihu.com/people/a-ha-48-13-8", 
        "https://www.zhihu.com/people/hougeer", 
        "https://www.zhihu.com/people/liu-peng-6-57-24", 
        "https://www.zhihu.com/people/di-zhu-jia-de-shao-nu", 
        "https://www.zhihu.com/people/shi-bing-tu-ji-39", 
        "https://www.zhihu.com/people/renxinhugu", 
        "https://www.zhihu.com/people/yun-zhong-feng-44", 
        "https://www.zhihu.com/people/li-bo-90-26-39", 
        "https://www.zhihu.com/people/zong-heng-si-hai-hz", 
        "https://www.zhihu.com/people/wu-xiao-bing-10-2", 
        "https://www.zhihu.com/people/maky-19", 
        "https://www.zhihu.com/people/quan-sheng-8-95", 
        "https://www.zhihu.com/people/wx376660dac9b2ea73", 
        "https://www.zhihu.com/people/yang-yang-75-12-10", 
        "https://www.zhihu.com/people/mu-chi-xiang-68", 
        "https://www.zhihu.com/people/na-mu-cuo-6-32", 
        "https://www.zhihu.com/people/yueer99-3", 
        "https://www.zhihu.com/people/ha-ha-ha-10-49-28", 
        "https://www.zhihu.com/people/powerdragon", 
        "https://www.zhihu.com/people/vet-ph", 
        "https://www.zhihu.com/people/alexpeng3d", 
        "https://www.zhihu.com/people/ha-ha-ha-65-74-96-88", 
        "https://www.zhihu.com/people/lrk1992", 
        "https://www.zhihu.com/people/xie-yong-50-70", 
        "https://www.zhihu.com/people/xu-jun-rui-81", 
        "https://www.zhihu.com/people/aiolia723", 
        "https://www.zhihu.com/people/sx_AH", 
        "https://www.zhihu.com/people/he-zheng-e", 
        "https://www.zhihu.com/people/zhong-nan-ping-min-zha-di-zhu", 
        "https://www.zhihu.com/people/liu-zhi-yong-34-54", 
        "https://www.zhihu.com/people/xie-rou-jie-jing", 
        "https://www.zhihu.com/people/ta-he-li-xiang-a", 
        "https://www.zhihu.com/people/dai-cheng-he", 
        "https://www.zhihu.com/people/yuan-yuan-sky", 
        "https://www.zhihu.com/people/zhi-xing-lei-lei", 
        "https://www.zhihu.com/people/bai-yifan-62", 
        "https://www.zhihu.com/people/alex-53-88", 
        "https://www.zhihu.com/people/liu-zhang-yuan-24", 
        "https://www.zhihu.com/people/xiao-shu-qi-11", 
        "https://www.zhihu.com/people/xin-ling-jun-88-24", 
        "https://www.zhihu.com/people/xrj3000", 
        "https://www.zhihu.com/people/yin-meng-meng-94", 
        "https://www.zhihu.com/people/liu-zhi-fa-19-77", 
        "https://www.zhihu.com/people/tongwei4811", 
        "https://www.zhihu.com/people/qihebetter", 
        "https://www.zhihu.com/people/ban-hai-jian-56", 
        "https://www.zhihu.com/people/zhong-xiao-yang-13", 
        "https://www.zhihu.com/people/o-oppo-o", 
        "https://www.zhihu.com/people/nan-guo-chu-chu", 
        "https://www.zhihu.com/people/han-bo-30", 
        "https://www.zhihu.com/people/kayle-6-25", 
        "https://www.zhihu.com/people/gone-51-46", 
        "https://www.zhihu.com/people/jian-jian-dan-dan-11-55-63", 
        "https://www.zhihu.com/people/lixingjiu", 
        "https://www.zhihu.com/people/sixinwen", 
        "https://www.zhihu.com/people/zinghd", 
        "https://www.zhihu.com/people/sun-zhe-peng", 
        "https://www.zhihu.com/people/hong-jun-35-30", 
        "https://www.zhihu.com/people/zuo-jiu-wo-26", 
        "https://www.zhihu.com/people/she-liang", 
        "https://www.zhihu.com/people/hong-chao-59", 
        "https://www.zhihu.com/people/gong-bing-yu-59", 
        "https://www.zhihu.com/people/yan-xi-23-47-80", 
        "https://www.zhihu.com/people/valenbase", 
        "https://www.zhihu.com/people/lu-huan-hen-chang", 
        "https://www.zhihu.com/people/altkatz", 
        "https://www.zhihu.com/people/bei-zheng-nan-feng", 
        "https://www.zhihu.com/people/mo-ni-50-3", 
        "https://www.zhihu.com/people/yooyooy", 
        "https://www.zhihu.com/people/xiong-rui-48", 
        "https://www.zhihu.com/people/gao-yue-feng-36", 
        "https://www.zhihu.com/people/hua-chen-99-56", 
        "https://www.zhihu.com/people/zhang-pei-jun-60", 
        "https://www.zhihu.com/people/tian-fang-you-gui", 
        "https://www.zhihu.com/people/sammy-ren", 
        "https://www.zhihu.com/people/fo-shan-chen-yi-xun-96", 
        "https://www.zhihu.com/people/bao-ding-10-16", 
        "https://www.zhihu.com/people/zhang-yong-qing-40", 
        "https://www.zhihu.com/people/xi-xi-xi-17-54", 
        "https://www.zhihu.com/people/qin-kun-78", 
        "https://www.zhihu.com/people/fan-xuan-qing", 
        "https://www.zhihu.com/people/123-40-1-30", 
        "https://www.zhihu.com/people/hahaha-92-99", 
        "https://www.zhihu.com/people/ghostinthesnow1927", 
        "https://www.zhihu.com/people/lan-feng-19-48", 
        "https://www.zhihu.com/people/luojing_automation", 
        "https://www.zhihu.com/people/johnhoper", 
        "https://www.zhihu.com/people/YPHFree", 
        "https://www.zhihu.com/people/cyy-7", 
        "https://www.zhihu.com/people/yuan-yi-97-31", 
        "https://www.zhihu.com/people/zlp-17-77", 
        "https://www.zhihu.com/people/eureka-81-99", 
        "https://www.zhihu.com/people/wei-wei-35-49-36", 
        "https://www.zhihu.com/people/wangqi198877", 
        "https://www.zhihu.com/people/chen-ming-95-73", 
        "https://www.zhihu.com/people/yi-shou-zhe-tian-64", 
        "https://www.zhihu.com/people/zhang-da-91-37", 
        "https://www.zhihu.com/people/feng-wu-ying-67-68", 
        "https://www.zhihu.com/people/xue-zhe-48-27", 
        "https://www.zhihu.com/people/taiji8848", 
        "https://www.zhihu.com/people/jiang-chao-43-46", 
        "https://www.zhihu.com/people/yang-guang-xia-de-xiao-cao-4", 
        "https://www.zhihu.com/people/mo-ran-han-lin-66", 
        "https://www.zhihu.com/people/ke-ai-tun-41-85", 
        "https://www.zhihu.com/people/johnny-63-54", 
        "https://www.zhihu.com/people/hao-shuang-76-87", 
        "https://www.zhihu.com/people/ying-le-49-89", 
        "https://www.zhihu.com/people/hua-ji-tu-20", 
        "https://www.zhihu.com/people/wu-an-tao-94", 
        "https://www.zhihu.com/people/zhao-zhen-xing-49", 
        "https://www.zhihu.com/people/yang-xi-12-53", 
        "https://www.zhihu.com/people/000111999", 
        "https://www.zhihu.com/people/zhou-hao-95-9-51", 
        "https://www.zhihu.com/people/hu-zhi-wei-82-85", 
        "https://www.zhihu.com/people/he-wei-80-76", 
        "https://www.zhihu.com/people/tian-xing-35-31", 
        "https://www.zhihu.com/people/san-sheng-hua-6", 
        "https://www.zhihu.com/people/xiao-qin-cai-51", 
        "https://www.zhihu.com/people/cha-cha-2-19", 
        "https://www.zhihu.com/people/jiong-jiong-67", 
        "https://www.zhihu.com/people/jack-72-26-92", 
        "https://www.zhihu.com/people/ai-ai-fen", 
        "https://www.zhihu.com/people/lu-bo-tao-40", 
        "https://www.zhihu.com/people/di-wang-62-24", 
        "https://www.zhihu.com/people/jason-15-59-38", 
        "https://www.zhihu.com/people/assassin007", 
        "https://www.zhihu.com/people/ba-bu-tian-long-93", 
        "https://www.zhihu.com/people/yan-gui-he-chu-92", 
        "https://www.zhihu.com/people/allen-66-66", 
        "https://www.zhihu.com/people/xiao-hu-64-85-24", 
        "https://www.zhihu.com/people/liang-yong-qin-50", 
        "https://www.zhihu.com/people/arslan-27-67", 
        "https://www.zhihu.com/people/martin-song", 
        "https://www.zhihu.com/people/golaced", 
        "https://www.zhihu.com/people/yang-yi-xin-97-87", 
        "https://www.zhihu.com/people/icaros", 
        "https://www.zhihu.com/people/yu-mi-66-53", 
        "https://www.zhihu.com/people/chen-mu-43-61", 
        "https://www.zhihu.com/people/zheng-feng-80-24", 
        "https://www.zhihu.com/people/shui-ping-meng-mian-ren", 
        "https://www.zhihu.com/people/zheng-jia-yi-46", 
        "https://www.zhihu.com/people/sdmlfd1314", 
        "https://www.zhihu.com/people/xu-ze-yang-35", 
        "https://www.zhihu.com/people/qi-feng-liao-48-90-16", 
        "https://www.zhihu.com/people/ye-xiao-1-61", 
        "https://www.zhihu.com/people/ri-zui-ye-de-gou-33", 
        "https://www.zhihu.com/people/cpgtewa", 
        "https://www.zhihu.com/people/feng-lin-shuang-ye", 
        "https://www.zhihu.com/people/huang-shui-wa", 
        "https://www.zhihu.com/people/beardbourne", 
        "https://www.zhihu.com/people/xu-x-83", 
        "https://www.zhihu.com/people/sws-67", 
        "https://www.zhihu.com/people/wo-bu-dong-41", 
        "https://www.zhihu.com/people/cui-yu-kang", 
        "https://www.zhihu.com/people/qinhan2018", 
        "https://www.zhihu.com/people/hao-xiu-jie", 
        "https://www.zhihu.com/people/o-fei-xiang-de-yu", 
        "https://www.zhihu.com/people/lu-wei-3-41", 
        "https://www.zhihu.com/people/fanatic-9-liu", 
        "https://www.zhihu.com/people/haijie-13", 
        "https://www.zhihu.com/people/tan-jie-23-13", 
        "https://www.zhihu.com/people/zhagyuxin", 
        "https://www.zhihu.com/people/remnantcloude", 
        "https://www.zhihu.com/people/wang-yu-he-44-80", 
        "https://www.zhihu.com/people/fan-xiang-94-24", 
        "https://www.zhihu.com/people/yichuang-shan-hai", 
        "https://www.zhihu.com/people/devins", 
        "https://www.zhihu.com/people/gong-bao-bao-9", 
        "https://www.zhihu.com/people/li-ling-12-18-63", 
        "https://www.zhihu.com/people/jiawen-hu", 
        "https://www.zhihu.com/people/xiao-xin-79-87", 
        "https://www.zhihu.com/people/huang-yong-17-28", 
        "https://www.zhihu.com/people/onewall", 
        "https://www.zhihu.com/people/hao-ting-19-92", 
        "https://www.zhihu.com/people/feng-lin-86-72", 
        "https://www.zhihu.com/people/kisaxiao-bai", 
        "https://www.zhihu.com/people/mo-jun-70-28", 
        "https://www.zhihu.com/people/yao-yi-zheng-84", 
        "https://www.zhihu.com/people/oscar-29-14", 
        "https://www.zhihu.com/people/chesily", 
        "https://www.zhihu.com/people/luo-zhong-chao-45", 
        "https://www.zhihu.com/people/qu-lu-67", 
        "https://www.zhihu.com/people/rui-jia-33-6", 
        "https://www.zhihu.com/people/liu-tian-ming-1", 
        "https://www.zhihu.com/people/zi-fei-yu-76-10", 
        "https://www.zhihu.com/people/geng-chao-37", 
        "https://www.zhihu.com/people/a-cheng-chai", 
        "https://www.zhihu.com/people/jacin-88", 
        "https://www.zhihu.com/people/miao-miao-a", 
        "https://www.zhihu.com/people/liu-fei-94-95", 
        "https://www.zhihu.com/people/wang-kuan-57-47", 
        "https://www.zhihu.com/people/martinz-45", 
        "https://www.zhihu.com/people/cao-mu-hui-73-32", 
        "https://www.zhihu.com/people/luo-di-hu-lu-dong-dong-dong", 
        "https://www.zhihu.com/people/liu-sen-zhi", 
        "https://www.zhihu.com/people/xiang-yi-55-49", 
        "https://www.zhihu.com/people/chen-gong-61-19", 
        "https://www.zhihu.com/people/suo-yi-hong", 
        "https://www.zhihu.com/people/liao-jin-yun", 
        "https://www.zhihu.com/people/liu-lu-34-98", 
        "https://www.zhihu.com/people/mu-tou-75-24", 
        "https://www.zhihu.com/people/jiang-yuan-qing-73"
    ], 
    "article": [
        {
            "url": "https://zhuanlan.zhihu.com/p/85064300", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 6, 
            "title": "导航系统设计专题（五）—扩展卡尔曼滤波（2）", 
            "content": "<h2>前言</h2><p>上一篇围绕卡尔曼滤波算法的参数选取问题展开，针对非线性对象的状态估计问题，阐述扩展卡尔曼滤波（<b>EKF</b>）与卡尔曼滤波的区别以及扩展卡尔曼滤波算法的核心步骤。本篇将结合实际案例进行详解，同时，提供一种扩展卡尔曼滤波算法的C++代码实现方案。</p><h2>扩展卡尔曼滤波实例</h2><p>这里以无人驾驶的测量障碍物的实际案例为例子展开，如下图所示，毫米波雷达能够测量障碍物在极坐标下离雷达的距离 <img src=\"https://www.zhihu.com/equation?tex=%5Crho\" alt=\"\\rho\" eeimg=\"1\"/> 、方向角 <img src=\"https://www.zhihu.com/equation?tex=%5Cvarphi\" alt=\"\\varphi\" eeimg=\"1\"/> 以及距离的变化率（径向速度） <img src=\"https://www.zhihu.com/equation?tex=%5Crho%5E%7B%27%7D\" alt=\"\\rho^{&#39;}\" eeimg=\"1\"/> ，如下图所示，</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-e95273edc724a813f8cbd07f04a080b8_b.jpg\" data-size=\"normal\" data-rawwidth=\"1077\" data-rawheight=\"604\" class=\"origin_image zh-lightbox-thumb\" width=\"1077\" data-original=\"https://pic1.zhimg.com/v2-e95273edc724a813f8cbd07f04a080b8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1077&#39; height=&#39;604&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1077\" data-rawheight=\"604\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1077\" data-original=\"https://pic1.zhimg.com/v2-e95273edc724a813f8cbd07f04a080b8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-e95273edc724a813f8cbd07f04a080b8_b.jpg\"/><figcaption>图1</figcaption></figure><ul><li><b>预测更新</b></li></ul><p>以二维匀速运动为例，这里的状态量 <img src=\"https://www.zhihu.com/equation?tex=x\" alt=\"x\" eeimg=\"1\"/> 为：</p><p><img src=\"https://www.zhihu.com/equation?tex=x%3D+%5Cbegin%7Bbmatrix%7D++p_%7Bx%7D%5C%5C++p_%7By%7D%5C%5C++v_%7Bx%7D%5C%5C++v_%7By%7D%5C%5C++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"x= \\begin{bmatrix}  p_{x}\\\\  p_{y}\\\\  v_{x}\\\\  v_{y}\\\\  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>根据牛顿运动定理，经过 <img src=\"https://www.zhihu.com/equation?tex=%5CDelta+t\" alt=\"\\Delta t\" eeimg=\"1\"/> 时间后的预测状态量为：</p><p><img src=\"https://www.zhihu.com/equation?tex=x%5E%7B%27%7D%3D+%5Cbegin%7Bbmatrix%7D++p_%7Bx%7D%2Bv_%7Bx%7D%2A%5CDelta+t%5C%5C++p_%7By%7D%2Bv_%7By%7D%2A%5CDelta+t%5C%5C++v_%7Bx%7D%5C%5C++v_%7By%7D%5C%5C++%5Cend%7Bbmatrix%7D+%2B+u%5C%5C\" alt=\"x^{&#39;}= \\begin{bmatrix}  p_{x}+v_{x}*\\Delta t\\\\  p_{y}+v_{y}*\\Delta t\\\\  v_{x}\\\\  v_{y}\\\\  \\end{bmatrix} + u\\\\\" eeimg=\"1\"/> </p><p>对于二维的匀速运动模型，加速度为0，并不会对预测后的状态造成影响，因此令</p><p><img src=\"https://www.zhihu.com/equation?tex=u%3D0%5C%5C\" alt=\"u=0\\\\\" eeimg=\"1\"/> </p><p>由此可得状态转移矩阵为</p><p><img src=\"https://www.zhihu.com/equation?tex=F%3D+%5Cbegin%7Bbmatrix%7D++1%260%26%5CDelta+t%260%5C%5C++0%261%260%26%5CDelta+t%5C%5C++0%260%261%260%5C%5C++0%260%260%261%5C%5C++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"F= \\begin{bmatrix}  1&amp;0&amp;\\Delta t&amp;0\\\\  0&amp;1&amp;0&amp;\\Delta t\\\\  0&amp;0&amp;1&amp;0\\\\  0&amp;0&amp;0&amp;1\\\\  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>毫米波雷达测量障碍物在径向上的<b>位置</b>和<b>速度</b>相对准确，不确定度较低，因此可以对状态协方差矩阵P进行如下初始化：</p><p><img src=\"https://www.zhihu.com/equation?tex=P%3D+%5Cbegin%7Bbmatrix%7D++1%260%260%260%5C%5C++0%261%260%260%5C%5C++0%260%2610%260%5C%5C++0%260%260%2610%5C%5C++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"P= \\begin{bmatrix}  1&amp;0&amp;0&amp;0\\\\  0&amp;1&amp;0&amp;0\\\\  0&amp;0&amp;10&amp;0\\\\  0&amp;0&amp;0&amp;10\\\\  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>由于Q对整个系统存在影响，但又不能太确定对系统的影响有多大。对于简单的模型来说，这里可以直接使用<b>单位矩阵</b>或<b>空值</b>进行计算，即</p><p><img src=\"https://www.zhihu.com/equation?tex=Q%3D+%5Cbegin%7Bbmatrix%7D++1%260%260%260%5C%5C++0%261%260%260%5C%5C++0%260%261%260%5C%5C++0%260%260%261%5C%5C++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"Q= \\begin{bmatrix}  1&amp;0&amp;0&amp;0\\\\  0&amp;1&amp;0&amp;0\\\\  0&amp;0&amp;1&amp;0\\\\  0&amp;0&amp;0&amp;1\\\\  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><ul><li><b>量测更新</b></li></ul><p>由图1可知观测值z的数据维度为3×1，为了能够实现矩阵运算，y和Hx&#39;的数据维度也都为3×1。</p><p>使用基本的数学运算可以完成预测值x&#39;从笛卡尔坐标系到极坐标系的坐标转换，求得Hx&#39;，再与观测值z进行计算。需要注意的是，在计算差值y的这一步中，我们通过坐标转换的方式避开了未知的旋转矩阵H的计算，直接得到了Hx’的值。</p><p>为了简化表达，我们用px，py以及vx和vy表示预测后的位置及速度，如下所示：</p><p><img src=\"https://www.zhihu.com/equation?tex=y%3D+%5Cbegin%7Bbmatrix%7D++%5Crho%5C%5C++%5Cvarphi%5C%5C++%5Cdot+%5Crho%5C%5C+%5Cend%7Bbmatrix%7D+-+%5Cbegin%7Bbmatrix%7D++%5Csqrt%7Bp_%7Bx%7D%5E2+%2B+p_y%5E%7B2%7D%7D%5C%5C+arctan%28%5Cfrac%7Bp_%7By%7D%7D%7Bp_%7Bx%7D%7D%29+%5C%5C++%5Cfrac%7Bp_%7Bx%7Dv_%7Bx%7D%2Bp_%7By%7Dv_%7By%7D%7D%7B%5Csqrt%7Bp_%7Bx%7D%5E2%2Bp_%7By%7D%5E2%7D%7D%5C%5C+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"y= \\begin{bmatrix}  \\rho\\\\  \\varphi\\\\  \\dot \\rho\\\\ \\end{bmatrix} - \\begin{bmatrix}  \\sqrt{p_{x}^2 + p_y^{2}}\\\\ arctan(\\frac{p_{y}}{p_{x}}) \\\\  \\frac{p_{x}v_{x}+p_{y}v_{y}}{\\sqrt{p_{x}^2+p_{y}^2}}\\\\ \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>这里，</p><p><img src=\"https://www.zhihu.com/equation?tex=y%3Dz-h%28x%5E%7B%27%7D%29%5C%5C\" alt=\"y=z-h(x^{&#39;})\\\\\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=h%28x%5E%7B%27%7D%29+%3D%5Cbegin%7Bbmatrix%7D++%5Csqrt%7Bp_%7Bx%7D%5E2+%2B+p_y%5E%7B2%7D%7D%5C%5C+arctan%28%5Cfrac%7Bp_%7By%7D%7D%7Bp_%7Bx%7D%7D%29+%5C%5C++%5Cfrac%7Bp_%7Bx%7Dv_%7Bx%7D%2Bp_%7By%7Dv_%7By%7D%7D%7B%5Csqrt%7Bp_%7Bx%7D%5E2%2Bp_%7By%7D%5E2%7D%7D%5C%5C+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"h(x^{&#39;}) =\\begin{bmatrix}  \\sqrt{p_{x}^2 + p_y^{2}}\\\\ arctan(\\frac{p_{y}}{p_{x}}) \\\\  \\frac{p_{x}v_{x}+p_{y}v_{y}}{\\sqrt{p_{x}^2+p_{y}^2}}\\\\ \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>毫米波雷达<b>观测z</b>是包含位置、角度和径向速度的3x1的列向量，<b>状态向量x&#39;</b>是包含位置和速度信息的4x1的列向量，根据公式y=z-Hx&#39;可知<b>测量矩阵（Measurement Matrix）H</b>的维度是3行4列。即：</p><p><img src=\"https://www.zhihu.com/equation?tex=h%28x%5E%7B%27%7D%29+%3D%5Cbegin%7Bbmatrix%7D++%5Csqrt%7Bp_%7Bx%7D%5E2+%2B+p_y%5E%7B2%7D%7D%5C%5C+arctan%28%5Cfrac%7Bp_%7By%7D%7D%7Bp_%7Bx%7D%7D%29+%5C%5C++%5Cfrac%7Bp_%7Bx%7Dv_%7Bx%7D%2Bp_%7By%7Dv_%7By%7D%7D%7B%5Csqrt%7Bp_%7Bx%7D%5E2%2Bp_%7By%7D%5E2%7D%7D%5C%5C+%5Cend%7Bbmatrix%7D%3D+%5Cbegin%7Bbmatrix%7D+H_%7B00%7D%26H_%7B01%7D%26H_%7B02%7D%26H_%7B03%7D%5C%5C+H_%7B10%7D%26H_%7B11%7D%26H_%7B12%7D%26H_%7B13%7D%5C%5C+H_%7B20%7D%26H_%7B21%7D%26H_%7B22%7D%26H_%7B23%7D%5C%5C+%5Cend%7Bbmatrix%7D+%2A+%5Cbegin%7Bbmatrix%7D+p_%7Bx%7D%5C%5C+p_%7By%7D%5C%5C+v_%7Bx%7D%5C%5C+v_%7By%7D+%5Cend%7Bbmatrix%7D+%3DH+%2A+x%5E%7B%27%7D%5C%5C\" alt=\"h(x^{&#39;}) =\\begin{bmatrix}  \\sqrt{p_{x}^2 + p_y^{2}}\\\\ arctan(\\frac{p_{y}}{p_{x}}) \\\\  \\frac{p_{x}v_{x}+p_{y}v_{y}}{\\sqrt{p_{x}^2+p_{y}^2}}\\\\ \\end{bmatrix}= \\begin{bmatrix} H_{00}&amp;H_{01}&amp;H_{02}&amp;H_{03}\\\\ H_{10}&amp;H_{11}&amp;H_{12}&amp;H_{13}\\\\ H_{20}&amp;H_{21}&amp;H_{22}&amp;H_{23}\\\\ \\end{bmatrix} * \\begin{bmatrix} p_{x}\\\\ p_{y}\\\\ v_{x}\\\\ v_{y} \\end{bmatrix} =H * x^{&#39;}\\\\\" eeimg=\"1\"/> </p><p>此时，我们需要对H矩阵进行泰勒展开（线性化），得到其Jacobian矩阵，求解方法详解上一篇，这里不再赘述。</p><a href=\"https://zhuanlan.zhihu.com/p/84581716\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic4.zhimg.com/v2-3560d10889142d2419818ced5b646c93_180x120.jpg\" data-image-width=\"2560\" data-image-height=\"1080\" class=\"internal\">遥远的乌托邦：导航系统设计专题（四）—扩展卡尔曼滤波（1）</a><p>经过线性化，最终得到测量矩阵H为：</p><p><img src=\"https://www.zhihu.com/equation?tex=H%3D+%5Cbegin%7Bbmatrix%7D++%5Cfrac%7Bp_%7Bx%7D%7D%7B%5Csqrt%7Bp_%7Bx%7D%5E2+%2B+p_%7By%7D%5E2%7D%7D%26%5Cfrac%7Bp_%7By%7D%7D%7B%5Csqrt%7Bp_%7Bx%7D%5E2+%2B+p_%7By%7D%5E2%7D%7D%260%260%5C%5C++-%5Cfrac%7Bp_%7By%7D%7D%7Bp_%7Bx%7D%5E2+%2B+p_%7By%7D%5E2%7D%26%5Cfrac%7Bp_%7Bx%7D%7D%7Bp_%7Bx%7D%5E2+%2B+p_%7By%7D%5E2%7D%260%260%5C%5C++%5Cfrac%7Bp_%7By%7D%28v_%7Bx%7Dp_%7By%7D-v_%7By%7Dp_%7Bx%7D%29%7D%7B%28p_%7Bx%7D%5E2%2Bp_%7By%7D%5E2%29%5E%5Cfrac%7B3%7D%7B2%7D%7D%26%5Cfrac%7Bp_%7Bx%7D%28v_%7By%7Dp_%7Bx%7D-v_%7Bx%7Dp_%7By%7D%29%7D%7B%28p_%7Bx%7D%5E2%2Bp_%7By%7D%5E2%29%5E%5Cfrac%7B3%7D%7B2%7D%7D%26%5Cfrac%7Bp_%7Bx%7D%7D%7B%5Csqrt%7Bp_%7Bx%7D%5E2+%2B+p_%7By%7D%5E2%7D%7D%26%5Cfrac%7Bp_%7By%7D%7D%7B%5Csqrt%7Bp_%7Bx%7D%5E2+%2B+p_%7By%7D%5E2%7D%7D+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"H= \\begin{bmatrix}  \\frac{p_{x}}{\\sqrt{p_{x}^2 + p_{y}^2}}&amp;\\frac{p_{y}}{\\sqrt{p_{x}^2 + p_{y}^2}}&amp;0&amp;0\\\\  -\\frac{p_{y}}{p_{x}^2 + p_{y}^2}&amp;\\frac{p_{x}}{p_{x}^2 + p_{y}^2}&amp;0&amp;0\\\\  \\frac{p_{y}(v_{x}p_{y}-v_{y}p_{x})}{(p_{x}^2+p_{y}^2)^\\frac{3}{2}}&amp;\\frac{p_{x}(v_{y}p_{x}-v_{x}p_{y})}{(p_{x}^2+p_{y}^2)^\\frac{3}{2}}&amp;\\frac{p_{x}}{\\sqrt{p_{x}^2 + p_{y}^2}}&amp;\\frac{p_{y}}{\\sqrt{p_{x}^2 + p_{y}^2}} \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><h2>扩展卡尔曼滤波的C++实现方案</h2><p>完成以上推导后，我们将推导的过程写成代码。这里采用矩阵运算库Eigen进行矩阵运算，其运算效率较高，与自定义的矩阵运算库相比也更省心。</p><ul><li><b>ExtendedKalmanFilter类的实现</b></li></ul><div class=\"highlight\"><pre><code class=\"language-cpp\"><span class=\"cp\">#pragma once\n</span><span class=\"cp\">#include</span> <span class=\"cpf\">&#34;Eigen/Dense&#34;</span><span class=\"cp\">\n</span><span class=\"cp\"></span>\n<span class=\"k\">class</span><span class=\"err\"> </span><span class=\"nc\">ExtendedKalmanFilter</span><span class=\"p\">{</span>\n<span class=\"k\">public</span><span class=\"o\">:</span>\n    <span class=\"c1\">//构造函数\n</span><span class=\"c1\"></span>    <span class=\"n\">ExtendedKalmanFilter</span><span class=\"p\">(){</span>\n        <span class=\"n\">is_initialized</span> <span class=\"o\">=</span> <span class=\"nb\">false</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"c1\">//析构函数\n</span><span class=\"c1\"></span>    <span class=\"o\">~</span><span class=\"n\">ExtendedKalmanFilter</span><span class=\"p\">(){}</span>\n    \n    <span class=\"kt\">void</span> <span class=\"n\">Initialization</span><span class=\"p\">(</span><span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">VectorXd</span> <span class=\"n\">x_in</span><span class=\"p\">){</span>\n        <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">x_in</span><span class=\"p\">;</span>\n        <span class=\"n\">is_initialized</span> <span class=\"o\">=</span> <span class=\"nb\">true</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span> \n\n    <span class=\"kt\">bool</span> <span class=\"n\">IsInitialized</span><span class=\"p\">(){</span>\n        <span class=\"k\">return</span> <span class=\"n\">is_initialized</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n    \n    <span class=\"c1\">//状态转移矩阵赋值\n</span><span class=\"c1\"></span>    <span class=\"kt\">void</span> <span class=\"n\">SetF</span><span class=\"p\">(</span><span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">F_in</span><span class=\"p\">){</span>\n        <span class=\"n\">F</span> <span class=\"o\">=</span> <span class=\"n\">F_in</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">//状态协方差矩阵赋值\n</span><span class=\"c1\"></span>    <span class=\"kt\">void</span> <span class=\"n\">SetP</span><span class=\"p\">(</span><span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">P_in</span><span class=\"p\">){</span>\n        <span class=\"n\">P</span> <span class=\"o\">=</span> <span class=\"n\">P_in</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">//过程噪声矩阵赋值\n</span><span class=\"c1\"></span>    <span class=\"kt\">void</span> <span class=\"n\">SetQ</span><span class=\"p\">(</span><span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">Q_in</span><span class=\"p\">){</span>\n        <span class=\"n\">Q</span> <span class=\"o\">=</span> <span class=\"n\">Q_in</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">//量测噪声矩阵赋值\n</span><span class=\"c1\"></span>    <span class=\"kt\">void</span> <span class=\"n\">SetR</span><span class=\"p\">(</span><span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">R_in</span><span class=\"p\">){</span>\n        <span class=\"n\">R</span> <span class=\"o\">=</span> <span class=\"n\">R_in</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"c1\">//预测更新\n</span><span class=\"c1\"></span>    <span class=\"kt\">void</span> <span class=\"n\">Prediction</span><span class=\"p\">(){</span>\n        <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">F</span> <span class=\"o\">*</span> <span class=\"n\">x</span><span class=\"p\">;</span>\n        <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">Ft</span> <span class=\"o\">=</span> <span class=\"n\">F</span><span class=\"p\">.</span><span class=\"n\">transpose</span><span class=\"p\">();</span>\n        <span class=\"n\">P</span> <span class=\"o\">=</span> <span class=\"n\">F</span> <span class=\"o\">*</span> <span class=\"n\">P</span> <span class=\"o\">*</span> <span class=\"n\">Ft</span> <span class=\"o\">+</span> <span class=\"n\">Q</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"kt\">void</span> <span class=\"n\">CalculateJacobianMatrix</span><span class=\"p\">(){</span>\n        <span class=\"n\">MatrixXd</span> <span class=\"n\">Hj</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"mi\">4</span><span class=\"p\">);</span>\n\n        <span class=\"c1\">//获取状态量\n</span><span class=\"c1\"></span>        <span class=\"kt\">float</span> <span class=\"n\">px</span> <span class=\"o\">=</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">);</span>\n        <span class=\"kt\">float</span> <span class=\"n\">py</span> <span class=\"o\">=</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">);</span>\n        <span class=\"kt\">float</span> <span class=\"n\">vx</span> <span class=\"o\">=</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">);</span>\n        <span class=\"kt\">float</span> <span class=\"n\">xy</span> <span class=\"o\">=</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">);</span>\n\n        <span class=\"kt\">float</span> <span class=\"n\">c1</span> <span class=\"o\">=</span> <span class=\"n\">px</span> <span class=\"o\">*</span> <span class=\"n\">px</span> <span class=\"o\">+</span> <span class=\"n\">py</span> <span class=\"o\">*</span> <span class=\"n\">py</span><span class=\"p\">;</span>\n        <span class=\"kt\">float</span> <span class=\"n\">c2</span> <span class=\"o\">=</span> <span class=\"n\">sqrt</span><span class=\"p\">(</span><span class=\"n\">c1</span><span class=\"p\">);</span>\n        <span class=\"kt\">float</span> <span class=\"n\">c3</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">c1</span> <span class=\"o\">*</span> <span class=\"n\">c2</span><span class=\"p\">);</span>\n\n        <span class=\"c1\">//避免除0的情况\n</span><span class=\"c1\"></span>        <span class=\"k\">if</span><span class=\"p\">(</span><span class=\"n\">fabs</span><span class=\"p\">(</span><span class=\"n\">c1</span><span class=\"p\">)</span> <span class=\"o\">&lt;</span> <span class=\"mf\">0.0001</span><span class=\"p\">){</span>\n            <span class=\"n\">H</span> <span class=\"o\">=</span> <span class=\"n\">Hj</span><span class=\"p\">;</span>\n            <span class=\"k\">return</span><span class=\"p\">;</span>\n        <span class=\"p\">}</span>\n        <span class=\"n\">Hj</span> <span class=\"o\">&lt;&lt;</span> <span class=\"p\">(</span><span class=\"n\">px</span><span class=\"o\">/</span><span class=\"n\">c2</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">py</span><span class=\"o\">/</span><span class=\"n\">c2</span><span class=\"p\">),</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span>\n               <span class=\"o\">-</span><span class=\"p\">(</span><span class=\"n\">py</span><span class=\"o\">/</span><span class=\"n\">c1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"n\">px</span><span class=\"o\">/</span><span class=\"n\">c1</span><span class=\"p\">),</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> \n               <span class=\"n\">py</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"n\">vx</span><span class=\"o\">*</span><span class=\"n\">py</span> <span class=\"o\">-</span> <span class=\"n\">vy</span><span class=\"o\">*</span><span class=\"n\">px</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"n\">c3</span><span class=\"p\">,</span> <span class=\"n\">px</span><span class=\"o\">*</span><span class=\"p\">(</span><span class=\"n\">px</span><span class=\"o\">*</span><span class=\"n\">vy</span> <span class=\"o\">-</span> <span class=\"n\">py</span><span class=\"o\">*</span><span class=\"n\">vx</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"n\">c3</span><span class=\"p\">,</span> <span class=\"n\">px</span><span class=\"o\">/</span><span class=\"n\">c2</span><span class=\"p\">,</span> <span class=\"n\">py</span><span class=\"o\">/</span><span class=\"n\">c2</span><span class=\"p\">;</span>\n        <span class=\"n\">H</span> <span class=\"o\">=</span> <span class=\"n\">Hj</span><span class=\"p\">;</span>\n        <span class=\"k\">return</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n    <span class=\"kt\">void</span>  <span class=\"n\">MeasurementUpdate</span><span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">VectorXd</span> <span class=\"o\">&amp;</span><span class=\"n\">z</span><span class=\"p\">){</span>\n        <span class=\"kt\">double</span> <span class=\"n\">rho</span> <span class=\"o\">=</span> <span class=\"n\">sqrt</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">));</span>\n        <span class=\"kt\">double</span> <span class=\"n\">theta</span> <span class=\"o\">=</span> <span class=\"n\">atan2</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">));</span>\n        <span class=\"kt\">double</span> <span class=\"n\">rho_dot</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"o\">*</span><span class=\"n\">x</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">))</span><span class=\"o\">/</span><span class=\"n\">rho</span><span class=\"p\">;</span>\n        <span class=\"n\">VectorXd</span> <span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"n\">VectorXd</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">);</span>\n        <span class=\"n\">h</span> <span class=\"o\">&lt;&lt;</span> <span class=\"n\">rho</span><span class=\"p\">,</span> <span class=\"n\">theta</span><span class=\"p\">,</span> <span class=\"n\">rho_dot</span><span class=\"p\">;</span>\n\n        <span class=\"n\">VectorXd</span> <span class=\"n\">y</span> <span class=\"o\">=</span> <span class=\"n\">z</span> <span class=\"o\">-</span> <span class=\"n\">h</span><span class=\"p\">;</span>\n        <span class=\"n\">CalculateJacobianMatrix</span><span class=\"p\">();</span>\n        \n        <span class=\"n\">MatrixXd</span> <span class=\"n\">S</span> <span class=\"o\">=</span> <span class=\"n\">H</span> <span class=\"o\">*</span> <span class=\"n\">P</span> <span class=\"o\">*</span> <span class=\"n\">H</span><span class=\"p\">.</span><span class=\"n\">transpose</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"n\">R</span><span class=\"p\">;</span>\n        <span class=\"n\">MatrixXd</span> <span class=\"n\">K</span> <span class=\"o\">=</span> <span class=\"n\">P</span> <span class=\"o\">*</span> <span class=\"n\">H</span><span class=\"p\">.</span><span class=\"n\">transpose</span><span class=\"p\">()</span> <span class=\"o\">*</span> <span class=\"n\">S</span><span class=\"p\">.</span><span class=\"n\">inverse</span><span class=\"p\">();</span>\n        <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">x</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"n\">K</span> <span class=\"o\">*</span> <span class=\"n\">y</span><span class=\"p\">);</span>\n        <span class=\"n\">P</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"n\">I</span> <span class=\"o\">-</span> <span class=\"n\">K</span> <span class=\"o\">*</span> <span class=\"n\">H</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"n\">P</span><span class=\"p\">;</span>\n    <span class=\"p\">}</span>\n\n<span class=\"k\">private</span><span class=\"o\">:</span>\n    <span class=\"c1\">//初始化标志位\n</span><span class=\"c1\"></span>    <span class=\"kt\">bool</span> <span class=\"n\">is_initialized</span><span class=\"p\">;</span>\n\n    <span class=\"c1\">//状态向量\n</span><span class=\"c1\"></span>    <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">VectorXd</span> <span class=\"n\">x</span><span class=\"p\">;</span>\n\n    <span class=\"c1\">//状态转移矩阵\n</span><span class=\"c1\"></span>    <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">F</span><span class=\"p\">;</span>\n\n    <span class=\"c1\">//状态协方差矩阵\n</span><span class=\"c1\"></span>    <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">P</span><span class=\"p\">;</span>\n\n    <span class=\"c1\">//过程噪声矩阵\n</span><span class=\"c1\"></span>    <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">Q</span><span class=\"p\">;</span>\n\n    <span class=\"c1\">//雅各比量测矩阵\n</span><span class=\"c1\"></span>    <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">H</span><span class=\"p\">;</span>\n\n    <span class=\"c1\">//量测噪声协方差矩阵\n</span><span class=\"c1\"></span>    <span class=\"n\">Eigen</span><span class=\"o\">::</span><span class=\"n\">MatrixXd</span> <span class=\"n\">R</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div><ul><li><b>扩展卡尔曼滤波器的调用</b></li></ul><div class=\"highlight\"><pre><code class=\"language-text\">#include &#34;extended_kalman_filter.h&#34;\n#include &#34;math.h&#34;\n#include &lt;iostream&gt;\n\nint main(){\n    double m_rho = 0.0f, m_theta = 0.0f, m_rho_dot = 0.0f;\n    doublt last_timestamp = 0.0f, now_timestamp = 0.0f;\n    ExtendedKalmanFilter ekf;\n\n    while(GetRadarData(&amp;m_rho, &amp;m_rho_dot, &amp;now_timestamp)){\n        if(!ekf.IsInitialized(){\n            last_timestamp = now_timestamp;\n            Eigen::VectorXd x(4, 1);\n            x &lt;&lt; m_rho * cos(m_theta), m_rho*sin(m_theta),\n                 m_rho_dot * cos(m_theta), m_rho_dot * sin(m_theta);\n            ekf.Initialization(x);\n            \n            //状态协方差矩阵初始化\n            Eigen::MatrixXd P_in(4, 4);\n            P_in &lt;&lt; 1.0, 0.0, 0.0, 0.0,\n                    0.0, 1.0, 0.0, 0.0,\n                    0.0, 0.0, 10.0,0.0,\n                    0.0, 0.0, 0.0, 10.0;\n            \n            ekf.setP(P_in);\n\n            //过程噪声矩阵初始化\n            Eigen::MatrixXd Q_in(4, 4);\n            Q_in &lt;&lt; 1.0, 0.0, 0.0, 0.0,\n                    0.0, 1.0, 0.0, 0.0,\n                    0.0, 0.0, 1.0, 0.0,\n                    0.0, 0.0, 0.0, 1.0;\n            ekf.setP(P_in);\n\n            //量测噪声矩阵初始化\n            Eigen::MatrixXd R_in(3, 3);\n            R_in &lt;&lt; 0.09, 0.0, 0.0,\n                    0.0,  0.0009, 0.0.\n                    0.0,  0.0, 0.09;\n            ekf.setR(R_in);\n            continue;\n        }\n        double delta_t = now_timestamp - last_timestamp;\n        last_timestamp = now_timestamp;\n        Eigen::MatrixXd F_in(4, 4);\n        F_in &lt;&lt; 1.0, 0.0, delta_t, 0.0,\n                0.0, 1.0, 0.0, delta_t,\n                0.0, 0.0, 1.0, 0.0,\n                0.0, 0.0, 0.0, 1.0;\n        ekf.setF(F_in);\n        ekf.Prediction();\n\n        Eigen::VectorXd z(3, 1);\n        z &lt;&lt; m_rho, m_theta, m_rho_dot;\n        ekf.MeasurementUpdate(z);\n\n        Eigen::VectorXd x_out = ekf.GetX();\n        std::cout &lt;&lt; &#34;kalman output x : &#34; &lt;&lt; x_out(0) &lt;&lt; &#34; y : &#34; &lt;&lt; x_out(1) &lt;&lt; std::endl; \n    }\n}</code></pre></div><h2>总结</h2><p>本篇围绕一个简单的案例展开，详解扩展卡尔曼滤波算法的实现，同时，提供了一种采用Eigen矩阵运算库的c++实现方案。下篇中，我们将围绕多传感器状态估计的最优估计问题展开论述。</p>", 
            "topic": [
                {
                    "tag": "算法", 
                    "tagLink": "https://api.zhihu.com/topics/19553510"
                }, 
                {
                    "tag": "自动控制", 
                    "tagLink": "https://api.zhihu.com/topics/19589888"
                }, 
                {
                    "tag": "卡尔曼滤波 Kalman Filter", 
                    "tagLink": "https://api.zhihu.com/topics/20016366"
                }
            ], 
            "comments": [
                {
                    "userName": "子非鱼", 
                    "userLink": "https://www.zhihu.com/people/0d10bbda51711d80f33c1aebca4d3e6b", 
                    "content": "<p>赞一个</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "子非鱼", 
                    "userLink": "https://www.zhihu.com/people/0d10bbda51711d80f33c1aebca4d3e6b", 
                    "content": "<a class=\"comment_sticker\" href=\"https://pic4.zhimg.com/v2-fa3cb6bc9ec57da84ab53a60f48d0c6f.gif\" data-width=\"\" data-height=\"\">[棒]</a>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/84581716", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 7, 
            "title": "导航系统设计专题（四）—扩展卡尔曼滤波（1）", 
            "content": "<h2>前言</h2><p>上一篇中围绕一个简单的匀速直线运动的状态估计仿真实例展开，阐述了卡尔曼滤波器的实现方式、过程以及仿真效果。本篇将对卡尔曼滤波的几个主要参数的选取作一定的说明，同时，围绕扩展卡尔曼滤波算法展开，阐述其与卡尔曼滤波器的区别与作用。</p><h2>卡尔曼滤波的参数选取问题</h2><p>这里还是以上篇中提到的匀速运动仿真实例为案例。</p><ul><li><img src=\"https://www.zhihu.com/equation?tex=Q\" alt=\"Q\" eeimg=\"1\"/> </li></ul><p><img src=\"https://www.zhihu.com/equation?tex=Q\" alt=\"Q\" eeimg=\"1\"/> 阵为过程噪声矩阵，描述了我们所建立的状态方程的不确定度。例如，仅管我们认为对象处于匀速直线运动状态，然而，现实情况可能如下：</p><ol><li><b>对象在运动过程中遇到上坡，在上坡过程中减速导致状态方程描述的状态量与实际值偏差增大。</b></li><li><b>对象在运动过程中遇到障碍物，对象减速，导致状态方程描述的状态量与实际值偏差增大。</b></li></ol><p>除了以上描述的两种情况外，还可能存在许多未知的情况，均可能导致状态方程描述不准确的情况。因此， <img src=\"https://www.zhihu.com/equation?tex=Q\" alt=\"Q\" eeimg=\"1\"/> 阵的选定往往代表了我们对于对象在实际运行情况下，状态方程与实际情况的吻合度。若我们认为，状态方程非常可靠，则 <img src=\"https://www.zhihu.com/equation?tex=Q\" alt=\"Q\" eeimg=\"1\"/> 阵取较小值，此时，卡尔曼滤波的估计结果更偏向于预测值，反之，则更接近于量测值。</p><ul><li><img src=\"https://www.zhihu.com/equation?tex=R\" alt=\"R\" eeimg=\"1\"/> </li></ul><p><img src=\"https://www.zhihu.com/equation?tex=R\" alt=\"R\" eeimg=\"1\"/> 阵描述了量测噪声，该矩阵的取值往往由经验决定，可通过传感器厂商给出的Datasheet中找到对应的值，或作为卡尔曼滤波器的可调参数，综合整个滤波器的估计效果来整定。</p><ul><li><img src=\"https://www.zhihu.com/equation?tex=P_%7B0%7D+\" alt=\"P_{0} \" eeimg=\"1\"/> </li></ul><p><img src=\"https://www.zhihu.com/equation?tex=P_%7B0%7D\" alt=\"P_{0}\" eeimg=\"1\"/> 为协方差矩阵的初值，可理解为初始的状态量的不确定度。一般而言，对于精度较低的系统，该值可取一个较大值。</p><ul><li><img src=\"https://www.zhihu.com/equation?tex=x_%7B0%7D\" alt=\"x_{0}\" eeimg=\"1\"/> </li></ul><p><img src=\"https://www.zhihu.com/equation?tex=x_%7B0%7D\" alt=\"x_{0}\" eeimg=\"1\"/> 为初始状态量，可由一段时间传感器的直接或间接测量值，经过一定的滤波处理或转换计算得到。</p><h2>卡尔曼滤波与扩展卡尔曼滤波的区别</h2><p>一定有人会问：既然已经有了卡尔曼滤波算法，那么扩展卡尔曼滤波算法又有何用处？那么，扩展卡尔曼滤波算法究竟解决的是什么样的实际问题？</p><p>卡尔曼滤波在实际工程中常被用于状态转移矩阵与量测矩阵为线性的情况，原因在于卡尔曼滤波原理是在变量服从高斯分布的前提下推导出来的。当我们将一个高斯分布输入到一个非线性函数中，得到的结果将不符合高斯分布。此时，若强行对非线性对象使用卡尔曼滤波进行状态估计，得到的结果将不再是无偏估计。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-33e63ec05ba643262b5f19d90838847f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"720\" data-rawheight=\"335\" class=\"origin_image zh-lightbox-thumb\" width=\"720\" data-original=\"https://pic4.zhimg.com/v2-33e63ec05ba643262b5f19d90838847f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;720&#39; height=&#39;335&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"720\" data-rawheight=\"335\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"720\" data-original=\"https://pic4.zhimg.com/v2-33e63ec05ba643262b5f19d90838847f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-33e63ec05ba643262b5f19d90838847f_b.jpg\"/></figure><p><b>扩展卡尔曼滤波算法（EKF）</b>应运而生。</p><p>由于被估计对象不再线性，其<b>状态转移矩阵</b><img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D\" alt=\"F_{k}\" eeimg=\"1\"/> 与<b>量测矩阵</b><img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D\" alt=\"H_{k}\" eeimg=\"1\"/>无法再用一个常系数矩阵表示。扩展卡尔曼滤波在每一个更新周期内，针对每一个状态点 <img src=\"https://www.zhihu.com/equation?tex=x_%7B0%7D\" alt=\"x_{0}\" eeimg=\"1\"/> ，对<b>状态转移矩阵</b> <img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D\" alt=\"F_{k}\" eeimg=\"1\"/> 与<b>量测矩阵</b> <img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D\" alt=\"H_{k}\" eeimg=\"1\"/>进行泰勒展开：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-a9d2ddc3706dff502d7ea4d4b93c7b87_b.png\" data-size=\"normal\" data-rawwidth=\"827\" data-rawheight=\"115\" class=\"origin_image zh-lightbox-thumb\" width=\"827\" data-original=\"https://pic4.zhimg.com/v2-a9d2ddc3706dff502d7ea4d4b93c7b87_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;827&#39; height=&#39;115&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"827\" data-rawheight=\"115\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"827\" data-original=\"https://pic4.zhimg.com/v2-a9d2ddc3706dff502d7ea4d4b93c7b87_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a9d2ddc3706dff502d7ea4d4b93c7b87_b.png\"/><figcaption>泰勒展开公式</figcaption></figure><p>这里，我们忽略二次以上高阶项，即可得到近似的线性化方程，用于代替非线性函数 <img src=\"https://www.zhihu.com/equation?tex=h%28x%29\" alt=\"h(x)\" eeimg=\"1\"/> ，即：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-2c0e1e21f9d217994516172ba40235e3_b.png\" data-size=\"normal\" data-rawwidth=\"501\" data-rawheight=\"69\" class=\"origin_image zh-lightbox-thumb\" width=\"501\" data-original=\"https://pic4.zhimg.com/v2-2c0e1e21f9d217994516172ba40235e3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;501&#39; height=&#39;69&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"501\" data-rawheight=\"69\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"501\" data-original=\"https://pic4.zhimg.com/v2-2c0e1e21f9d217994516172ba40235e3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-2c0e1e21f9d217994516172ba40235e3_b.png\"/><figcaption>线性化</figcaption></figure><p>将非线性函数 <img src=\"https://www.zhihu.com/equation?tex=h%28x%29+\" alt=\"h(x) \" eeimg=\"1\"/> 拓展到多维，即求各个变量的偏导数，即</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-cf2570a455c051cf26a1195853bb4885_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"545\" data-rawheight=\"130\" class=\"origin_image zh-lightbox-thumb\" width=\"545\" data-original=\"https://pic2.zhimg.com/v2-cf2570a455c051cf26a1195853bb4885_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;545&#39; height=&#39;130&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"545\" data-rawheight=\"130\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"545\" data-original=\"https://pic2.zhimg.com/v2-cf2570a455c051cf26a1195853bb4885_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-cf2570a455c051cf26a1195853bb4885_b.jpg\"/></figure><p>其中，对各变量求偏导数所对应的这一项被称为雅可比（Jacobian）项，</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-363b03be5830ab8fba7313aee2115625_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"515\" data-rawheight=\"269\" class=\"origin_image zh-lightbox-thumb\" width=\"515\" data-original=\"https://pic2.zhimg.com/v2-363b03be5830ab8fba7313aee2115625_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;515&#39; height=&#39;269&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"515\" data-rawheight=\"269\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"515\" data-original=\"https://pic2.zhimg.com/v2-363b03be5830ab8fba7313aee2115625_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-363b03be5830ab8fba7313aee2115625_b.jpg\"/></figure><p>所有雅可比项组成了多维雅可比矩阵，而该雅可比矩阵即我们所需要的线性化后的量测矩阵：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-92ff3b60598f2057b1c7b90d55fb170b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"507\" data-rawheight=\"350\" class=\"origin_image zh-lightbox-thumb\" width=\"507\" data-original=\"https://pic4.zhimg.com/v2-92ff3b60598f2057b1c7b90d55fb170b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;507&#39; height=&#39;350&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"507\" data-rawheight=\"350\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"507\" data-original=\"https://pic4.zhimg.com/v2-92ff3b60598f2057b1c7b90d55fb170b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-92ff3b60598f2057b1c7b90d55fb170b_b.jpg\"/></figure><p>线性化后的<b>状态转移矩阵</b><img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D\" alt=\"F_{k}\" eeimg=\"1\"/>同理可得，在此不作赘述。</p><p>在得到线性化后的<b>状态转移矩阵</b><img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D\" alt=\"F_{k}\" eeimg=\"1\"/> 与<b>量测矩阵</b> <img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D\" alt=\"H_{k}\" eeimg=\"1\"/> 后，我们再次祭出卡尔曼老先生的五大经典卡尔曼滤波方程：</p><ul><li><b>状态更新方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=%5Chat+x_%7Bk%7D%3DF_%7Bk%7D%5Chat+x_%7Bk-1%7D%2BB_%7Bk%7Du_%7Bk%7D%5C%5C+P_%7Bk%7D%3DF_%7Bk%7DP_%7Bk-1%7DF_%7Bk%7D%5E%7BT%7D%2BQ_%7Bk%7D%5C%5C\" alt=\"\\hat x_{k}=F_{k}\\hat x_{k-1}+B_{k}u_{k}\\\\ P_{k}=F_{k}P_{k-1}F_{k}^{T}+Q_{k}\\\\\" eeimg=\"1\"/> </p><ul><li><b>量测更新方程</b><br/> <img src=\"https://www.zhihu.com/equation?tex=%5Chat+x_%7Bk%7D%5E%7B%27%7D%3D%5Chat+x_%7Bk%7D%2BK%28z_%7Bk%7D+-+H_%7Bk%7D%5Chat+x_%7Bk%7D%29%5C%5C+P_%7Bk%7D%5E%7B%27%7D%3DP_%7Bk%7D-KH_%7Bk%7DP_%7Bk%7D%5C%5C+K%3DP_%7Bk%7DH_%7Bk%7D%5E%7BT%7D%28H_%7Bk%7DP_%7Bk%7DH_%7Bk%7D%5E%7BT%7D%2BR_%7Bk%7D%29%5E%7B-1%7D%5C%5C\" alt=\"\\hat x_{k}^{&#39;}=\\hat x_{k}+K(z_{k} - H_{k}\\hat x_{k})\\\\ P_{k}^{&#39;}=P_{k}-KH_{k}P_{k}\\\\ K=P_{k}H_{k}^{T}(H_{k}P_{k}H_{k}^{T}+R_{k})^{-1}\\\\\" eeimg=\"1\"/> </li></ul><p>具体的公式说明可参考上一篇文章：</p><a href=\"https://zhuanlan.zhihu.com/p/83457951\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-3c1bb3796c3e8a8a33712989caf39410_180x120.jpg\" data-image-width=\"4096\" data-image-height=\"2303\" class=\"internal\">遥远的乌托邦：导航系统设计专题（三）—卡尔曼滤波算法入门</a><p>至此，扩展卡尔曼滤波与卡尔曼滤波的算法流程并无区别。总结而言，其两者的主要区别在于：</p><ul><li><b>扩展卡尔曼滤波需要在每个更新周期，针对非线性状态转移矩阵</b> <img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D+\" alt=\"F_{k} \" eeimg=\"1\"/> <b>与非线性量测矩阵</b> <img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D\" alt=\"H_{k}\" eeimg=\"1\"/> <b>进行线性化。</b></li><li><b>对于嵌入式系统而言，扩展卡尔曼滤波算法的运算量要远大于卡尔曼滤波算法，因此，在建模时，对于量测方程与状态转移方程的选取需要有一定的简化，降低运算量。</b></li></ul><h2>总结</h2><p>本篇主要内容如下：</p><ul><li><b>针对卡尔曼滤波的参数选取问题进行阐述</b></li><li><b>解释了卡尔曼滤波与扩展卡尔曼滤波算法的区别</b></li><li><b>阐述了扩展卡尔曼滤波算法的实现过程</b></li></ul><p>下篇预告：</p><ul><li><b>以一个简单的仿真案例阐述扩展卡尔曼滤波的实现过程</b></li><li><b>扩展卡尔曼滤波的c++代码实现</b></li></ul>", 
            "topic": [
                {
                    "tag": "卡尔曼滤波 Kalman Filter", 
                    "tagLink": "https://api.zhihu.com/topics/20016366"
                }, 
                {
                    "tag": "自动控制", 
                    "tagLink": "https://api.zhihu.com/topics/19589888"
                }, 
                {
                    "tag": "同时定位和地图构建（SLAM）", 
                    "tagLink": "https://api.zhihu.com/topics/20033502"
                }
            ], 
            "comments": [
                {
                    "userName": "Darker", 
                    "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                    "content": "这是往全栈式工程师发展的节奏啊", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "没办法 业务需要[捂嘴]", 
                            "likes": 0, 
                            "replyToAuthor": "Darker"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/84433118", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 8, 
            "title": "专栏文章目录及说明", 
            "content": "<h2>控制系统设计专题（已更新4篇）</h2><a href=\"https://zhuanlan.zhihu.com/p/80858157\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-31968d48bd6ff7715085c855991705ad_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1080\" class=\"internal\">遥远的乌托邦：控制系统设计专题（一）——PID控制算法</a><a href=\"https://zhuanlan.zhihu.com/p/81017045\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic4.zhimg.com/v2-c60b7ab72967091c3c434d49d58406fb_180x120.jpg\" data-image-width=\"2503\" data-image-height=\"1400\" class=\"internal\">遥远的乌托邦：控制系统设计专题（二）——自抗扰控制算法（上）</a><a href=\"https://zhuanlan.zhihu.com/p/81168041\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-5b35a5887976ea09e6d0a266e9f4df48_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1200\" class=\"internal\">遥远的乌托邦：控制系统设计专题（三）——自抗扰控制算法（下）</a><a href=\"https://zhuanlan.zhihu.com/p/81851041\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-1074a6bb9b981c544e275411a8807f32_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1200\" class=\"internal\">遥远的乌托邦：控制系统设计专题（四）——控制分配矩阵的求解及相关问题</a><h2>导航系统设计专题（已更新5篇）</h2><a href=\"https://zhuanlan.zhihu.com/p/82509059\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-e7e1adc825b52b0dd380dd2c68beaa1d_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1200\" class=\"internal\">遥远的乌托邦：导航系统设计专题（一）——传感器与组合导航系统（上）</a><a href=\"https://zhuanlan.zhihu.com/p/82854981\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-2f7e989c5ca931a101bec93d1c2ef770_180x120.jpg\" data-image-width=\"1024\" data-image-height=\"576\" class=\"internal\">遥远的乌托邦：导航系统设计专题（二）——传感器与组合导航系统（下）</a><a href=\"https://zhuanlan.zhihu.com/p/83457951\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-3c1bb3796c3e8a8a33712989caf39410_180x120.jpg\" data-image-width=\"4096\" data-image-height=\"2303\" class=\"internal\">遥远的乌托邦：导航系统设计专题（三）—卡尔曼滤波算法入门</a><a href=\"https://zhuanlan.zhihu.com/p/84581716\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic4.zhimg.com/v2-3560d10889142d2419818ced5b646c93_180x120.jpg\" data-image-width=\"2560\" data-image-height=\"1080\" class=\"internal\">遥远的乌托邦：导航系统设计专题（四）—扩展卡尔曼滤波（1）</a><a href=\"https://zhuanlan.zhihu.com/p/85064300\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-3825ce57169306c1a9e2006b5c3da0c1_180x120.jpg\" data-image-width=\"2000\" data-image-height=\"841\" class=\"internal\">遥远的乌托邦：导航系统设计专题（五）—扩展卡尔曼滤波（2）</a><h2>系统辨识专题（已更新3篇）</h2><a href=\"https://zhuanlan.zhihu.com/p/79047922\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-614ad71b71b639b4d6ffa6cd95445e6d_180x120.jpg\" data-image-width=\"4096\" data-image-height=\"2730\" class=\"internal\">遥远的乌托邦：系统辨识专题（一）——MATLAB系统辨识工具箱的使用案例</a><a href=\"https://zhuanlan.zhihu.com/p/81510775\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-4ef20f561bbe534dac9b758fee882150_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1080\" class=\"internal\">遥远的乌托邦：系统辨识专题（二）——多旋翼飞行器建模</a><a href=\"https://zhuanlan.zhihu.com/p/81673541\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-8bcb68e1a00281ba9d1acc6574a82892_180x120.jpg\" data-image-width=\"4096\" data-image-height=\"2643\" class=\"internal\">遥远的乌托邦：系统辨识专题（三）——多旋翼飞行器模型参数辨识问题</a><h2>数字滤波器设计专题（已更新2篇）</h2><a href=\"https://zhuanlan.zhihu.com/p/80217823\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-bcf8f511df76a01607fb9b86a55210ce_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1200\" class=\"internal\">遥远的乌托邦：数字滤波器设计专题（一）——FDATool使用教程</a><a href=\"https://zhuanlan.zhihu.com/p/80527542\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-18755b65ac38f52a967b98de044e2ee2_180x120.jpg\" data-image-width=\"3840\" data-image-height=\"2160\" class=\"internal\">遥远的乌托邦：数字滤波器设计专题（二） ——数字滤波器设计实战</a><h2>环境感知与规划专题（已更新1篇）</h2><a href=\"https://zhuanlan.zhihu.com/p/80356823\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-1074a6bb9b981c544e275411a8807f32_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1200\" class=\"internal\">遥远的乌托邦：环境感知与规划专题（一） ——A*算法入门</a><h2>综述专题（已更新3篇）</h2><a href=\"https://zhuanlan.zhihu.com/p/78025821\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic4.zhimg.com/v2-24847db5c126c4c89d116a6ca4425c4b_180x120.jpg\" data-image-width=\"615\" data-image-height=\"300\" class=\"internal\">遥远的乌托邦：多旋翼无人机发展浅析</a><a href=\"https://zhuanlan.zhihu.com/p/78678609\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-497f4c5c050fa373bb5a21d14ac945b6_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1080\" class=\"internal\">遥远的乌托邦：多旋翼无人机技术发展浅析</a><a href=\"https://zhuanlan.zhihu.com/p/80384621\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic3.zhimg.com/v2-ec7ea1d017d05fa4a85b802ab22d7646_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1200\" class=\"internal\">遥远的乌托邦：多旋翼无人机技术详解</a><h2>关于专栏的几点说明：</h2><ul><li><b> 记录自己在多旋翼飞行器开发过程中遇到的比较关键的技术点。</b></li><li><b> 希望和大家交流，互相学习。因此希望大家给我反馈，多评论，多指正。</b></li><li><b> 由于时间和水平有限，尽量保持每周更新。</b></li><li><b> 希望大家在收藏的同时，也能点个赞。</b></li><li><b> 欢迎大家提出在多旋翼飞行器开发过程中遇到的问题以及感兴趣的技术方向，若在本人能力范围内，后续会更新相关技术分享。</b></li><li><b> 欢迎转载，注明出处即可。</b></li></ul>", 
            "topic": [
                {
                    "tag": "控制理论", 
                    "tagLink": "https://api.zhihu.com/topics/19803111"
                }, 
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "导航", 
                    "tagLink": "https://api.zhihu.com/topics/19553199"
                }
            ], 
            "comments": [
                {
                    "userName": "Darker", 
                    "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                    "content": "<p>路过，点赞！顺便请教个问题，位置内环微分项为什么不用标准的离散形式？</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>因为噪声太大。</p>", 
                            "likes": 0, 
                            "replyToAuthor": "Darker"
                        }, 
                        {
                            "userName": "Darker", 
                            "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                            "content": "这个问题我已经清楚了。确切来说，标准离散多了一个闭环零点，非标准没有新增零点。标准离散对输入高频噪声很敏感，所以选用非标，非标对输入噪声有滤波作用，但是非标会降低系统开环增益，导致斜坡输入的静差增大，减小静差就必然要提高非标的开环增益，开环增益提高过后，系统自然频率又会上升，当系统有高频噪声时，同样会共振。原理有很大不同，从信号流图的角度上来讲就是信号线，比较点不同。", 
                            "likes": 0, 
                            "replyToAuthor": "知乎用户"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/83457951", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 7, 
            "title": "导航系统设计专题（三）—卡尔曼滤波算法入门", 
            "content": "<h2>前言</h2><p><b>扩展卡尔曼滤波（EKF）</b>是多旋翼飞行器导航系统设计中，最常用的最优估计算法之一。其原理是在卡尔曼滤波的基础上，对非线性模型进行线性化，再进行最优估计，因此，其核心算法原理与卡尔曼滤波算法相似。本篇将围绕卡尔曼滤波展开 ，阐述其核心五大公式，同时，以一个简单的线性问题的MATLAB仿真实例，展示如何搭建一个完整的卡尔曼滤波器。</p><h2>卡尔曼滤波算法实现</h2><p>卡尔曼滤波算法的公式推导有很多，本篇不作赘述，如果希望了解其算法原理，推荐阅读<b>秦永元的《卡尔曼滤波与组合导原理》</b>。下面直接放出卡尔曼滤波算法的五大核心公式：</p><ul><li><b>状态更新方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=%5Chat+x_%7Bk%7D%3DF_%7Bk%7D%5Chat+x_%7Bk-1%7D%2BB_%7Bk%7Du_%7Bk%7D%5C%5C+P_%7Bk%7D%3DF_%7Bk%7DP_%7Bk-1%7DF_%7Bk%7D%5E%7BT%7D%2BQ_%7Bk%7D%5C%5C\" alt=\"\\hat x_{k}=F_{k}\\hat x_{k-1}+B_{k}u_{k}\\\\ P_{k}=F_{k}P_{k-1}F_{k}^{T}+Q_{k}\\\\\" eeimg=\"1\"/> </p><ul><li><b>量测更新方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=%5Chat+x_%7Bk%7D%5E%7B%27%7D%3D%5Chat+x_%7Bk%7D%2BK%28z_%7Bk%7D+-+H_%7Bk%7D%5Chat+x_%7Bk%7D%29%5C%5C+P_%7Bk%7D%5E%7B%27%7D%3DP_%7Bk%7D-KH_%7Bk%7DP_%7Bk%7D%5C%5C+K%3DP_%7Bk%7DH_%7Bk%7D%5E%7BT%7D%28H_%7Bk%7DP_%7Bk%7DH_%7Bk%7D%5E%7BT%7D%2BR_%7Bk%7D%29%5E%7B-1%7D%5C%5C\" alt=\"\\hat x_{k}^{&#39;}=\\hat x_{k}+K(z_{k} - H_{k}\\hat x_{k})\\\\ P_{k}^{&#39;}=P_{k}-KH_{k}P_{k}\\\\ K=P_{k}H_{k}^{T}(H_{k}P_{k}H_{k}^{T}+R_{k})^{-1}\\\\\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D\" alt=\"F_{k}\" eeimg=\"1\"/> 称为状态转移矩阵，其描述了系统的状态方程模型。</p><p><img src=\"https://www.zhihu.com/equation?tex=u_%7Bk%7D\" alt=\"u_{k}\" eeimg=\"1\"/> 为模型的修正向量，用于对建立模型的修正，该项在卡尔曼滤波算法中不是必备的。</p><p><img src=\"https://www.zhihu.com/equation?tex=Q_%7Bk%7D\" alt=\"Q_{k}\" eeimg=\"1\"/> 为过程噪声，描述了建立系统的模型准确度。</p><p><img src=\"https://www.zhihu.com/equation?tex=P_%7Bk%7D\" alt=\"P_{k}\" eeimg=\"1\"/> 为协方差矩阵，描述了各状态量之间的相关性。</p><p><img src=\"https://www.zhihu.com/equation?tex=P_%7Bk%7D%5E%7B%27%7D\" alt=\"P_{k}^{&#39;}\" eeimg=\"1\"/> 为经过修正的协方差矩阵。</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Chat+x_%7Bk%7D%5E%7B%27%7D\" alt=\"\\hat x_{k}^{&#39;}\" eeimg=\"1\"/> 为经过量测方程修正的状态量估计值。</p><p><img src=\"https://www.zhihu.com/equation?tex=K\" alt=\"K\" eeimg=\"1\"/> 为卡尔曼增益，描述的是量测量对于状态量的修正权重。</p><p><img src=\"https://www.zhihu.com/equation?tex=z_%7Bk%7D\" alt=\"z_{k}\" eeimg=\"1\"/> 为观测量，多为传感器测量值或其等价值。</p><p><img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D\" alt=\"H_{k}\" eeimg=\"1\"/> 为量测矩阵，描述量测值与状态值之间的关系。</p><p><img src=\"https://www.zhihu.com/equation?tex=R_%7Bk%7D\" alt=\"R_{k}\" eeimg=\"1\"/> 为量测噪声阵，描述传感器的测量噪声。</p><p>完整的卡尔曼滤波算法流程如下图所示，</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-299353eec87236dbdd015cd5adac6ffb_b.jpg\" data-size=\"normal\" data-rawwidth=\"1130\" data-rawheight=\"547\" class=\"origin_image zh-lightbox-thumb\" width=\"1130\" data-original=\"https://pic4.zhimg.com/v2-299353eec87236dbdd015cd5adac6ffb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1130&#39; height=&#39;547&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1130\" data-rawheight=\"547\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1130\" data-original=\"https://pic4.zhimg.com/v2-299353eec87236dbdd015cd5adac6ffb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-299353eec87236dbdd015cd5adac6ffb_b.jpg\"/><figcaption>卡尔曼滤波算法实现流程图</figcaption></figure><p>该流程图较清晰地阐述了整个卡尔曼滤波算法的流程：</p><ol><li><b>确定系统的状态转移矩阵</b> <img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D\" alt=\"F_{k}\" eeimg=\"1\"/> <b>与量测矩阵</b> <img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D\" alt=\"H_{k}\" eeimg=\"1\"/> 。</li><li><b>确定协方差矩阵初值</b><img src=\"https://www.zhihu.com/equation?tex=P_%7B0%7D\" alt=\"P_{0}\" eeimg=\"1\"/> <b>与状态量初值</b> <img src=\"https://www.zhihu.com/equation?tex=x_%7B0%7D\" alt=\"x_{0}\" eeimg=\"1\"/> .</li><li><b>更新卡尔曼增益 </b><img src=\"https://www.zhihu.com/equation?tex=K\" alt=\"K\" eeimg=\"1\"/>。</li><li><b>根据量测向量</b> <img src=\"https://www.zhihu.com/equation?tex=z_%7Bk%7D\" alt=\"z_{k}\" eeimg=\"1\"/> 、<b>卡尔曼增益</b> <img src=\"https://www.zhihu.com/equation?tex=K\" alt=\"K\" eeimg=\"1\"/> <b>以及量测量</b> <img src=\"https://www.zhihu.com/equation?tex=z_%7Bk%7D\" alt=\"z_{k}\" eeimg=\"1\"/> <b>，修正状态量，得到该更新周期的状态估计值</b> <img src=\"https://www.zhihu.com/equation?tex=%5Chat+x_%7Bk%7D%5E%7B%27%7D\" alt=\"\\hat x_{k}^{&#39;}\" eeimg=\"1\"/> 。</li><li><b>更新协方差矩阵，得到</b> <img src=\"https://www.zhihu.com/equation?tex=P_%7Bk%7D%5E%7B%27%7D\" alt=\"P_{k}^{&#39;}\" eeimg=\"1\"/> 。</li><li><b>根据状态转移矩阵，递推状态方程，预测下一周期状态量</b> <img src=\"https://www.zhihu.com/equation?tex=%5Chat+x_%7Bk%7D\" alt=\"\\hat x_{k}\" eeimg=\"1\"/> 。</li><li><b>根据状态转移矩阵，递推协方差矩阵，预测下一周期协方差阵</b> <img src=\"https://www.zhihu.com/equation?tex=P_%7Bk%7D\" alt=\"P_{k}\" eeimg=\"1\"/> 。</li></ol><h2><b>匀速直线运动的MATLAB卡尔曼滤波估计实例</b></h2><p>卡尔曼滤波算法的核心在于<b>状态更新</b>与<b>量测更新</b>两个部分，这里以匀速直线运动为例，建立运动方程，进而搭建对应的卡尔曼滤波器。</p><p>本案例中，假设物体以2.5 <img src=\"https://www.zhihu.com/equation?tex=m%2Fs\" alt=\"m/s\" eeimg=\"1\"/> 的速度，匀速运动，初速度为0，初始位置为6 <img src=\"https://www.zhihu.com/equation?tex=m\" alt=\"m\" eeimg=\"1\"/> 处。</p><p>由此，可以建立对应的运动方程：</p><p><img src=\"https://www.zhihu.com/equation?tex=p%28t%29%3D2.5v%28t%29%2B6%5C%5C\" alt=\"p(t)=2.5v(t)+6\\\\\" eeimg=\"1\"/> </p><p>对于该线性系统，我们观测的状态量为：</p><p><img src=\"https://www.zhihu.com/equation?tex=x_%7Bk%7D%3D+%5Cbegin%7Bbmatrix%7D+p_%7Bk%7D%5C%5C+v_%7Bk%7D+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"x_{k}= \\begin{bmatrix} p_{k}\\\\ v_{k} \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>根据运动学方程，易得：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D+p_%7Bk%7D%5C%5C+v_%7Bk%7D+%5Cend%7Bbmatrix%7D+%3D+%5Cbegin%7Bbmatrix%7D+1%26%5CDelta+t%5C%5C+0%261+%5Cend%7Bbmatrix%7D++%5Cbegin%7Bbmatrix%7D+p_%7Bk-1%7D%5C%5C+v_%7Bk-1%7D+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"\\begin{bmatrix} p_{k}\\\\ v_{k} \\end{bmatrix} = \\begin{bmatrix} 1&amp;\\Delta t\\\\ 0&amp;1 \\end{bmatrix}  \\begin{bmatrix} p_{k-1}\\\\ v_{k-1} \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>因此，状态转移矩阵 <img src=\"https://www.zhihu.com/equation?tex=F_%7Bk%7D%3D%5Cbegin%7Bbmatrix%7D+1%26%5CDelta+t%5C%5C+0%261+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"F_{k}=\\begin{bmatrix} 1&amp;\\Delta t\\\\ 0&amp;1 \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>本案例中， <img src=\"https://www.zhihu.com/equation?tex=%5CDelta+t\" alt=\"\\Delta t\" eeimg=\"1\"/> 取为<b>1</b>秒。</p><p>再来看量测方程：</p><p><img src=\"https://www.zhihu.com/equation?tex=z_%7Bk%7D%3DH_%7Bk%7Dx_%7Bk%7D%2BV_%7Bk%7D%5C%5C\" alt=\"z_{k}=H_{k}x_{k}+V_{k}\\\\\" eeimg=\"1\"/> </p><p>本案例中，唯一的观测量为位置 <img src=\"https://www.zhihu.com/equation?tex=%5Cvec+p_%7Bk%7D\" alt=\"\\vec p_{k}\" eeimg=\"1\"/> 易得：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D+%5Cvec+p_%7Bk%7D%5C%5C+%5Cvec+v_%7Bk%7D+%5Cend%7Bbmatrix%7D+%3D+%5Cbegin%7Bbmatrix%7D+1+%260+%5Cend%7Bbmatrix%7D+%5Cbegin%7Bbmatrix%7D+p_%7Bk%7D%5C%5C+v_%7Bk%7D+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"\\begin{bmatrix} \\vec p_{k}\\\\ \\vec v_{k} \\end{bmatrix} = \\begin{bmatrix} 1 &amp;0 \\end{bmatrix} \\begin{bmatrix} p_{k}\\\\ v_{k} \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>由此可得，量测矩阵 <img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D\" alt=\"H_{k}\" eeimg=\"1\"/> ：</p><p><img src=\"https://www.zhihu.com/equation?tex=H_%7Bk%7D%3D%5Cbegin%7Bbmatrix%7D+1+%260+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"H_{k}=\\begin{bmatrix} 1 &amp;0 \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>一般而言，协方差阵的初值取一个较大值，本案例取值如下：</p><p><img src=\"https://www.zhihu.com/equation?tex=P_%7B0%7D%3D%5Cbegin%7Bbmatrix%7D+100%260%5C%5C+0%26100+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"P_{0}=\\begin{bmatrix} 100&amp;0\\\\ 0&amp;100 \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>状态量初值如下：</p><p><img src=\"https://www.zhihu.com/equation?tex=x_%7B0%7D%3D%5Cbegin%7Bbmatrix%7D+6%5C%5C+0+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"x_{0}=\\begin{bmatrix} 6\\\\ 0 \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>本案例中，我们认为模型准确度非常高，因此， <img src=\"https://www.zhihu.com/equation?tex=Q_%7Bk%7D\" alt=\"Q_{k}\" eeimg=\"1\"/> 取值为0，量测噪声 <img src=\"https://www.zhihu.com/equation?tex=R\" alt=\"R\" eeimg=\"1\"/> 取25。</p><p>下面，我们将通过MATLAB的Simulink搭建系统模型，生成匀速直线运动的一组观测数据。</p><p>打开MATLAB后，在命令窗中输入&#34;simulink&#34;，打开仿真模块，如下图所示。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5ed6f69faea773416c1d2aae2ba6d83f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1315\" data-rawheight=\"522\" class=\"origin_image zh-lightbox-thumb\" width=\"1315\" data-original=\"https://pic4.zhimg.com/v2-5ed6f69faea773416c1d2aae2ba6d83f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1315&#39; height=&#39;522&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1315\" data-rawheight=\"522\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1315\" data-original=\"https://pic4.zhimg.com/v2-5ed6f69faea773416c1d2aae2ba6d83f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5ed6f69faea773416c1d2aae2ba6d83f_b.jpg\"/></figure><p>然后，我们按照上述的匀速直线运动模型，搭建对应的仿真模块，并叠加幅值为5 <img src=\"https://www.zhihu.com/equation?tex=m\" alt=\"m\" eeimg=\"1\"/> 的随机噪声。这里，我们分别将叠加随机噪声的量测输出x_in<i>与</i>x_real_in加载到工作空间，如图所示。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-b43379c586b7c2c21cf12556a0823323_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"809\" data-rawheight=\"530\" class=\"origin_image zh-lightbox-thumb\" width=\"809\" data-original=\"https://pic4.zhimg.com/v2-b43379c586b7c2c21cf12556a0823323_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;809&#39; height=&#39;530&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"809\" data-rawheight=\"530\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"809\" data-original=\"https://pic4.zhimg.com/v2-b43379c586b7c2c21cf12556a0823323_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-b43379c586b7c2c21cf12556a0823323_b.jpg\"/></figure><p>在得到仿真量测数据后，我们就可以开始验证卡尔曼滤波算法的效果了。</p><p>下面为MATLAB仿真代码：</p><div class=\"highlight\"><pre><code class=\"language-text\">close all;\nF = [1 1\n     0 1];\nH = [1 0\n     0 1];\n\nx0 = [6 0]&#39;;\np0 = [100 0\n      0   100];\n  \nQ = [0 0\n     0 0];\n \nR = [25 0\n     0  1];\n \nlength = size(x_in.Time);\nlength = length(1,1); \n\nx_k = [];\np_k = [];\nk_k = [];\n\nplot_x = [];\nx_k = x0;\np_k = p0;\nfor i = 1 : length\n% % 状态方程更新\n    x_k = F * x_k;\n    p_k = F * p_k * F&#39; + Q;    \n% % 量测方程更新\n    k_k = (p_k * H&#39;) * inv(H * p_k * H&#39; + R); \n    z = [x_in.Data(i) 2.5]&#39;;\n    x_k = x_k + k_k * (z - H * x_k);\n    p_k = p_k - k_k * H * p_k;    \n    plot_x(i) = x_k(1);         \nend\n\nfigure(1)\nplot(x_in.Data,&#39;r&#39;);\nhold on;\nplot(plot_x,&#39;g&#39;);\nhold on;\nplot(x_real_in.Data,&#39;b&#39;)\ngrid on;</code></pre></div><p>其仿真效果如下图所示，蓝色曲线为系统模型输出的真值，绿色为卡尔曼滤波输出的估计值，红色为叠加量测噪声之后的观测值。当量测噪声取值合适时，卡尔曼滤波的估计值能够较好地跟踪匀速直线运动这类线性系统的模型输出。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-6d8e68badb702e6f8fdc84950584bbc7_b.jpg\" data-size=\"normal\" data-rawwidth=\"561\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb\" width=\"561\" data-original=\"https://pic4.zhimg.com/v2-6d8e68badb702e6f8fdc84950584bbc7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;561&#39; height=&#39;420&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"561\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"561\" data-original=\"https://pic4.zhimg.com/v2-6d8e68badb702e6f8fdc84950584bbc7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-6d8e68badb702e6f8fdc84950584bbc7_b.jpg\"/><figcaption>R取值为25时的仿真波形图</figcaption></figure><p>当<b>量测噪声取值过大</b>时，卡尔曼滤波器的<b>收敛速度明显变慢</b>，这是因为量测量对于状态量修正的<b>权重变低</b>，如下图所示：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-8a07698aaf908ed2e85c463823bda72a_b.jpg\" data-size=\"normal\" data-rawwidth=\"561\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb\" width=\"561\" data-original=\"https://pic3.zhimg.com/v2-8a07698aaf908ed2e85c463823bda72a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;561&#39; height=&#39;420&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"561\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"561\" data-original=\"https://pic3.zhimg.com/v2-8a07698aaf908ed2e85c463823bda72a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-8a07698aaf908ed2e85c463823bda72a_b.jpg\"/><figcaption>R取值为10000时的仿真波形图</figcaption></figure><p>反之，当量测噪声取值较小时，卡尔曼滤波器的收敛速度较快，此时，卡尔曼滤波器的估计值接近于量测值。</p><h2><b>总结</b></h2><p>本篇主要介绍了卡尔曼滤波器的实现过程，通过一个简单的线性系统例子，在MATLAB环境下搭建了卡尔曼滤波器，并对其参数整定进行了一定的解释。然而，自然界中的对象往往不是线性的。那么，卡尔曼滤波器是否也能够适用于这些非线性对象呢？下一篇中，我们将针对非线性对象进行卡尔曼滤波算法仿真，并针对多旋翼飞行器导航系统设计中最常用的<b>扩展卡尔曼滤波算法（EKF）进行详解。</b></p>", 
            "topic": [
                {
                    "tag": "滤波算法", 
                    "tagLink": "https://api.zhihu.com/topics/19592200"
                }, 
                {
                    "tag": "卡尔曼滤波 Kalman Filter", 
                    "tagLink": "https://api.zhihu.com/topics/20016366"
                }, 
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }
            ], 
            "comments": [
                {
                    "userName": "杨起", 
                    "userLink": "https://www.zhihu.com/people/76d90091293cd440e25e151cfa86461f", 
                    "content": "协方差矩阵可以写成4个100吗？因为位置和速度的协方差不为0", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "我这里的仿真程序 观测量其实只有一个 就是位置（匀速运动），P阵的初值保守取值取一个较大的对角仿真即可。只是开始的收敛时间会比较长。", 
                            "likes": 0, 
                            "replyToAuthor": "杨起"
                        }, 
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "方阵 笔误", 
                            "likes": 0, 
                            "replyToAuthor": "知乎用户"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/82854981", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 5, 
            "title": "导航系统设计专题（二）——传感器与组合导航系统（下）", 
            "content": "<h2>前言</h2><p>    上一篇中详细阐述了多旋翼飞行器导航系统中使用的主要传感器及其特性，本篇将着重介绍导航系统设计中常用的两种算法——互补滤波算法与卡尔曼滤波算法。同时，阐述一种多旋翼飞行器导航系统的设计方案。</p><h2>互补滤波算法简介</h2><p>    互补滤波器的主要原理是把一个主要包含高频噪声，和一个主要包含低频噪声的信号分别通过一个低通滤波器和高通滤波器，并做平均，从而使平均后的结果是真实信号较为准确的估计。简单的讲，就是将两个表征同一个状态信息的观测量分别经过低通/高通滤波器后，将其进行加权，从而使其达到优势互补的效果。</p><p>    互补滤波器常被用于姿态解算、相对高度的估计等应用。其运算量小，能够在一定程度上解决状态估计的问题。然而，由于其本质上并非最优估计算法。当系统运行环境发生较大变化或出现较大扰动时，其估计精度会大幅下降，这也是其与主流估计算法——卡尔曼滤波之间存在的一个较大区别。下面为采用互补滤波算法的姿态解算流程图。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-92060dad10a3aab371b4b9000c07d8bf_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"647\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb\" width=\"647\" data-original=\"https://pic4.zhimg.com/v2-92060dad10a3aab371b4b9000c07d8bf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;647&#39; height=&#39;216&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"647\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"647\" data-original=\"https://pic4.zhimg.com/v2-92060dad10a3aab371b4b9000c07d8bf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-92060dad10a3aab371b4b9000c07d8bf_b.jpg\"/></figure><h2>卡尔曼滤波算法简介</h2><p>    卡尔曼滤波算法是工业领域应用最为广泛的最优估计算法之一。<b>卡尔曼滤波器的作用就是通过降低来自系统本身的误差和环境引起产生的误差，使得我们的估计与预测逼近最优状况</b>。它通过已知的量，去求的隐藏的变量的过程中，需要构建已知量与隐藏变量之间的关系函数，也叫做系统动力方程。但是由于系统本身的误差与系统受环境干扰后产生的误差的原因，实际当中的估计与预测并不会与系统动力方程相符。这里的误差具体来说有三方面：<b>系统误差/测量误差，环境误差/过程误差，估计误差。</b></p><p><b>测量误差</b>：测量值与真实值之间的差值，测量误差构成测量不确定度： <img src=\"https://www.zhihu.com/equation?tex=%5Csigma%5E%7B2%7D\" alt=\"\\sigma^{2}\" eeimg=\"1\"/> ，表示为字母： <img src=\"https://www.zhihu.com/equation?tex=r\" alt=\"r\" eeimg=\"1\"/> </p><p><b>估计误差</b>：估计值与真实值之间的差值，估计误差构成估计不确定度：<img src=\"https://www.zhihu.com/equation?tex=%5Csigma%5E%7B2%7D\" alt=\"\\sigma^{2}\" eeimg=\"1\"/>，表示为字母： <img src=\"https://www.zhihu.com/equation?tex=p\" alt=\"p\" eeimg=\"1\"/> </p><p><b>过程噪音</b>：过程噪音是因外部环境引起的系统不确定性产生的误差，表示为字母： <img src=\"https://www.zhihu.com/equation?tex=q\" alt=\"q\" eeimg=\"1\"/> </p><p>经典卡尔曼滤波算法的五大方程为：</p><ul><li><b>状态更新方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=X%28k%7Ck%29%3DAX%28k%7Ck-1%29%2BK%28k%29%28Z%28k%29-HX%28k%7Ck-1%29%5C%5C\" alt=\"X(k|k)=AX(k|k-1)+K(k)(Z(k)-HX(k|k-1)\\\\\" eeimg=\"1\"/> </p><ul><li><b>系统动力方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=X%28k%7Ck-1%29%3DAX%28k-1%7Ck-1%29%2BBU%28k%29%5C%5C\" alt=\"X(k|k-1)=AX(k-1|k-1)+BU(k)\\\\\" eeimg=\"1\"/> </p><ul><li><b>卡尔曼增益方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=K%28k%29%3DP%28k%7Ck-1%29%5Cfrac%7BH%5E%7B%27%7D%7D%7BHP%28k%7Ck-1%29H%5E%7B%27%7D%2BR%7D%5C%5C\" alt=\"K(k)=P(k|k-1)\\frac{H^{&#39;}}{HP(k|k-1)H^{&#39;}+R}\\\\\" eeimg=\"1\"/> </p><ul><li><b>协方差更新方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=P%28k%7Ck%29%3D%28I-K%28k%29H%29P%28k%7Ck-1%29%5C%5C\" alt=\"P(k|k)=(I-K(k)H)P(k|k-1)\\\\\" eeimg=\"1\"/> </p><ul><li><b>协方差外推方程</b></li></ul><p><img src=\"https://www.zhihu.com/equation?tex=P%28k%7Ck-1%29%3DAP%28k-1%7Ck-1%29A%5E%7B%27%7D%2BQ%5C%5C\" alt=\"P(k|k-1)=AP(k-1|k-1)A^{&#39;}+Q\\\\\" eeimg=\"1\"/> </p><ul><li><b>状态更新方程的意义：</b>可以不断更新系统中涉及估计的每个变量，从而逼近变量真实值；系统中涉及的每个变量的最优化，可以使得整个系统接近最优化，最优化到符合构建的系统动力函数。</li><li><b>系统动力方程：</b>也叫做状态外推方程，通过构建当前状态与下一状态之间的关系函数来进行随着时间变化的状态推理。系统动力方程本身是由我们已知的变量去推断未知的/隐藏的变量，为此建立的变量之间的关系/函数。</li><li><b>卡尔曼增益方程：</b>在推导状态更新方程时，我们将当前本来含有当前状态、第n次测量值的关系式化简成了关于 <i>当前状态、预测状态、卡尔曼增益、第n次测量值</i> 的关系式。由于在通常情况下卡尔曼增益会随着每次迭代发生变化，因此，我们需要更新卡尔曼增益，更新卡尔曼增益就需要清楚的知道，是哪些量组成了卡尔曼增益方程，在前面的学习中我们知道，<i>前一次的估计不确定度与当前的测量不确定度</i>组成了卡尔曼增益方程，并且他们之间有一些关系。</li><li><b>估计不确定度更新方程：</b>因为随着每次测量值的不同，卡尔曼增益的不同，我们知道估计不确定度也需要随着每次迭代进行更新。</li><li><b>估计不确定度外推方程：</b>估计不确定度不仅要用在卡尔曼增益方程中，也需要用在动力系统方程中，随着估计不确定度外推方程预测下一次估计不确定度。</li></ul><p>    整个卡尔曼滤波算法的流程如下图所示：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-d9d0d1abd459be90f0b78d47cc5456c0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"853\" data-rawheight=\"461\" class=\"origin_image zh-lightbox-thumb\" width=\"853\" data-original=\"https://pic1.zhimg.com/v2-d9d0d1abd459be90f0b78d47cc5456c0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;853&#39; height=&#39;461&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"853\" data-rawheight=\"461\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"853\" data-original=\"https://pic1.zhimg.com/v2-d9d0d1abd459be90f0b78d47cc5456c0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-d9d0d1abd459be90f0b78d47cc5456c0_b.jpg\"/></figure><p>    卡尔曼滤波适用于线性系统，对于非线性系统而言，需要采用扩展卡尔曼滤波，其本质上是卡尔曼滤波算法的一种增广形式，本篇不作赘述。</p><h2>多旋翼飞行器导航系统设计方案</h2><p>    本篇提供一种切实可行的组合导航系统设计方案，如下图所示：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-0d9095ab36db194273a4cea1196f33e9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"919\" data-rawheight=\"377\" class=\"origin_image zh-lightbox-thumb\" width=\"919\" data-original=\"https://pic2.zhimg.com/v2-0d9095ab36db194273a4cea1196f33e9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;919&#39; height=&#39;377&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"919\" data-rawheight=\"377\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"919\" data-original=\"https://pic2.zhimg.com/v2-0d9095ab36db194273a4cea1196f33e9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-0d9095ab36db194273a4cea1196f33e9_b.jpg\"/></figure><h2>总结</h2><p>    本文对导航系统设计中常用的两种算法——互补滤波算法与卡尔曼滤波算法进行了简介，同时，提出了一种适用于多旋翼飞行器的导航系统设计方案。下一篇中，我们将详解卡尔曼滤波算法原理。</p>", 
            "topic": [
                {
                    "tag": "传感器", 
                    "tagLink": "https://api.zhihu.com/topics/19561057"
                }, 
                {
                    "tag": "导航", 
                    "tagLink": "https://api.zhihu.com/topics/19553199"
                }, 
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/82509059", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 6, 
            "title": "导航系统设计专题（一）——传感器与组合导航系统（上）", 
            "content": "<p><b>前言</b></p><p> 导航系统作为无人机的感知单元，承担着无人机状态参量测量与估计的重任。对于多旋翼无人机而言，其姿态、加速度、速度、位置以及各传感器的零偏与补偿系数均需要被测量或估计。这些众多参量之中只有极少一部分能够被直接或间接测量，大多数参数需要我们采用多个传感器组合的方式，结合最优估计算法进行估计，最终，才能够得到理想的状态参量。</p><p><b>导航系统综述</b></p><p> 近年来，随着智能手机的普及，MEMS技术日趋成熟，大量价格低廉的MEMS器件被投入消费级市场。消费级多旋翼无人机也借势而起，快速进入大众的视线，被应用于传统的影视航拍等领域。</p><p> 导航系统在多旋翼无人机系统是感知的核心单元，它根据预先设定的数据估计模型，综合多传感器测量的信息，利用最优估计算法，得到良好的状态估计参量。常用的状态估计算法如互补滤波、卡尔曼滤波及其变种等。</p><p>然而，传感器的原始测量数据往往不尽如人意，我们需要根据不同传感器的特性，对其数据进行<b>预处理（预处理主要指传感器校准与数字滤波器设计）</b>。然后，我们才能得到信噪比较高的测量数据。然而，传感器测量的数据无法直接或间接的表征我们所需的最终状态参量，因此，我们将预处理后的量测数据，通过状态估计算法进行最优估计，得到如姿态、加速度、速度、位置、传感器特征参数（<b>如陀螺仪零偏、加速度零偏等</b>）。有了准确的状态参量，我们就可以作为控制器中的反馈量，故障诊断与决策系统中的决策量等。</p><p><b>传感器及其特性</b></p><p> 传感器作为导航系统的感受器，我们需要对每一个使用到的传感器的特性了如执掌，才能选择最合适的滤波器与参数对其进行适配；对于特殊的传感器，还需要有针对性的处理算法。</p><ul><li><b>IMU</b></li></ul><p>IMU（惯性测量单元），其包含加速度计与陀螺仪两种传感器，是导航系统的最重要传感器之一，它负责测量三轴加速度与三轴角速度，对于低成本的MEMS器件，其测量精度相对较低，陀螺仪的零偏稳定性也较差，在不同温度下的表现也存在较大的差异。因此，对MEMS器件进行适当的标定与补偿，同时进行零偏的动态估计是十分必要的。</p><ul><li><b>气压计</b></li></ul><p>气压计负责测量海拔高度。在实际使用过程中，往往将其测量数据与初始海拔做差值，从而得到相对起飞点的相对高度。气压计是一种高精度器件，由于其测量原理与环境压强、温度有关，因此，我们在实际使用中会发现：在多旋翼飞行器起飞阶段，气压计的量测数据波动较大，在飞行器大机动飞行后的刹车阶段，气压计的量测数据也波动较大，此时，我们就需要对滤波器中对应的量测噪声进行针对性的调整，以适应实际应用场景。否则，多旋翼飞行器会出现不同程度的掉高/升高现象。此外，通过对气压计的结构进行设计，也能够在不同程度上减弱环境气压变化对测量数据真实性的影响。</p><ul><li><b>磁力计</b></li></ul><p>磁力计负责测量三轴磁场数据，根据地磁场矢量能够辅助测量飞行器的姿态，同时，它也是航向角的主要量测传感器。然而，由于飞行器的磁场环境极其复杂，电池电源线、射频电路板以及大功率电源等器件都会在不同程度上影响磁力计对于地磁场的测量。我们在飞行器设计中，需要事先对机身的磁场环境定量测量，然后采取隔磁措施。在实际飞行过程中，我们也会碰到环境磁场的影响。此时，就需要设计诊断系统，当环境磁场异常时，及时调整磁力计融合的增益，避免导航系统发散。</p><ul><li><b>GPS/RTK</b></li></ul><p>GPS负责测量速度、位置参量，也是导航系统中最重要的传感器之一。在开阔环境中，GPS信号相对较稳定；然而，在实际使用场景中，飞行器的使用环境往往存在较多的遮挡以及信号干扰，此时，我们不得不面对短暂丢失GPS信号的境况，此时，若无光流等等价传感器，则必须采取特殊处理逻辑，对其进行安全降落，避免出现其他异常情况。</p><ul><li><b>TOF/超声波</b></li></ul><p>TOF与超声波属于同一类单点测距的传感器，区别在于前者的测量束角较小，能量较为集中，属于电磁波，不容易在传输过程中损耗；而后者，属于机械波，容易在传输过程中损耗，且传输距离较近。超声波传感器在早期的多旋翼飞行器中应用较多，随着TOF传感器的成本下降，逐渐取代了超声波传感器成为单点测距传感器的中的主流。</p><ul><li><b>毫米波雷达/激光雷达</b></li></ul><p>毫米波雷达属于一种多点测量的电磁波雷达，其抗干扰性能较强，测量距离较远，多用于多旋翼飞行器的某一方向避障。而激光雷达则能够测量360度范围内的点云数据，可用于地图构建与导航，但价格较为昂贵，且环境适应性不如毫米波雷达般健壮。因此，其并未在多旋翼无人机当中作为主流传感器而普及。</p><ul><li><b>双目相机</b></li></ul><p>双目相机能够测量某一方向内物体的深度信息，可用于无人机的地图构建、避障以及位置估计等用途，价格低廉。然而，其对于环境光照也有较高的要求，需要配合其他等价传感器一同使用。</p><p><b>光流传感器</b></p><p>光流传感器负责测量速度、位置信息。它在一定程度上，能够补充GPS传感器的作用，如低空飞行时，能够提高速度测量精度；在GPS受干扰时，能够继续估计速度、位置等参量，提高导航系统的鲁棒性。</p><p><b>总结</b></p><p>本篇主要阐述了多旋翼无人机的重要组成部分——导航系统。其中，传感器作为其主要的模块之一，本文介绍了多旋翼无人机中主要的传感器的特性。下一篇中，将阐述导航系统的架构与常用算法的原理。</p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "导航", 
                    "tagLink": "https://api.zhihu.com/topics/19553199"
                }, 
                {
                    "tag": "算法", 
                    "tagLink": "https://api.zhihu.com/topics/19553510"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/81851041", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 4, 
            "title": "控制系统设计专题（四）——控制分配矩阵的求解及相关问题", 
            "content": "<h2><b>前言</b></h2><p>前一篇中对自抗扰控制算法的原理及扩张状态观测器的参数整定问题进行了详解。同时，提出了一种基于自抗扰控制算法的多旋翼飞行器控制系统设计方案。</p><p>在系统辨识专题中，我们提到了控制效率方程的作用及重要性。</p><a href=\"https://zhuanlan.zhihu.com/p/81510775\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-4ef20f561bbe534dac9b758fee882150_180x120.jpg\" data-image-width=\"1920\" data-image-height=\"1080\" class=\"internal\">遥远的乌托邦：多旋翼无人机开发技术储备系列—系统辨识专题（二）——多旋翼飞行器建模</a><p>其逆矩阵或伪逆矩阵称之为控制分配矩阵。本篇将围绕控制分配矩阵展开，详细阐述控制分配矩阵的推导计算过程及其必要性。</p><h2>控制分配矩阵的必要性分析</h2><p>我们往往针对单一控制回路进行控制器设计及性能分析。对于被控对象而言，最终驱动执行机构的控制指令，由多个控制回路的控制器输出的某种组合关系决定。该组合关系称之为控制分配矩阵。许多开源飞控对于各控制器输出的组合，通常采用线性函数的组合方式，如：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+%5COmega_%7B1%7D%3Dk_%7BF%7D%2AF-k_%7BM_%7Bx%7D%7D%2AM_%7Bx%7D-k_%7BM_%7By%7D%7D%2AM_%7By%7D%2Bk_%7BM_%7Bz%7D%7D%2AM_%7Bz%7D%5C%5C%5B2ex%5D+%5COmega_%7B2%7D%3Dk_%7BF%7D%2AF%2Bk_%7BM_%7Bx%7D%7D%2AM_%7Bx%7D%2Bk_%7BM_%7By%7D%7D%2AM_%7By%7D%2Bk_%7BM_%7Bz%7D%7D%2AM_%7Bz%7D%5C%5C%5B2ex%5D+%5COmega_%7B3%7D%3Dk_%7BF%7D%2AF%2Bk_%7BM_%7Bx%7D%7D%2AM_%7Bx%7D-k_%7BM_%7By%7D%7D%2AM_%7By%7D-k_%7BM_%7Bz%7D%7D%2AM_%7Bz%7D%5C%5C%5B2ex%5D+%5COmega_%7B4%7D%3Dk_%7BF%7D%2AF-k_%7BM_%7Bx%7D%7D%2AM_%7Bx%7D%2Bk_%7BM_%7By%7D%7D%2AM_%7By%7D-k_%7BM_%7Bz%7D%7D%2AM_%7Bz%7D++%5Cend%7Bcases%7D+%5C%5C\" alt=\"\\begin{cases} \\Omega_{1}=k_{F}*F-k_{M_{x}}*M_{x}-k_{M_{y}}*M_{y}+k_{M_{z}}*M_{z}\\\\[2ex] \\Omega_{2}=k_{F}*F+k_{M_{x}}*M_{x}+k_{M_{y}}*M_{y}+k_{M_{z}}*M_{z}\\\\[2ex] \\Omega_{3}=k_{F}*F+k_{M_{x}}*M_{x}-k_{M_{y}}*M_{y}-k_{M_{z}}*M_{z}\\\\[2ex] \\Omega_{4}=k_{F}*F-k_{M_{x}}*M_{x}+k_{M_{y}}*M_{y}-k_{M_{z}}*M_{z}  \\end{cases} \\\\\" eeimg=\"1\"/> </p><p>控制分配最先在飞行控制系统设计中提出，其基本思想是，将控制指令根据某些优化目标分配给执行机构，并满足执行机构的约束条件。本质上，求解控制分配矩阵的同时，也是求解动力系统对于控制器的约束方程问题。</p><p>由于多旋翼飞行器拥有多个动力执行机构，根据不同的几何分布结构，能够产生多种动力组合方式。因此，针对不同的结构布局，我们需要求解不同的控制分配矩阵，以给出最合理的控制输出组合方式。</p><p>求解控制分配矩阵，有以下作用：</p><ul><li><b>当动力系统出现故障时，能够切换控制分配矩阵，以当前动力系统的实际情况，选择最合理的动力分配方式，避免出现各动力系统饱和的现象，提高飞行器的鲁棒性。</b></li><li><b>当动力系统正常时，合理的控制分配矩阵，能够最大化动力系统的执行效率。</b></li></ul><h2>控制分配矩阵的求解</h2><p>对于四旋翼飞行器而言，其控制效率矩阵为方阵。因此，其逆矩阵存在，我们可以对其控制效率矩阵求逆，从而得到唯一的控制分配矩阵。</p><p>然而，对于旋翼数量大于4的多旋翼飞行器而言，其控制效率矩阵不存在逆矩阵，我们需要求其伪逆来得到控制分配矩阵。</p><p>首先将一个标准多旋翼的控制效率矩阵定义为如下矩阵：</p><p><img src=\"https://www.zhihu.com/equation?tex=M_%7Bnr%7D%28c_%7BT%7D%2Cc_%7BM%7D%2Cd%29%3D+%5Cbegin%7Bbmatrix%7D+c_%7BT%7D+%26c_%7BT%7D%26%5Ccdots%26c_%7BT%7D%5C%5C++-d_%7B1%7Dc_%7BT%7Dsin%5Cvarphi_%7B1%7D%26-d_%7B2%7Dc_%7BT%7Dsin%5Cvarphi_%7B2%7D%26%5Ccdots%26-d_%7Bn%7Dc_%7BT%7Dsin%5Cvarphi_%7Bnr%7D%5C%5C+d_%7B1%7Dc_%7BT%7Dcos%5Cvarphi_%7B1%7D%26d_%7B2%7Dc_%7BT%7Dcos%5Cvarphi_%7B2%7D%26%5Ccdots%26d_%7Bn%7Dc_%7BT%7Dcos%5Cvarphi_%7Bnr%7D%5C%5C+c_%7BM%7D%5Cdelta_%7B1%7D%26c_%7BM%7D%5Cdelta_%7B2%7D%26%5Ccdots%26c_%7BM%7D%5Cdelta_%7Bnr%7D+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"M_{nr}(c_{T},c_{M},d)= \\begin{bmatrix} c_{T} &amp;c_{T}&amp;\\cdots&amp;c_{T}\\\\  -d_{1}c_{T}sin\\varphi_{1}&amp;-d_{2}c_{T}sin\\varphi_{2}&amp;\\cdots&amp;-d_{n}c_{T}sin\\varphi_{nr}\\\\ d_{1}c_{T}cos\\varphi_{1}&amp;d_{2}c_{T}cos\\varphi_{2}&amp;\\cdots&amp;d_{n}c_{T}cos\\varphi_{nr}\\\\ c_{M}\\delta_{1}&amp;c_{M}\\delta_{2}&amp;\\cdots&amp;c_{M}\\delta_{nr} \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>它满足</p><p><img src=\"https://www.zhihu.com/equation?tex=M_%7Bnr%7D%28c_%7BT%7D%2Cc_%7BM%7D%2Cd%29%3DP_%7Ba%7DM_%7Bnr%7D%281%2C1%2C1%29%5C%5C\" alt=\"M_{nr}(c_{T},c_{M},d)=P_{a}M_{nr}(1,1,1)\\\\\" eeimg=\"1\"/> </p><p>其中 <img src=\"https://www.zhihu.com/equation?tex=P_%7Ba%7D%3Ddiag%28c_%7BT%7D%2Cdc_%7BT%7D%2Cdc_%7BT%7D%2Cc_%7BM%7D%29\" alt=\"P_{a}=diag(c_{T},dc_{T},dc_{T},c_{M})\" eeimg=\"1\"/> ， <img src=\"https://www.zhihu.com/equation?tex=c_%7BT%7D%2Cc_%7BM%7D%2Cd\" alt=\"c_{T},c_{M},d\" eeimg=\"1\"/> 分别为升力系数，扭矩系数以及等效力臂长度。由此，有如下关系：</p><p><img src=\"https://www.zhihu.com/equation?tex=M_%7Bnr%7D%5E%7B-1%7D%28c_%7BT%7D%2Cc_%7BM%7D%2Cd%29%3DM_%7Bnr%7D%5E%7B-1%7D%281%2C1%2C1%29P_%7Ba%7D%5E%7B-1%7D%5C%5C\" alt=\"M_{nr}^{-1}(c_{T},c_{M},d)=M_{nr}^{-1}(1,1,1)P_{a}^{-1}\\\\\" eeimg=\"1\"/> </p><p>以下图为例的六旋翼飞行器为例， <img src=\"https://www.zhihu.com/equation?tex=M_%7B6%7D%28c_%7BT%7D%2Cc_%7BM%7D%2Cd%29\" alt=\"M_{6}(c_{T},c_{M},d)\" eeimg=\"1\"/> 可以表示为</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-899a7d168c751c6ededf9903719b2c7a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"450\" data-rawheight=\"419\" class=\"origin_image zh-lightbox-thumb\" width=\"450\" data-original=\"https://pic3.zhimg.com/v2-899a7d168c751c6ededf9903719b2c7a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;450&#39; height=&#39;419&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"450\" data-rawheight=\"419\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"450\" data-original=\"https://pic3.zhimg.com/v2-899a7d168c751c6ededf9903719b2c7a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-899a7d168c751c6ededf9903719b2c7a_b.jpg\"/></figure><p><img src=\"https://www.zhihu.com/equation?tex=M_%7B6%7D%28c_%7BT%7D%2Cc_%7BM%7D%2Cd%29%3D+%5Cbegin%7Bbmatrix%7D++c_%7BT%7D%26c_%7BT%7D%26c_%7BT%7D%26c_%7BT%7D%26c_%7BT%7D%26c_%7BT%7D%5C%5C+0%26-%5Cfrac%7B%5Csqrt%7B3%7Ddc_%7BT%7D%7D%7B2%7D%26-%5Cfrac%7B%5Csqrt%7B3%7Ddc_%7BT%7D%7D%7B2%7D%260%26%5Cfrac%7B%5Csqrt%7B3%7Ddc_%7BT%7D%7D%7B2%7D%26%5Cfrac%7B%5Csqrt%7B3%7Ddc_%7BT%7D%7D%7B2%7D%5C%5C+dc_%7BT%7D%26%5Cfrac%7Bdc_%7BT%7D%7D%7B2%7D%26-%5Cfrac%7Bdc_%7BT%7D%7D%7B2%7D%26-dc_%7BT%7D%26-%5Cfrac%7Bdc_%7BT%7D%7D%7B2%7D%26%5Cfrac%7Bdc_%7BT%7D%7D%7B2%7D%5C%5C++c_%7BM%7D%26-c_%7BM%7D%26c_%7BM%7D%26-c_%7BM%7D%26c_%7BM%7D%26-c_%7BM%7D++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"M_{6}(c_{T},c_{M},d)= \\begin{bmatrix}  c_{T}&amp;c_{T}&amp;c_{T}&amp;c_{T}&amp;c_{T}&amp;c_{T}\\\\ 0&amp;-\\frac{\\sqrt{3}dc_{T}}{2}&amp;-\\frac{\\sqrt{3}dc_{T}}{2}&amp;0&amp;\\frac{\\sqrt{3}dc_{T}}{2}&amp;\\frac{\\sqrt{3}dc_{T}}{2}\\\\ dc_{T}&amp;\\frac{dc_{T}}{2}&amp;-\\frac{dc_{T}}{2}&amp;-dc_{T}&amp;-\\frac{dc_{T}}{2}&amp;\\frac{dc_{T}}{2}\\\\  c_{M}&amp;-c_{M}&amp;c_{M}&amp;-c_{M}&amp;c_{M}&amp;-c_{M}  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>由此可得，</p><p><img src=\"https://www.zhihu.com/equation?tex=M_%7B6%7D%281%2C1%2C1%29%3D+%5Cbegin%7Bbmatrix%7D++1%261%261%261%261%261%5C%5C+0%26-%5Cfrac%7B%5Csqrt%7B3%7D%7D%7B2%7D%26-%5Cfrac%7B%5Csqrt%7B3%7D%7D%7B2%7D%260%26%5Cfrac%7B%5Csqrt%7B3%7D%7D%7B2%7D%26%5Cfrac%7B%5Csqrt%7B3%7D%7D%7B2%7D%5C%5C+1%26%5Cfrac%7B1%7D%7B2%7D%26-%5Cfrac%7B1%7D%7B2%7D%26-1%26-%5Cfrac%7B1%7D%7B2%7D%26%5Cfrac%7B1%7D%7B2%7D%5C%5C++1%26-1%261%26-1%261%26-1++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"M_{6}(1,1,1)= \\begin{bmatrix}  1&amp;1&amp;1&amp;1&amp;1&amp;1\\\\ 0&amp;-\\frac{\\sqrt{3}}{2}&amp;-\\frac{\\sqrt{3}}{2}&amp;0&amp;\\frac{\\sqrt{3}}{2}&amp;\\frac{\\sqrt{3}}{2}\\\\ 1&amp;\\frac{1}{2}&amp;-\\frac{1}{2}&amp;-1&amp;-\\frac{1}{2}&amp;\\frac{1}{2}\\\\  1&amp;-1&amp;1&amp;-1&amp;1&amp;-1  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>易知其伪逆矩阵为：</p><p><img src=\"https://www.zhihu.com/equation?tex=M%5E%7B-1%7D_%7B6%7D%281%2C1%2C1%29%3D%5Cfrac%7B1%7D%7B6%7D+%5Cbegin%7Bbmatrix%7D+1%260%262%261%5C%5C+1%26-%5Csqrt%7B3%7D%261%26-1%5C%5C+1%26-%5Csqrt%7B3%7D%26-1%261%5C%5C+1%260%26-2%26-1%5C%5C+1%26%5Csqrt%7B3%7D%26-1%261%5C%5C+1%26%5Csqrt%7B3%7D%261%26-1++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"M^{-1}_{6}(1,1,1)=\\frac{1}{6} \\begin{bmatrix} 1&amp;0&amp;2&amp;1\\\\ 1&amp;-\\sqrt{3}&amp;1&amp;-1\\\\ 1&amp;-\\sqrt{3}&amp;-1&amp;1\\\\ 1&amp;0&amp;-2&amp;-1\\\\ 1&amp;\\sqrt{3}&amp;-1&amp;1\\\\ 1&amp;\\sqrt{3}&amp;1&amp;-1  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>因此， <img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D+%5COmega_%7Bd%2C1%7D%5E%7B2%7D%5C%5C+%5COmega_%7Bd%2C2%7D%5E%7B2%7D%5C%5C+%5Cdddot~%5C%5C+%5COmega_%7Bd%2C6%7D%5E%7B2%7D%5C%5C++%5Cend%7Bbmatrix%7D+%3D+M%5E%7B-1%7D_%7B6%7D%281%2C1%2C1%29P%5E%7B-1%7D_%7Ba%7D%5Cbegin%7Bbmatrix%7D+F_%7Bd%7D%5C%5C+%5Ctau_%7Bd%7D++%5Cend%7Bbmatrix%7D+%3DM%5E%7B-1%7D_%7B6%7D%281%2C1%2C1%29+%5Cbegin%7Bbmatrix%7D+F_%7Bd%7D%2Fc_%7BT%7D%5C%5C+%5Ctau_%7Bdx%7D%2F%28dc_%7BT%7D%29%5C%5C+%5Ctau_%7Bdy%7D%2F%28dc_%7BT%7D%29%5C%5C+%5Ctau_%7Bdz%7D%2F%28dc_%7BT%7D%29%5C%5C++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"\\begin{bmatrix} \\Omega_{d,1}^{2}\\\\ \\Omega_{d,2}^{2}\\\\ \\dddot~\\\\ \\Omega_{d,6}^{2}\\\\  \\end{bmatrix} = M^{-1}_{6}(1,1,1)P^{-1}_{a}\\begin{bmatrix} F_{d}\\\\ \\tau_{d}  \\end{bmatrix} =M^{-1}_{6}(1,1,1) \\begin{bmatrix} F_{d}/c_{T}\\\\ \\tau_{dx}/(dc_{T})\\\\ \\tau_{dy}/(dc_{T})\\\\ \\tau_{dz}/(dc_{T})\\\\  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>令控制输出指令为 <img src=\"https://www.zhihu.com/equation?tex=U_%7B1%7D%2CU_%7B2%7D%2C%5Cdddot~+%2CU_%7B6%7D\" alt=\"U_{1},U_{2},\\dddot~ ,U_{6}\" eeimg=\"1\"/> ,则</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D+U_%7B1%7D%5C%5C+U_%7B2%7D%5C%5C+%5Cdddot~%5C%5C+U_%7B6%7D%5C%5C++%5Cend%7Bbmatrix%7D+%3D+k%2A+%5Cbegin%7Bbmatrix%7D+%5COmega_%7Bd%2C1%7D%5C%5C+%5COmega_%7Bd%2C2%7D%5C%5C+%5Cdddot~%5C%5C+%5COmega_%7Bd%2C6%7D%5C%5C++%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"\\begin{bmatrix} U_{1}\\\\ U_{2}\\\\ \\dddot~\\\\ U_{6}\\\\  \\end{bmatrix} = k* \\begin{bmatrix} \\Omega_{d,1}\\\\ \\Omega_{d,2}\\\\ \\dddot~\\\\ \\Omega_{d,6}\\\\  \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D+U_%7B1%7D%5C%5C+U_%7B2%7D%5C%5C+%5Cdddot~%5C%5C+U_%7B6%7D%5C%5C++%5Cend%7Bbmatrix%7D+%3D+k%2A+%5Csqrt%7BM%5E%7B-1%7D_%7B6%7D%281%2C1%2C1%29+%5Cbegin%7Bbmatrix%7D+F_%7Bd%7D%2Fc_%7BT%7D%5C%5C+%5Ctau_%7Bdx%7D%2F%28dc_%7BT%7D%29%5C%5C+%5Ctau_%7Bdy%7D%2F%28dc_%7BT%7D%29%5C%5C+%5Ctau_%7Bdz%7D%2F%28dc_%7BT%7D%29%5C%5C++%5Cend%7Bbmatrix%7D%7D%5C%5C\" alt=\"\\begin{bmatrix} U_{1}\\\\ U_{2}\\\\ \\dddot~\\\\ U_{6}\\\\  \\end{bmatrix} = k* \\sqrt{M^{-1}_{6}(1,1,1) \\begin{bmatrix} F_{d}/c_{T}\\\\ \\tau_{dx}/(dc_{T})\\\\ \\tau_{dy}/(dc_{T})\\\\ \\tau_{dz}/(dc_{T})\\\\  \\end{bmatrix}}\\\\\" eeimg=\"1\"/> </p><h2>总结</h2><p><b>本篇围绕控制分配矩阵展开，阐述了控制分配矩阵的作用及必要性，以多旋翼飞行器为例，推导其控制分配矩阵的求解过程。</b></p><p><b>在实际工程中，控制分配矩阵的重要性不亚于控制器设计本身，一个合理的控制分配矩阵能够大大减轻控制器的压力，提高系统的鲁棒性。</b></p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "自动控制", 
                    "tagLink": "https://api.zhihu.com/topics/19589888"
                }, 
                {
                    "tag": "算法", 
                    "tagLink": "https://api.zhihu.com/topics/19553510"
                }
            ], 
            "comments": [
                {
                    "userName": "Darker", 
                    "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                    "content": "十字形的混控系数里面总会出现0，就会导致该电机对应的x轴或y轴缺乏力矩分量，这也正是X型比较主流的原因", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "嗯 十字型一般不用。", 
                            "likes": 0, 
                            "replyToAuthor": "Darker"
                        }
                    ]
                }, 
                {
                    "userName": "Darker", 
                    "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                    "content": "<p>px4里面哪个文件是这个伪逆矩阵，找了半天没找到</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "开源飞控里是没有计算伪逆矩阵的。他只做了几何约束 没有做模型约束。", 
                            "likes": 1, 
                            "replyToAuthor": "Darker"
                        }, 
                        {
                            "userName": "Darker", 
                            "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                            "content": "感谢大佬指点迷津，这个几何约束是根据什么原理？", 
                            "likes": 0, 
                            "replyToAuthor": "知乎用户"
                        }
                    ]
                }, 
                {
                    "userName": "zinghd", 
                    "userLink": "https://www.zhihu.com/people/ec862c0a61b9fca226289f931d28ed10", 
                    "content": "求伪逆里的系数提出 通过pid控制量给 现在的控制分配就是简单的几何投影", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "嗯 一般都是根据几何约束进行分配", 
                            "likes": 0, 
                            "replyToAuthor": "zinghd"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/81673541", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 3, 
            "title": "系统辨识专题（三）——多旋翼飞行器模型参数辨识问题", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>上一篇文章中，我们对多旋翼飞行器进行了详细的建模，对其刚体动力学模型、刚体运动学模型以及控制效率模型进行了详细的介绍，了解建模对于多旋翼飞行器控制系统设计的重要性，建模以及系统辨识技术在多旋翼飞行器设计中起到的作用。</p><p>本篇将基于上一篇中多旋翼飞行器的建模结果，围绕两种主流的参数辨识方法——白盒辨识法与黑盒辨识法进行展开。同时，针对多旋翼飞行器模型中关键的几个参数进行辨识。</p><p><b>二．</b> <b>白盒辨识法</b></p><p>白盒辨识法，顾名思义，是在对待辨识对象有一定了解的基础上，对其进行机理建模，然后，采用直接或间接的方式，对模型当中未知的几个参数进行计算或估计。</p><p>如上一篇中，我们针对多旋翼飞行器建模的刚体动力学模型、刚体运动学模型以及控制效率模型中的未知参数：</p><p><img src=\"https://www.zhihu.com/equation?tex=c_%7BT%7D%2Cc_%7BM%7D%2Cm%2CJ%5C%5C\" alt=\"c_{T},c_{M},m,J\\\\\" eeimg=\"1\"/> </p><p>由于模型结构已知，参数的物理意义明确，我们能够通过设计实验的方式，直接或间接地测量其准确的数值。</p><ul><li><b>质量</b> <img src=\"https://www.zhihu.com/equation?tex=m\" alt=\"m\" eeimg=\"1\"/> <b>的测量方法</b></li></ul><p>利用普通的电子秤可以完成重量的测量。这里需要注意的是，尺寸较大的多旋翼飞行器放到称重平台上时，容易使机身触地，这会导致测量出现较大偏差。同时，需要保证多旋翼飞行器的中心尽量靠近称台的中心，两者之间的偏差也会对电子秤产生力矩作用，影响测量精度。</p><ul><li><b>升力系数</b> <img src=\"https://www.zhihu.com/equation?tex=c_%7BT%7D\" alt=\"c_{T}\" eeimg=\"1\"/> <b>与扭矩系数</b> <img src=\"https://www.zhihu.com/equation?tex=c_%7BM%7D\" alt=\"c_{M}\" eeimg=\"1\"/> <b>的测量方法</b></li></ul><p>通常情况，测量螺旋桨的力矩非常困难。这是因为螺旋桨转速非常快，而且桨叶的效率高，阻力小，导致产生的反扭矩非常小。因此，我们需要设计一个能够测量动力系统所有参数的装置。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-9ab29b908240ce958f86b33859e5c372_b.jpg\" data-size=\"normal\" data-rawwidth=\"1528\" data-rawheight=\"1034\" class=\"origin_image zh-lightbox-thumb\" width=\"1528\" data-original=\"https://pic3.zhimg.com/v2-9ab29b908240ce958f86b33859e5c372_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1528&#39; height=&#39;1034&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1528\" data-rawheight=\"1034\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1528\" data-original=\"https://pic3.zhimg.com/v2-9ab29b908240ce958f86b33859e5c372_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-9ab29b908240ce958f86b33859e5c372_b.jpg\"/><figcaption>动力系统参数测量装置</figcaption></figure><p>如图所示，桨叶的拉力由测力计测量得到，点击转速通过非接触式转速计测量得到，油门指令通过遥控器或者万用表测量得到。力矩测量的具体步骤如下：</p><ol><li><b>当控制信号为零，螺旋桨静止时，调节砝码与配重位置，使细杆保持水平。记录此时砝码的初始位置 </b><img src=\"https://www.zhihu.com/equation?tex=p_%7B1%7D\" alt=\"p_{1}\" eeimg=\"1\"/><b> 。</b></li><li><b>输入指定的油门指令使电机转动。转动进入稳态时，反扭矩使细杆倾斜。微调砝码位置，使细杆再次水平。记下此时的砝码位置 </b><img src=\"https://www.zhihu.com/equation?tex=p_%7B2%7D\" alt=\"p_{2}\" eeimg=\"1\"/><b> 。</b></li><li><b>假定砝码的质量为 </b><img src=\"https://www.zhihu.com/equation?tex=m\" alt=\"m\" eeimg=\"1\"/><b> ,动力单元产生的力矩计算公式如下：</b></li></ol><p><img src=\"https://www.zhihu.com/equation?tex=M%3D%EF%BC%88p_%7B2%7D-p_%7B1%7D%EF%BC%89mg%5C%5C\" alt=\"M=（p_{2}-p_{1}）mg\\\\\" eeimg=\"1\"/> </p><p>通过反复以上实验步骤，我们能够获得油门指令-稳态转速曲线、稳态转速-拉力曲线以及稳态转速-力矩曲线，通过二次曲线拟合即可得到关键参数 <img src=\"https://www.zhihu.com/equation?tex=c_%7BT%7D%2Cc_%7BM%7D\" alt=\"c_{T},c_{M}\" eeimg=\"1\"/> 。</p><ul><li><b>转动惯量J的测量方法</b></li></ul><p> 一个刚体的转动惯量可以表示为：</p><p><img src=\"https://www.zhihu.com/equation?tex=J%3D+%5Cbegin%7Bbmatrix%7D++J_%7Bxx%7D%26-J_%7Bxy%7D%26-J_%7Bxz%7D%5C%5C+-J_%7Byx%7D%26J_%7Byy%7D%26-J_%7Byz%7D%5C%5C+-J_%7Bzx%7D%26-J_%7Bzy%7D%26J_%7Bzz%7D+%5Cend%7Bbmatrix%7D++%5C%5C\" alt=\"J= \\begin{bmatrix}  J_{xx}&amp;-J_{xy}&amp;-J_{xz}\\\\ -J_{yx}&amp;J_{yy}&amp;-J_{yz}\\\\ -J_{zx}&amp;-J_{zy}&amp;J_{zz} \\end{bmatrix}  \\\\\" eeimg=\"1\"/> </p><p>对于中心对称的标准多旋翼飞行器而言， <img src=\"https://www.zhihu.com/equation?tex=J_%7Bxy%7D%3DJ_%7Byx%7D%2CJ_%7Bxz%7D%3DJ_%7Bzx%7D%2CJ_%7Byz%7D%3DJ_%7Bzy%7D\" alt=\"J_{xy}=J_{yx},J_{xz}=J_{zx},J_{yz}=J_{zy}\" eeimg=\"1\"/> ,且 <img src=\"https://www.zhihu.com/equation?tex=J_%7Bxy%7D%3DJ_%7Bxz%7D%3DJ_%7Byz%7D%3D0\" alt=\"J_{xy}=J_{xz}=J_{yz}=0\" eeimg=\"1\"/> ,因此，转动惯量可简化为：</p><p><img src=\"https://www.zhihu.com/equation?tex=J%3D+%5Cbegin%7Bbmatrix%7D++J_%7Bxx%7D%260%260%5C%5C+0%26J_%7Byy%7D%260%5C%5C+0%260%26J_%7Bzz%7D+%5Cend%7Bbmatrix%7D++%5C%5C\" alt=\"J= \\begin{bmatrix}  J_{xx}&amp;0&amp;0\\\\ 0&amp;J_{yy}&amp;0\\\\ 0&amp;0&amp;J_{zz} \\end{bmatrix}  \\\\\" eeimg=\"1\"/> </p><p>其中， <img src=\"https://www.zhihu.com/equation?tex=J_%7Bxx%7D%2CJ_%7Byy%7D%2CJ_%7Bzz%7D\" alt=\"J_{xx},J_{yy},J_{zz}\" eeimg=\"1\"/> 称为中心主转动惯量，我们可以通过双线摆的方法测量。如下图所示，以测量 <img src=\"https://www.zhihu.com/equation?tex=J_%7Bzz%7D\" alt=\"J_{zz}\" eeimg=\"1\"/> 为例：<img src=\"https://www.zhihu.com/equation?tex=T_%7B0%7D%3D4%5Cpi%5Csqrt%7B%5Cfrac%7BJ_%7Bzz%7DL%7D%7Bm_%7B0%7Dgd%5E2%7D%7D%5C%5C+\" alt=\"T_{0}=4\\pi\\sqrt{\\frac{J_{zz}L}{m_{0}gd^2}}\\\\ \" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=J_%7Bzz%7D%3D%5Cfrac%7Bm_%7B0%7Dgd%5E2%7D%7B16%5Cpi%5E2L%7DT_%7B0%7D%5E2%5C%5C\" alt=\"J_{zz}=\\frac{m_{0}gd^2}{16\\pi^2L}T_{0}^2\\\\\" eeimg=\"1\"/> </p><figure data-size=\"small\"><noscript><img src=\"https://pic2.zhimg.com/v2-a2fa8a50674ee34bba239dddcb180f95_b.jpg\" data-size=\"small\" data-rawwidth=\"1813\" data-rawheight=\"2048\" class=\"origin_image zh-lightbox-thumb\" width=\"1813\" data-original=\"https://pic2.zhimg.com/v2-a2fa8a50674ee34bba239dddcb180f95_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1813&#39; height=&#39;2048&#39;&gt;&lt;/svg&gt;\" data-size=\"small\" data-rawwidth=\"1813\" data-rawheight=\"2048\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1813\" data-original=\"https://pic2.zhimg.com/v2-a2fa8a50674ee34bba239dddcb180f95_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-a2fa8a50674ee34bba239dddcb180f95_b.jpg\"/><figcaption>双线摆法测量主转动惯量示意图</figcaption></figure><p>同理,将悬线的固定位置改变后，即可测量剩余的两个主转动惯量，如下图所示：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-fff0b619ee3c0d038599049dbf0d9d5a_b.jpg\" data-size=\"normal\" data-rawwidth=\"2436\" data-rawheight=\"940\" class=\"origin_image zh-lightbox-thumb\" width=\"2436\" data-original=\"https://pic3.zhimg.com/v2-fff0b619ee3c0d038599049dbf0d9d5a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2436&#39; height=&#39;940&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"2436\" data-rawheight=\"940\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2436\" data-original=\"https://pic3.zhimg.com/v2-fff0b619ee3c0d038599049dbf0d9d5a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-fff0b619ee3c0d038599049dbf0d9d5a_b.jpg\"/><figcaption>主轴转动惯量测量示意图</figcaption></figure><p><b>三．</b> <b>黑盒辨识法</b></p><p>对于机理模型较复杂，无法简单地用数学模型描述的系统，我们可以假设对象的模型阶次与结构，通过输入激励信号的方式，激发模型在各个工作点的特性。然后，采集其输入-输出数据，采用递推最小二乘等算法进行参数辨识，最终得到完整的模型。如果觉得自己设计辨识算法比较复杂，那么也可以采用本专题第一篇中介绍的基于MATLAB系统辨识工具箱的辨识方法对黑盒模型参数进行辨识。</p><a href=\"https://zhuanlan.zhihu.com/p/79047922\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-614ad71b71b639b4d6ffa6cd95445e6d_180x120.jpg\" data-image-width=\"4096\" data-image-height=\"2730\" class=\"internal\">遥远的乌托邦：多旋翼无人机开发技术储备系列——系统辨识专题（一）——MATLAB系统辨识工具箱的使用案例</a><p>当前主流的比较实用的辨识算法为递推最小二乘法（RLS）及其变种，下篇中，我们将围绕其算法原理，结合多旋翼飞行器的辨识实验设计展开论述。</p><p><b>四．</b> <b>总结</b></p><p>本篇围绕多旋翼飞行器模型参数的辨识问题展开，介绍了两种主流的参数辨识方法——白箱辨识与黑箱辨识法。白箱辨识法在机理模型已知的基础中，对模型中物理意义明确的几个未知参数进行实验设计，通过实验直接或间接地测量其数值；黑箱辨识法则在机理模型未知的情况下，对模型结构进行一定的猜测和假设，通过递推最小二乘法等算法进行未知参数的辨识。下一篇将着重对多旋翼飞行器设计中的黑箱辨识法实验设计及技巧进行详解。</p><p><i><b>Ps</b>:本篇中截图出自《多旋翼飞行器设计与控制》一书，该书凝结了北航无人机实验室众多大牛的心血，深入浅出，适合有一定算法基础的各位无人机从业者细细品读，结合实际工程中碰到的问题，相信会有一番新的体会！</i></p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "算法", 
                    "tagLink": "https://api.zhihu.com/topics/19553510"
                }, 
                {
                    "tag": "模式识别", 
                    "tagLink": "https://api.zhihu.com/topics/19564812"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/81510775", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 4, 
            "title": "系统辨识专题（二）——多旋翼飞行器建模", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>上一篇中详细阐述了MATLAB系统辨识工具箱的使用实例，本篇将以多旋翼飞行器为研究对象，详细阐述其刚体动力学模型、飞行控制刚体模型以及控制效率模型。最后，针对多旋翼飞行器控制系统设计当中的主要系统辨识问题进行解析。</p><p><b>二．</b> <b>多旋翼飞行器建模结构解析</b></p><p>在进行多旋翼飞行器建模之前，我们需要了解与多旋翼飞行器系统设计息息相关的主要几大模型：</p><ul><li><b>动力系统模型</b></li></ul><p>动力系统模型，描述的是为多旋翼飞行器提供拉力与扭矩的驱动系统模型。该模型描述了<b>飞控系统输出的油门</b>与<b>电机转速</b>之间的关系。</p><ul><li><b>控制效率模型</b></li></ul><p>控制效率模型，描述的是<b>升力、扭矩</b>与<b>电机转速</b>之间的关系。其关系矩阵称为<b>控制效率矩阵</b>，该矩阵的逆矩阵称为<b>控制分配矩阵</b>。</p><ul><li><b>刚体动力学模型</b></li></ul><p>刚体动力学模型，描述的是<b>升力与加速度</b>之间的关系以及<b>扭矩与角加速度</b>之间的关系。</p><ul><li><b>刚体运动学模型</b></li></ul><p>刚体运动学模型，描述的是<b>位置与速度</b>、<b>角度与角速度</b>之间的关系。</p><p>如图1所示为多旋翼飞行器四大模型之间的关系结构图：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4024b7668b2cf55bab42ab085f44bf1e_b.jpg\" data-size=\"normal\" data-rawwidth=\"233\" data-rawheight=\"801\" class=\"content_image\" width=\"233\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;233&#39; height=&#39;801&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"233\" data-rawheight=\"801\" class=\"content_image lazy\" width=\"233\" data-actualsrc=\"https://pic3.zhimg.com/v2-4024b7668b2cf55bab42ab085f44bf1e_b.jpg\"/><figcaption>图1 多旋翼飞行器模型关系结构图</figcaption></figure><p><b>三．</b> <b>多旋翼飞行器的刚体动力学模型及飞行控制刚体模型</b></p><p> 在进行建模前，我们需要作如下假设：</p><ul><li>多旋翼飞行器是刚体。</li><li>多旋翼飞行器的质量与转动惯量不变（<b>质量发生变化的案例，后续文章展开详解</b>）。</li><li>多旋翼飞行器几何中心与重心一致。</li></ul><p><b>1. 多旋翼飞行器刚体运动学模型</b></p><p>令多旋翼飞行器的重心向量为 <img src=\"https://www.zhihu.com/equation?tex=p%5E%7Be%7D\" alt=\"p^{e}\" eeimg=\"1\"/> ,则</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cdot+p%5E%7Be%7D%3Dv%5E%7Be%7D%5C%5C\" alt=\"\\dot p^{e}=v^{e}\\\\\" eeimg=\"1\"/> </p><p>其中 <img src=\"https://www.zhihu.com/equation?tex=v%5E%7Be%7D%5C\" alt=\"v^{e}\\\" eeimg=\"1\"/> 表示多旋翼飞行器的飞行速度。</p><p>对于欧拉角模型而言，有下式子，其中 <img src=\"https://www.zhihu.com/equation?tex=%5CTheta\" alt=\"\\Theta\" eeimg=\"1\"/> 为世界坐标系下的欧拉角， <img src=\"https://www.zhihu.com/equation?tex=R\" alt=\"R\" eeimg=\"1\"/> 为旋转矩阵。</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D++%5Cdot+p%5E%7Be%7D%3Dv%5Ee%5C%5C%5B2ex%5D+++%5Cdot+%5CTheta%3DR+%5Ccdot%5Comega%5Eb+%5Cend%7Bcases%7D+%5C%5C\" alt=\"\\begin{cases}  \\dot p^{e}=v^e\\\\[2ex]   \\dot \\Theta=R \\cdot\\omega^b \\end{cases} \\\\\" eeimg=\"1\"/> </p><p><b>2. 多旋翼飞行器刚体动力学模型</b></p><p>对多旋翼飞行器进行受力分析，易知， <img src=\"https://www.zhihu.com/equation?tex=%5Cdot+v%5E%7Be%7D%3Dge_%7B3%7D-%5Cfrac%7Bf%7D%7Bm%7Db_%7B3%7D%3Dge_%7B3%7D%2BR%5Cfrac%7Bf%5Ee%7D%7Bm%7D%5C%5C\" alt=\"\\dot v^{e}=ge_{3}-\\frac{f}{m}b_{3}=ge_{3}+R\\frac{f^e}{m}\\\\\" eeimg=\"1\"/>  其中， <img src=\"https://www.zhihu.com/equation?tex=e_%7B3%7D\" alt=\"e_{3}\" eeimg=\"1\"/> 为世界坐标系下的单位矢量， <img src=\"https://www.zhihu.com/equation?tex=b_%7B3%7D\" alt=\"b_{3}\" eeimg=\"1\"/> 为机体坐标系下的单位矢量， <img src=\"https://www.zhihu.com/equation?tex=g\" alt=\"g\" eeimg=\"1\"/> 为重力， <img src=\"https://www.zhihu.com/equation?tex=R\" alt=\"R\" eeimg=\"1\"/> 为旋转矩阵。</p><p>由于，</p><p><img src=\"https://www.zhihu.com/equation?tex=v%5Ee%3DR+%5Ccdot+v%5Eb%5C%5C\" alt=\"v^e=R \\cdot v^b\\\\\" eeimg=\"1\"/> </p><p>可得，</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cdot+v%5Eb%3D-%5Comega%5Eb%5Ctimes+v%5Eb%2BgR%5ETe_%7B3%7D-%5Cfrac%7Bf%7D%7Bm%7De_%7B3%7D%5C%5C\" alt=\"\\dot v^b=-\\omega^b\\times v^b+gR^Te_{3}-\\frac{f}{m}e_{3}\\\\\" eeimg=\"1\"/> </p><p>在机体坐标系内建立姿态动力学方程：</p><p><img src=\"https://www.zhihu.com/equation?tex=J%5Ccdot%5Cdot+w%5Eb%3D-%5Comega%5Eb%5Ctimes+%28J+%5Ccdot+%5Comega%5Eb%29%2BG_%7Ba%7D%2B%5Ctau%5C%5C\" alt=\"J\\cdot\\dot w^b=-\\omega^b\\times (J \\cdot \\omega^b)+G_{a}+\\tau\\\\\" eeimg=\"1\"/> </p><p>其中， <img src=\"https://www.zhihu.com/equation?tex=J\" alt=\"J\" eeimg=\"1\"/> 为转动惯量， <img src=\"https://www.zhihu.com/equation?tex=G_%7Ba%7D\" alt=\"G_{a}\" eeimg=\"1\"/> 为陀螺力矩， <img src=\"https://www.zhihu.com/equation?tex=%5Ctau\" alt=\"\\tau\" eeimg=\"1\"/> 为螺旋桨产生的力矩。</p><p><b>3. 飞行控制刚体模型</b></p><p>联立上式可得飞行控制刚体模型，</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D++%5Cdot+p%5E%7Be%7D%3Dv%5Ee%5C%5C%5B2ex%5D+++%5Cdot+v%5E%7Be%7D%3Dge_%7B3%7D-%5Cfrac%7Bf%7D%7Bm%7Db_%7B3%7D%3Dge_%7B3%7D%2BR%5Cfrac%7Bf%5Ee%7D%7Bm%7D%5C%5C%5B2ex%5D+++%5Cdot+%5CTheta%3DR+%5Ccdot%5Comega%5Eb%5C%5C%5B2ex%5D++J%5Ccdot%5Cdot+w%5Eb%3D-%5Comega%5Eb%5Ctimes+%28J+%5Ccdot+%5Comega%5Eb%29%2BG_%7Ba%7D%2B%5Ctau+%5Cend%7Bcases%7D+%5C%5C\" alt=\"\\begin{cases}  \\dot p^{e}=v^e\\\\[2ex]   \\dot v^{e}=ge_{3}-\\frac{f}{m}b_{3}=ge_{3}+R\\frac{f^e}{m}\\\\[2ex]   \\dot \\Theta=R \\cdot\\omega^b\\\\[2ex]  J\\cdot\\dot w^b=-\\omega^b\\times (J \\cdot \\omega^b)+G_{a}+\\tau \\end{cases} \\\\\" eeimg=\"1\"/> </p><p><b>四．</b> <b>多旋翼飞行器的控制效率模型</b></p><figure data-size=\"small\"><noscript><img src=\"https://pic1.zhimg.com/v2-9f68da8ca95aedd3fef2d1fb7d9c5668_b.jpg\" data-size=\"small\" data-rawwidth=\"1920\" data-rawheight=\"1208\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic1.zhimg.com/v2-9f68da8ca95aedd3fef2d1fb7d9c5668_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1208&#39;&gt;&lt;/svg&gt;\" data-size=\"small\" data-rawwidth=\"1920\" data-rawheight=\"1208\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic1.zhimg.com/v2-9f68da8ca95aedd3fef2d1fb7d9c5668_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-9f68da8ca95aedd3fef2d1fb7d9c5668_b.jpg\"/><figcaption>图2 多旋翼飞行器的一般性机架布局</figcaption></figure><p>如图2所示为多旋翼飞行器的一般性机架布局示意图，由图可推出螺旋桨升力、力矩与电机转速之间的关系，即控制效率模型，</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D+f%5C%5C+%5Ctau_%7Bx%7D%5C%5C+%5Ctau_%7By%7D%5C%5C+%5Ctau_%7Bz%7D+%5Cend%7Bbmatrix%7D+%3DM%5Ccdot+%5Cbegin%7Bbmatrix%7D+%5Comega_%7B1%7D%5E%7B2%7D%5C%5C+%5Comega_%7B2%7D%5E%7B2%7D%5C%5C+%5Comega_%7B3%7D%5E%7B2%7D%5C%5C+%5Comega_%7B4%7D%5E%7B2%7D+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"\\begin{bmatrix} f\\\\ \\tau_{x}\\\\ \\tau_{y}\\\\ \\tau_{z} \\end{bmatrix} =M\\cdot \\begin{bmatrix} \\omega_{1}^{2}\\\\ \\omega_{2}^{2}\\\\ \\omega_{3}^{2}\\\\ \\omega_{4}^{2} \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=M\" alt=\"M\" eeimg=\"1\"/> 即为<b>控制效率矩阵</b>，</p><p><img src=\"https://www.zhihu.com/equation?tex=M%3D+%5Cbegin%7Bbmatrix%7D+c_%7BT%7D+%26c_%7BT%7D%26%5Ccdots%26c_%7BT%7D%5C%5C++-d_%7B1%7Dc_%7BT%7Dsin%5Cvarphi_%7B1%7D%26-d_%7B2%7Dc_%7BT%7Dsin%5Cvarphi_%7B2%7D%26%5Ccdots%26-d_%7Bn%7Dc_%7BT%7Dsin%5Cvarphi_%7Bn%7D%5C%5C+d_%7B1%7Dc_%7BT%7Dcos%5Cvarphi_%7B1%7D%26d_%7B2%7Dc_%7BT%7Dcos%5Cvarphi_%7B2%7D%26%5Ccdots%26d_%7Bn%7Dc_%7BT%7Dcos%5Cvarphi_%7Bn%7D%5C%5C+c_%7BM%7D%5Cdelta_%7B1%7D%26c_%7BM%7D%5Cdelta_%7B2%7D%26%5Ccdots%26c_%7BM%7D%5Cdelta_%7Bn%7D+%5Cend%7Bbmatrix%7D%5C%5C\" alt=\"M= \\begin{bmatrix} c_{T} &amp;c_{T}&amp;\\cdots&amp;c_{T}\\\\  -d_{1}c_{T}sin\\varphi_{1}&amp;-d_{2}c_{T}sin\\varphi_{2}&amp;\\cdots&amp;-d_{n}c_{T}sin\\varphi_{n}\\\\ d_{1}c_{T}cos\\varphi_{1}&amp;d_{2}c_{T}cos\\varphi_{2}&amp;\\cdots&amp;d_{n}c_{T}cos\\varphi_{n}\\\\ c_{M}\\delta_{1}&amp;c_{M}\\delta_{2}&amp;\\cdots&amp;c_{M}\\delta_{n} \\end{bmatrix}\\\\\" eeimg=\"1\"/> </p><p>其中， <img src=\"https://www.zhihu.com/equation?tex=%5Cdelta_%7Bi%7D%3D%28-1%29%5E%7Bi%2B1%7D%28i%3D1%2C%5Ccdots%2Cn%29\" alt=\"\\delta_{i}=(-1)^{i+1}(i=1,\\cdots,n)\" eeimg=\"1\"/> 。</p><p>其逆矩阵 <img src=\"https://www.zhihu.com/equation?tex=M%5E%7B-1%7D\" alt=\"M^{-1}\" eeimg=\"1\"/> 即为<b>控制分配矩阵，</b>对上式求逆即可得到电机转速与升力、力矩的关系式：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bbmatrix%7D+%5Comega_%7B1%7D%5C%5C+%5Comega_%7B2%7D%5C%5C+%5Comega_%7B3%7D%5C%5C+%5Comega_%7B4%7D+%5Cend%7Bbmatrix%7D+%3D%5Csqrt%7BM%5E%7B-1%7D%5Ccdot+%5Cbegin%7Bbmatrix%7D+f%5C%5C+%5Ctau_%7Bx%7D%5C%5C+%5Ctau_%7By%7D%5C%5C+%5Ctau_%7Bz%7D+%5Cend%7Bbmatrix%7D+%7D%5C%5C\" alt=\"\\begin{bmatrix} \\omega_{1}\\\\ \\omega_{2}\\\\ \\omega_{3}\\\\ \\omega_{4} \\end{bmatrix} =\\sqrt{M^{-1}\\cdot \\begin{bmatrix} f\\\\ \\tau_{x}\\\\ \\tau_{y}\\\\ \\tau_{z} \\end{bmatrix} }\\\\\" eeimg=\"1\"/> </p><p><b>五．</b> <b>多旋翼飞行器控制系统设计中的系统辨识问题</b></p><p>在对多旋翼飞行器的模型结构有了清晰的认识后，我们需要知道如何将这些模型应用于实际的系统设计中（导航系统与控制系统，这里以控制系统为例）。</p><p>在实际的多旋翼飞行器系统设计当中，我们往往将建模与系统辨识技术用于：</p><ul><li><b>关键子系统的建模与系统辨识、控制系统设计</b></li></ul><p>系统建模不仅使得我们了解其特性，更重要的是，我们能够使用频域/时域的分析工具，对其频域/时域指标进行定量分析，进而选择合适的控制器，同时，辅助进行参数整定与仿真验证工作。</p><ul><li><b>控制效率模型的解析</b></li></ul><p>从上文中可知，控制效率模型描述了升力、力矩以及电机转速之间的关系，其系数矩阵的逆矩阵称为控制分配矩阵。该矩阵代表了<b>从各子控制系统之间的控制输出与电机转速之间的分配关系。当该矩阵中各参数已知且接近真值时，各子控制系统的控制分配效率达到理论值（最佳效率）</b>。</p><p>如何简单地理解以上描述呢？我们在设计多旋翼飞行器的各子控制系统时，如横滚通道控制器、俯仰通道控制器、偏航通道控制器以及油门通道控制器，各控制通道的输出以控制分配矩阵中描述的系数进行叠加，那么实际工程中将出现以下情况：</p><p><b>当控制分配矩阵系数偏离真值时，</b>控制器的“效率”大幅度降低，这里的“效率”可以用“有用功”来类比，用一个形象的例子解释，</p><p><b>一辆马车本意向着南方高速行进，但由于车轮偏了45度，原本往南行进的马车变成了向西偏南45度行进，这样，即使这批马车的速度与其他马车相同，他也需要花更多地时间与精力在修正行程偏差上，最终他才能够达到终点</b>。</p><p>这里的控制分配矩阵即代表了各控制子系统之间的效率分配关系，当控制分配矩阵系数偏离真值时，各子系统均无法工作在最佳效率点，严重的情况下，甚至会出现类似动力不足，控制系统性能恶化的现象。</p><p>从上文可知，该控制分配矩阵的系数具有明确的物理意义，我们可以通过实验法进行精确测量，具体的测量方案将在下篇详解，本篇暂不作赘述。</p><ul><li><b>关键子系统的故障诊断与健康状况评估</b></li></ul><p>在建立了多旋翼飞行器的几大关键模型后，我们可以根据模型进行频域特性分析，进而选择经典或现代控制理论中的控制器进行控制系统设计；同时，也能够根据该模型设计故障观测器，提取关键的几项性能指标作为评估准则，实时地检测整个控制系统的健康状况。我们将在后续的文章中详细展开。</p><p><b>六．</b> <b>总结</b></p><p>本篇以多旋翼飞行器的建模问题展开，着重介绍了多旋翼飞行器建模问题中的四大主要模型，及其相互之间的联系；随后，针对多旋翼飞行器控制系统设计中的系统辨识问题进行了详细阐述。根据以上结论可知，对于飞行控制系统设计有意义的物理参数为 <img src=\"https://www.zhihu.com/equation?tex=c_%7BT%7D%2Cc_%7BM%7D%2Cm%2CJ\" alt=\"c_{T},c_{M},m,J\" eeimg=\"1\"/> ，下一篇中将针对多旋翼飞行器建模问题中的参数测量方法进行详解。</p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "控制", 
                    "tagLink": "https://api.zhihu.com/topics/19637343"
                }, 
                {
                    "tag": "数学建模", 
                    "tagLink": "https://api.zhihu.com/topics/19575624"
                }
            ], 
            "comments": [
                {
                    "userName": "Darker", 
                    "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                    "content": "动力学模型的第三个公式有笔误。反对称矩阵的x应该是下标形式，或者把wb方括号去掉也行", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<a class=\"comment_sticker\" href=\"https://pic3.zhimg.com/v2-cb8443f07a41298e45191cef11b90fd2.gif\" data-width=\"\" data-height=\"\">[干杯]</a>", 
                            "likes": 0, 
                            "replyToAuthor": "Darker"
                        }, 
                        {
                            "userName": "Darker", 
                            "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                            "content": "[微笑]，催更，有空讲讲H无穷", 
                            "likes": 0, 
                            "replyToAuthor": "知乎用户"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/81168041", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 17, 
            "title": "控制系统设计专题（三）——自抗扰控制算法（下）", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>上篇中详细阐述了经典的自抗扰控制算法的原理，本篇将围绕两种ADRC算法展开，针对扩张状态观测器的参数整定问题进行详解，同时，对跟踪微分器的几个重要应用进行介绍。</p><p><b>二．</b> <b>两种典型的ADRC算法</b></p><p>自抗扰控制算法的核心，在于通过扩张状态观测器动态观测系统的“总扰动”，在补偿系统后，将其简化为积分器串联系统，由此，扩张状态观测器观测得到的“总扰动”补偿环节可等效于PID控制算法中的积分项作用，并且，其没有积分项的负面影响。</p><p>下面介绍两种典型的ADRC控制算法：</p><ul><li><b>改进型非线性ADRC控制算法</b></li></ul><p>本文的改进型ADRC控制算法，主要针对实际工程中出现的扩张状态观测器估计的“总扰动”无法与真值完全吻合的问题，添加了积分环节，以消除稳态误差。</p><ul><li><b>线性LADRC控制算法</b> </li></ul><p>由于非线性ADRC控制算法参数较多，且始终缺乏其闭环稳定性的理论证明。于是，作为韩京清教授在自抗扰控制算法领域的合作者，高志强先生，于2003年，首次提出一种基于经典ADRC算法思想的改进型线性ADRC控制算法——LADRC。</p><p>LADRC主要将扩张状态观测器中的非线性函数替换为线性函数，同时，高志强先生给出了 <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D\" alt=\"\\beta_{01}\" eeimg=\"1\"/> ， <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B02%7D\" alt=\"\\beta_{02}\" eeimg=\"1\"/> ， <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B03%7D\" alt=\"\\beta_{03}\" eeimg=\"1\"/> 与系统带宽之间的关系，大大简化了状态观测器的参数整定过程，且易于理解和实现。</p><p><b>三．</b> <b>扩张状态观测器参数整定技巧</b></p><ul><li><b>改进型非线性ADRC控制算法</b></li></ul><p>本篇针对多旋翼飞行器控制系统，设计了一套扩张状态观测器的参数整定准则：</p><p>（1）记录飞行器的等采样时间间隔的反馈量 <img src=\"https://www.zhihu.com/equation?tex=y\" alt=\"y\" eeimg=\"1\"/> 以及反馈量的微分 <img src=\"https://www.zhihu.com/equation?tex=%5Cdot+y\" alt=\"\\dot y\" eeimg=\"1\"/> 。</p><p>（2）对反馈量的微分 <img src=\"https://www.zhihu.com/equation?tex=%5Cdot+y\" alt=\"\\dot y\" eeimg=\"1\"/> 进一步微分得到 <img src=\"https://www.zhihu.com/equation?tex=%5Cddot+y\" alt=\"\\ddot y\" eeimg=\"1\"/> ，由于微分运算引入了较大的噪声，因此本文借</p><p>助matlab自带的无时延巴特沃兹滤波器对微分后的信号进行滤波处理，以获取最接近真实值</p><p>的微分信号。若传感器的测量误差可被忽略，则由此可得系统方程中的三个状态变量 </p><p><img src=\"https://www.zhihu.com/equation?tex=x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29%2Cx_%7B3%7D%28t%29\" alt=\"x_{1}(t),x_{2}(t),x_{3}(t)\" eeimg=\"1\"/> 的近似真值，以此作为扩张状态观测器的输出值 <img src=\"https://www.zhihu.com/equation?tex=z_%7B1%7D%28t%29%2Cz_%7B2%7D%28t%29%2Cz_%7B3%7D%28t%29\" alt=\"z_{1}(t),z_{2}(t),z_{3}(t)\" eeimg=\"1\"/> </p><p>，当扩张状态观测器的参数接近于理想值时， </p><p><img src=\"https://www.zhihu.com/equation?tex=z_%7B1%7D%28t%29%5Crightarrow+x_%7B1%7D%28t%29%2C+z_%7B2%7D%28t%29%5Crightarrow+x_%7B2%7D%28t%29%2C+z_%7B3%7D%28t%29%5Crightarrow+x_%7B3%7D%28t%29+%5C%5C\" alt=\"z_{1}(t)\\rightarrow x_{1}(t), z_{2}(t)\\rightarrow x_{2}(t), z_{3}(t)\\rightarrow x_{3}(t) \\\\\" eeimg=\"1\"/></p><p>（3）计算扩张状态观测器的均方误差 <img src=\"https://www.zhihu.com/equation?tex=S\" alt=\"S\" eeimg=\"1\"/> ，如下所示：</p><p><img src=\"https://www.zhihu.com/equation?tex=S%3D%5Csqrt%7B%5Cfrac%7B%5Csum_%7Bk%3D1%7D%5E%7Bn%7D%7B%28k_%7B1%7D%28z_%7B1%7D%28k%29-x_%7B1%7D%28k%29%29%2Bk_%7B2%7D%28z_%7B2%7D%28k%29-x_%7B2%7D%28k%29%29%2Bk_%7B3%7D%28z_%7B3%7D%28k%29-x_%7B3%7D%28k%29%29%29%7D%7D%7Bn%7D%7D+%5C%5C\" alt=\"S=\\sqrt{\\frac{\\sum_{k=1}^{n}{(k_{1}(z_{1}(k)-x_{1}(k))+k_{2}(z_{2}(k)-x_{2}(k))+k_{3}(z_{3}(k)-x_{3}(k)))}}{n}} \\\\\" eeimg=\"1\"/> </p><p>式中， <img src=\"https://www.zhihu.com/equation?tex=k_%7B1%7D%2Bk_%7B2%7D%2Bk_%7B3%7D%3D1\" alt=\"k_{1}+k_{2}+k_{3}=1\" eeimg=\"1\"/> ，根据实际工程中所关注的扩张状态观测器性能指标来选取不同</p><p>的 <img src=\"https://www.zhihu.com/equation?tex=k_%7B1%7D%2Ck_%7B2%7D%2Ck_%7B3%7D\" alt=\"k_{1},k_{2},k_{3}\" eeimg=\"1\"/> 组合。由于观测值 <img src=\"https://www.zhihu.com/equation?tex=z_%7B3%7D%28t%29\" alt=\"z_{3}(t)\" eeimg=\"1\"/> 的估计精度直接影响整个ADRC控制器的控制品质，</p><p>本文采用 <img src=\"https://www.zhihu.com/equation?tex=k_%7B1%7D%3D0.3%2Ck_%7B2%7D%3D0.1%2Ck_%7B3%7D%3D0.6\" alt=\"k_{1}=0.3,k_{2}=0.1,k_{3}=0.6\" eeimg=\"1\"/> 的组合对扩张状态观测器的估计效果进行评估。</p><p>图3.1-3.6为滤波前后扩张状态观测器的输出曲线对比图，其中扩张状态观测器的参数为 <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D%3D400%E3%80%81%5Cbeta_%7B02%7D%3D56000%E3%80%81%5Cbeta_%7B03%7D%3D3500000%E3%80%81%5Cdelta%3D400T%E3%80%81T%3D0.0025+%5C%5C\" alt=\"\\beta_{01}=400、\\beta_{02}=56000、\\beta_{03}=3500000、\\delta=400T、T=0.0025 \\\\\" eeimg=\"1\"/> 从图3.1-3.6可知，滤波前扩张状态观测器 <img src=\"https://www.zhihu.com/equation?tex=z_%7B1%7D%2Cz_%7B2%7D%2Cz_%7B3%7D\" alt=\"z_{1},z_{2},z_{3}\" eeimg=\"1\"/> 与状态量 <img src=\"https://www.zhihu.com/equation?tex=x_%7B1%7D%2Cx_%7B2%7D%2Cx_%7B3%7D\" alt=\"x_{1},x_{2},x_{3}\" eeimg=\"1\"/> 的残差的方差分别为19.683、863.254与2396.265；滤波后扩张状态观测器 <img src=\"https://www.zhihu.com/equation?tex=z_%7B1%7D%2Cz_%7B2%7D%2Cz_%7B3%7D\" alt=\"z_{1},z_{2},z_{3}\" eeimg=\"1\"/> 与状态量 <img src=\"https://www.zhihu.com/equation?tex=x_%7B1%7D%2Cx_%7B2%7D%2Cx_%7B3%7D\" alt=\"x_{1},x_{2},x_{3}\" eeimg=\"1\"/> 的残差的方差分别为1.635、67.297与186.274。</p><p>由此可见，扩张状态观测器具有与跟踪微分器相似的特性，其对输入信号的噪声较为敏感。输入信号经过滤波后，即当输入信号噪声较小时，扩张状态观测器的输出结果能够很好地跟踪对应的状态量，且具有较小的跟踪时延；输入信息未经滤波，即当输入信号噪声较大时，扩张状态观测器输出信号噪声也较大，这对自抗扰控制器的性能会产生较大的影响。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-aa2f7f6d5fee8ea98169f4fabee0a74e_b.jpg\" data-size=\"normal\" data-rawwidth=\"544\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb\" width=\"544\" data-original=\"https://pic3.zhimg.com/v2-aa2f7f6d5fee8ea98169f4fabee0a74e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;544&#39; height=&#39;216&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"544\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"544\" data-original=\"https://pic3.zhimg.com/v2-aa2f7f6d5fee8ea98169f4fabee0a74e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-aa2f7f6d5fee8ea98169f4fabee0a74e_b.jpg\"/><figcaption>图 3.1 滤波前扩张状态观测器z1输出，其中x1为状态量，z1为状态量的估计值</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-42f711c75eca520a4b1f56b2b6ee0d13_b.jpg\" data-size=\"normal\" data-rawwidth=\"568\" data-rawheight=\"224\" class=\"origin_image zh-lightbox-thumb\" width=\"568\" data-original=\"https://pic4.zhimg.com/v2-42f711c75eca520a4b1f56b2b6ee0d13_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;568&#39; height=&#39;224&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"568\" data-rawheight=\"224\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"568\" data-original=\"https://pic4.zhimg.com/v2-42f711c75eca520a4b1f56b2b6ee0d13_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-42f711c75eca520a4b1f56b2b6ee0d13_b.jpg\"/><figcaption>图 3.2 滤波前扩张状态观测器z2输出，其中x2为状态量，z2为状态量的估计值</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-b268dbc0a10e0cb6ecfa4217349f26e2_b.jpg\" data-size=\"normal\" data-rawwidth=\"544\" data-rawheight=\"234\" class=\"origin_image zh-lightbox-thumb\" width=\"544\" data-original=\"https://pic3.zhimg.com/v2-b268dbc0a10e0cb6ecfa4217349f26e2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;544&#39; height=&#39;234&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"544\" data-rawheight=\"234\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"544\" data-original=\"https://pic3.zhimg.com/v2-b268dbc0a10e0cb6ecfa4217349f26e2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-b268dbc0a10e0cb6ecfa4217349f26e2_b.jpg\"/><figcaption>图 3.3 滤波前扩张状态观测器z3输出，其中x3为状态量，z3为状态量的估计值</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-51f58c00483f7db4a551576879ea8ed4_b.jpg\" data-size=\"normal\" data-rawwidth=\"554\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb\" width=\"554\" data-original=\"https://pic1.zhimg.com/v2-51f58c00483f7db4a551576879ea8ed4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;554&#39; height=&#39;216&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"554\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"554\" data-original=\"https://pic1.zhimg.com/v2-51f58c00483f7db4a551576879ea8ed4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-51f58c00483f7db4a551576879ea8ed4_b.jpg\"/><figcaption>图 3.4 滤波后扩张状态观测器z1输出，其中x1为状态量，z1为状态量的估计值</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-eeecc356e1efc7c26b90a5f025f68b33_b.jpg\" data-size=\"normal\" data-rawwidth=\"553\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb\" width=\"553\" data-original=\"https://pic4.zhimg.com/v2-eeecc356e1efc7c26b90a5f025f68b33_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;553&#39; height=&#39;216&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"553\" data-rawheight=\"216\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"553\" data-original=\"https://pic4.zhimg.com/v2-eeecc356e1efc7c26b90a5f025f68b33_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-eeecc356e1efc7c26b90a5f025f68b33_b.jpg\"/><figcaption>图 3.5 滤波后扩张状态观测器z2输出，其中x2为状态量，z2为状态量的估计值</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-4df4c8101872c92cbb996c25f8e69ec7_b.jpg\" data-size=\"normal\" data-rawwidth=\"545\" data-rawheight=\"233\" class=\"origin_image zh-lightbox-thumb\" width=\"545\" data-original=\"https://pic4.zhimg.com/v2-4df4c8101872c92cbb996c25f8e69ec7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;545&#39; height=&#39;233&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"545\" data-rawheight=\"233\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"545\" data-original=\"https://pic4.zhimg.com/v2-4df4c8101872c92cbb996c25f8e69ec7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-4df4c8101872c92cbb996c25f8e69ec7_b.jpg\"/><figcaption>图 3.6 滤波后扩张状态观测器z3输出，其中x3为状态量，z3为状态量的估计值</figcaption></figure><ul><li><b>LADRC控制算法</b></li></ul><p>LADRC算法的线性扩张观测器如下式所示：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+e%3Dz_%7B1%7D-y+%5C%5C%5B2ex%5D+z_%7B1%7D%3Dz_%7B1%7D%2Bh%28z_%7B2%7D-%5Cbeta_%7B01%7De%29%5C%5C%5B2ex%5D+z_%7B2%7D%3Dz_%7B2%7D%2Bh%28z_%7B3%7D-%5Cbeta_%7B02%7De%2Bbu%29+%5C%5C%5B2ex%5D+z_%7B3%7D%3Dz_%7B3%7D%2Bh%28-%5Cbeta_%7B03%7De%29++%5Cend%7Bcases%7D+%5C%5C\" alt=\"\\begin{cases} e=z_{1}-y \\\\[2ex] z_{1}=z_{1}+h(z_{2}-\\beta_{01}e)\\\\[2ex] z_{2}=z_{2}+h(z_{3}-\\beta_{02}e+bu) \\\\[2ex] z_{3}=z_{3}+h(-\\beta_{03}e)  \\end{cases} \\\\\" eeimg=\"1\"/> </p><p>高志强先生将参数 <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D\" alt=\"\\beta_{01}\" eeimg=\"1\"/>， <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B02%7D\" alt=\"\\beta_{02}\" eeimg=\"1\"/> ， <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B03%7D\" alt=\"\\beta_{03}\" eeimg=\"1\"/>与系统的带宽联系在一起，并给出了以下一般性关系，</p><p>其中 <img src=\"https://www.zhihu.com/equation?tex=%5Comega\" alt=\"\\omega\" eeimg=\"1\"/> 的取值一般与系统带宽呈倍数关系：</p><ul><li><b>对于一阶系统有 </b><img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D+%3D2%5Comega++%2C%5Cbeta_%7B02%7D+%3D+%5Comega%5E2%5C%5C\" alt=\"\\beta_{01} =2\\omega  ,\\beta_{02} = \\omega^2\\\\\" eeimg=\"1\"/> </li><li><b>对于二阶系统有 </b><img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D+%3D3%5Comega++%2C%5Cbeta_%7B02%7D+%3D+3%5Comega%5E2%2C%5Cbeta_%7B03%7D%3D%5Comega%5E3%5C%5C\" alt=\"\\beta_{01} =3\\omega  ,\\beta_{02} = 3\\omega^2,\\beta_{03}=\\omega^3\\\\\" eeimg=\"1\"/> </li><li><b>对于三阶系统有 </b><img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D+%3D4%5Comega++%2C%5Cbeta_%7B02%7D+%3D+6%5Comega%5E2%2C%5Cbeta_%7B03%7D%3D4%5Comega%5E3.%5Cbeta_%7B04%7D%3D%5Comega%5E4%5C%5C\" alt=\"\\beta_{01} =4\\omega  ,\\beta_{02} = 6\\omega^2,\\beta_{03}=4\\omega^3.\\beta_{04}=\\omega^4\\\\\" eeimg=\"1\"/> </li></ul><p><b>四．</b> <b>跟踪微分器在多旋翼飞行器控制系统中的妙用</b></p><ul><li><b>柔化输入信号</b></li></ul><p>跟踪微分器除了可以对误差信号设计过渡过程，也可以针对一些输入/给定信号进行过渡过程设计，以此，从源头避免信号突变的问题。那么这两者的区别在于哪里？</p><p>对于多旋翼飞行器控制系统而言，我们往往加入一些前馈环节以提高控制系统的动态响应速度，而前馈环节输出较大的时刻，往往也是对应着给定信号突变的时刻。因此，直接对给定信号设计过渡过程的控制效果，往往优于对误差信号设计过渡过程。</p><ul><li><b>相位超前补偿</b></li></ul><p>对于一些轴距较大，电机转速较慢，桨叶尺寸较大的多旋翼飞行器，其执行器的动态响应速度较慢，因此，我们可以适当地对反馈信号进行相位超前补偿处理，使得系统的动态响应速度能够达到预期效果。下式为相位超前补偿算法，其中 <img src=\"https://www.zhihu.com/equation?tex=fhan\" alt=\"fhan\" eeimg=\"1\"/> 函数表达式可详见上一篇</p><a href=\"https://zhuanlan.zhihu.com/p/81017045\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic4.zhimg.com/v2-c60b7ab72967091c3c434d49d58406fb_180x120.jpg\" data-image-width=\"2503\" data-image-height=\"1400\" class=\"internal\">遥远的乌托邦：多旋翼无人机开发技术储备系列—控制系统设计专题（二）——自抗扰控制算法（上）</a><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D++fh%3Dfhan%28v_%7B1%7D-v%28t%29%2Cv_%7B2%7D%2Cr%2Ch_%7B1%7D%29%5C%5C%5B2ex%5D++v_%7B1%7D%3Dv_%7B1%7D%2Bhv_%7B2%7D%5C%5C%5B2ex%5D++v_%7B2%7D%3Dv_%7B2%7D%2Bhfh%5C%5C%5B2ex%5D++y%28t%29%3D1%2F%5Cgamma%28v_%7B1%7D%28t%29%2B%5Clambda+h_%7B1%7Dv_%7B2%7D%28t%29%29%2C%5Cgamma%3E1++%5Cend%7Bcases%7D+%5C%5C\" alt=\"\\begin{cases}  fh=fhan(v_{1}-v(t),v_{2},r,h_{1})\\\\[2ex]  v_{1}=v_{1}+hv_{2}\\\\[2ex]  v_{2}=v_{2}+hfh\\\\[2ex]  y(t)=1/\\gamma(v_{1}(t)+\\lambda h_{1}v_{2}(t)),\\gamma&gt;1  \\end{cases} \\\\\" eeimg=\"1\"/> </p><p><b>五．</b> <b>多旋翼飞行控制系统设计</b></p><p>这里以四旋翼飞行器为例，如图5.1所示为四旋翼飞行控制系统结构图。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-449086fe98068580f9aade2b3e8e4c76_b.jpg\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"369\" class=\"origin_image zh-lightbox-thumb\" width=\"623\" data-original=\"https://pic3.zhimg.com/v2-449086fe98068580f9aade2b3e8e4c76_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;623&#39; height=&#39;369&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"369\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"623\" data-original=\"https://pic3.zhimg.com/v2-449086fe98068580f9aade2b3e8e4c76_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-449086fe98068580f9aade2b3e8e4c76_b.jpg\"/><figcaption>图 5.1 飞行控制系统结构图</figcaption></figure><p>本文设计的飞行控制系统采用串级控制结构。内环进行飞行器的姿态增稳控制，外环实现轨迹控制。对于高度通道，采用位置、速度、加速度控制的串级结构，如图5.2所示。位置控制回路与速度控制回路采用比例控制器进行控制，而加速度控制回路则采用ADRC控制器进行控制。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-05a658de261f2b9da0420d6ab10524fe_b.jpg\" data-size=\"normal\" data-rawwidth=\"607\" data-rawheight=\"259\" class=\"origin_image zh-lightbox-thumb\" width=\"607\" data-original=\"https://pic3.zhimg.com/v2-05a658de261f2b9da0420d6ab10524fe_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;607&#39; height=&#39;259&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"607\" data-rawheight=\"259\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"607\" data-original=\"https://pic3.zhimg.com/v2-05a658de261f2b9da0420d6ab10524fe_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-05a658de261f2b9da0420d6ab10524fe_b.jpg\"/><figcaption>图 5.2 高度通道控制结构图</figcaption></figure><p>图5.3所示为水平控制通道，采用位置、速度、姿态角、角速度控制的串级结构。其中位置控制回路采用比例控制器进行控制，速度控制回路采用ADRC控制器进行控制，姿态角控制回路采用比例控制器进行控制，而角速度控制回路则采用ADRC控制器进行控制。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-68835603e9f829b71cd70daac4b31790_b.jpg\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"357\" class=\"origin_image zh-lightbox-thumb\" width=\"622\" data-original=\"https://pic1.zhimg.com/v2-68835603e9f829b71cd70daac4b31790_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;622&#39; height=&#39;357&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"357\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"622\" data-original=\"https://pic1.zhimg.com/v2-68835603e9f829b71cd70daac4b31790_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-68835603e9f829b71cd70daac4b31790_b.jpg\"/><figcaption>图 5.3 水平通道控制结构图</figcaption></figure><p>对于航向通道，采用姿态角与角速度的串级控制结构，航向角控制回路采用比例控制器进行控制，角速度控制采用ADRC控制器进行控制，如下图5.4所示。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-994294510961f29251efe19b335516aa_b.jpg\" data-size=\"normal\" data-rawwidth=\"609\" data-rawheight=\"220\" class=\"origin_image zh-lightbox-thumb\" width=\"609\" data-original=\"https://pic3.zhimg.com/v2-994294510961f29251efe19b335516aa_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;609&#39; height=&#39;220&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"609\" data-rawheight=\"220\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"609\" data-original=\"https://pic3.zhimg.com/v2-994294510961f29251efe19b335516aa_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-994294510961f29251efe19b335516aa_b.jpg\"/><figcaption>图 5.4 航向通道控制结构图</figcaption></figure><p>尽管扩张状态观测器，能够较准确地估计总扰动，并对控制量进行修正。最终将控制对象简化成积分器串联系统，使得自抗扰控制器能够实现无静差控制。然而，实际工程中，由于传感器噪声、参数的时变性以及其他未知因素的影响，扩张状态观测器估计得到的扰动往往存在迟滞现象，同时，其估计精度受限于传感器噪声，被控对象往往无法简化为积分器串联系统，这使得无积分控制的自抗扰控制器难以完全消除控制系统的稳态误差。因此，本文设计的控制器中，在传统的自抗扰控制器计算得到的控制量基础上，增加了积分项控制，以提高控制系统的稳态精度。</p><p><b>六．</b> <b>总结</b></p><p>本篇介绍了高志强先生提出的LADRC控制算法以及改进型非线性ADRC控制算法。同时，针对自抗扰控制算法的核心部分——扩张状态观测器的参数整定问题进行了详解。而后，针对跟踪微分器在实际工程中的几个妙用进行了阐述，最后针对多旋翼飞行器的控制系统结构设计进行了详解。</p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "自动控制", 
                    "tagLink": "https://api.zhihu.com/topics/19589888"
                }, 
                {
                    "tag": "算法", 
                    "tagLink": "https://api.zhihu.com/topics/19553510"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/81017045", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 17, 
            "title": "控制系统设计专题（二）——自抗扰控制算法（上）", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>上篇中详细阐述了几种经典的PID控制算法及其存在的问题以及改进思路了，本篇将围绕韩京清教授开创的自抗扰控制算法进行阐述，该算法为工业控制领域带来了一项可操性极强的自动控制技术。</p><p><b>二．</b> <b>ADRC的算法原理</b></p><p>现代控制理论虽然提出了许多性能卓越的控制算法与设计方法以及分析工具，然而，现代控制理论所设计的控制器往往高度依赖于所建模型的精度。而在实际工程中，精确的模型参数较难获得，甚至于所建立的数学模型也未必能够真实反映被控对象的所有特性。因此，其实际控制性能往往不如理论设计的那么优越。相对的，经典PID控制理论则不依赖于被控对象模型，仅仅依靠误差对被控对象进行反馈控制。但其控制器往往只适用于线性对象，当被控对象呈现出强耦合，非线性特性时，基于PID经典控制理论所设计的控制器性能容易出现不如人意的情况。</p><p>自抗扰控制算法是韩京清教授针对PID控制算法的不足，提出的一种非线性控制算法。其吸取了PID控制算法“基于误差来消除误差”的控制思想，在PID控制算法基本思想的基础上，增加了以下环节：</p><ul><li><b>过渡过程</b></li><li><b>非线性反馈控制律</b></li><li><b>扩张状态观测器</b></li><li><b>更合理的微分信号生成器</b></li></ul><p>以上几个环节的组合即为经典的非线性ADRC控制器，如图1所示，</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ba80e3fe72af3e5b746f1919c596f827_b.jpg\" data-size=\"normal\" data-rawwidth=\"839\" data-rawheight=\"322\" class=\"origin_image zh-lightbox-thumb\" width=\"839\" data-original=\"https://pic4.zhimg.com/v2-ba80e3fe72af3e5b746f1919c596f827_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;839&#39; height=&#39;322&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"839\" data-rawheight=\"322\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"839\" data-original=\"https://pic4.zhimg.com/v2-ba80e3fe72af3e5b746f1919c596f827_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ba80e3fe72af3e5b746f1919c596f827_b.jpg\"/><figcaption>图1 自抗扰控制器结构图</figcaption></figure><p>跟踪微分器的主要作用是提取微分信号的同时，尽可能地抑制运算中引入的噪声，从而得到精度较高的微分信号。例如，输入信号 <img src=\"https://www.zhihu.com/equation?tex=v%28t%29\" alt=\"v(t)\" eeimg=\"1\"/> ，它将输出两个信号 <img src=\"https://www.zhihu.com/equation?tex=v_%7B1%7D%28t%29%2Cv_%7B2%7D%28t%29\" alt=\"v_{1}(t),v_{2}(t)\" eeimg=\"1\"/> ,其中 <img src=\"https://www.zhihu.com/equation?tex=v_%7B1%7D%28t%29\" alt=\"v_{1}(t)\" eeimg=\"1\"/> 跟踪输入信号 <img src=\"https://www.zhihu.com/equation?tex=v_%7B%7D%28t%29\" alt=\"v_{}(t)\" eeimg=\"1\"/> ， <img src=\"https://www.zhihu.com/equation?tex=v_%7B2%7D%28t%29\" alt=\"v_{2}(t)\" eeimg=\"1\"/> 跟踪输入信号的微分信号。</p><p>下式为最速跟踪微分器的离散形式（公式1）：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+f%3D-rsign%28x_%7B1%7D%28k%29-v%28k%29%2B%5Cfrac%7Bx_%7B2%7D%28k%29%7Cx_%7B2%7D%28k%29%7C%7D%7B2r%7D%29%5C%5C%5B2ex%5D++x_%7B1%7D%28k%2B1%29%3Dx_%7B1%7D%28k%29%2Bhx_%7B2%7D%28k%29%5C%5C%5B2ex%5D++x_%7B2%7D%28k%2B1%29%3Dx_%7B2%7D%28k%29%2Bhf+%5Cend%7Bcases%7D+%5C%5C\" alt=\"\\begin{cases} f=-rsign(x_{1}(k)-v(k)+\\frac{x_{2}(k)|x_{2}(k)|}{2r})\\\\[2ex]  x_{1}(k+1)=x_{1}(k)+hx_{2}(k)\\\\[2ex]  x_{2}(k+1)=x_{2}(k)+hf \\end{cases} \\\\\" eeimg=\"1\"/> </p><p>由于直接将连续时间最速跟踪微分器进行离散化，系统进入稳态后会产生不能令人满意的高频震颤，因此，将函数 <img src=\"https://www.zhihu.com/equation?tex=f\" alt=\"f\" eeimg=\"1\"/> 进行以下优化。</p><p>令（公式2）</p><p><img src=\"https://www.zhihu.com/equation?tex=fsg%28x%2Cd%29%3D%28sign%28x%2Bd%29-sign%28x-d%29%29%2F2%5C%5C\" alt=\"fsg(x,d)=(sign(x+d)-sign(x-d))/2\\\\\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+d%3Drh%5E2%5C%5C%5B2ex%5D++a_%7B0%7D%3Dhx_%7B2%7D%5C%5C%5B2ex%5D++y%3Dx_%7B1%7D%2Ba_%7B0%7D%5C%5C%5B2ex%5D++a_%7B1%7D%3D%5Csqrt%7Bd%28d%2B8%7Cy%7C%29%7D%5C%5C%5B2ex%5D++a_%7B2%7D%3Da_%7B0%7D%2Bsign%28y%29%28a_%7B1%7D-d%29%2F2%5C%5C%5B2ex%5D++a%3D%28a_%7B0%7D%2By%29fsg%28y%2Cd%29%2Ba_%7B2%7D%281-fsg%28y%2Cd%29%29%5C%5C%5B2ex%5D++fhan%3D-r%28a%2Fd%29fsg%28y%2Cd%29-rsign%28a%29%281-fsg%28a%2Cd%29%29+%5Cend%7Bcases%7D+%5C%5C\" alt=\"\\begin{cases} d=rh^2\\\\[2ex]  a_{0}=hx_{2}\\\\[2ex]  y=x_{1}+a_{0}\\\\[2ex]  a_{1}=\\sqrt{d(d+8|y|)}\\\\[2ex]  a_{2}=a_{0}+sign(y)(a_{1}-d)/2\\\\[2ex]  a=(a_{0}+y)fsg(y,d)+a_{2}(1-fsg(y,d))\\\\[2ex]  fhan=-r(a/d)fsg(y,d)-rsign(a)(1-fsg(a,d)) \\end{cases} \\\\\" eeimg=\"1\"/> （公式3）</p><p>则得到优化后的离散最速跟踪微分器如下：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+fh%3Dfhan%28x_%7B1%7D%28k%29%2Cx_%7B2%7D%28k%29%2Cr%2Ch%29%5C%5C%5B2ex%5D++x_%7B1%7D%28k%2B1%29%3Dx_%7B1%7D%28k%29%2Bhx_%7B2%7D%28k%29%5C%5C%5B2ex%5D++x_%7B2%7D%28k%2B1%29%3Dx_%7B2%7D%28k%29%2Bhfh+%5Cend%7Bcases%7D%5C%5C\" alt=\"\\begin{cases} fh=fhan(x_{1}(k),x_{2}(k),r,h)\\\\[2ex]  x_{1}(k+1)=x_{1}(k)+hx_{2}(k)\\\\[2ex]  x_{2}(k+1)=x_{2}(k)+hfh \\end{cases}\\\\\" eeimg=\"1\"/>                               （公式4）</p><p>现使用 <img src=\"https://www.zhihu.com/equation?tex=x_%7B1%7D%28k%29-v%28k%29\" alt=\"x_{1}(k)-v(k)\" eeimg=\"1\"/> 代替式(4)中的 <img src=\"https://www.zhihu.com/equation?tex=x_%7B1%7D%28k%29\" alt=\"x_{1}(k)\" eeimg=\"1\"/> ，得到下式：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+fh%3Dfhan%28x_%7B1%7D%28k%29-v%28k%29%2Cx_%7B2%7D%28k%29%2Cr%2Ch%29%5C%5C%5B2ex%5D++x_%7B1%7D%28k%2B1%29%3Dx_%7B1%7D%28k%29%2Bhx_%7B2%7D%28k%29%5C%5C%5B2ex%5D++x_%7B2%7D%28k%2B1%29%3Dx_%7B2%7D%28k%29%2Bhfh+%5Cend%7Bcases%7D%5C%5C\" alt=\"\\begin{cases} fh=fhan(x_{1}(k)-v(k),x_{2}(k),r,h)\\\\[2ex]  x_{1}(k+1)=x_{1}(k)+hx_{2}(k)\\\\[2ex]  x_{2}(k+1)=x_{2}(k)+hfh \\end{cases}\\\\\" eeimg=\"1\"/>                 （公式5）</p><p>跟踪微分器的参数主要有两个：快速因子 <img src=\"https://www.zhihu.com/equation?tex=r\" alt=\"r\" eeimg=\"1\"/> 和滤波因子 <img src=\"https://www.zhihu.com/equation?tex=h\" alt=\"h\" eeimg=\"1\"/> 。其中， <img src=\"https://www.zhihu.com/equation?tex=r\" alt=\"r\" eeimg=\"1\"/> 与跟踪速度呈正相关，然而，随之带来的是噪声放大的副作用； <img src=\"https://www.zhihu.com/equation?tex=h\" alt=\"h\" eeimg=\"1\"/> 与滤波效果呈正相关，但当 <img src=\"https://www.zhihu.com/equation?tex=h\" alt=\"h\" eeimg=\"1\"/> 增大时，跟踪信号的相位损失也会随之增加。</p><p>尽管跟踪微分器提取的微分信号比直接差分近似得到的微分信号噪声小，但由于传感器信号存在噪声，若直接输入跟踪微分器进行微分信号提取，则依然存在较大的噪声。因此，本文对传感器原始信号进行低通滤波后，再输入跟踪微分器进行微分信号提取。图2、3为跟踪微分器滤波前后的曲线对比图，其中，输入参考信号为 <img src=\"https://www.zhihu.com/equation?tex=u%28t%29%3Dsin%284t%29\" alt=\"u(t)=sin(4t)\" eeimg=\"1\"/> ，输入参考信号叠加了标准差为0.01的高斯白噪声。图2、图3跟踪微分器参数为 <img src=\"https://www.zhihu.com/equation?tex=h%3D0.001%E3%80%81r%3D1000\" alt=\"h=0.001、r=1000\" eeimg=\"1\"/> 。根据下图中实验结果表明，滤波前跟踪微分器z1、z2与状态量x1、x2的残差的方差分别为0.000137与1.2577；滤波后跟踪微分器z1、z2与状态量x1、x2的残差的方差分别为0.000082与0.0038。由此可见，滤波后跟踪微分器的估计信号噪声大大下降。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-6f6eddad8a0b0bef0163cecfc4810433_b.jpg\" data-size=\"normal\" data-rawwidth=\"725\" data-rawheight=\"275\" class=\"origin_image zh-lightbox-thumb\" width=\"725\" data-original=\"https://pic4.zhimg.com/v2-6f6eddad8a0b0bef0163cecfc4810433_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;725&#39; height=&#39;275&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"725\" data-rawheight=\"275\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"725\" data-original=\"https://pic4.zhimg.com/v2-6f6eddad8a0b0bef0163cecfc4810433_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-6f6eddad8a0b0bef0163cecfc4810433_b.jpg\"/><figcaption>图 2滤波前跟踪微分器输出结果，其中z1、z2为状态量的估计值，x1、x2为状态量</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-24e812ea1e6c53b88823552de2e4762e_b.jpg\" data-size=\"normal\" data-rawwidth=\"742\" data-rawheight=\"263\" class=\"origin_image zh-lightbox-thumb\" width=\"742\" data-original=\"https://pic3.zhimg.com/v2-24e812ea1e6c53b88823552de2e4762e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;742&#39; height=&#39;263&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"742\" data-rawheight=\"263\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"742\" data-original=\"https://pic3.zhimg.com/v2-24e812ea1e6c53b88823552de2e4762e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-24e812ea1e6c53b88823552de2e4762e_b.jpg\"/><figcaption>图 3 滤波后跟踪微分器输出结果，其中z1、z2为状态量的估计值，x1、x2为状态量</figcaption></figure><p>已知非线性状态观测器：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+e_%7B1%7D%3Dz_%7B1%7D-y%5C%5C%5B2ex%5D++%5Cdot+z_%7B1%7D%3Dz_%7B2%7D-%5Cbeta_%7B01%7De_%7B1%7D%5C%5C%5B2ex%5D++%5Cdot+z_%7B2%7D%3D-%5Cbeta_%7B02%7D%7Ce_%7B1%7D%7C%5E%7B%5Cfrac%7B1%7D%7B2%7D%7Dsign%28e_%7B1%7D%29%2Bbu%5C%5C%5B2ex%5D+%5Cend%7Bcases%7D%5C%5C\" alt=\"\\begin{cases} e_{1}=z_{1}-y\\\\[2ex]  \\dot z_{1}=z_{2}-\\beta_{01}e_{1}\\\\[2ex]  \\dot z_{2}=-\\beta_{02}|e_{1}|^{\\frac{1}{2}}sign(e_{1})+bu\\\\[2ex] \\end{cases}\\\\\" eeimg=\"1\"/>                             （公式6）</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D++%5Cdot+x_%7B1%7D%3Dx_%7B2%7D%5C%5C%5B2ex%5D+%5Cdot+x_%7B2%7D%3Df%28x_%7B1%7D%2Cx_%7B2%7D%29%2Bbu%5C%5C%5B2ex%5D++y%3Dx_%7B1%7D%5C%5C%5B2ex%5D++%5Cend%7Bcases%7D%5C%5C\" alt=\"\\begin{cases}  \\dot x_{1}=x_{2}\\\\[2ex] \\dot x_{2}=f(x_{1},x_{2})+bu\\\\[2ex]  y=x_{1}\\\\[2ex]  \\end{cases}\\\\\" eeimg=\"1\"/>                                         （公式7）</p><p>将作用于开环系统的加速度 <img src=\"https://www.zhihu.com/equation?tex=f%28x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29%29\" alt=\"f(x_{1}(t),x_{2}(t))\" eeimg=\"1\"/> 的实时作用量扩充成新的状态变量 <img src=\"https://www.zhihu.com/equation?tex=x_%7B3%7D\" alt=\"x_{3}\" eeimg=\"1\"/> ，记作（公式8）：</p><p><img src=\"https://www.zhihu.com/equation?tex=x_%7B3%7D%28t%29%3Df%28x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29%29%5C%5C\" alt=\"x_{3}(t)=f(x_{1}(t),x_{2}(t))\\\\\" eeimg=\"1\"/> </p><p>并记 <img src=\"https://www.zhihu.com/equation?tex=x_%7B3%7D%28t%29%3Dw%28t%29\" alt=\"x_{3}(t)=w(t)\" eeimg=\"1\"/> ，那么系统(7)可扩张成新的系统</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+%5Cdot+x_%7B1%7D%3Dx_%7B2%7D+%5C%5C%5B2ex%5D++%5Cdot+x_%7B2%7D%3Df%28x_%7B1%7D%2Cx_%7B2%7D%29%2Bbu+%5C%5C%5B2ex%5D++%5Cdot+x_%7B3%7D%3Dw%28t%29+%5C%5C%5B2ex%5D++y%3Dx_%7B1%7D+%5C%5C%5B2ex%5D+%5Cend%7Bcases%7D%5C%5C\" alt=\"\\begin{cases} \\dot x_{1}=x_{2} \\\\[2ex]  \\dot x_{2}=f(x_{1},x_{2})+bu \\\\[2ex]  \\dot x_{3}=w(t) \\\\[2ex]  y=x_{1} \\\\[2ex] \\end{cases}\\\\\" eeimg=\"1\"/>                                    （公式9）</p><p>按式(6)对这个被扩张的系统建立状态观测器：</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+e+%3D+z_%7B1%7D-y+%5C%5C%5B2ex%5D++fe+%3D+fal%28e%2C%5Cfrac%7B1%7D%7B2%7D%2C%5Cdelta%29+%5C%5C%5B2ex%5D++fe_%7B1%7D+%3D+fal%28e%2C%5Cfrac%7B1%7D%7B4%7D%2C%5Cdelta%29+%5C%5C%5B2ex%5D++z_%7B1%7D+%3Dz_%7B1%7D+%2Bh%28z_%7B2%7D-%5Cbeta_%7B01%7De%29+%5C%5C%5B2ex%5D+z_%7B2%7D+%3Dz_%7B2%7D+%2Bh%28z_%7B3%7D-%5Cbeta_%7B02%7De%29+%5C%5C%5B2ex%5D+z_%7B3%7D+%3Dz_%7B3%7D+%2Bh%28-%5Cbeta_%7B03%7Dfe_%7B1%7D%29+%5C%5C%5B2ex%5D+%5Cend%7Bcases%7D%5C%5C\" alt=\"\\begin{cases} e = z_{1}-y \\\\[2ex]  fe = fal(e,\\frac{1}{2},\\delta) \\\\[2ex]  fe_{1} = fal(e,\\frac{1}{4},\\delta) \\\\[2ex]  z_{1} =z_{1} +h(z_{2}-\\beta_{01}e) \\\\[2ex] z_{2} =z_{2} +h(z_{3}-\\beta_{02}e) \\\\[2ex] z_{3} =z_{3} +h(-\\beta_{03}fe_{1}) \\\\[2ex] \\end{cases}\\\\\" eeimg=\"1\"/>                         （公式10）</p><p>其中，</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cbegin%7Bcases%7D+%5Cfrac%7Be%7D%7B%5Cdelta%5E%7B%5Calpha-1%7D%7D%2C%7Ce%7C%5Cleq%5Cdelta%5C%5C%5B2ex%5D++%7Ce%7C%5E%7Bb%7Dsign%28e%29%2C%7Ce%7C%3E%5Cdelta+%5Cend%7Bcases%7D%5C%5C\" alt=\"\\begin{cases} \\frac{e}{\\delta^{\\alpha-1}},|e|\\leq\\delta\\\\[2ex]  |e|^{b}sign(e),|e|&gt;\\delta \\end{cases}\\\\\" eeimg=\"1\"/>                                  （公式11）</p><p> 通过选取合适的参数 <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D%2C%5Cbeta_%7B02%7D%2C%5Cbeta_%7B03%7D\" alt=\"\\beta_{01},\\beta_{02},\\beta_{03}\" eeimg=\"1\"/> ，该系统能够较好地估计系统(7)的状态变量 <img src=\"https://www.zhihu.com/equation?tex=+x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29\" alt=\" x_{1}(t),x_{2}(t)\" eeimg=\"1\"/> 及被扩张的状态的实时作用量 <img src=\"https://www.zhihu.com/equation?tex=x_%7B3%7D%28t%29%3Df%28x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29%29\" alt=\"x_{3}(t)=f(x_{1}(t),x_{2}(t))\" eeimg=\"1\"/> ，即</p><p><img src=\"https://www.zhihu.com/equation?tex=z_%7B1%7D%28t%29%5Crightarrow+x_%7B1%7D%28t%29%2C+z_%7B2%7D%28t%29%5Crightarrow+x_%7B2%7D%28t%29%2C+z_%7B3%7D%28t%29%5Crightarrow+x_%7B3%7D%28t%29+%3D+f%28x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29%29%5C%5C\" alt=\"z_{1}(t)\\rightarrow x_{1}(t), z_{2}(t)\\rightarrow x_{2}(t), z_{3}(t)\\rightarrow x_{3}(t) = f(x_{1}(t),x_{2}(t))\\\\\" eeimg=\"1\"/> </p><p>则从观测器(10)同样可以得到状态变量 <img src=\"https://www.zhihu.com/equation?tex=x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29\" alt=\"x_{1}(t),x_{2}(t)\" eeimg=\"1\"/> 的估计值 <img src=\"https://www.zhihu.com/equation?tex=z_%7B1%7D%28t%29%2Cz_%7B2%7D%28t%29\" alt=\"z_{1}(t),z_{2}(t)\" eeimg=\"1\"/> ，同时还能估计出被扩张的状态变量作用于系统的加速度的实时作用量</p><p><img src=\"https://www.zhihu.com/equation?tex=a%28t%29%3Df%28x_%7B1%7D%28t%29%2Cx_%7B2%7D%28t%29%2Ct%2Cw%28t%29%29%5C%5C\" alt=\"a(t)=f(x_{1}(t),x_{2}(t),t,w(t))\\\\\" eeimg=\"1\"/> </p><p>因此，把被扩张的系统的状态观测器称为系统的扩张状态观测器，而变量 <img src=\"https://www.zhihu.com/equation?tex=x_%7B3%7D%28t%29\" alt=\"x_{3}(t)\" eeimg=\"1\"/> 称为被扩张的状态。</p><p>扩张状态观测器共有<img src=\"https://www.zhihu.com/equation?tex=%5Calpha_%7B1%7D%2C%5Calpha_%7B2%7D%2C%5Cdelta%2C%5Cbeta_%7B01%7D%2C%5Cbeta_%7B02%7D%2C%5Cbeta_%7B03%7D\" alt=\"\\alpha_{1},\\alpha_{2},\\delta,\\beta_{01},\\beta_{02},\\beta_{03}\" eeimg=\"1\"/> 六个参数。其中， <img src=\"https://www.zhihu.com/equation?tex=%5Calpha_%7B1%7D\" alt=\"\\alpha_{1}\" eeimg=\"1\"/> 取0.5， <img src=\"https://www.zhihu.com/equation?tex=%5Calpha_%7B2%7D\" alt=\"\\alpha_{2}\" eeimg=\"1\"/> 取0.25。</p><p><img src=\"https://www.zhihu.com/equation?tex=%5Cdelta\" alt=\"\\delta\" eeimg=\"1\"/> 为 <img src=\"https://www.zhihu.com/equation?tex=fal%28e%2C%5Calpha%2C%5Cdelta%29\" alt=\"fal(e,\\alpha,\\delta)\" eeimg=\"1\"/> 函数的线性区间宽度。 <img src=\"https://www.zhihu.com/equation?tex=%5Cbeta_%7B01%7D%2C%5Cbeta_%7B02%7D%2C%5Cbeta_%7B03%7D\" alt=\"\\beta_{01},\\beta_{02},\\beta_{03}\" eeimg=\"1\"/> 三个参数为扩张状态观测器的反馈增益。当控制周期 <img src=\"https://www.zhihu.com/equation?tex=h\" alt=\"h\" eeimg=\"1\"/> 确定时，适当地选取 <img src=\"https://www.zhihu.com/equation?tex=%5Cdelta%2C%5Cbeta_%7B01%7D%2C%5Cbeta_%7B02%7D%2C%5Cbeta_%7B03%7D\" alt=\"\\delta,\\beta_{01},\\beta_{02},\\beta_{03}\" eeimg=\"1\"/> 的组合，则ESO可以很好地估计总扰动。</p><p>传统的PID控制器采用线性的组合形成误差反馈控制律，为了使误差反馈更有效率，故采用不同的非线性函数组合来生成不同的误差反馈控制律，常用的非线性状态误差反馈控制律如下所示：</p><p><img src=\"https://www.zhihu.com/equation?tex=u_%7B0%7D%3D%5Cbeta_%7B1%7De_%7B1%7D%2B%5Cbeta_%7B2%7De_%7B2%7D%5C%5C%5B2ex%5D+u_%7B0%7D%3D%5Cbeta_%7B1%7Dfal%28e_%7B1%7D%2C%5Calpha_%7B1%7D%2C%5Cdelta%29%2B%5Cbeta_%7B2%7Dfal%28e_%7B2%7D%2C%5Calpha_%7B2%7D%2C%5Cdelta%29%2C+0%3C%5Calpha_%7B1%7D%3C1%3C%5Calpha_%7B2%7D%5C%5C%5B2ex%5D+u_%7B0%7D%3D-fhan%28e_%7B1%7D%2Ce_%7B2%7D%2Cr%2Ch_%7B1%7D%29%5C%5C%5B2ex%5D+u_%7B0%7D%3D-fhan%28e_%7B1%7D%2Cce_%7B2%7D%2Cr%2Ch_%7B1%7D%29%5C%5C%5B2ex%5D%5C%5C\" alt=\"u_{0}=\\beta_{1}e_{1}+\\beta_{2}e_{2}\\\\[2ex] u_{0}=\\beta_{1}fal(e_{1},\\alpha_{1},\\delta)+\\beta_{2}fal(e_{2},\\alpha_{2},\\delta), 0&lt;\\alpha_{1}&lt;1&lt;\\alpha_{2}\\\\[2ex] u_{0}=-fhan(e_{1},e_{2},r,h_{1})\\\\[2ex] u_{0}=-fhan(e_{1},ce_{2},r,h_{1})\\\\[2ex]\\\\\" eeimg=\"1\"/> </p><p>事实上，实际工程中也常用类似的非线性误差反馈律来生成对应的非线性PID控制器，以提高控制系统的性能。</p><p><b>三．</b> <b>总结</b></p><p>本篇详细阐述了自抗扰控制算法的原理，下篇中将详细阐述两种典型的自抗扰控制器的参数整定方法以及多旋翼飞行器控制系统中的自抗扰控制器设计方案。</p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "自动控制", 
                    "tagLink": "https://api.zhihu.com/topics/19589888"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/80858157", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 10, 
            "title": "控制系统设计专题（一）——PID控制算法", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>    PID控制算法是工业控制领域数十年来应用最广泛的经典控制算法之一，其理论原理易于理解，算法结构简单，易于工程实现，这也是其受到工程师们青睐的重要原因。</p><p>    尽管算法原理简单，其参数整定难度却因被控对象而异，不同工程师对同一被控对象整定出的PID参数也各不相同。这对PID控制算法的理解以及工程经验提出了很高的要求。本篇将从PID控制算法展开，针对PID控制算法的几个主要问题进行探讨。</p><p><b>二．</b> <b>PID控制算法原理</b></p><p>    PID控制算法，是指由比例项（P-Proportional），积分项（I-Intergral）,微分项（D-Derivative）的全部或部分组合的一种控制算法。它即可以适用于模型已知的被控对象，也可以用于模型未知的被控对象。本文以simulink仿真的形式说明PID控制算法的原理，具体的simulink模型如图1所示，实验中使用单位阶跃信号作为给定输入信号。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c0ed2fe4410d0fdd4cd9a618a84c9afd_b.jpg\" data-size=\"normal\" data-rawwidth=\"806\" data-rawheight=\"275\" class=\"origin_image zh-lightbox-thumb\" width=\"806\" data-original=\"https://pic2.zhimg.com/v2-c0ed2fe4410d0fdd4cd9a618a84c9afd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;806&#39; height=&#39;275&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"806\" data-rawheight=\"275\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"806\" data-original=\"https://pic2.zhimg.com/v2-c0ed2fe4410d0fdd4cd9a618a84c9afd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c0ed2fe4410d0fdd4cd9a618a84c9afd_b.jpg\"/><figcaption>图1 simulink仿真模型</figcaption></figure><p>    常用的PID控制算法主要分为：</p><ul><li><b>比例控制算法（P）</b></li></ul><p>    该控制器由单一的比例环节组成，当输入单位阶跃信号时，其响应如图2所示。我们可以看到，纯比例控制器控制下的实验对象，存在稳态误差，当比例项系数增大时，该稳态误差会逐渐减小，但无法完全消除，这也是P控制器的弊端之一。</p><p>    该控制器通常用于伺服系统，作为控制结构中的外环路控制器，例如多旋翼飞行器姿态控制回路中的角度外环，往往采用纯比例控制器进行闭环控制。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-0c7eb388d8bb7244e90b237baf6556f0_b.jpg\" data-size=\"normal\" data-rawwidth=\"1345\" data-rawheight=\"655\" class=\"origin_image zh-lightbox-thumb\" width=\"1345\" data-original=\"https://pic1.zhimg.com/v2-0c7eb388d8bb7244e90b237baf6556f0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1345&#39; height=&#39;655&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1345\" data-rawheight=\"655\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1345\" data-original=\"https://pic1.zhimg.com/v2-0c7eb388d8bb7244e90b237baf6556f0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-0c7eb388d8bb7244e90b237baf6556f0_b.jpg\"/><figcaption>图2 P控制器单位阶跃响应曲线</figcaption></figure><ul><li><b>比例-积分控制算法（PI）</b></li></ul><p>    为了消除稳态误差，我们引入了比例环节，组成了比例-积分控制器，其单位阶跃响应如图3所示。该实验在比例项系数不变的情况下，增加了积分环节，可以看到，稳态误差被消除了，然而，其超调量增加了。引入积分项后，确实提高了稳态精度，然而，系统的动态响应受到影响。</p><p>    该控制器常用于部分电机控制的速度环路，或其他对于稳态精度较高的被控对象。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-34e2d8f18d63cfcb31cc89b0e50a347b_b.jpg\" data-size=\"normal\" data-rawwidth=\"1353\" data-rawheight=\"641\" class=\"origin_image zh-lightbox-thumb\" width=\"1353\" data-original=\"https://pic4.zhimg.com/v2-34e2d8f18d63cfcb31cc89b0e50a347b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1353&#39; height=&#39;641&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1353\" data-rawheight=\"641\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1353\" data-original=\"https://pic4.zhimg.com/v2-34e2d8f18d63cfcb31cc89b0e50a347b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-34e2d8f18d63cfcb31cc89b0e50a347b_b.jpg\"/><figcaption>图3 PI控制器单位阶跃响应</figcaption></figure><ul><li><b>比例-微分控制算法（PD）</b></li></ul><p>    为了提高控制器的动态响应速度，引入了比例-微分控制器，如图4所示为PD控制器的单位阶跃响应。由图可知，加入微分项改善了系统的动态性能，减小了超调量，缩短了系统进入稳态的时间。</p><p>    该控制器主要用于对动态性能要求较高的被控对象。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-38517b89710362be7588f1c72893aa1b_b.jpg\" data-size=\"normal\" data-rawwidth=\"1333\" data-rawheight=\"651\" class=\"origin_image zh-lightbox-thumb\" width=\"1333\" data-original=\"https://pic4.zhimg.com/v2-38517b89710362be7588f1c72893aa1b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1333&#39; height=&#39;651&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1333\" data-rawheight=\"651\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1333\" data-original=\"https://pic4.zhimg.com/v2-38517b89710362be7588f1c72893aa1b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-38517b89710362be7588f1c72893aa1b_b.jpg\"/><figcaption>图4 PD控制器单位阶跃响应</figcaption></figure><ul><li><b>比例-积分-微分控制算法（PID）</b></li></ul><p>    PID控制器则综合了比例-积分-微分三项，其单位阶跃响应如图5所示。通过整定合适的PID参数，能够兼顾动态性能与稳态性能。该控制器适用于几乎所有被控对象。实际工程使用当中由于被控对象模型的不同，参数整定的难度也不尽相同。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-4f734d66c232b6a0eda0bb0c8d6cddc1_b.jpg\" data-size=\"normal\" data-rawwidth=\"1349\" data-rawheight=\"647\" class=\"origin_image zh-lightbox-thumb\" width=\"1349\" data-original=\"https://pic2.zhimg.com/v2-4f734d66c232b6a0eda0bb0c8d6cddc1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1349&#39; height=&#39;647&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1349\" data-rawheight=\"647\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1349\" data-original=\"https://pic2.zhimg.com/v2-4f734d66c232b6a0eda0bb0c8d6cddc1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-4f734d66c232b6a0eda0bb0c8d6cddc1_b.jpg\"/><figcaption>图5 PID控制器单位阶跃响应</figcaption></figure><p><b>三．</b> <b>PID控制算法的几个主要问题</b></p><p>    尽管PID能够满足许多工程领域的控制性能指标，然而，在实际使用过程中，我们发现了许多问题：</p><ul><li><b>积分饱和现象</b></li></ul><p>    积分项的引入能够消除稳态误差，然而，其对于系统动态性能的影响也是不可忽视的。最常见的如积分饱和现象，就是一种典型的负面影响。</p><p>    那么究竟什么是积分饱和现象？</p><p>    当控制器持续无法消除误差时，积分项将持续向某一方向增大，直至达到限幅值；此时，若误差与积分项符号相反，积分项则严重影响到整个控制器的输出，从而导致被控对象动态性能下降，出现如滞后甚至震荡的现象。</p><p>    对于许多系统而言，积分饱和现象是十分危险的，对于该现象，我们往往采用以下几种解决方法：</p><p><b>1.</b> <b>积分限幅法</b></p><p>    该方法通过对积分项设置上下限的方式，降低积分项在整个控制器输出当中的权重，以减轻积分饱和现象带来的负面影响。</p><p><b>2.</b> <b>积分分离法</b></p><p>    该方法对误差设置阈值，当误差大于设定阈值时，将积分项从PID控制器中分离，该方法可能存在控制输出突变的情况。</p><p><b>3.</b> <b>变速积分法</b></p><p>    该方法对积分项线性积分的方式采用非线性函数进行替换，使得积分项在不同的误差区间的积分速度发生改变，以适应不同的被控对象特性。</p><p><b>4.</b> <b>遇限削弱积分法</b></p><p>    该方法当控制器输出达到设定阈值时，不再对其进行积分，只有当积分项减小时，才继续进行积分。这样既能使得积分项起到应有的作用，又能减小超调量。</p><ul><li><b>微分信号的生成问题</b></li></ul><p>    离散微分信号的生成往往通过差分来近似。然而，由于差分信号容易将噪声一起放大，从而导致这样计算的微分信号信噪比下降，这对于微分控制非常不利。因此，我们可以通过跟踪微分器的方式生成微分信号，具体的推导和原理将在下一篇进行详解。</p><ul><li><b>线性组合问题</b></li></ul><p>    PID控制器往往采用线性组合的方式，然而，对于不同的被控对象，线性组合并不一定是最佳组合方式，往往通过选用不同的非线性函数替代经典的线性组合方式，以求达到更优的控制品质。</p><ul><li><b>误差信号跳变问题</b></li></ul><p>    尽管反馈信号往往不存在跳变的情况，但给定信号却无法避免跳变。同时，误差信号的计算通过作差得到，这导致了误差信号也是存在跳变现象的。</p><p>    由于执行机构无法瞬间响应跳变误差信号，对于某些被控对象而言，跳变的误差信号相当于一次极大的冲击，对于被控对象而言不利。因此，我们需要对误差信号进行处理，避免控制器直接对跳变信号进行反馈，这里往往通过安排过渡过程的方式解决该问题，具体的原理将在下篇进行阐述。</p><p><b>四．</b> <b>总结</b></p><p>    PID控制算法作为经典控制理论的标杆算法，至今依然被广泛应用于各个工程领域，相信未来依然会是应用最广泛的控制算法之一。本篇对PID控制算法原理及其主要存在的问题进行了阐述，对于PID控制算法的改进方法，将在下一篇中详细展开。</p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }
            ], 
            "comments": [
                {
                    "userName": "Darker", 
                    "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                    "content": "求教下，位置控制，内环积分起到什么作用？除了减小甚至消除静差，还有哪些别的理解？", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "你指的位置控制的内环是指的速度控制吧？积分项从控制上解释主要是为了消除静差。从物理上解释，实际上是扰动观测器的另外一种表达形式。", 
                            "likes": 0, 
                            "replyToAuthor": "Darker"
                        }, 
                        {
                            "userName": "Darker", 
                            "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                            "content": "是速度控制，我想了解一下积分起的作用，从哪方面说明都行", 
                            "likes": 0, 
                            "replyToAuthor": "知乎用户"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/80527542", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 4, 
            "title": "数字滤波器设计专题（二） ——数字滤波器设计实战", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>        上一篇中阐述了MALTAB工具箱的FDA工具使用方法，它提供一种快速便捷的滤波器设计途径，使得工程师能够针对实际应用场景，基于FFT频谱分析的基础上，设计对应的滤波器，输出滤波器参数。本篇将着重以多旋翼无人机较为典型的传感器——加速度计的滤波器设计为例，阐述具体的滤波器设计原则、技巧以及评判标准。</p><p><b>二．</b> <b>常用数字滤波器</b></p><ul><li><b>FIR与IIR滤波器</b></li></ul><p>        FIR滤波器又称有限冲激响应滤波器，它能在保证幅度特性的同时，很容易做到严格的线性相位特性。在数字滤波器中，FIR滤波器的最主要特点是没有反馈回路，因此，不存在不稳定的问题；同时，在幅度特性可以任意设置的前提下，保证了精确的线性相位。<b>稳定以及线性相位</b>是FIR滤波器的最大优点。</p><p>        IIR滤波器又称无限冲激响应滤波器，它采用递归型结构，即结构上带有反馈回路，它的<b>幅频特性精度很高</b>，不是线性相位的，与FIR滤波器相比，对于相同的滤波器设计指标，FIR滤波器所要求的阶次比IIR滤波器更高，因此，IIR滤波器的群时延特性会优于FIR滤波器，然而，由于使用了反馈结构，<b>IIR滤波器在设计时需要考虑稳定性问题</b>。</p><ul><li><b>陷波滤波器</b></li></ul><p>        陷波滤波器指的是一种可以在某个频率点速度衰减输入信号的滤波器，它属于带阻滤波器的一种，只不过陷波滤波器的阻带非常非常窄。</p><ul><li><b>带阻与陷波滤波器的区别</b> </li></ul><p>        与带阻滤波器相比，陷波滤波器阻带内衰减速度较快，因此，其对带外信号的影响较小。当噪声信号为频率较固定的单频信号（如工频干扰），且已知其频率时，陷波滤波器能够达到较好的效果；反之，则带阻滤波器的效果更为理想。</p><p><b>三．</b> <b>加速度计测量时主要存在的问题</b></p><ul><li><b>飞行器机身振动</b></li></ul><p>        由于多旋翼飞行器的有效线运动频率主要分布在低频段，因此，我们采用IIR/FIR低通滤波器对其进行滤波。在此之前，我们需要记录一段飞行器的各飞行模态传感器数据，然后，对其进行频谱分析，在分辨出有效频率与振动频率后，选取对应的滤波器指标，可通过FDA工具快速设计出对应的滤波器。</p><ul><li><b>负载与机身之间的共振现象</b></li></ul><p>        多旋翼飞行器的负载种类繁多，在不同的使用场景，挂载对应的负载，因此，负载与机身之间的共振现象往往难以避免。一旦出现共振现象，传感器会测量到一个或多个频率的振动，这些振动频率往往呈现倍数关系。针对该现象，我们可以先将其通过陷波滤波器/带阻滤波器滤波，然后再通过低通滤波器滤波，最终得到理想的传感器信号。<b>使用该方法的前提是，需要对共振频谱有准确的了解</b>。</p><p>        当共振频谱发生频移，如负载的质量、重心位置发生变化时，需要设计自适应陷波滤波器/带阻滤波器解决该问题，这里先不赘述。</p><ul><li><b>不同振动频谱分布情况的滤波器设计问题</b></li></ul><p>        一般而言，多旋翼飞行器的机身振动频率会随着电机转速降低、桨叶尺寸的增加而降低，因此，不同轴距、动力系统构成的机型会产生不同的幅频特性的振动。从工程经验来看，<b>轴距越大，电机转速越慢，桨叶尺寸越大的机型，机身振动频率与飞行器线运动有效频率越接近，反之则反。</b></p><p>        由于当飞行器线运动有效频率与机身振动频率非常接近时，低通滤波器的截止频率需要非常接近线运动的有效频率，从而导致低通滤波器的阶次增加，群时延也随之增大，最终导致传感器数据滞后的情况。</p><p>        为了解决该类问题，我们通常采用先对原始数据进行陷波滤波器或带阻滤波器滤波处理，然后再进行低通滤波器滤波处理的方法。在此之前，我们需要先对飞行器的加速度传感器数据频谱进行分析，确定其振动频率分布情况，然后设计对应的陷波/带阻滤波器以及低通滤波器。<b>若振动频谱分布较窄，可选用陷波滤波器，若较宽，则选用带阻滤波器</b>。</p><p><b>四．</b> <b>总结</b></p><p>        加速度计数字滤波器的设计存在不同情况，常规情况下，只需要根据振动频谱，针对各频率参数，设计对应的低通滤波器即可满足需求。</p><p>        当飞行器振动频率与有效线运动频率接近时，设计出的低通滤波器阶次较高，群时延增大，这对整个飞控系统的实时性有较大影响，因此，通常先设计陷波/带阻滤波器对加速度计数据进行滤波，然后再设计对应的低通滤波器，这样能够既保证较高的滤波精度又不至于增大系统的时延。</p><p>        此外，还存在诸如负载与机身共振现象，与前文提到的问题相似的是，其需要首先设计陷波/带阻滤波器进行处理，然后设计低通滤波器，然而，由于某些负载会随着环境变化而导致共振频率产生频移，同时，环境变化与飞行器运动状态的变化也会导致振动频率发生频移。针对该类问题，我们往往通过设计自适应滤波器的方式解决，本篇不作赘述，后续文章中会单独研究。</p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }
            ], 
            "comments": [
                {
                    "userName": "Darker", 
                    "userLink": "https://www.zhihu.com/people/8edfe9ef9dd657201b6b12bf1164c478", 
                    "content": "深度好文[赞]", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/80384621", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 2, 
            "title": "多旋翼无人机技术详解", 
            "content": "<p>一． 前言</p><p>        上一篇文章从技术角度对多旋翼无人机行业的发展过程进行浅析、回顾以及展望，本篇文章将详解剖析多旋翼无人机的技术组成。</p><p>二． 多旋翼无人机的技术框架</p><p>        多旋翼无人机主要由<b>传感器、导航系统、控制系统、动力系统、故障诊断系统、决策及规划系统</b>组成。</p><p>        传感器作为多旋翼无人机的感知系统的重要组成部分，其作用不言而喻，良好的传感器数据为导航系统的解算提供了扎实的数据基础。</p><p>        导航系统则结合不同的传感器数据，使用最优估计算法进行多旋翼飞行器的状态参量计算，如飞行器的姿态角、速度、位置等，一个良好的最优估计算法能够为<b>控制系统、故障诊断系统、决策及规划系统</b>提供准确的反馈数据；</p><p>        控制系统是保障多旋翼飞行器飞行稳定的核心系统，主要由基于反馈的控制算法组成。</p><p>        动力系统则主要由<b>电池、电机、电调及桨叶</b>组成，该系统为多旋翼无人机提供升力，事实上，该系统也是一个完整的反馈控制系统，其中，电调通过对电机的电流、电压采样形成反馈控制律，控制电机达到预期转速，为多旋翼飞行器提供合适的升力。</p><p>        故障诊断系统则根据导航系统、控制系统的中间参量进行诊断，实时地给出子系统运行健康状况，如多旋翼无人机的某一组桨叶出现破损，导致飞行器升力不足，此时，故障诊断系统会迅速诊断出该故障，并提示控制系统切换对应的故障预案，以保证飞行器的飞行安全。</p><p>        决策及规划系统负责实现“业务级”的决策，如无人机的避障与路径规划，电量不足与传感器异常时的紧急预案等。决策与规划系统的优劣决定了该无人机系统的智能化程度以及能力集的大小。</p><p>        如图1所示为多旋翼无人机技术架构图。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4ac7dcf28116144f0502861f2453d290_b.jpg\" data-rawwidth=\"949\" data-rawheight=\"599\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"949\" data-original=\"https://pic1.zhimg.com/v2-4ac7dcf28116144f0502861f2453d290_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;949&#39; height=&#39;599&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"949\" data-rawheight=\"599\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"949\" data-original=\"https://pic1.zhimg.com/v2-4ac7dcf28116144f0502861f2453d290_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4ac7dcf28116144f0502861f2453d290_b.jpg\"/><figcaption>图1 多旋翼无人机技术架构</figcaption></figure><p>        传感器与导航系统共同组成了“<b>感知与状态估计</b>”子模块，它是多旋翼无人机的“<b>眼睛</b>”。</p><p>        在该模块中，我们首先需要对传感器原始数据进行分析，根据其特性设计对应的滤波器。部分传感器需要根据安装位置及其偏置量进行校准，如加速度计、陀螺仪以及磁力计等。</p><p>        在得到精度较高的传感器数据后，需要设计对应的融合算法，构成组合导航系统，用于解算飞行器的各状态量，如姿态角、速度、位置等。如图2所示为组合导航系统框图，图中未将所有状态量列出，如陀螺仪零偏、加速度零偏等，这些状态量与设计的组合导航系统有关。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-66074a3bc3dba8c42e3a1b8fbced632e_b.jpg\" data-rawwidth=\"947\" data-rawheight=\"864\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"947\" data-original=\"https://pic3.zhimg.com/v2-66074a3bc3dba8c42e3a1b8fbced632e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;947&#39; height=&#39;864&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"947\" data-rawheight=\"864\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"947\" data-original=\"https://pic3.zhimg.com/v2-66074a3bc3dba8c42e3a1b8fbced632e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-66074a3bc3dba8c42e3a1b8fbced632e_b.jpg\"/><figcaption>图2 组合导航系统框图</figcaption></figure><p><b>        控制系统与动力系统</b>则是多旋翼无人机的“手足”。</p><p>        由于多旋翼飞行器属于静不稳定系统，脱离了控制系统，其自身不具备稳定飞行的能力，这点与固定翼飞行器有非常大的区别。因此，我们需要先对多旋翼飞行器进行数学建模，然后得到其<b>控制分配关系</b>。该表达式描述了多旋翼飞行器的横滚、俯仰、航向以及油门通道之间的耦合关系，只有准确解析出该表达式，才能够在各种飞行状态下，发挥每个电机的“<b>最大潜能</b>”。</p><p><b>        故障诊断系统是多旋翼无人机的“医生”。</b></p><p>        其综合了传感器数据、导航系统数据以及控制系统数据，对各子模块进行实时运行状态评估。它就如<b>“医生”</b>一般，当系统出现故障甚至是故障的前兆时，故障诊断系统能够及时或提前告知各子模块，这样，各子模块能够及时调整算法策略，以适应不同的飞行状况。</p><p><b>        决策与规划系统犹如多旋翼无人机的“大脑”，有了它多旋翼飞行器才能够称之为“空中机器人”。</b></p><p>        它掌握着多旋翼飞行器的任务执行策略以及飞行路径，当多旋翼飞行器同时执行多种飞行任务时，也需要它根据任务的优先级以及资源调度的情况进行实时地调整，以最高效的方式完成飞行任务。</p><p>三． 总结</p><p>        多旋翼无人机的技术构成十分复杂，其涉及的技术领域广泛，较为接近机器人的范畴。然而，当前的多旋翼无人机领域依然处于基础技术高速发展的阶段，许多关键技术依然有待突破，在下一个无人机纪元，技术与业务的高度整合将会是多旋翼无人机市场的爆发点！</p><hr/><p>欢迎关注公众号，交流无人机相关技术资讯！</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1005&#39; height=&#39;1164&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/80217823", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 2, 
            "title": "数字滤波器设计专题（一）——FDATool使用教程", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>    良好的传感器数据是实现精确的导航解算与闭环控制的重要基础，然而，无论采用何种传感器，都会存在不同特性的噪声，同时，会随着应用环境的变化而变化。因此，我们需要通过设计滤波器、针对传感器特性设计校准算法等方式对传感器原始测量数据进行“优化”。本篇将针对数字滤波器的设计方法进行阐述，着重针对MATLAB FDA工具箱的使用方法进行说明。</p><p><b>二．</b> <b>MATLAB FDA工具箱的使用教程</b></p><p>首先，在MATLAB命令行窗口输入“fdatool”指令，随后即可打开MATLAB自带的功能强大的滤波器设计工具——“FDATool”。如图1所示，</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4f1c37a28f9dec221de7fc82f0d645ca_b.jpg\" data-rawwidth=\"1365\" data-rawheight=\"687\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1365\" data-original=\"https://pic3.zhimg.com/v2-4f1c37a28f9dec221de7fc82f0d645ca_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1365&#39; height=&#39;687&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1365\" data-rawheight=\"687\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1365\" data-original=\"https://pic3.zhimg.com/v2-4f1c37a28f9dec221de7fc82f0d645ca_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-4f1c37a28f9dec221de7fc82f0d645ca_b.jpg\"/><figcaption>图1 FDATool的打开方式</figcaption></figure><p>    打开后，会显示如图2所示的界面。</p><p><b>滤波器类型设置区域</b>选择使用何种滤波器，常用的如FIR、IIR，滤波器的响应类型又分为低通、高通、带通、带阻、陷波等等。</p><p><b>滤波器阶次设置区域</b>可以用于设置滤波器的阶次，或使用自动计算阶次的方式。</p><p><b>滤波器频率参数设置区域</b>则可以用于设置滤波器的采样频率，截止频率，带通、带阻频率等等。</p><p><b>滤波器幅值参数设置区域</b>则用于设置滤波器增益等。</p><p><b>当前滤波器信息区域</b>显示了当前设计的滤波器的阶次以及稳定性，这里能够保存设计完成的滤波器。</p><p><b>滤波器相关特性曲线区域</b>可显示滤波器的幅频特性、相频特性以及群时延等参数曲线，具体切换方式如图3所示。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8ba836bffe099580a5b9d257551ecbc7_b.jpg\" data-rawwidth=\"787\" data-rawheight=\"641\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"787\" data-original=\"https://pic4.zhimg.com/v2-8ba836bffe099580a5b9d257551ecbc7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;787&#39; height=&#39;641&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"787\" data-rawheight=\"641\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"787\" data-original=\"https://pic4.zhimg.com/v2-8ba836bffe099580a5b9d257551ecbc7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8ba836bffe099580a5b9d257551ecbc7_b.jpg\"/><figcaption>图2 FDA主界面</figcaption></figure><p>    点击“Analysis”按钮，弹出下拉选项框，其中包括滤波器的幅频响应、相频响应、群时延、脉冲响应、阶跃响应、零极点图等等，可谓是一应俱全。通过选择不同的选项，我们能够在滤波器相关特性曲线区域显示我们需要的特性曲线，以此作为我们设计滤波器时的参考依据。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7aafec8b4ba2ede68ccb123bc27624d8_b.jpg\" data-rawwidth=\"787\" data-rawheight=\"641\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"787\" data-original=\"https://pic1.zhimg.com/v2-7aafec8b4ba2ede68ccb123bc27624d8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;787&#39; height=&#39;641&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"787\" data-rawheight=\"641\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"787\" data-original=\"https://pic1.zhimg.com/v2-7aafec8b4ba2ede68ccb123bc27624d8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7aafec8b4ba2ede68ccb123bc27624d8_b.jpg\"/><figcaption>图3 滤波器相关特性曲线切换方式</figcaption></figure><p>    在设计完滤波器相关参数后，如图4所示，点击“File”—“Export”按钮，弹出如图5所示选项框，这里选择“MAT-File”、“Coefficient”。MATLAB会生成对应的MAT文件，如示例中，采用的IIR滤波器，最终生成的MAT文件中会包含“SOS”与“G”两个系数矩阵，然后，我们可以调用MATLAB自带的滤波函数进行IIR滤波器实现，或使用自定义的IIR滤波器进行实现，均可。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-7372083d283f903e838581ab732e2587_b.jpg\" data-rawwidth=\"787\" data-rawheight=\"649\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"787\" data-original=\"https://pic4.zhimg.com/v2-7372083d283f903e838581ab732e2587_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;787&#39; height=&#39;649&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"787\" data-rawheight=\"649\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"787\" data-original=\"https://pic4.zhimg.com/v2-7372083d283f903e838581ab732e2587_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-7372083d283f903e838581ab732e2587_b.jpg\"/><figcaption>图4 导出滤波器参数</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-c2efa303e05f8d1737ff441b5ad91277_b.jpg\" data-rawwidth=\"793\" data-rawheight=\"649\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"793\" data-original=\"https://pic4.zhimg.com/v2-c2efa303e05f8d1737ff441b5ad91277_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;793&#39; height=&#39;649&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"793\" data-rawheight=\"649\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"793\" data-original=\"https://pic4.zhimg.com/v2-c2efa303e05f8d1737ff441b5ad91277_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-c2efa303e05f8d1737ff441b5ad91277_b.jpg\"/><figcaption>图5 滤波器参数导出设置</figcaption></figure><p>    如图6所示，在MATLAB中调用通过FDA设计的滤波器，这里不再对FFT的使用方式进行赘述，通过调用“sos2tf”函数，将设计的IIR滤波器的系数进行变换，再次调用“filter”函数对待滤波数据进行滤波即可，滤波结束后，针对原始数据与滤波后数据进行时域与频域对比，如图7所示。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-ad9586eb32a0f8f843241dbfd0d77148_b.jpg\" data-rawwidth=\"437\" data-rawheight=\"191\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"437\" data-original=\"https://pic1.zhimg.com/v2-ad9586eb32a0f8f843241dbfd0d77148_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;437&#39; height=&#39;191&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"437\" data-rawheight=\"191\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"437\" data-original=\"https://pic1.zhimg.com/v2-ad9586eb32a0f8f843241dbfd0d77148_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-ad9586eb32a0f8f843241dbfd0d77148_b.jpg\"/><figcaption>图6 IIR滤波器MATLAB代码</figcaption></figure><p>如图7所示为滤波前后的时域与频域数据图，红色为原始数据，绿色为滤波后数据。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-fb0f232a0c7ed2e8cad6359a62b88dc4_b.jpg\" data-rawwidth=\"1155\" data-rawheight=\"509\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1155\" data-original=\"https://pic1.zhimg.com/v2-fb0f232a0c7ed2e8cad6359a62b88dc4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1155&#39; height=&#39;509&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1155\" data-rawheight=\"509\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1155\" data-original=\"https://pic1.zhimg.com/v2-fb0f232a0c7ed2e8cad6359a62b88dc4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-fb0f232a0c7ed2e8cad6359a62b88dc4_b.jpg\"/><figcaption>图7 经过IIR滤波之后的时频数据图</figcaption></figure><p><b>三．</b> <b>总结</b></p><p>    本篇介绍了MATLAB自带的FDA工具，该工具能够根据工程数据，快速设计出满足不同需求的滤波器，以供工程师使用。这里没有过多阐述滤波器相关的细节，下篇将着重结合多旋翼无人机的实际应用场景，针对不同的滤波器设计方法以及优劣点进行阐述。</p><hr/><p>欢迎关注公众号，交流无人机相关技术资讯！</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1005&#39; height=&#39;1164&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/79047922", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 6, 
            "title": "系统辨识专题（一）——MATLAB系统辨识工具箱的使用案例", 
            "content": "<h2>系统辨识专题（一）——MATLAB系统辨识工具箱的使用案例</h2><p>    在建立多旋翼无人机系统模型的基础上，我们能够更有针对性地设计对应的控制器，为无人机系统故障诊断提供判据。本文将结合系统Matlab自带的系统辨识工具箱阐述一个简单的过程模型的完整辨识过程。</p><p>    在使用系统辨识工具箱之前，我们先使用Simulink模块生成我们需要的仿真模型以及输入输出数据。</p><p>1.    如图1所示，在Matlab命令行中输入“Simulink”命令，打开Simulink模块。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-90fa2061870b44e8b791644c665d5b19_b.jpg\" data-rawwidth=\"1240\" data-rawheight=\"646\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-90fa2061870b44e8b791644c665d5b19_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1240&#39; height=&#39;646&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1240\" data-rawheight=\"646\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-90fa2061870b44e8b791644c665d5b19_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-90fa2061870b44e8b791644c665d5b19_b.jpg\"/><figcaption>图1 启动Simulink模块</figcaption></figure><p>2.   如图2所示，新建Simulink模型。点击“File-&gt;New-&gt;Model”。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-5bfb48d0bbbdc4be4df518d225a70b9e_b.jpg\" data-rawwidth=\"1240\" data-rawheight=\"666\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1240\" data-original=\"https://pic3.zhimg.com/v2-5bfb48d0bbbdc4be4df518d225a70b9e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1240&#39; height=&#39;666&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1240\" data-rawheight=\"666\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1240\" data-original=\"https://pic3.zhimg.com/v2-5bfb48d0bbbdc4be4df518d225a70b9e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-5bfb48d0bbbdc4be4df518d225a70b9e_b.jpg\"/><figcaption>图2 新建Simulink模型</figcaption></figure><p>3.    如图3所示，搭建基于传递函数的Simulink仿真模型，用户通过拖拽图2“Simulink Library Browser”中的各个Simulink子模块，组合成如下Simulink仿真模型，主要由输入信号、传递函数、输入输出以及示波器组成，这样就能够得到我们需要的自定义仿真模型及输入输出数据，当我们搭建完整个仿真模型后，点击Simulink模块的绿色开始按钮，即可开始进行仿真。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-77aaa80ad328da38135a6a877389fd8d_b.jpg\" data-rawwidth=\"1240\" data-rawheight=\"652\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-77aaa80ad328da38135a6a877389fd8d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1240&#39; height=&#39;652&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1240\" data-rawheight=\"652\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-77aaa80ad328da38135a6a877389fd8d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-77aaa80ad328da38135a6a877389fd8d_b.jpg\"/><figcaption>图3 搭建基于传递函数的Simulink仿真模型  </figcaption></figure><p>4.    点击图3中灰色齿轮，打开参数配置界面，点击“Solver”选项，将“Type”选项设置为Fixed-step，同时，将Fixed-step size与输入信号周期一致，这里选取0.02。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-9a7bebb255faba1c84ede2e39890cd9f_b.jpg\" data-rawwidth=\"935\" data-rawheight=\"561\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"935\" data-original=\"https://pic4.zhimg.com/v2-9a7bebb255faba1c84ede2e39890cd9f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;935&#39; height=&#39;561&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"935\" data-rawheight=\"561\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"935\" data-original=\"https://pic4.zhimg.com/v2-9a7bebb255faba1c84ede2e39890cd9f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-9a7bebb255faba1c84ede2e39890cd9f_b.jpg\"/><figcaption>图4 Simulink仿真模型参数设置  </figcaption></figure><p>5.    如图5所示，我们将输入信号的周期设定为0.02秒，这里也可以设定为其他值，该周期需要与系统辨识工具箱中的周期匹配，否则会导致系统辨识结果错误。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c5328e273a8e84bd5a6bc57dd179ed45_b.jpg\" data-rawwidth=\"1240\" data-rawheight=\"655\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-c5328e273a8e84bd5a6bc57dd179ed45_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1240&#39; height=&#39;655&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1240\" data-rawheight=\"655\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-c5328e273a8e84bd5a6bc57dd179ed45_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c5328e273a8e84bd5a6bc57dd179ed45_b.jpg\"/><figcaption>图5 随机输入信号模块参数设置  </figcaption></figure><p>搭建完简单的仿真模型之后，我们就可以开始使用Matlab系统辨识工具箱了。</p><p>1.    如图6所示，在Matlab命令窗口输入“ident”命令，即可打开系统辨识工具箱。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-60edfb2ee1a3392b156ae471613649a1_b.jpg\" data-rawwidth=\"1240\" data-rawheight=\"645\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-60edfb2ee1a3392b156ae471613649a1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1240&#39; height=&#39;645&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1240\" data-rawheight=\"645\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-60edfb2ee1a3392b156ae471613649a1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-60edfb2ee1a3392b156ae471613649a1_b.jpg\"/><figcaption>图6 系统辨识工具箱打开方式  </figcaption></figure><p>2.    如图7所示为Matlab系统辨识工具箱组成说明。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-34f9609edde83588690cd22c16c39555_b.jpg\" data-rawwidth=\"655\" data-rawheight=\"442\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"655\" data-original=\"https://pic2.zhimg.com/v2-34f9609edde83588690cd22c16c39555_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;655&#39; height=&#39;442&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"655\" data-rawheight=\"442\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"655\" data-original=\"https://pic2.zhimg.com/v2-34f9609edde83588690cd22c16c39555_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-34f9609edde83588690cd22c16c39555_b.jpg\"/><figcaption>图7 系统辨识工具箱组成说明  </figcaption></figure><p>3.    首先，我们需要导入需要辨识的输入数据，如图8所示，点击“Import data”按钮，工具箱出现下拉选项，这里我们选择“Time domain data”。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-343212a713466017c8f43645c7cecb2e_b.jpg\" data-rawwidth=\"656\" data-rawheight=\"442\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"656\" data-original=\"https://pic3.zhimg.com/v2-343212a713466017c8f43645c7cecb2e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;656&#39; height=&#39;442&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"656\" data-rawheight=\"442\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"656\" data-original=\"https://pic3.zhimg.com/v2-343212a713466017c8f43645c7cecb2e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-343212a713466017c8f43645c7cecb2e_b.jpg\"/><figcaption>图8 辨识输入信号设置</figcaption></figure><p>4.    点击“Time domain data”选项后，将会弹出如图9所示对话框，这里的Input与Output输入框中的名称即为上文中通过Simulink模型仿真生成的输入-输出信号对应的工作区中的变量名称。Samping interval即为采样间隔，该值需与上文Simulink仿真模型中的信号仿真步长一致，否则，会导致辨识结果出现偏差。将参数配置完成后，点击“Import”按钮，结束输入信号的导入。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-831dda5d92c7e90da9e72df43e6cb531_b.jpg\" data-rawwidth=\"693\" data-rawheight=\"489\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"693\" data-original=\"https://pic2.zhimg.com/v2-831dda5d92c7e90da9e72df43e6cb531_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;693&#39; height=&#39;489&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"693\" data-rawheight=\"489\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"693\" data-original=\"https://pic2.zhimg.com/v2-831dda5d92c7e90da9e72df43e6cb531_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-831dda5d92c7e90da9e72df43e6cb531_b.jpg\"/><figcaption>图9 系统辨识工具箱输入信号设置  </figcaption></figure><p>5.    如图10所示为输入信号预处理选项，其中包括滤波器、数据转换等功能。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-9d9df95d7cace7f3b72bbf373909b0a7_b.jpg\" data-rawwidth=\"689\" data-rawheight=\"479\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"689\" data-original=\"https://pic4.zhimg.com/v2-9d9df95d7cace7f3b72bbf373909b0a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;689&#39; height=&#39;479&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"689\" data-rawheight=\"479\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"689\" data-original=\"https://pic4.zhimg.com/v2-9d9df95d7cace7f3b72bbf373909b0a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-9d9df95d7cace7f3b72bbf373909b0a7_b.jpg\"/><figcaption>图10 系统辨识工具箱输入信号预处理选项 </figcaption></figure><p>6.    如图11为模型辨识设置，这里选择过程模型。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-5e5f41e1cc93c64cf0984d1fdfaa74bc_b.jpg\" data-rawwidth=\"673\" data-rawheight=\"475\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"673\" data-original=\"https://pic1.zhimg.com/v2-5e5f41e1cc93c64cf0984d1fdfaa74bc_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;673&#39; height=&#39;475&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"673\" data-rawheight=\"475\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"673\" data-original=\"https://pic1.zhimg.com/v2-5e5f41e1cc93c64cf0984d1fdfaa74bc_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-5e5f41e1cc93c64cf0984d1fdfaa74bc_b.jpg\"/><figcaption>图11 系统辨识工具箱模型辨识设置  </figcaption></figure><p>7.    如图12所示为过程模型参数配置，这里选择无零点、无时延无积分环节的一阶系统模型作为待辨识模型，配置完参数后，勾选“Display Progress”按钮，点击“Estimate”按钮开始进行辨识。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-2eba360c60087ab406a14344b3034963_b.jpg\" data-rawwidth=\"667\" data-rawheight=\"531\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"667\" data-original=\"https://pic4.zhimg.com/v2-2eba360c60087ab406a14344b3034963_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;667&#39; height=&#39;531&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"667\" data-rawheight=\"531\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"667\" data-original=\"https://pic4.zhimg.com/v2-2eba360c60087ab406a14344b3034963_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-2eba360c60087ab406a14344b3034963_b.jpg\"/><figcaption>图12 过程模型参数配置</figcaption></figure><p>8.    如图13所示为过程模型辨识结果，左边对话框显示了模型辨识精度及相对误差。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-a401bb78bf5e3d4ad7c099929e9811e1_b.jpg\" data-rawwidth=\"1240\" data-rawheight=\"624\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-a401bb78bf5e3d4ad7c099929e9811e1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1240&#39; height=&#39;624&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1240\" data-rawheight=\"624\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1240\" data-original=\"https://pic2.zhimg.com/v2-a401bb78bf5e3d4ad7c099929e9811e1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-a401bb78bf5e3d4ad7c099929e9811e1_b.jpg\"/><figcaption>图13 过程模型辨识结果</figcaption></figure><p>9.    如图14为系统辨识参数结果，双击图13右边对话框中的辨识模型结果P1，弹出如下对话框，由图可知，Kp = 1，Tp1 = 1，与上文中Simulink仿真模型中的传递函数参数吻合，至此，完成了整个简单的系统辨识工具箱的使用流程。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7fa1f3e04f1a0183c4a06c291d35b1a8_b.jpg\" data-rawwidth=\"659\" data-rawheight=\"527\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"659\" data-original=\"https://pic1.zhimg.com/v2-7fa1f3e04f1a0183c4a06c291d35b1a8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;659&#39; height=&#39;527&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"659\" data-rawheight=\"527\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"659\" data-original=\"https://pic1.zhimg.com/v2-7fa1f3e04f1a0183c4a06c291d35b1a8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7fa1f3e04f1a0183c4a06c291d35b1a8_b.jpg\"/><figcaption>图14 系统辨识模型参数结果</figcaption></figure><p class=\"ztext-empty-paragraph\"><br/></p><hr/><p>欢迎关注公众号，交流无人机相关技术资讯！</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1005&#39; height=&#39;1164&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "算法", 
                    "tagLink": "https://api.zhihu.com/topics/19553510"
                }
            ], 
            "comments": [
                {
                    "userName": "Robotchen", 
                    "userLink": "https://www.zhihu.com/people/d2fe59ea4e85fdc132b6aabd75b72392", 
                    "content": "<p>你好，请问配置报错：the value of the outputdata properly must be a double matrix or a cell array</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/78678609", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 4, 
            "title": "多旋翼无人机技术发展浅析", 
            "content": "<p><b>一．</b> <b>前言</b></p><p>    上一篇中回顾了多旋翼无人机的发展史，对多旋翼无人机领域的现状以及未来发展趋势进行了浅析，本篇将对多旋翼无人机的技术发展进行回顾，剖析多旋翼无人机的技术组成。</p><p><b>二．</b> <b>多旋翼无人机技术发展历程及未来技术发展趋势浅析</b></p><p>    众所周知，多旋翼无人机因其机械结构简单，操作便利而深受广大航模爱好者喜爱。最初的多旋翼无人机由以下几部分组成（<b>这里称为阶段一</b>）：</p><p>1. IMU（惯性测量单元），用于测量多旋翼飞行器的三轴加速度、角速度。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-183e76b581e3276a92f77317e54af31e_b.jpg\" data-rawwidth=\"121\" data-rawheight=\"75\" data-size=\"normal\" class=\"content_image\" width=\"121\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;121&#39; height=&#39;75&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"121\" data-rawheight=\"75\" data-size=\"normal\" class=\"content_image lazy\" width=\"121\" data-actualsrc=\"https://pic3.zhimg.com/v2-183e76b581e3276a92f77317e54af31e_b.jpg\"/><figcaption>IMU模块</figcaption></figure><p>2. 气压计，用于测量多旋翼飞行器的海拔高度。</p><p>3. 遥控接收/发送模块，用于提供多旋翼飞行器的手动操作功能。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-a53cc39782418a5ae2c1b84b76b45aaa_b.jpg\" data-rawwidth=\"400\" data-rawheight=\"312\" data-size=\"normal\" class=\"content_image\" width=\"400\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;400&#39; height=&#39;312&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"400\" data-rawheight=\"312\" data-size=\"normal\" class=\"content_image lazy\" width=\"400\" data-actualsrc=\"https://pic3.zhimg.com/v2-a53cc39782418a5ae2c1b84b76b45aaa_b.jpg\"/><figcaption>遥控器</figcaption></figure><p>4. 动力系统，包括电机、桨叶，用于提供飞行器升力及扭矩。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-801fff426bb4b0ab497374d5187e9c23_b.jpg\" data-rawwidth=\"800\" data-rawheight=\"533\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"800\" data-original=\"https://pic4.zhimg.com/v2-801fff426bb4b0ab497374d5187e9c23_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;800&#39; height=&#39;533&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"800\" data-rawheight=\"533\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"800\" data-original=\"https://pic4.zhimg.com/v2-801fff426bb4b0ab497374d5187e9c23_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-801fff426bb4b0ab497374d5187e9c23_b.jpg\"/><figcaption>动力系统</figcaption></figure><p>5. 机身骨架，用于安装以上各模块。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-2435b7c22443f0a9e3a5d491dbad4672_b.jpg\" data-rawwidth=\"400\" data-rawheight=\"400\" data-size=\"normal\" class=\"content_image\" width=\"400\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;400&#39; height=&#39;400&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"400\" data-rawheight=\"400\" data-size=\"normal\" class=\"content_image lazy\" width=\"400\" data-actualsrc=\"https://pic3.zhimg.com/v2-2435b7c22443f0a9e3a5d491dbad4672_b.jpg\"/><figcaption>机身骨架</figcaption></figure><p>    与传统的无人机相比而言，多旋翼无人机的组成可以说是相当的简单了，这也是其受众较广的原因之一。然而，也正因为如此，最初的多旋翼无人机只能实现较为简单的功能，如飞行器姿态稳定以及高度稳定等。同时，尽管其操作相比其他无人机简单许多，但对于毫无操作经验的一般用户而言，操作一台这样的多旋翼无人机依然存在较大难度。这也是多旋翼无人机行业发展缓慢的重要原因之一。在当时，航模爱好者们仅仅将其当作航模飞行器。</p><p>    工程师们不满足于当时的多旋翼飞行器，既然多旋翼飞行器存在这么多的优点，为何不好好挖掘一下它的潜力呢？终于，在工程师与技术爱好者们的努力下，多旋翼无人机开始往自主飞行的方向发展（<b>这里称为阶段二</b>）。工程师们在<b>阶段一</b>的基础上，对多旋翼无人机的组成进行了优化升级，添加了：</p><p><b>1.</b> <b>GPS模块，用于测量飞行器的速度、位置等信息。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-a1629628df121d2378b0d62ddd13b676_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"500\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic3.zhimg.com/v2-a1629628df121d2378b0d62ddd13b676_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;500&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"500\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic3.zhimg.com/v2-a1629628df121d2378b0d62ddd13b676_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-a1629628df121d2378b0d62ddd13b676_b.jpg\"/><figcaption>GPS模块</figcaption></figure><p><b>2.</b> <b>磁力计模块，用于测量飞行器所处环境的磁场场强。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-469ffec22c6496b55365037480443664_b.jpg\" data-rawwidth=\"220\" data-rawheight=\"187\" data-size=\"normal\" class=\"content_image\" width=\"220\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;220&#39; height=&#39;187&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"220\" data-rawheight=\"187\" data-size=\"normal\" class=\"content_image lazy\" width=\"220\" data-actualsrc=\"https://pic1.zhimg.com/v2-469ffec22c6496b55365037480443664_b.jpg\"/><figcaption>磁力计模块</figcaption></figure><p><b>3.</b> <b>图像传输模块，用于传输实时图像数据。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-3e9c6645efcee56022e20798e54f9910_b.jpg\" data-rawwidth=\"500\" data-rawheight=\"500\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic1.zhimg.com/v2-3e9c6645efcee56022e20798e54f9910_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;500&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"500\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic1.zhimg.com/v2-3e9c6645efcee56022e20798e54f9910_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-3e9c6645efcee56022e20798e54f9910_b.jpg\"/><figcaption>图传模块</figcaption></figure><p><b>4.</b> <b>相机及其他负载，用于拍摄照片以及视频等。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-88bff9624f22596fcedf24d776b4c3bc_b.jpg\" data-rawwidth=\"350\" data-rawheight=\"331\" data-size=\"normal\" class=\"content_image\" width=\"350\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;350&#39; height=&#39;331&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"350\" data-rawheight=\"331\" data-size=\"normal\" class=\"content_image lazy\" width=\"350\" data-actualsrc=\"https://pic1.zhimg.com/v2-88bff9624f22596fcedf24d776b4c3bc_b.jpg\"/><figcaption>相机云台</figcaption></figure><p>    这一阶段的多旋翼飞行器已经能够较容易实现悬停飞行以及半自主飞行（基于人工设定航点任务的自动飞行功能），同时，能够搭载不同负载，实现原本大型航拍器才能实现的航拍以及测绘等任务。然而，仅仅具备基本的业务能力与飞行能力无法大批量推向市场。</p><p>    于是，工程师们继续在多旋翼无人机的稳定性上投入大量精力（<b>这里称为阶段三</b>）。这一阶段的多旋翼飞行器加入了以下传感器/功能：</p><p><b>1.</b> <b>超声波/TOF测距仪</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-217fd64ff915d412010540c5f4646ef4_b.jpg\" data-rawwidth=\"400\" data-rawheight=\"400\" data-size=\"normal\" class=\"content_image\" width=\"400\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;400&#39; height=&#39;400&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"400\" data-rawheight=\"400\" data-size=\"normal\" class=\"content_image lazy\" width=\"400\" data-actualsrc=\"https://pic1.zhimg.com/v2-217fd64ff915d412010540c5f4646ef4_b.jpg\"/><figcaption>超声波</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_b.jpg\" data-rawwidth=\"570\" data-rawheight=\"300\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"570\" data-original=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;570&#39; height=&#39;300&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"570\" data-rawheight=\"300\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"570\" data-original=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_b.jpg\"/><figcaption>激光雷达</figcaption></figure><p><b>2.</b> <b>光流传感器</b></p><p><b>3.</b> <b>双目相机</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-a5a38a519c427b8aea299c1eec4bc7cf_b.jpg\" data-rawwidth=\"532\" data-rawheight=\"300\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"532\" data-original=\"https://pic4.zhimg.com/v2-a5a38a519c427b8aea299c1eec4bc7cf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;532&#39; height=&#39;300&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"532\" data-rawheight=\"300\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"532\" data-original=\"https://pic4.zhimg.com/v2-a5a38a519c427b8aea299c1eec4bc7cf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a5a38a519c427b8aea299c1eec4bc7cf_b.jpg\"/><figcaption>双目相机</figcaption></figure><p><b>4.</b> <b>毫米波雷达/激光雷达</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e5fbdde717f2823510e8c78aa5cd070b_b.jpg\" data-rawwidth=\"386\" data-rawheight=\"331\" data-size=\"normal\" class=\"content_image\" width=\"386\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;386&#39; height=&#39;331&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"386\" data-rawheight=\"331\" data-size=\"normal\" class=\"content_image lazy\" width=\"386\" data-actualsrc=\"https://pic4.zhimg.com/v2-e5fbdde717f2823510e8c78aa5cd070b_b.jpg\"/><figcaption>毫米波雷达</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_b.jpg\" data-rawwidth=\"570\" data-rawheight=\"300\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"570\" data-original=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;570&#39; height=&#39;300&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"570\" data-rawheight=\"300\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"570\" data-original=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-4bf4dcb6800b470432ec15ca2d4ebd4f_b.jpg\"/><figcaption>激光雷达</figcaption></figure><p><b>5.</b> <b>多传感器冗余/系统级冗余</b></p><p>    同时，考虑到飞控主控芯片运算能力有限，采用运算性能更强、外设资源更丰富的机载计算机执行独立的视觉算法以及智能算法。在这些传感器的辅助下，多旋翼飞行器能够实现：</p><p><b>1.</b> <b>低空高精度悬停</b></p><p><b>2.</b> <b>自主避障</b></p><p><b>3.</b> <b>半自主路径规划</b></p><p><b>4.</b> <b>传感器故障情况下的容错</b></p><p>    这些功能大幅提升了飞行器的飞行稳定性，降低了多旋翼无人机的操作难度，使得毫无飞行经验的用户也能够做到上手即飞。消费级多旋翼无人机市场在这一阶段进入高速发展时期。于此同时，下游的供应商也随着消费级多旋翼无人机市场的发展而日趋成熟。消费级多旋翼无人机的配套传感器成本迅速下降，这也为多旋翼无人机的小型化与降本提供了巨大的帮助。</p><p>    随着传感器与芯片的成本下降，消费级无人机开始进入小型化与降本的阶段。大量微型多旋翼无人机应运而生，这些微型无人机介于小型航拍无人机与玩具级无人机之间，具备完整的多旋翼航拍无人机功能，价格更为亲民。</p><p>    相比而言，行业级多旋翼无人机却显得发展缓慢，我认为，主要原因有以下几点：</p><p><b>1.</b> <b>行业级多旋翼无人机需求量相对较小，然而由于机身多采用碳纤结合机加工件组合的形式，导致其生产周期长，公差较消费级多旋翼无人机的塑料开模机身更大，质量把控难度更高。</b></p><p><b>2.</b> <b>行业级多旋翼无人机出货量较小，供应商体系不成熟，导致整机成本相比消费级多旋翼无人机高出许多。</b></p><p><b>3.</b> <b>行业级多旋翼无人机多以项目采购为主要销售途径，不如消费级多旋翼无人机市场透明。</b></p><p><b>4.</b> <b>行业级用户对于多旋翼无人机认知尚浅，期望远大于当前实际水平。</b></p><p><b>5.</b> <b>行业级用户对于飞行器安全性的需求远大于消费级用户，当前的多旋翼无人机产品无法达到预期。</b></p><p><b>6.</b> <b>行业级用户需求繁多，在目前没有成熟的行业规范支持下，行业级多旋翼无人机项目多以零散的定制项目为主，工作量大，需求量小。</b></p><p><b>三．</b> <b>多旋翼无人机主流技术浅析</b></p><p>    从技术层面看，当前的多旋翼无人机几大主流技术分别为：</p><p><b>1.</b> <b>数字信号处理算法</b></p><p><b>2.</b> <b>传感器数据融合及组合导航算法</b></p><p><b>3.</b> <b>姿态与速度控制算法</b></p><p><b>4.</b> <b>故障诊断技术</b></p><p><b>5.</b> <b>路径规划技术</b></p><p><b>6.</b> <b>容错控制技术</b></p><p>    前三项技术支撑了多旋翼无人机的稳定飞行，后三项技术提高了无人机的容错能力以及智能化程度。目前多旋翼无人机的几大痛点：</p><p><b>1.</b> <b>使用环境复杂，使用者操作水平层次不齐导致的坠机率居高不下问题。</b></p><p><b>2.</b> <b>飞行时间较短，载重与续航时间存在不可调和的矛盾。</b></p><p><b>3.</b> <b>携带便利性较差，使用频率大幅度降低。</b></p><p><b>4.</b> <b>智能化程度较低，无法在复杂环境脱离人工操作，独立执行任务。</b></p><p><b>5.</b> <b>成本居高不下。</b></p><p>    由于以上几大痛点的存在，行业级无人机发展缓慢。行业级用户多为政府机关单位，使用者缺乏操作经验，然而其对于飞行器自身的稳定性要求非常高，但由于飞行环境的不确定性，当前的多旋翼飞行器往往在执行任务的过程中存在较高的坠机率，这也使得行业用户对于多旋翼无人机的使用存在一定的畏惧心理。此外，行业级多旋翼无人机市场需求的挖掘还不够充分，无法使用统一的飞行平台去满足不同行业用户的需求，这也就间接导致了行业级用户对于多旋翼无人机的使用欲望并没有那么强烈。</p><p>    针对这一现状，行业级无人机的未来必然会在<b>安全性、操纵性、容错性以及智能化</b>等特性上进行大幅度的提升。通过组合多种传感器的方式提升组合导航系统的可靠性，增加多旋翼无人机在复杂使用环境时的鲁棒性，降低坠机概率，同时，优化用户操作逻辑，降低多旋翼无人机对于操作者的操作要求，提升用户体验，降低因操作导致的坠机概率。此外，对于飞行器自身的子模块添加故障诊断系统，在子系统故障时，及时切换算法策略，优先保障飞行安全。最后，通过增加视觉、激光雷达/毫米波雷达等传感器，提升多旋翼无人机的感知水平，使其具备全自主飞行的能力，满足更普遍的行业用户需求。如此这般，行业级多旋翼无人机市场才有可能进入快速发展期！</p><hr/><p>欢迎关注公众号，交流无人机相关技术资讯！</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1005&#39; height=&#39;1164&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1005\" data-rawheight=\"1164\" data-size=\"normal\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1005\" data-original=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-539101ffb8e676f260c30f628f3a16cb_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }, 
                {
                    "tag": "多轴飞行器", 
                    "tagLink": "https://api.zhihu.com/topics/20011154"
                }, 
                {
                    "tag": "旋翼机", 
                    "tagLink": "https://api.zhihu.com/topics/20037420"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/78025821", 
            "userName": "遥远的乌托邦", 
            "userLink": "https://www.zhihu.com/people/cb7b6cab17232f28d74f385f858dda73", 
            "upvote": 4, 
            "title": "多旋翼无人机发展浅析", 
            "content": "<h2><b>一.</b> <b>前言</b></h2><p><b>    多旋翼无人机进入大众的视线已有十几个年头，2006年大疆创新成立，2009年零度智控成立，2012年极飞科技成立，2014年亿航成立，消费级多旋翼无人机企业如雨后春笋般涌现。</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-2c3d4369e03b1d0a0006f840c6d1ddea_b.jpg\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"268\" class=\"content_image\" width=\"268\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;268&#39; height=&#39;268&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"268\" class=\"content_image lazy\" width=\"268\" data-actualsrc=\"https://pic3.zhimg.com/v2-2c3d4369e03b1d0a0006f840c6d1ddea_b.jpg\"/><figcaption>大疆创新</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-782b480a46ecdd59b2ea86b63ac0aa6f_b.jpg\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"268\" class=\"content_image\" width=\"268\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;268&#39; height=&#39;268&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"268\" class=\"content_image lazy\" width=\"268\" data-actualsrc=\"https://pic4.zhimg.com/v2-782b480a46ecdd59b2ea86b63ac0aa6f_b.jpg\"/><figcaption>零度智控</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-af9f2ed7c8f721f5b1b986688d3f7bbc_b.jpg\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"268\" class=\"content_image\" width=\"268\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;268&#39; height=&#39;268&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"268\" class=\"content_image lazy\" width=\"268\" data-actualsrc=\"https://pic1.zhimg.com/v2-af9f2ed7c8f721f5b1b986688d3f7bbc_b.jpg\"/><figcaption>极飞科技</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-f6fa11c0e516f1afc72d8a619e7d622b_b.jpg\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"82\" class=\"content_image\" width=\"268\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;268&#39; height=&#39;82&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"268\" data-rawheight=\"82\" class=\"content_image lazy\" width=\"268\" data-actualsrc=\"https://pic4.zhimg.com/v2-f6fa11c0e516f1afc72d8a619e7d622b_b.jpg\"/><figcaption>亿航智能</figcaption></figure><p>    然而，多旋翼无人机相关技术却并非近些年才开始出现。那么，为何多旋翼无人机在近些年来发展势头如此迅猛？究其原因，有以下几点：</p><p>（1）MEMS器件的成熟以及批量生产带来的低成本优势。</p><p>（2） 消费级多旋翼无人机提供了航拍的廉价解决方案，使其大众化，打破了传统航拍影视行业的格局。</p><p>（3） APM及PIXHAWK等开源飞控的日益成熟。</p><p>    随着各大多旋翼无人机厂商相继推出小型航拍飞行器，“无人机”这一“高大上”的名词逐渐进入人们的日常生活当中。由于航拍无人机体积小，操作简单，能够以不同的视角看世界的特点而受到旅游、摄影爱好者的喜爱。</p><h2>二.    行业背景、发展趋势及痛点</h2><p>    2015年4月8日大疆推出划时代产品，小型航拍多旋翼飞行器——精灵3。该产品的诞生宣告着消费级无人机纪元的正式开启。精灵3在精灵2的基础上，大幅度提升了飞行性能，采用独立遥控+手机APP显示的方式进行用户交互，用户体验良好，操作简单；飞行器配备中距离图传，能够实时传输高清图像，大幅度降低了用户操作的难度，使得一般的消费者也能够得到良好的航拍体验；可以说，精灵3的诞生大大降低了航拍行业的准入门槛，也拉开了无人机智能化时代的帷幕。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-edd05328e3fcd403d8439b9038e5e0bc_b.jpg\" data-size=\"normal\" data-rawwidth=\"358\" data-rawheight=\"220\" class=\"content_image\" width=\"358\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;358&#39; height=&#39;220&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"358\" data-rawheight=\"220\" class=\"content_image lazy\" width=\"358\" data-actualsrc=\"https://pic1.zhimg.com/v2-edd05328e3fcd403d8439b9038e5e0bc_b.jpg\"/><figcaption>大疆精灵3</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-37c91ee252c84db7321731a99f6b9879_b.jpg\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"500\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic2.zhimg.com/v2-37c91ee252c84db7321731a99f6b9879_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;500&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"500\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic2.zhimg.com/v2-37c91ee252c84db7321731a99f6b9879_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-37c91ee252c84db7321731a99f6b9879_b.jpg\"/><figcaption>零度探险者</figcaption></figure><p>    在此之后，各大厂商以精灵3为行业标杆，相继推出了多款同类型产品，如零度智控推出的探索者多旋翼航拍飞行器等。此后，由于多旋翼无人机市场的爆发，资本不断涌入，诞生了许多初创型小型无人机企业，零零无限科技有限公司就是其中之一。该公司推出了微型自拍无人机——hover camera。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8f79cc4272b80926f0ba65d14308795f_b.jpg\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"375\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-8f79cc4272b80926f0ba65d14308795f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;375&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"375\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-8f79cc4272b80926f0ba65d14308795f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8f79cc4272b80926f0ba65d14308795f_b.jpg\"/><figcaption>“小黑侠”自拍无人机</figcaption></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-c42fb6cf56772cb0a4e2429547ebf82e_b.jpg\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"313\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic3.zhimg.com/v2-c42fb6cf56772cb0a4e2429547ebf82e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;313&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"313\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic3.zhimg.com/v2-c42fb6cf56772cb0a4e2429547ebf82e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-c42fb6cf56772cb0a4e2429547ebf82e_b.jpg\"/><figcaption>“小黑侠”自拍无人机</figcaption></figure><p>    该产品为航拍市场中的细分领域产品，比起相对专业的小型航拍无人机，该自拍无人机针对更为大众的“自拍”市场。其采用了全碳纤维防护罩设计，解决了无人机的安全性问题；同时，其体积更小，机身能够折叠，这使得其便携性能够满足一般消费者的需求；此外，其操作更为简便，无需遥控器操作。</p><p>2016年5月零度智控推出竞品——口袋自拍无人机DOBBY。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-68d4e04c833199e3f6e8a776b85e5fb9_b.jpg\" data-size=\"normal\" data-rawwidth=\"150\" data-rawheight=\"150\" class=\"content_image\" width=\"150\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;150&#39; height=&#39;150&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"150\" data-rawheight=\"150\" class=\"content_image lazy\" width=\"150\" data-actualsrc=\"https://pic2.zhimg.com/v2-68d4e04c833199e3f6e8a776b85e5fb9_b.jpg\"/><figcaption>Dobby</figcaption></figure><p>    2017年5月大疆推出了与hover camera对标的产品spark，其体积较前者更小，携带更方便。</p><p>    2018年，大疆推出了微型航拍多旋翼无人机mavic系列，该产品体积小，功能齐全，同时具备了多种传感器，实现了诸如视觉跟踪，视觉定位等智能化功能，最大留空时间能够达到25分钟以上。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-b9a63686c221cc094b885ac592db107f_b.jpg\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"333\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-b9a63686c221cc094b885ac592db107f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;333&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"333\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-b9a63686c221cc094b885ac592db107f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-b9a63686c221cc094b885ac592db107f_b.jpg\"/><figcaption>大疆MAVIC</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e1af49399f2fbe19efd88657ef8063db_b.jpg\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"357\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-e1af49399f2fbe19efd88657ef8063db_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;357&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"500\" data-rawheight=\"357\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-e1af49399f2fbe19efd88657ef8063db_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e1af49399f2fbe19efd88657ef8063db_b.jpg\"/><figcaption>大疆SPARK</figcaption></figure><p>    一方面，消费级航拍多旋翼无人机在小型化的道路上越走越远，另一方面，大疆创新也在专业的航拍领域推出了多款中大型航拍无人机，如“悟”系列等，以此来满足专业的航拍需求。可以说，大疆创新占领了航拍无人机市场超过70%的市场份额。</p><p>    与消费级无人机领域如火如荼的景象相对，行业机无人机市场显得不温不火。极飞科技早期与大疆创新相似，从消费级航拍无人机市场入手，与大疆不同的是，极飞更专注于飞控及其配件的研发销售，而并未将精力投入到集成度较高的整机产品研发。另由于企业融资等原因，极飞科技推出了消费级航拍无人机市场，将全部研发资源投入了农业植保无人机的开发，同时，在新疆等地建立了自己的实验田。经过多年的辛勤耕耘，极飞在农业植保无人机领域建立了自己的技术壁垒。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7c93a2c06406c16f73500730393e8d4c_b.jpg\" data-size=\"normal\" data-rawwidth=\"550\" data-rawheight=\"360\" class=\"origin_image zh-lightbox-thumb\" width=\"550\" data-original=\"https://pic1.zhimg.com/v2-7c93a2c06406c16f73500730393e8d4c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;550&#39; height=&#39;360&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"550\" data-rawheight=\"360\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"550\" data-original=\"https://pic1.zhimg.com/v2-7c93a2c06406c16f73500730393e8d4c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7c93a2c06406c16f73500730393e8d4c_b.jpg\"/><figcaption>极飞科技农业植保无人机</figcaption></figure><p>    2015年大疆创新推出农业植保无人机，正式宣布进军行业级多旋翼无人机领域。</p><p>    农业植保在整个行业级多旋翼无人机领域中占据大部分份额，然而，由于无人机成本较高（硬件、维护），导致现有的农业植保无人机企业主要依靠政府的农机补贴生存，无法在短期内实现大规模盈利。显然，这与发展迅速，利润巨大的消费级多旋翼航拍无人机市场无法相提并论。</p><p>    除农业植保领域外，电网也是一个相对成熟的行业无人机应用领域。然而，由于电网作业环境较复杂，存在强磁场干扰、障碍物等客观不利条件，常规的小型多旋翼无人机无法完全满足需求，即使在智能化功能逐渐普及的今天，依然无法达到“零”坠机率，这也是行业级无人机至今无法大规模普及的重要因素之一。</p><p>    除了以上两个领域之外，安防、消防、环保、测绘等领域也开始尝试启动多旋翼无人机作为其作业工具。</p><p><b>总结而言：消费级多旋翼无人机发展迅速，然而，随着需求逐渐趋于饱和，发展放缓，若无法继续挖掘“革命性”的新需求，消费级市场将进入停滞期，其产品利润率将会逐渐下降。</b><br/></p><p><b>行业级多旋翼无人机发展缓慢，究其原因，无非以下几点：</b></p><p><b>1. 行业级多旋翼无人机对于飞行器本身的安全性以及易用性较消费级多旋翼无人机更高。</b></p><p><b>2. 行业级领域需求不明确，目前各细分领域仍未有较明确的行业规范，各厂商产品质量参差不齐。</b></p><p><b>3. 行业级领域产品价格不透明，项目操作过程中，客情关系等因素影响到最终的成单，一定程度上阻碍了整个市场的发展。</b></p><p><b>4. 技术成熟度不足以大规模应用。自动化程度较低，配套产业链成熟度较低。</b></p><p><b>5.价格居高不下，导致用户采购意愿较低。</b></p><p><b>从长期发展来看，消费级多旋翼无人机市场发展将减缓，甚至可能出现倒退的情况，行业级多旋翼无人机市场将随着技术与产业链的逐渐成熟以及行业规范的制定，从过渡期走向快速发展期，迎来下一个“无人机纪元”！</b></p><hr/><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-5a81b7edc061d3eb0193de736e645671_b.jpg\" data-size=\"normal\" data-rawwidth=\"344\" data-rawheight=\"344\" class=\"content_image\" width=\"344\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;344&#39; height=&#39;344&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"344\" data-rawheight=\"344\" class=\"content_image lazy\" width=\"344\" data-actualsrc=\"https://pic2.zhimg.com/v2-5a81b7edc061d3eb0193de736e645671_b.jpg\"/><figcaption>更多文章请关注公众号</figcaption></figure><p></p><p></p>", 
            "topic": [
                {
                    "tag": "无人机（UAV）", 
                    "tagLink": "https://api.zhihu.com/topics/19604166"
                }
            ], 
            "comments": [
                {
                    "userName": "BeardBourne", 
                    "userLink": "https://www.zhihu.com/people/43e05483554e1be87d0a3f5669c560b8", 
                    "content": "赞一个，原创还是搬运的？", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "原创", 
                            "likes": 1, 
                            "replyToAuthor": "BeardBourne"
                        }, 
                        {
                            "userName": "BeardBourne", 
                            "userLink": "https://www.zhihu.com/people/43e05483554e1be87d0a3f5669c560b8", 
                            "content": "狠!", 
                            "likes": 0, 
                            "replyToAuthor": "知乎用户"
                        }
                    ]
                }, 
                {
                    "userName": "潘彼得", 
                    "userLink": "https://www.zhihu.com/people/0c977085a9063258931740361f6acacd", 
                    "content": "是从精灵2v+开始的", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }
    ], 
    "url": "https://zhuanlan.zhihu.com/c_1145047404633026560"
}
