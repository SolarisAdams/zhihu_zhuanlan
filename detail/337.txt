{
    "title": "ç«¥è¯è¯´", 
    "description": "ä¸“æ³¨å¤§å‰ç«¯é¢†åŸŸåŸåˆ›æŠ€æœ¯åˆ†äº«", 
    "followers": [
        "https://www.zhihu.com/people/qing-yi-zhan-jiu-8", 
        "https://www.zhihu.com/people/cubesugarZhang", 
        "https://www.zhihu.com/people/feed-12", 
        "https://www.zhihu.com/people/neihan", 
        "https://www.zhihu.com/people/yu-hhha", 
        "https://www.zhihu.com/people/zhang-lei-96-68", 
        "https://www.zhihu.com/people/ppp-57-64", 
        "https://www.zhihu.com/people/macdfree", 
        "https://www.zhihu.com/people/loveyunk", 
        "https://www.zhihu.com/people/liu-tao-37-92-74", 
        "https://www.zhihu.com/people/gkrxqn", 
        "https://www.zhihu.com/people/leon82", 
        "https://www.zhihu.com/people/yue-yu-nan-nan", 
        "https://www.zhihu.com/people/liyannan99", 
        "https://www.zhihu.com/people/panovr", 
        "https://www.zhihu.com/people/cosmtrek", 
        "https://www.zhihu.com/people/slogeor", 
        "https://www.zhihu.com/people/likelxl", 
        "https://www.zhihu.com/people/igeek", 
        "https://www.zhihu.com/people/abnerzq", 
        "https://www.zhihu.com/people/sepiggy", 
        "https://www.zhihu.com/people/wen-zhi-hong", 
        "https://www.zhihu.com/people/zhi-ao-yan-leng", 
        "https://www.zhihu.com/people/wang-jia-jia-94-44", 
        "https://www.zhihu.com/people/xiao-wen-55-60", 
        "https://www.zhihu.com/people/Voyager_VI", 
        "https://www.zhihu.com/people/justinhuang", 
        "https://www.zhihu.com/people/zhang-kefer", 
        "https://www.zhihu.com/people/rong-wo-ci-sheng-wen-qing", 
        "https://www.zhihu.com/people/apeng-chen", 
        "https://www.zhihu.com/people/ceng-yun-chun", 
        "https://www.zhihu.com/people/ying-zi-ren-sheng", 
        "https://www.zhihu.com/people/ju-da-ren", 
        "https://www.zhihu.com/people/wei-sheng-79", 
        "https://www.zhihu.com/people/a-zi-mao-54", 
        "https://www.zhihu.com/people/ning-rain", 
        "https://www.zhihu.com/people/xiao-ming-7-76-73", 
        "https://www.zhihu.com/people/wu-yi-38-95-49", 
        "https://www.zhihu.com/people/zhang-zhe-lun", 
        "https://www.zhihu.com/people/fuxiaoabc", 
        "https://www.zhihu.com/people/jianchun-he", 
        "https://www.zhihu.com/people/hei-tou-fa-de-xiao-qiang", 
        "https://www.zhihu.com/people/guo-fan-70", 
        "https://www.zhihu.com/people/riskers", 
        "https://www.zhihu.com/people/phoenix-czg", 
        "https://www.zhihu.com/people/cheng-xian-sheng-27-40", 
        "https://www.zhihu.com/people/vanillangelia", 
        "https://www.zhihu.com/people/yh-ding", 
        "https://www.zhihu.com/people/ju-shang-38", 
        "https://www.zhihu.com/people/ATXON", 
        "https://www.zhihu.com/people/wemlion", 
        "https://www.zhihu.com/people/deng-lei-87", 
        "https://www.zhihu.com/people/lifeigump", 
        "https://www.zhihu.com/people/julytian", 
        "https://www.zhihu.com/people/xiang-rong-64-40", 
        "https://www.zhihu.com/people/efanchy", 
        "https://www.zhihu.com/people/chensuiyi", 
        "https://www.zhihu.com/people/ru-ru-bu-dong-86-96", 
        "https://www.zhihu.com/people/zhu-yong-chun-46-1", 
        "https://www.zhihu.com/people/huang-he-47-48", 
        "https://www.zhihu.com/people/xue-yuan-10-50", 
        "https://www.zhihu.com/people/spacerover", 
        "https://www.zhihu.com/people/li-qiang-20", 
        "https://www.zhihu.com/people/ren-jian-hua-34", 
        "https://www.zhihu.com/people/curarchy", 
        "https://www.zhihu.com/people/mnizm", 
        "https://www.zhihu.com/people/shit-yang", 
        "https://www.zhihu.com/people/ou-fen-hai", 
        "https://www.zhihu.com/people/san-you-jia-mu-22", 
        "https://www.zhihu.com/people/john-91-74", 
        "https://www.zhihu.com/people/yao-hao-23", 
        "https://www.zhihu.com/people/forevercc-42", 
        "https://www.zhihu.com/people/kyuubi", 
        "https://www.zhihu.com/people/zhou-yu-lai-18", 
        "https://www.zhihu.com/people/tian-tian-jin-bu-88", 
        "https://www.zhihu.com/people/tinythytigerdaddy", 
        "https://www.zhihu.com/people/he-shi-yun", 
        "https://www.zhihu.com/people/xpal7512", 
        "https://www.zhihu.com/people/RocKim", 
        "https://www.zhihu.com/people/littlelane", 
        "https://www.zhihu.com/people/shangwfa", 
        "https://www.zhihu.com/people/cheng-xin-xin-27", 
        "https://www.zhihu.com/people/ybtk", 
        "https://www.zhihu.com/people/wang-xiao-feng-6-67", 
        "https://www.zhihu.com/people/mu-ne-25", 
        "https://www.zhihu.com/people/bing-xin-22", 
        "https://www.zhihu.com/people/gu-wei-81", 
        "https://www.zhihu.com/people/ling1983613", 
        "https://www.zhihu.com/people/qqmm2016", 
        "https://www.zhihu.com/people/dq-xia", 
        "https://www.zhihu.com/people/codearvin", 
        "https://www.zhihu.com/people/jp928-67", 
        "https://www.zhihu.com/people/kate-49-40", 
        "https://www.zhihu.com/people/kaka-9527", 
        "https://www.zhihu.com/people/fluency03", 
        "https://www.zhihu.com/people/li-zi-an-72", 
        "https://www.zhihu.com/people/liu-xian-sen-29-79", 
        "https://www.zhihu.com/people/wang-xiang-zhong-5", 
        "https://www.zhihu.com/people/lei40251", 
        "https://www.zhihu.com/people/ceng-tan-2", 
        "https://www.zhihu.com/people/zhang-liang-31-8", 
        "https://www.zhihu.com/people/yinyun957", 
        "https://www.zhihu.com/people/Inspector", 
        "https://www.zhihu.com/people/li-ji-hang-23", 
        "https://www.zhihu.com/people/mao-quan", 
        "https://www.zhihu.com/people/yun-zai-qing-tian-dk", 
        "https://www.zhihu.com/people/fantasticsoul", 
        "https://www.zhihu.com/people/wangningkai", 
        "https://www.zhihu.com/people/zhao-da-cheng-75-3", 
        "https://www.zhihu.com/people/wang-liao-52", 
        "https://www.zhihu.com/people/face-yzz", 
        "https://www.zhihu.com/people/xu-yi-hang", 
        "https://www.zhihu.com/people/lijiadeyu", 
        "https://www.zhihu.com/people/ycjcl", 
        "https://www.zhihu.com/people/knowledge-seeking", 
        "https://www.zhihu.com/people/liu-kan-shui-91", 
        "https://www.zhihu.com/people/cute_pow", 
        "https://www.zhihu.com/people/li-zheng-cao-94", 
        "https://www.zhihu.com/people/li-wen-qi-14-93", 
        "https://www.zhihu.com/people/du-xing-xia-41-57", 
        "https://www.zhihu.com/people/rollforward", 
        "https://www.zhihu.com/people/zhengzigege", 
        "https://www.zhihu.com/people/yi-ran-yi-xi-mie", 
        "https://www.zhihu.com/people/liu-bin-43-97", 
        "https://www.zhihu.com/people/immkoala", 
        "https://www.zhihu.com/people/wang-yi-liang-86", 
        "https://www.zhihu.com/people/feixiaxia", 
        "https://www.zhihu.com/people/wei-yue-xin", 
        "https://www.zhihu.com/people/hunter-gu-94", 
        "https://www.zhihu.com/people/hong-lin-song-40", 
        "https://www.zhihu.com/people/qiu-bo-8-56", 
        "https://www.zhihu.com/people/gou-bu-li-si-ji", 
        "https://www.zhihu.com/people/obovgood", 
        "https://www.zhihu.com/people/onefanta"
    ], 
    "article": [
        {
            "url": "https://zhuanlan.zhihu.com/p/85857004", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 72, 
            "title": "TypeScriptï¼šåˆä¸€ä¸ªç»ˆå°†é€å»çš„é’æ˜¥", 
            "content": "<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š</p><a href=\"https://link.zhihu.com/?target=https%3A//tonghuashuo.github.io/blog/2019/10/10/typescript-another-fading-youth\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-b7b7642447ca6a5b28abf9f90bf06ef8_180x120.jpg\" data-image-width=\"1200\" data-image-height=\"675\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">TypeScriptï¼šåˆä¸€ä¸ªç»ˆå°†é€å»çš„é’æ˜¥ | åšå®¢</a><p><b>ç¡¬å¸çš„å¦ä¸€é¢</b></p><p>TypeScript çœŸçš„æ˜¯å¤ªç«äº†ï¼Œä¼´éšç€ Vue 3 çš„ç™»åœºï¼Œä¸‰å¤§æ¡†æ¶å…¨é¢æ”¯æŒ TypeScriptï¼Œå…¨æ°‘å­¦ä¹  TypeScript è¿æ¥æ–°ä¸€æ³¢çƒ­æ½®ï¼Œå¨±ä¹åœˆæ­£å¼è¿›å…¥ TypeScript æ–°æ—¶ä»£ã€‚</p><p>å›å¤´ä¸€çœ‹ï¼Œå¨±ä¹åœˆåƒè¿™æ ·çš„å¤´æ¡è¿˜çœŸä¸åœ¨å°‘æ•°ï¼ŒFlutterã€å¾®ä¿¡å°ç¨‹åºã€ES6 â€¦â€¦ å†å¾€å‰å°±ä¸è¯´äº†ï¼Œå¤ªå¤šäº†ã€‚æ¯ä¸€ä¸ªéƒ½æ›¾å¼•èµ·è¿‡ä¸€é˜µå…¨æ°‘å­¦ä¹ çš„ç‹‚æ½®ï¼Œæ„Ÿè§‰å­¦äº†å°±èƒ½èµ°å‘å·…å³°ï¼Œä¸å­¦å°±å®Œäº†ã€‚</p><p>å…³æ³¨æ–°æŠ€æœ¯çš„è¯ç”Ÿï¼Œæ˜¯æ¯ä¸ªæœ‰è¿½æ±‚çš„å¼€å‘è€…åº”è¯¥åšçš„ã€‚ä½†è¿™ä¸€ç¯‡ï¼Œæˆ‘å´æƒ³è°ˆè°ˆç¡¬å¸çš„å¦ä¸€é¢ã€‚</p><h2>è‹±é›„æœ«è·¯</h2><p>åœ¨äººå®¶æœ€ç«çš„æ—¶å€™ï¼Œæ¥è¿™ä¹ˆä¸€ä¸‹ï¼Œéš¾ä¸æˆæ˜¯åœ¨æ•…æ„å”±åè°ƒï¼Œåšçœ¼çƒå—ï¼Ÿ</p><p>ä½œä¸º TypeScript æ—©æœŸå®è·µè€…ä¸­çš„ä¸€å‘˜ï¼Œæµªæ½®åˆåˆ°æ—¶æˆ‘ä¹Ÿæ›¾ä¸ºä¹‹æ¿€åŠ¨è¿‡ï¼Œä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œå½“åæµªæ¥ä¸´æ—¶ï¼Œæˆ‘åè€Œéå¸¸æ·¡å®šï¼Œå¼€å§‹çœ‹å‘æ–°çš„è¿œæ–¹ã€‚</p><p>ä¼˜èƒœåŠ£æ±°ï¼Œç‰©ç«å¤©æ‹©ï¼Œå¤§è‡ªç„¶çš„æ³•åˆ™è°ä¹Ÿé€ƒä¸è¿‡ã€‚æœ‰è¯ç”Ÿï¼Œå°±æœ‰æ¯ç­ï¼Œå†ç«çƒ­çš„æŠ€æœ¯ï¼Œä¹Ÿç»ˆå°†é€€ä¼‘ã€‚</p><p>ä¸Šä¸€ä¸ªå› ä¸ºé€€ä¼‘è€Œè¢«çƒ­è®®çš„æŠ€æœ¯ï¼Œåº”è¯¥æ˜¯ jQuery äº†å§ã€‚jQuery å¹´è½»æ—¶æœ‰å¤šç«ä¸ç”¨å¤šè¯´ï¼Œå¦‚ä»Šå»‰é¢‡è€çŸ£ï¼Œè™½å°šèƒ½é¥­ï¼Œä½†ä¸–äººå´ä¾ç„¶ç»™äº†å®ƒä¸€ä¸ªå¤§å¤§çš„ã€Œå¦ã€å­—ã€‚ä¸æ˜¯ jQuery ä¸è¡Œäº†ï¼Œåªæ˜¯è¡Œä¸šå‘å±•äº†ï¼Œä¸å†éœ€è¦å®ƒäº†ã€‚</p><p>å›é¡¾å†å²ï¼Œè¿™æ ·çš„æ•…äº‹ï¼Œå…¶å®ä¸€ç›´åœ¨ä¸Šæ¼”ã€‚</p><h2>å†å²æ€»æ˜¯æƒŠäººçš„ç›¸ä¼¼</h2><p>äººä»¬æƒ³è¦ä¸€è‡´çš„ API æ¥æ“ä½œ DOMï¼Œäºæ˜¯åˆ›é€ å‡ºäº† jQueryã€‚åæ¥ DOM API è¶Šå‘æ ‡å‡†ï¼ŒjQuery ä¹Ÿå°±é€æ¸æ·¡å‡ºäº†äººä»¬çš„è§†é‡ã€‚</p><p>äººä»¬æƒ³è¦å¥½ç”¨çš„è¯­æ³•ç‰¹æ€§ï¼Œäºæ˜¯åˆ›é€ å‡ºäº† CoffeeScriptã€‚åæ¥ ES 2015 æ ‡å‡†å‘å¸ƒï¼ŒCoffeeScript çš„å­˜åœ¨æ„Ÿä¸€å¤©ä¸å¦‚ä¸€å¤©ã€‚</p><p>äººä»¬æƒ³è¦åœ¨å®¢æˆ·ç«¯ä¹Ÿèƒ½æœ‰è‰¯å¥½çš„æ¨¡å—åŒ–æ”¯æŒï¼Œäºæ˜¯åˆ›é€ å‡ºäº† AMD/CMD/UMD ç­‰æ–¹æ¡ˆã€‚åæ¥ ESM æˆä¸ºäº†ä¸»æµï¼Œå°±æ²¡äººå†è°ˆè¿™äº›äº†ã€‚</p><p>ç°åœ¨ï¼Œäººä»¬æƒ³è¦ç±»å‹æ¨æ–­äº† â€¦â€¦</p><h2>å‘½ä¸­æ³¨å®šæ˜¯ä¸ªå¤‡èƒ</h2><p>æ˜”æ—¥è‹±é›„ï¼Œéƒ½ä¸è¿‡æ˜¯å¤‡èƒç½¢äº†ï¼Œéœ€è¦æ—¶å‘å±•ä¸€ä¸ªï¼Œç”¨ä¸ç€äº†å°±ä¸¢æ‰ï¼Œæ ‡å‡†æ‰æ˜¯æ°¸è¿œçš„æ­£å®«ã€‚å¬ä¸Šå»å¾ˆæƒ‹æƒœï¼Œä½†è¿™éƒ½æ˜¯å¤§è‡ªç„¶çš„å¸¸è§„æ“ä½œã€‚</p><p>è¡Œä¸šéœ€è¦ä»€ä¹ˆï¼Œä»ä¸šè€…å°±ä¼šå»åˆ›é€ ä»€ä¹ˆï¼Œè¡Œä¸šä»ä¸­å—ç›Šå¾—åˆ°å‘å±•ã€‚è¡Œä¸šå‘å±•äº†ï¼Œæ›¾ç»çš„åˆ›é€ ä¸å†è¢«éœ€è¦ï¼Œæ—¥æ¸è¢«é—å¿˜ï¼Œæœ€åå½»åº•é€€å‡ºã€‚</p><p>ã€å‡è£…æˆ‘æ˜¯åˆ é™¤çº¿ã€‘å³ä¾¿æ˜¯ Reactã€Vueã€Angular ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸‰å¤§æŠ€æœ¯æ ˆç°åœ¨å¤§æ–¹å‘éƒ½æ˜¯å¥”ç€ Web Components å»ï¼Œç­‰å“ªä¸€å¤© Web Components æ”¯æŒåº¦è¶³å¤Ÿäº†ï¼Œæˆ–è®¸å°±åˆåˆ°æ–°ä¸€è½®æ›´æ–°æ¢ä»£äº†ã€‚ã€å‡è£…æˆ‘æ˜¯åˆ é™¤çº¿ã€‘</p><blockquote>çœ‹äº†å°¤è€å¸ˆçš„è¯„è®ºï¼Œæˆ‘åˆé‡æ–°å»è®¤è¯†äº†ä¸€ä¸‹ Web Componentsã€‚ä¸Šé¢è¿™æ®µï¼Œå¤§å®¶å°±å‡è£…æ²¡çœ‹åˆ°å§ã€‚ï¼ˆçŸ¥ä¹ä¸æä¾›åˆ é™¤çº¿â€¦â€¦ï¼‰</blockquote><h2>35 å²è¿™ä¸ªå“</h2><p>æ¯å¹´ï¼Œéƒ½æœ‰ä¸€æ‰¹ 35 å²å·¦å³çš„äº’è”ç½‘ä»ä¸šè€…å…‰è£é€€ä¼‘ã€‚æœ‰äººæŠ±æ€¨ä¼ä¸šè¿‡æ²³æ‹†æ¡¥ï¼Œä½†æ¯•ç«Ÿèµ„æœ¬æ˜¯å—œè¡€çš„ï¼Œä¼ä¸šæ˜¯ä»¥èµšé’±ä¸ºç›®çš„çš„ï¼Œå¤§å®¶åªæ˜¯åˆ©ç›Šé©±ä½¿ä¸‹çš„é›‡ä½£å…³ç³»ï¼Œè€Œå·²ã€‚ä¸€æ–¹éœ€è¦èƒ½åŠ›ï¼Œä¸€æ–¹æä¾›èƒ½åŠ›ï¼Œä¸€çº¸åˆåŒï¼Œå¼€å¹²ã€‚</p><p>ä»è¿™ä¸€ç‚¹çœ‹ï¼Œäººå’ŒæŠ€æœ¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚è¡Œä¸šçš„èµ°å‘ã€ä¼ä¸šçš„éœ€æ±‚ã€å¼€å‘è€…çš„å¹´é¾„ï¼Œå¼€å‘è€…çš„èƒ½åŠ›ï¼Œè¿™äº›éƒ½æ˜¯å˜é‡ã€‚å‰é¢ 3 ç§å˜åŒ–éƒ½æ˜¯è¢«åŠ¨çš„ï¼Œä¸ç®¡æˆ‘ä»¬æ¥ä¸æ¥å—ï¼Œè¯¥å˜çš„éƒ½ä¼šå˜ï¼Œå”¯æœ‰æŠ€èƒ½ï¼Œæ˜¯æˆ‘ä»¬å¯ä»¥æ§åˆ¶çš„ã€‚å½“æˆ‘ä»¬çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿé¡ºåº”è¡Œä¸šçš„èµ°å‘ï¼Œèƒ½å¤Ÿæ»¡è¶³ä¼ä¸šçš„éœ€æ±‚ï¼Œå¹´é¾„å°±æˆäº†æ— å…³å˜é‡ï¼Œå¦åˆ™ï¼Œå®ƒå°±å¯èƒ½æˆä¸ºä¸€ä¸ªã€Œæ¸©æŸ”çš„å€Ÿå£ã€ã€‚</p><h2>ç»ˆå°†é€å»çš„é’æ˜¥</h2><p>ç°åœ¨æ•´ä¸ªå‰ç«¯åœˆéƒ½å·²ç»æ¥å—äº†ã€Œé™æ€ç±»å‹ç³»ç»Ÿã€è¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªåº“å¦‚æœæ— æ³•æä¾›è‰¯å¥½çš„ç±»å‹å®šä¹‰ç”šè‡³ä¼šå› æ­¤è¢«å«Œå¼ƒã€‚å½“ä¸€é¡¹éæ ‡å‡†çš„æŠ€æœ¯æˆä¸ºäº†äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œé‚£ä¹ˆå®ƒè·ç¦»æˆä¸ºçœŸæ­£çš„æ ‡å‡†ä¹Ÿå°±ä¸è¿œäº†ã€‚å‰©ä¸‹çš„ï¼Œæˆ–è®¸åªæ˜¯æ—¶é—´çš„é—®é¢˜ã€‚</p><p>å±Šæ—¶ï¼ŒTypeScript æˆ–è®¸ä¹Ÿä¼šé€æ¸æ¶ˆå¤±ï¼Œæˆä¸ºä¸€ä»£äººçš„è®°å¿†ï¼Œè¢«åä¸–æ‰€é—å¿˜ã€‚</p><p>é’æ˜¥ç»ˆå°†é€å»ï¼ŒæŠ€æœ¯ä¹Ÿæ˜¯ä¸€æ ·ã€‚æ¥æ—¶ï¼Œæˆ‘ä»¬ä¸ºä¹‹ç‹‚çƒ­ï¼Œå»æ—¶ï¼Œæˆ‘ä»¬ä¸ºä¹‹æƒ‹æƒœã€‚</p><p>è‹¥å¹²å¹´åï¼Œå½“åè¾ˆä»¬å†æ¬¡è¸ä¸Šè¿™æ¡å¾é€”ï¼Œä»–ä»¬çš„èµ·ç‚¹ï¼Œæˆ–è®¸å°±å·²ç»ä¸åŒä»¥å¾€ï¼š</p><p>ã€ŒJavaScript â€”â€” ä¸€é—¨é™æ€ç±»å‹è¯­è¨€ã€</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5d72d1593ee3afddd7f4bf450848c4e7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"460\" class=\"origin_image zh-lightbox-thumb\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-5d72d1593ee3afddd7f4bf450848c4e7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2000&#39; height=&#39;460&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"460\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-5d72d1593ee3afddd7f4bf450848c4e7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5d72d1593ee3afddd7f4bf450848c4e7_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }, 
                {
                    "tag": "TypeScript", 
                    "tagLink": "https://api.zhihu.com/topics/19766226"
                }, 
                {
                    "tag": "ECMAScript", 
                    "tagLink": "https://api.zhihu.com/topics/19600610"
                }
            ], 
            "comments": [
                {
                    "userName": "å°¤é›¨æºª", 
                    "userLink": "https://www.zhihu.com/people/cfdec6226ece879d2571fbc274372e9f", 
                    "content": "<p>ES2015 å‘å¸ƒï¼ŒBabel ä¹Ÿæ²¡æœ‰é€€å‡ºå†å²èˆå°ã€‚ESM æˆä¸ºäº†ä¸»æµï¼Œç„¶è€Œåœ¨ Node ä¸­çš„åŸç”Ÿæ”¯æŒä¾ç„¶è¿Ÿè¿Ÿæ²¡æœ‰è½åœ°ï¼Œåœ¨å®¢æˆ·ç«¯æ‰“åŒ…å·¥å…·ä¹Ÿä¾ç„¶ä¸å¯æˆ–ç¼ºã€‚æ ‡å‡†åŒ–çš„è¿›ç¨‹å’Œè½åœ°æ˜¯ä¸€ä¸ªæå…¶å¤æ‚çš„è¿‡ç¨‹ï¼Œä»…ä»…æ˜¯ä¸€äº›ä½œç”¨åŸŸå¾ˆçª„çš„ç‰¹æ€§ï¼Œä¹Ÿä¼šè¦ç»è¿‡é•¿æœŸçš„è®¨è®ºå’Œåˆ©ç›Šåšå¼ˆï¼ˆæ¯”å¦‚ ESMï¼Œclass fieldsï¼‰ã€‚è€Œç±»å‹ç³»ç»Ÿçš„æ°´å¯ä»¥è¯´æ·±å¾—è¶…è¿‡ JavaScript è¯­è¨€æœ¬èº«ï¼Œè¿˜æ¶‰åŠé…å¥—çš„å·¥å…·é“¾ï¼Œå°†è¿™ä¸€æ•´å¥—ç³»ç»Ÿæ ‡å‡†åŒ–ï¼Œä»¥ TC39 ç°åœ¨çš„æ‰¯çš®æ•ˆç‡ï¼Œä¿å®ˆä¼°è®¡éœ€è¦åå¹´ã€‚</p>", 
                    "likes": 86, 
                    "childComments": []
                }, 
                {
                    "userName": "é£å£°å¤ªå¤§", 
                    "userLink": "https://www.zhihu.com/people/5751636b8159ee95242e0c32c4bd38fa", 
                    "content": "è¦æ ¹æ®å®é™…éœ€è¦å»å­¦ä¹ ä¸€é¡¹æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ä»€ä¹ˆç«å°±å­¦ä»€ä¹ˆ", 
                    "likes": 5, 
                    "childComments": [
                        {
                            "userName": "é£å£°å¤ªå¤§", 
                            "userLink": "https://www.zhihu.com/people/5751636b8159ee95242e0c32c4bd38fa", 
                            "content": "è¦ä¸è¦å­¦ï¼Ÿæœ‰æ²¡æœ‰å‰æ™¯ï¼Ÿè¿™äº›å°±éƒ½ä¸æ˜¯é—®é¢˜äº†ï¼Œå½“ä¸‹ç¡®å®éœ€è¦ï¼Œé‚£å°±å»å­¦å®ƒï¼ç”¨å®ƒï¼ä¸€é¡¹æŠ€æœ¯åœ¨æœªæ¥ä¼šè¢«æ·˜æ±°è¿™å¤ªæ­£å¸¸ä¸è¿‡äº†ã€‚", 
                            "likes": 0, 
                            "replyToAuthor": "é£å£°å¤ªå¤§"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "35å²é€€ä¼‘ï¼Ÿ", 
                    "likes": 5, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ç¨‹åºçŒ¿çš„è‡ªé»‘å“", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "æ™¨æ›¦æ—¶æ¢¦è§å…®", 
                            "userLink": "https://www.zhihu.com/people/b3b784827032ece644e97673df3fc4d1", 
                            "content": "<p>åˆ°åº•æ˜¯è‡ªé»‘ è¿˜æ˜¯çœŸçš„ç¡®æœ‰å…¶äº‹å‘¢ ä¸å¥½è¯´...</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "èŒƒæµ·å®", 
                    "userLink": "https://www.zhihu.com/people/4938aebc1712561a9d16b6529374ad94", 
                    "content": "jsä¸ä¼šæˆä¸ºé™æ€ç±»å‹ï¼Œå†å²åŒ…è¢±å¤ªé‡äº†", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "èµ°èµ°åœåœ", 
                            "userLink": "https://www.zhihu.com/people/34a362ab0540e7d0ea55ec8074a19449", 
                            "content": "å¯ä»¥çœ‹ä¸‹ python çš„ç±»å‹æ ‡æ³¨", 
                            "likes": 2, 
                            "replyToAuthor": "èŒƒæµ·å®"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "å†å²åŒ…è¢±ï¼Œç»ˆç©¶ä¼šè¢«æ—¶é—´å†²æ´—æ‰ï¼Œæ— éæ˜¯å¤šä¹…çš„é—®é¢˜", 
                            "likes": 0, 
                            "replyToAuthor": "èŒƒæµ·å®"
                        }
                    ]
                }, 
                {
                    "userName": "æ‰“å­—æ…¢æ€ä¹ˆcoding", 
                    "userLink": "https://www.zhihu.com/people/c6f018bfba6c7848cf66f8d994902c04", 
                    "content": "<p>äººç±»éƒ½æ˜¯é€åˆ©çš„å˜›ï¼Œä¸å­˜åœ¨ï¼Œåœ¨å½“ä¸‹å¥½å¥½å­¦ä¹ ï¼Œæ‹¥æŠ±æ–°æŠ€æœ¯æ‰å¯¹ï¼Œè€Œä¸æ€»æ˜¯æƒ³ä¸€åŠ³æ°¸é€¸</p>", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "é£å£°å¤ªå¤§", 
                            "userLink": "https://www.zhihu.com/people/5751636b8159ee95242e0c32c4bd38fa", 
                            "content": "å¯¹å•Šï¼Œä¸€é¡¹æŠ€æœ¯æœ«è·¯è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®æ— æ‰€è°“çš„ï¼Œæœ‰æŸä¸ªéœ€æ±‚ï¼Œå½“ä¸‹çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Œé‚£å°±å»ç”¨ï¼Œä»¥åæœ‰æ–°çš„è§£å†³æ–¹æ¡ˆäº†å†ç”¨æ–°çš„è§£å†³æ–¹æ¡ˆå°±è¡Œäº†ã€‚", 
                            "likes": 0, 
                            "replyToAuthor": "æ‰“å­—æ…¢æ€ä¹ˆcoding"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>åœ¨äººå®¶æœ€ç«çš„æ—¶å€™ï¼Œæ¥è¿™ä¹ˆä¸€ä¸‹ï¼Œå‘ç”Ÿä»€ä¹ˆäº‹æƒ…äº†ï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡è®©è¯»è€…å»ç†è§£ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p>", 
                    "likes": 5, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "æ„æ€æ˜¯ï¼ŒTSç°åœ¨æ­£ç«ç€ï¼Œæˆ‘å´åœ¨æ€è€ƒå®ƒçš„æœ«è·¯ï¼Œæœ‰å¿ƒä¹‹äººä¼šè¯¯ä¼šæˆ‘åœ¨å”±è¡°TSã€‚", 
                            "likes": 1, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>æˆ‘ä»¥ä¸ºtsæ ¸å¿ƒæˆå‘˜ç¦»å¼€äº†å‘¢</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>é‚£è¿˜ä¸æ˜¯jså½“åˆè®¾è®¡çš„å¤ªç®€é™‹ï¼Œä¸é€‚åˆå½“å‰éœ€è¦æ‰å‡ºç°çš„Typescriptå—ï¼Ÿå¦‚æœå“ªä¸€å¤©jsè¿›åŒ–åˆ°ä¸éœ€è¦tsçš„è¾…åŠ©äº†ï¼Œé‚£ä¹ˆTsä¹Ÿåˆ°äº†åŠŸæˆèº«é€€çš„æ—¶å€™äº†ã€‚</p>", 
                    "likes": 2, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€ï¼Œä¸è¿‡ç°åœ¨çœ‹æ¥çš„ç®€é™‹ï¼Œåœ¨å½“æ—¶ä¹Ÿå·²ç»å¤Ÿç”¨äº†ï¼Œè¿™äº‹å„¿ä¸å¯åŒæ—¥è€Œè¯­", 
                            "likes": 1, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "haroel", 
                    "userLink": "https://www.zhihu.com/people/92c3e7514fb0a5a71c4d23432fe321af", 
                    "content": "<p>æ„Ÿæ…¨å¤ªå¤šäº†å§ï¼Œtsåªæ˜¯ä¸€é—¨è¯­è¨€</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "å…¶ä»–çš„ä¸è¯´ï¼Œweb compomentå’Œä¸‰å¤§æ¡†æ¶æ¯”èµ·æ¥å°±æ˜¯ç©å…·ï¼Œä½•æ¥æœªæ¥æ–¹å‘ä¹‹è¯´ã€‚<br><br>è¿æ–¹å‘éƒ½çœ‹ä¸æ¸…ï¼Œè¿˜æ˜¯ä¸è¦é¢„æµ‹å•¥äº†å§â€¦â€¦", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ä½ å¯èƒ½å¯¹ web componemts æœ‰ä»€ä¹ˆè¯¯ä¼š", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "â€¦â€¦åˆä¸æ˜¯æ²¡å†™è¿‡â€¦â€¦è¿˜èƒ½æœ‰å•¥è¯¯ä¼šçš„ã€‚", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "æå°å¿—", 
                    "userLink": "https://www.zhihu.com/people/e31119836b33876b011a571a631a0d97", 
                    "content": "ç°åœ¨jsæœ‰é™æ€ç±»å‹çš„ææ¡ˆäº†å—ï¼Œå¦‚æœåŸç”Ÿæ”¯æŒï¼Œè‡ªç„¶æ›´å–œæ¬¢åŸç”Ÿï¼Œå“ˆå“ˆ", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ç›®å‰è¿˜æ²¡", 
                            "likes": 0, 
                            "replyToAuthor": "æå°å¿—"
                        }
                    ]
                }, 
                {
                    "userName": "Rwing", 
                    "userLink": "https://www.zhihu.com/people/58a357e7d8cf3d8a4128d0770e338bc9", 
                    "content": "<p>éš¾é“ä¸æ˜¯webassemblyå—ï¼Ÿ</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "é‚£æ˜¯å¦ä¸€è¯äº†", 
                            "likes": 0, 
                            "replyToAuthor": "Rwing"
                        }
                    ]
                }, 
                {
                    "userName": "justjavac", 
                    "userLink": "https://www.zhihu.com/people/ced30ef2e460b4febfd77ef3038167ce", 
                    "content": "é™æ€ç±»å‹ jsï¼Ÿè¿™ä¸å°±æ˜¯èƒæ­»è…¹ä¸­çš„ es4 å˜›", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ä¸‰åå¹´æ²³ä¸œï¼Œä¸‰åå¹´æ²³è¥¿ï¼Œè°çŸ¥é“å‘¢", 
                            "likes": 0, 
                            "replyToAuthor": "justjavac"
                        }, 
                        {
                            "userName": "justjavac", 
                            "userLink": "https://www.zhihu.com/people/ced30ef2e460b4febfd77ef3038167ce", 
                            "content": "<p>ä¹Ÿè®¸ es14 åˆå›æ¥äº†å‘¢</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>è¯»å²å¯ä»¥çŸ¥å…´æ›¿</p>", 
                    "likes": 1, 
                    "childComments": []
                }, 
                {
                    "userName": "å°¤é›¨æºª", 
                    "userLink": "https://www.zhihu.com/people/cfdec6226ece879d2571fbc274372e9f", 
                    "content": "<p>ES2015 å‘å¸ƒï¼ŒBabel ä¹Ÿæ²¡æœ‰é€€å‡ºå†å²èˆå°ã€‚ESM æˆä¸ºäº†ä¸»æµï¼Œç„¶è€Œåœ¨ Node ä¸­çš„åŸç”Ÿæ”¯æŒä¾ç„¶è¿Ÿè¿Ÿæ²¡æœ‰è½åœ°ï¼Œåœ¨å®¢æˆ·ç«¯æ‰“åŒ…å·¥å…·ä¹Ÿä¾ç„¶ä¸å¯æˆ–ç¼ºã€‚æ ‡å‡†åŒ–çš„è¿›ç¨‹å’Œè½åœ°æ˜¯ä¸€ä¸ªæå…¶å¤æ‚çš„è¿‡ç¨‹ï¼Œä»…ä»…æ˜¯ä¸€äº›ä½œç”¨åŸŸå¾ˆçª„çš„ç‰¹æ€§ï¼Œä¹Ÿä¼šè¦ç»è¿‡é•¿æœŸçš„è®¨è®ºå’Œåˆ©ç›Šåšå¼ˆï¼ˆæ¯”å¦‚ ESMï¼Œclass fieldsï¼‰ã€‚è€Œç±»å‹ç³»ç»Ÿçš„æ°´å¯ä»¥è¯´æ·±å¾—è¶…è¿‡ JavaScript è¯­è¨€æœ¬èº«ï¼Œè¿˜æ¶‰åŠé…å¥—çš„å·¥å…·é“¾ï¼Œå°†è¿™ä¸€æ•´å¥—ç³»ç»Ÿæ ‡å‡†åŒ–ï¼Œä»¥ TC39 ç°åœ¨çš„æ‰¯çš®æ•ˆç‡ï¼Œä¿å®ˆä¼°è®¡éœ€è¦åå¹´ã€‚</p>", 
                    "likes": 86, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "babel ä¿ç•™åˆ°ç°åœ¨ï¼Œæœ€åˆæ˜¯å› ä¸ºæµè§ˆå™¨ä¸æ”¯æŒæ–°è¯­æ³•ï¼Œåæ¥æ˜¯å‡ºäºè¯­è¨€è‡ªèº«çš„å‘å±•éœ€è¦ã€‚Node ä¸­çš„ ESM æ˜¯åº•å±‚æŠ€æœ¯é—®é¢˜ï¼Œå¤§æ–¹å‘ä¸Šäººä»¬è¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿç»Ÿä¸€çš„ã€‚å½“ç„¶ï¼ŒæŠ€æœ¯çš„æ›´æ›¿éƒ½æ˜¯éœ€è¦è¿‡ç¨‹çš„ï¼Œç»éå‰è„šæ–°æŠ€æœ¯åˆšå‡ºï¼Œåè„šè€æŠ€æœ¯å°±è¢«å½»åº•æ·˜æ±°ã€‚æˆ‘ä»ä¸è®¤ä¸ºæ ‡å‡†åŒ–æ˜¯æ‹è„‘è¢‹å°±èƒ½åšçš„å†³å®šï¼Œè¿™ä¸ªé¢†åŸŸæ‚¨æ¯”æˆ‘æ‡‚ã€‚ä»¥æˆ‘ç›®å‰çš„æ°´å¹³ï¼Œä¸æ•¢å¦„åŠ æ¨æµ‹è¿™ä¸ªéœ€è¦å¤šä¹…ï¼Œä½†æ—¢ç„¶é‚£ä¹ˆå¤šäººæƒ³è¦ï¼Œè¿™ä¸ªè¶‹åŠ¿åº”è¯¥æ˜¯è·‘ä¸äº†ï¼Œæˆ–è®¸æœ€ç»ˆçš„å¦¥åå°±æ˜¯å¯é€‰çš„è¯­æ³•ã€‚", 
                            "likes": 1, 
                            "replyToAuthor": "å°¤é›¨æºª"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>proposal-class-fieldaä¼¼ä¹äº‰è®®å¾ˆå¤§ï¼Œå°¤å¤§æ€ä¹ˆçœ‹ğŸ‘€ï¼Ÿ</p>", 
                            "likes": 0, 
                            "replyToAuthor": "å°¤é›¨æºª"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>é«˜ç»´åº¦æ‰“å‡»ï¼</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "å•å˜‰è½©", 
                    "userLink": "https://www.zhihu.com/people/1ccfb627854eaba96775f3fadf0af241", 
                    "content": "æœ€åä¸€å¥ï¼Œå…¨æ–‡å‡å", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "æœ¨æ˜“å‡ ", 
                    "userLink": "https://www.zhihu.com/people/7579f8ecfc6424a490b320ecf6e6ca66", 
                    "content": "å¼•ç”¨è¯´çš„æŒºå¥½çš„ï¼Œå°±æ˜¯å¥—åœ¨tsä¸Šæœ‰ç‚¹åˆ«æ‰­", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "AlexanderChiuMungZit", 
                    "userLink": "https://www.zhihu.com/people/188f6a61891d24f0b620c63999993e41", 
                    "content": "<p>å’Œç©æ¸¸æˆæ˜¯ä¸€ä¸ªé“ç†ã€‚JSå¤©èµ‹å…¨ç‚¹çš„æ•æ·ï¼ˆåŠ¨æ€ã€çµæ´»ï¼‰ï¼ŒTSè½¬èŒå¤©èµ‹ç‚¹äº†è€åŠ›ï¼ˆé™æ€ï¼Œä¸¥è°¨ï¼‰ã€‚çœ‹ä»€ä¹ˆæ€ªä¸Šä»€ä¹ˆäººå§ã€‚</p>", 
                    "likes": 2, 
                    "childComments": []
                }, 
                {
                    "userName": "é¡ºé™Œå…ˆç”Ÿ", 
                    "userLink": "https://www.zhihu.com/people/23794671f75ffb1f0ef327e723f5d92a", 
                    "content": "ä¸ä¼šçš„ jsæ®‹ç–¾åœ°æ–¹å¤ªå¤šäº†", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Acurse", 
                    "userLink": "https://www.zhihu.com/people/0f381629330e10899da5077e40490a17", 
                    "content": "<p>â€œå¨±ä¹åœˆâ€â€œ35å²â€â€œweb componentâ€ä»¥åŠæ–¹å…´æœªè‰¾çš„TSï¼Œæˆ‘è§‰å¾—ä½ å°±æ˜¯åœ¨åšçœ¼çƒã€‚</p>", 
                    "likes": 3, 
                    "childComments": []
                }, 
                {
                    "userName": "å°¤é›¨æºª", 
                    "userLink": "https://www.zhihu.com/people/cfdec6226ece879d2571fbc274372e9f", 
                    "content": "<p>ES2015 å‘å¸ƒï¼ŒBabel ä¹Ÿæ²¡æœ‰é€€å‡ºå†å²èˆå°ã€‚ESM æˆä¸ºäº†ä¸»æµï¼Œç„¶è€Œåœ¨ Node ä¸­çš„åŸç”Ÿæ”¯æŒä¾ç„¶è¿Ÿè¿Ÿæ²¡æœ‰è½åœ°ï¼Œåœ¨å®¢æˆ·ç«¯æ‰“åŒ…å·¥å…·ä¹Ÿä¾ç„¶ä¸å¯æˆ–ç¼ºã€‚æ ‡å‡†åŒ–çš„è¿›ç¨‹å’Œè½åœ°æ˜¯ä¸€ä¸ªæå…¶å¤æ‚çš„è¿‡ç¨‹ï¼Œä»…ä»…æ˜¯ä¸€äº›ä½œç”¨åŸŸå¾ˆçª„çš„ç‰¹æ€§ï¼Œä¹Ÿä¼šè¦ç»è¿‡é•¿æœŸçš„è®¨è®ºå’Œåˆ©ç›Šåšå¼ˆï¼ˆæ¯”å¦‚ ESMï¼Œclass fieldsï¼‰ã€‚è€Œç±»å‹ç³»ç»Ÿçš„æ°´å¯ä»¥è¯´æ·±å¾—è¶…è¿‡ JavaScript è¯­è¨€æœ¬èº«ï¼Œè¿˜æ¶‰åŠé…å¥—çš„å·¥å…·é“¾ï¼Œå°†è¿™ä¸€æ•´å¥—ç³»ç»Ÿæ ‡å‡†åŒ–ï¼Œä»¥ TC39 ç°åœ¨çš„æ‰¯çš®æ•ˆç‡ï¼Œä¿å®ˆä¼°è®¡éœ€è¦åå¹´ã€‚</p>", 
                    "likes": 86, 
                    "childComments": []
                }, 
                {
                    "userName": "é£å£°å¤ªå¤§", 
                    "userLink": "https://www.zhihu.com/people/5751636b8159ee95242e0c32c4bd38fa", 
                    "content": "è¦æ ¹æ®å®é™…éœ€è¦å»å­¦ä¹ ä¸€é¡¹æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ä»€ä¹ˆç«å°±å­¦ä»€ä¹ˆ", 
                    "likes": 5, 
                    "childComments": [
                        {
                            "userName": "é£å£°å¤ªå¤§", 
                            "userLink": "https://www.zhihu.com/people/5751636b8159ee95242e0c32c4bd38fa", 
                            "content": "è¦ä¸è¦å­¦ï¼Ÿæœ‰æ²¡æœ‰å‰æ™¯ï¼Ÿè¿™äº›å°±éƒ½ä¸æ˜¯é—®é¢˜äº†ï¼Œå½“ä¸‹ç¡®å®éœ€è¦ï¼Œé‚£å°±å»å­¦å®ƒï¼ç”¨å®ƒï¼ä¸€é¡¹æŠ€æœ¯åœ¨æœªæ¥ä¼šè¢«æ·˜æ±°è¿™å¤ªæ­£å¸¸ä¸è¿‡äº†ã€‚", 
                            "likes": 0, 
                            "replyToAuthor": "é£å£°å¤ªå¤§"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "35å²é€€ä¼‘ï¼Ÿ", 
                    "likes": 5, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ç¨‹åºçŒ¿çš„è‡ªé»‘å“", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "æ™¨æ›¦æ—¶æ¢¦è§å…®", 
                            "userLink": "https://www.zhihu.com/people/b3b784827032ece644e97673df3fc4d1", 
                            "content": "<p>åˆ°åº•æ˜¯è‡ªé»‘ è¿˜æ˜¯çœŸçš„ç¡®æœ‰å…¶äº‹å‘¢ ä¸å¥½è¯´...</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "èŒƒæµ·å®", 
                    "userLink": "https://www.zhihu.com/people/4938aebc1712561a9d16b6529374ad94", 
                    "content": "jsä¸ä¼šæˆä¸ºé™æ€ç±»å‹ï¼Œå†å²åŒ…è¢±å¤ªé‡äº†", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "èµ°èµ°åœåœ", 
                            "userLink": "https://www.zhihu.com/people/34a362ab0540e7d0ea55ec8074a19449", 
                            "content": "å¯ä»¥çœ‹ä¸‹ python çš„ç±»å‹æ ‡æ³¨", 
                            "likes": 2, 
                            "replyToAuthor": "èŒƒæµ·å®"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "å†å²åŒ…è¢±ï¼Œç»ˆç©¶ä¼šè¢«æ—¶é—´å†²æ´—æ‰ï¼Œæ— éæ˜¯å¤šä¹…çš„é—®é¢˜", 
                            "likes": 0, 
                            "replyToAuthor": "èŒƒæµ·å®"
                        }
                    ]
                }, 
                {
                    "userName": "æ‰“å­—æ…¢æ€ä¹ˆcoding", 
                    "userLink": "https://www.zhihu.com/people/c6f018bfba6c7848cf66f8d994902c04", 
                    "content": "<p>äººç±»éƒ½æ˜¯é€åˆ©çš„å˜›ï¼Œä¸å­˜åœ¨ï¼Œåœ¨å½“ä¸‹å¥½å¥½å­¦ä¹ ï¼Œæ‹¥æŠ±æ–°æŠ€æœ¯æ‰å¯¹ï¼Œè€Œä¸æ€»æ˜¯æƒ³ä¸€åŠ³æ°¸é€¸</p>", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "é£å£°å¤ªå¤§", 
                            "userLink": "https://www.zhihu.com/people/5751636b8159ee95242e0c32c4bd38fa", 
                            "content": "å¯¹å•Šï¼Œä¸€é¡¹æŠ€æœ¯æœ«è·¯è¿™ä¸ªé—®é¢˜ï¼Œå…¶å®æ— æ‰€è°“çš„ï¼Œæœ‰æŸä¸ªéœ€æ±‚ï¼Œå½“ä¸‹çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Œé‚£å°±å»ç”¨ï¼Œä»¥åæœ‰æ–°çš„è§£å†³æ–¹æ¡ˆäº†å†ç”¨æ–°çš„è§£å†³æ–¹æ¡ˆå°±è¡Œäº†ã€‚", 
                            "likes": 0, 
                            "replyToAuthor": "æ‰“å­—æ…¢æ€ä¹ˆcoding"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>åœ¨äººå®¶æœ€ç«çš„æ—¶å€™ï¼Œæ¥è¿™ä¹ˆä¸€ä¸‹ï¼Œå‘ç”Ÿä»€ä¹ˆäº‹æƒ…äº†ï¼Œæ²¡æœ‰ä¸Šä¸‹æ–‡è®©è¯»è€…å»ç†è§£ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</p>", 
                    "likes": 5, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "æ„æ€æ˜¯ï¼ŒTSç°åœ¨æ­£ç«ç€ï¼Œæˆ‘å´åœ¨æ€è€ƒå®ƒçš„æœ«è·¯ï¼Œæœ‰å¿ƒä¹‹äººä¼šè¯¯ä¼šæˆ‘åœ¨å”±è¡°TSã€‚", 
                            "likes": 1, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>æˆ‘ä»¥ä¸ºtsæ ¸å¿ƒæˆå‘˜ç¦»å¼€äº†å‘¢</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>é‚£è¿˜ä¸æ˜¯jså½“åˆè®¾è®¡çš„å¤ªç®€é™‹ï¼Œä¸é€‚åˆå½“å‰éœ€è¦æ‰å‡ºç°çš„Typescriptå—ï¼Ÿå¦‚æœå“ªä¸€å¤©jsè¿›åŒ–åˆ°ä¸éœ€è¦tsçš„è¾…åŠ©äº†ï¼Œé‚£ä¹ˆTsä¹Ÿåˆ°äº†åŠŸæˆèº«é€€çš„æ—¶å€™äº†ã€‚</p>", 
                    "likes": 2, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€ï¼Œä¸è¿‡ç°åœ¨çœ‹æ¥çš„ç®€é™‹ï¼Œåœ¨å½“æ—¶ä¹Ÿå·²ç»å¤Ÿç”¨äº†ï¼Œè¿™äº‹å„¿ä¸å¯åŒæ—¥è€Œè¯­", 
                            "likes": 1, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "haroel", 
                    "userLink": "https://www.zhihu.com/people/92c3e7514fb0a5a71c4d23432fe321af", 
                    "content": "<p>æ„Ÿæ…¨å¤ªå¤šäº†å§ï¼Œtsåªæ˜¯ä¸€é—¨è¯­è¨€</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "å…¶ä»–çš„ä¸è¯´ï¼Œweb compomentå’Œä¸‰å¤§æ¡†æ¶æ¯”èµ·æ¥å°±æ˜¯ç©å…·ï¼Œä½•æ¥æœªæ¥æ–¹å‘ä¹‹è¯´ã€‚<br><br>è¿æ–¹å‘éƒ½çœ‹ä¸æ¸…ï¼Œè¿˜æ˜¯ä¸è¦é¢„æµ‹å•¥äº†å§â€¦â€¦", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ä½ å¯èƒ½å¯¹ web componemts æœ‰ä»€ä¹ˆè¯¯ä¼š", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "â€¦â€¦åˆä¸æ˜¯æ²¡å†™è¿‡â€¦â€¦è¿˜èƒ½æœ‰å•¥è¯¯ä¼šçš„ã€‚", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "æå°å¿—", 
                    "userLink": "https://www.zhihu.com/people/e31119836b33876b011a571a631a0d97", 
                    "content": "ç°åœ¨jsæœ‰é™æ€ç±»å‹çš„ææ¡ˆäº†å—ï¼Œå¦‚æœåŸç”Ÿæ”¯æŒï¼Œè‡ªç„¶æ›´å–œæ¬¢åŸç”Ÿï¼Œå“ˆå“ˆ", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ç›®å‰è¿˜æ²¡", 
                            "likes": 0, 
                            "replyToAuthor": "æå°å¿—"
                        }
                    ]
                }, 
                {
                    "userName": "Rwing", 
                    "userLink": "https://www.zhihu.com/people/58a357e7d8cf3d8a4128d0770e338bc9", 
                    "content": "<p>éš¾é“ä¸æ˜¯webassemblyå—ï¼Ÿ</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "é‚£æ˜¯å¦ä¸€è¯äº†", 
                            "likes": 0, 
                            "replyToAuthor": "Rwing"
                        }
                    ]
                }, 
                {
                    "userName": "justjavac", 
                    "userLink": "https://www.zhihu.com/people/ced30ef2e460b4febfd77ef3038167ce", 
                    "content": "é™æ€ç±»å‹ jsï¼Ÿè¿™ä¸å°±æ˜¯èƒæ­»è…¹ä¸­çš„ es4 å˜›", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ä¸‰åå¹´æ²³ä¸œï¼Œä¸‰åå¹´æ²³è¥¿ï¼Œè°çŸ¥é“å‘¢", 
                            "likes": 0, 
                            "replyToAuthor": "justjavac"
                        }, 
                        {
                            "userName": "justjavac", 
                            "userLink": "https://www.zhihu.com/people/ced30ef2e460b4febfd77ef3038167ce", 
                            "content": "<p>ä¹Ÿè®¸ es14 åˆå›æ¥äº†å‘¢</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>è¯»å²å¯ä»¥çŸ¥å…´æ›¿</p>", 
                    "likes": 1, 
                    "childComments": []
                }, 
                {
                    "userName": "å°¤é›¨æºª", 
                    "userLink": "https://www.zhihu.com/people/cfdec6226ece879d2571fbc274372e9f", 
                    "content": "<p>ES2015 å‘å¸ƒï¼ŒBabel ä¹Ÿæ²¡æœ‰é€€å‡ºå†å²èˆå°ã€‚ESM æˆä¸ºäº†ä¸»æµï¼Œç„¶è€Œåœ¨ Node ä¸­çš„åŸç”Ÿæ”¯æŒä¾ç„¶è¿Ÿè¿Ÿæ²¡æœ‰è½åœ°ï¼Œåœ¨å®¢æˆ·ç«¯æ‰“åŒ…å·¥å…·ä¹Ÿä¾ç„¶ä¸å¯æˆ–ç¼ºã€‚æ ‡å‡†åŒ–çš„è¿›ç¨‹å’Œè½åœ°æ˜¯ä¸€ä¸ªæå…¶å¤æ‚çš„è¿‡ç¨‹ï¼Œä»…ä»…æ˜¯ä¸€äº›ä½œç”¨åŸŸå¾ˆçª„çš„ç‰¹æ€§ï¼Œä¹Ÿä¼šè¦ç»è¿‡é•¿æœŸçš„è®¨è®ºå’Œåˆ©ç›Šåšå¼ˆï¼ˆæ¯”å¦‚ ESMï¼Œclass fieldsï¼‰ã€‚è€Œç±»å‹ç³»ç»Ÿçš„æ°´å¯ä»¥è¯´æ·±å¾—è¶…è¿‡ JavaScript è¯­è¨€æœ¬èº«ï¼Œè¿˜æ¶‰åŠé…å¥—çš„å·¥å…·é“¾ï¼Œå°†è¿™ä¸€æ•´å¥—ç³»ç»Ÿæ ‡å‡†åŒ–ï¼Œä»¥ TC39 ç°åœ¨çš„æ‰¯çš®æ•ˆç‡ï¼Œä¿å®ˆä¼°è®¡éœ€è¦åå¹´ã€‚</p>", 
                    "likes": 86, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "babel ä¿ç•™åˆ°ç°åœ¨ï¼Œæœ€åˆæ˜¯å› ä¸ºæµè§ˆå™¨ä¸æ”¯æŒæ–°è¯­æ³•ï¼Œåæ¥æ˜¯å‡ºäºè¯­è¨€è‡ªèº«çš„å‘å±•éœ€è¦ã€‚Node ä¸­çš„ ESM æ˜¯åº•å±‚æŠ€æœ¯é—®é¢˜ï¼Œå¤§æ–¹å‘ä¸Šäººä»¬è¿˜æ˜¯å¸Œæœ›èƒ½å¤Ÿç»Ÿä¸€çš„ã€‚å½“ç„¶ï¼ŒæŠ€æœ¯çš„æ›´æ›¿éƒ½æ˜¯éœ€è¦è¿‡ç¨‹çš„ï¼Œç»éå‰è„šæ–°æŠ€æœ¯åˆšå‡ºï¼Œåè„šè€æŠ€æœ¯å°±è¢«å½»åº•æ·˜æ±°ã€‚æˆ‘ä»ä¸è®¤ä¸ºæ ‡å‡†åŒ–æ˜¯æ‹è„‘è¢‹å°±èƒ½åšçš„å†³å®šï¼Œè¿™ä¸ªé¢†åŸŸæ‚¨æ¯”æˆ‘æ‡‚ã€‚ä»¥æˆ‘ç›®å‰çš„æ°´å¹³ï¼Œä¸æ•¢å¦„åŠ æ¨æµ‹è¿™ä¸ªéœ€è¦å¤šä¹…ï¼Œä½†æ—¢ç„¶é‚£ä¹ˆå¤šäººæƒ³è¦ï¼Œè¿™ä¸ªè¶‹åŠ¿åº”è¯¥æ˜¯è·‘ä¸äº†ï¼Œæˆ–è®¸æœ€ç»ˆçš„å¦¥åå°±æ˜¯å¯é€‰çš„è¯­æ³•ã€‚", 
                            "likes": 1, 
                            "replyToAuthor": "å°¤é›¨æºª"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>proposal-class-fieldaä¼¼ä¹äº‰è®®å¾ˆå¤§ï¼Œå°¤å¤§æ€ä¹ˆçœ‹ğŸ‘€ï¼Ÿ</p>", 
                            "likes": 0, 
                            "replyToAuthor": "å°¤é›¨æºª"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>é«˜ç»´åº¦æ‰“å‡»ï¼</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "å•å˜‰è½©", 
                    "userLink": "https://www.zhihu.com/people/1ccfb627854eaba96775f3fadf0af241", 
                    "content": "æœ€åä¸€å¥ï¼Œå…¨æ–‡å‡å", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "æœ¨æ˜“å‡ ", 
                    "userLink": "https://www.zhihu.com/people/7579f8ecfc6424a490b320ecf6e6ca66", 
                    "content": "å¼•ç”¨è¯´çš„æŒºå¥½çš„ï¼Œå°±æ˜¯å¥—åœ¨tsä¸Šæœ‰ç‚¹åˆ«æ‰­", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "AlexanderChiuMungZit", 
                    "userLink": "https://www.zhihu.com/people/188f6a61891d24f0b620c63999993e41", 
                    "content": "<p>å’Œç©æ¸¸æˆæ˜¯ä¸€ä¸ªé“ç†ã€‚JSå¤©èµ‹å…¨ç‚¹çš„æ•æ·ï¼ˆåŠ¨æ€ã€çµæ´»ï¼‰ï¼ŒTSè½¬èŒå¤©èµ‹ç‚¹äº†è€åŠ›ï¼ˆé™æ€ï¼Œä¸¥è°¨ï¼‰ã€‚çœ‹ä»€ä¹ˆæ€ªä¸Šä»€ä¹ˆäººå§ã€‚</p>", 
                    "likes": 2, 
                    "childComments": []
                }, 
                {
                    "userName": "é¡ºé™Œå…ˆç”Ÿ", 
                    "userLink": "https://www.zhihu.com/people/23794671f75ffb1f0ef327e723f5d92a", 
                    "content": "ä¸ä¼šçš„ jsæ®‹ç–¾åœ°æ–¹å¤ªå¤šäº†", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Acurse", 
                    "userLink": "https://www.zhihu.com/people/0f381629330e10899da5077e40490a17", 
                    "content": "<p>â€œå¨±ä¹åœˆâ€â€œ35å²â€â€œweb componentâ€ä»¥åŠæ–¹å…´æœªè‰¾çš„TSï¼Œæˆ‘è§‰å¾—ä½ å°±æ˜¯åœ¨åšçœ¼çƒã€‚</p>", 
                    "likes": 3, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/75906177", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 38, 
            "title": "TypeScript æ¬¡æ—¥æŒ‡å—", 
            "content": "<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š</p><a href=\"https://link.zhihu.com/?target=https%3A//tonghuashuo.github.io/blog/2019/07/28/typescript-the-second-day\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-8239307adc5ccdfc32320e1bcadb6300_180x120.jpg\" data-image-width=\"1200\" data-image-height=\"675\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">TypeScript æ¬¡æ—¥æŒ‡å— | åšå®¢</a><h2><b>æ‚è°ˆ</b></h2><p>ä¸çŸ¥é“æ˜¯å°±æˆ‘è¿™æ ·ï¼Œè¿˜æ˜¯å¤§å®¶ä¹Ÿæ˜¯ï¼Œæœ€è¿‘çš„å†…å®¹åœˆå­é‡Œå…³äº TypeScript çš„æ–‡ç« æ»¡å¤©é£ï¼Œå„ç§ TypeScript æœ‰å¤šå¥½ã€å¤šå—æ¬¢è¿ï¼Œè¦ä¸å°±æ˜¯ TypeScript çš„æ•™ç¨‹ã€å®è·µã€‚ååæˆ‘åœ¨è¿™æ—¶å€™æœ‰äº†å†™è¿™ç¯‡æ–‡ç« çš„æƒ³æ³•ï¼Œæå¾—å¾ˆæœ‰è·Ÿé£è¹­çƒ­åº¦çš„å«Œç–‘ã€‚</p><p>ä½œä¸ºä¸€ååšæŒåŸåˆ›çš„ä½œè€…ï¼Œæˆ‘å¹¶ä¸æƒ³æŠŠå¸‚é¢ä¸Šéšæ‰‹å¯å¾—çš„ä¸œè¥¿ï¼Œæ¢ä¸€ç§æ–¹å¼å†è®²ç»™å¤§å®¶å¬ï¼Œè¿™æ ·ä¸ä»…æ˜¯åœ¨æµªè´¹å¤§å®¶çš„æ—¶é—´ï¼Œä¹Ÿæ˜¯åœ¨æµªè´¹æˆ‘è‡ªå·±çš„æ—¶é—´ã€‚æˆ‘æ‰€ç†è§£çš„ä¸ºç¤¾åŒºåšè´¡çŒ®ï¼Œåº”è¯¥æ˜¯èƒ½å¤Ÿå¡«è¡¥å½“å‰ç¯å¢ƒä¸‹çš„ä¸€äº›ç©ºç™½ï¼Œå»åšä¸€äº›çœŸæ­£æœ‰æ„ä¹‰çš„äº‹ï¼Œè€Œä¸æ˜¯æ‘†å‡ºä¸€å‰¯èµ„æ·±çš„æ ·å­ï¼Œå»è½¬å‘æˆ–æ˜¯åˆ›é€ ä¸€äº›é‡å¤çš„å†…å®¹ã€‚</p><p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œè™½ç„¶æœ‰è·Ÿé£çš„å«Œç–‘ï¼Œä½†æˆ‘å‘ä½ ä¿è¯ï¼Œå†…å®¹ä¾ç„¶æ˜¯ç»å¯¹çš„åŸåˆ›ã€‚å¦‚æœ‰å·§åˆï¼Œé‚£ä¹ˆè‹±é›„æ‰€è§ç•¥åŒã€‚</p><h2>ä¸ºä»€ä¹ˆæ˜¯æ¬¡æ—¥ï¼Ÿ</h2><p>ä¸Šæ‰‹ TypeScript å¹¶ä¸éš¾ï¼Œæœ‰ JavaScript åŸºç¡€çš„åŒå­¦ï¼ŒèŠ±ä¸ªä¸€å¤©æ—¶é—´è¿‡ä¸€éæ–‡æ¡£ï¼ŒåŸºæœ¬å°±éƒ½æ¸…æ¥šäº†ã€‚å¦‚æœä½ åˆšå¥½è¿˜æœ‰ Javaã€C# ç­‰åç«¯è¯­è¨€çš„åŸºç¡€ï¼Œé‚£ä¹ˆå…¶ä¸­å…³äº OOP çš„ä¸€äº›æ¦‚å¿µç›¸ä¿¡ä½ ä¸€å®šä¼šè§‰å¾—éå¸¸çœ¼ç†Ÿã€‚</p><p>å¦‚æœä½ åˆšçœ‹å®Œæ–‡æ¡£å°±å¼€å§‹å‡†å¤‡æŠŠ TypeScript ç”¨åˆ°é¡¹ç›®ä¸­å»ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œä½ å¾ˆå¿«å°±ä¼šé‡åˆ°å„ç§å‘ï¼Œè€Œä¸”ä½ æ— æ³•ç›´æ¥ä»æ–‡æ¡£ä¸­å¯»æ‰¾åˆ°å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ç¯‡æ–‡ç« çš„å­˜åœ¨ï¼Œå°±æ˜¯å¸Œæœ›èƒ½å¤Ÿå¡«è¡¥è¿™ä¸­é—´çš„ç©ºç™½ï¼Œå¸®åŠ©å„ä½é¡ºåˆ©çš„æŠŠ TypeScript è½åœ°åˆ°é¡¹ç›®ä¸­ã€‚</p><p>è¿™ä¾¿æ˜¯æ ‡é¢˜ä¸­ã€Œæ¬¡æ—¥ã€çš„ç”±æ¥ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰çœ‹è¿‡ TypeScript çš„æ–‡æ¡£ï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« ç°åœ¨è¿˜ä¸é€‚åˆä½ ï¼Œå»ºè®®å…ˆæ”¶è—èµ·æ¥ï¼Œç­‰çœ‹å®Œäº†æ–‡æ¡£å†å›æ¥ã€‚</p><p>å¦‚æœä½ å·²ç»å‡†å¤‡å¥½äº†ï¼Œé‚£æˆ‘ä»¬å¼€å§‹å§ã€‚</p><h2>ä½ æˆ–è®¸å¹¶ä¸éœ€è¦ TypeScript</h2><p>æ¯ä¸ªäººæ¥è§¦ TypeScript çš„åŸå› ä¸åŒï¼Œæœ‰çš„æ˜¯è¢«äººå®‰åˆ©ï¼Œæœ‰çš„æ˜¯å› ä¸ºå›¢é˜Ÿåœ¨ç”¨ï¼Œæœ‰çš„æ˜¯å› ä¸ºç”¨äº† Angularã€‚ä½†ä¸ç®¡å› ä¸ºä»€ä¹ˆå…¥äº†è¿™ä¸ªå‘ï¼Œæˆ‘ä»¬éƒ½éœ€è¦æ˜ç™½ï¼šTypeScript å¹¶éå¿…é¡»ã€‚</p><p>TypeScript é€‚åˆå¤§å‹é¡¹ç›®ï¼Œå°å‹é¡¹ç›®æœ€å¥½è¿˜æ˜¯ç»§ç»­ç”¨ JavaScriptã€‚è¿™å·²ç»æ˜¯ä¸šå†…çš„ä¸€ä¸ªå…±è¯†ã€‚</p><p>TypeScript å¯ä»¥ç®€å•ç†è§£ä¸º JavaScript + Typesã€‚ä»å·¥ç¨‹æ•ˆç‡çš„è§’åº¦ä¸Šè®²ï¼ŒTypes çš„éƒ¨åˆ†å±äºé¢å¤–çš„å·¥ä½œé‡ï¼Œå¦‚æœä¸èƒ½ç»™é¡¹ç›®å¸¦æ¥è¶³å¤Ÿçš„æ”¶ç›Šï¼Œå»å¹³è¡¡æ‰å…¶å¼•å…¥çš„æˆæœ¬ï¼Œé‚£ä¹ˆè¿™é¡¹æŠ•å…¥å°±ä¸æ˜¯å¾ˆå€¼å¾—ã€‚</p><p>å¦‚æœåªæ˜¯å®˜ç½‘ä¹‹ç±»çš„å°å‹é¡¹ç›®ï¼Œç±»å‹ä¸ç±»å‹çš„å¹¶ä¸é‡è¦ï¼Œæ²¡å¿…è¦ä¸ºäº†ç”¨ TypeScript è€Œç”¨ TypeScriptã€‚ä½†éšç€é¡¹ç›®çš„è§„æ¨¡å’Œå¤æ‚åº¦çš„å¢åŠ ï¼Œä»£ç è´¨é‡ã€æ²Ÿé€šæˆæœ¬ç­‰é—®é¢˜å¼€å§‹æµ®ç°ï¼Œè€Œè¿™æ°æ°æ˜¯ç±»å‹ç³»ç»Ÿèƒ½å¤Ÿè§£å†³çš„é—®é¢˜ã€‚é€šè¿‡ç±»å‹æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ—©çš„å‘ç°æ½œåœ¨çš„ç±»å‹é”™è¯¯ï¼Œè¿›è¡Œä¸»åŠ¨é˜²å¾¡ï¼Œè¿›è€Œæé«˜ä»£ç è´¨é‡ï¼›é€šè¿‡ç±»å‹å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ ç›´è§‚çš„æè¿°æˆ‘ä»¬çš„æ•°æ®ç»“æ„ï¼Œé™ä½å›¢é˜Ÿä½œä¸šä¸­çš„æ²Ÿé€šæˆæœ¬ã€‚</p><p>å› æ­¤ï¼Œè¦ä¸è¦ç”¨ TypeScriptï¼Œå–å†³äºä½ é¡¹ç›®çš„ç±»å‹ä»¥åŠè§„æ¨¡ï¼Œä¸è¦ç›²ç›®è·Ÿé£ã€‚</p><h2>åˆ«å¿˜äº† jsDoc</h2><p>å¾ˆå¤šäººå¯¹ TypeScript æœ‰ä¸€ä¸ªè¯¯è§£ï¼Œè§‰å¾—æœ‰äº†é™æ€ç±»å‹çš„ä»£ç å·²ç»è¶³å¤Ÿã€Œè‡ªè§£é‡Šã€ï¼Œå°±ä¸éœ€è¦ jsDoc ä¸€ç±»çš„æ³¨é‡Šäº†ã€‚</p><p>é™æ€ç±»å‹æè¿°çš„æ˜¯æ•°æ®çš„ç»“æ„ï¼Œè€Œæ³¨é‡Šæè¿°çš„æ˜¯æ•°æ®çš„ä½œç”¨ï¼Œä¸¤è€…è§£å†³çš„æ˜¯ä¸åŒçš„é—®é¢˜ï¼Œå½¼æ­¤ä¹‹é—´å¹¶ä¸å†²çªã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™æ®µ JavaScript ä»£ç ï¼š</p><div class=\"highlight\"><pre><code class=\"language-ts\"><span class=\"kd\">function</span> <span class=\"nx\">convert</span> <span class=\"p\">(</span><span class=\"nx\">val</span><span class=\"p\">,</span> <span class=\"nx\">config</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// some code\n</span><span class=\"c1\"></span><span class=\"p\">}</span></code></pre></div><p>ä¸éš¾çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå¾…è½¬æ¢çš„å€¼ï¼Œä»¥åŠä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œä½†æˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿™ä¸ªå‡½æ•°ç”¨æ¥è½¬æ¢ä»€ä¹ˆï¼Œé…ç½®å¯¹è±¡åˆæœ‰å“ªäº›å‚æ•°ã€‚</p><p>ç°åœ¨æˆ‘ä»¬ç”¨ TypeScript æ¥é‡å†™ä¸€ä¸‹ï¼Œè¡¥å……ä¸€äº›ç±»å‹å®šä¹‰ã€‚</p><div class=\"highlight\"><pre><code class=\"language-ts\"><span class=\"kd\">function</span> <span class=\"nx\">convert</span> <span class=\"p\">(</span><span class=\"nx\">val</span>: <span class=\"kt\">string</span><span class=\"p\">,</span> <span class=\"nx\">config</span><span class=\"o\">:</span> <span class=\"p\">{</span> <span class=\"nx\">x</span>: <span class=\"kt\">string</span><span class=\"p\">,</span> <span class=\"nx\">y?</span> :<span class=\"kt\">boolean</span><span class=\"p\">})</span><span class=\"o\">:</span> <span class=\"kt\">string</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// some code\n</span><span class=\"c1\"></span><span class=\"p\">}</span></code></pre></div><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†è¿™æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†å­—ç¬¦ä¸²çš„è½¬æ¢å‡½æ•°ï¼Œé…ç½®å¯¹è±¡æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å¿…é€‰çš„å­—ç¬¦ä¸²ï¼Œä¸€ä¸ªæ˜¯å¯é€‰çš„å¸ƒå°”å€¼ï¼Œæœ€åè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ä½†å…·ä½“åˆ°ä¸šåŠ¡ä¸­ï¼Œè¿™ä¸ªå‡½æ•°ç”¨æ¥è½¬æ¢ä»€ä¹ˆæ ·çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸å¤ªæ¸…æ¥šã€‚</p><div class=\"highlight\"><pre><code class=\"language-ts\"><span class=\"cm\">/**\n</span><span class=\"cm\"> * @description å¯¹æ‰‹æœºå·è¿›è¡Œç¼–ç ï¼Œéšè—å…¶ä¸­ä¸€éƒ¨åˆ†ï¼Œå¦‚ï¼š13812345678 -&gt; 138****5678\n</span><span class=\"cm\"> * @param val å¾…ç¼–ç çš„æ‰‹æœºå·\n</span><span class=\"cm\"> * @param config é…ç½®é€‰é¡¹\n</span><span class=\"cm\"> */</span>\n<span class=\"kd\">function</span> <span class=\"nx\">convert</span> <span class=\"p\">(</span><span class=\"nx\">val</span>: <span class=\"kt\">string</span><span class=\"p\">,</span> <span class=\"nx\">config</span><span class=\"o\">:</span> <span class=\"p\">{</span> <span class=\"nx\">x</span>: <span class=\"kt\">string</span><span class=\"p\">,</span> <span class=\"nx\">y?</span> :<span class=\"kt\">boolean</span><span class=\"p\">})</span><span class=\"o\">:</span> <span class=\"kt\">string</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// some code\n</span><span class=\"c1\"></span><span class=\"p\">}</span></code></pre></div><p>åŠ ä¸Šæ³¨é‡Šä¹‹åï¼Œä¸€åˆ‡å°±éƒ½æ¸…æ¥šäº†ï¼šè¿™æ˜¯ä¸€ä¸ªå¯¹æ‰‹æœºå·è¿›è¡Œç¼–ç ï¼Œå°†å…¶ä¸­ä¸€éƒ¨åˆ†æ›¿æ¢æˆå…¶ä»–å­—ç¬¦ï¼Œä»¥ä¿æŠ¤ç”¨æˆ·éšç§çš„å‡½æ•°ã€‚</p><p>æ‰€ä»¥ä½ çœ‹ï¼ŒTypeScript å¹¶ä¸èƒ½å®Œå…¨æ›¿ä»£ jsDoc çš„ä½œç”¨ï¼Œè¯¥å†™çš„æ³¨é‡Šè¿˜æ˜¯å¾—å†™ã€‚</p><p>å½“ç„¶å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå•çº¯çš„å·¥å…·å‡½æ•°ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥ä½¿ç”¨æ›´åŠ ç›´è§‚çš„å‘½åï¼Œæ¯”å¦‚ <code>encodeMobile (mobile, config)</code>ï¼Œä½†å¦‚æœè¿™æ˜¯æŸä¸ªç±»ä¸­çš„æˆå‘˜å‡½æ•°ï¼Œé‚£ä¹ˆå¯èƒ½å°±ä¸å¯é¿å…åœ°ä¼šå‡ºç°ç¤ºä¾‹ä¸­çš„å†™æ³•ã€‚æ€»ä¹‹ï¼Œä½ æ˜ç™½æˆ‘çš„æ„æ€å°±å¥½ï¼Œå°±ä¸è¦é’»ç‰›è§’å°–äº†ã€‚</p><p>å¯¹äº†ï¼Œå¾—ç›Šäº TypeScript çš„ç±»å‹ç³»ç»Ÿï¼Œ<code>@param</code> ä¸éœ€è¦å†æŒ‡å®šæ•°æ®ç±»å‹äº†ï¼Œåªè¦å¯¹å˜é‡çš„ç”¨é€”è¿›è¡Œæè¿°å°±å¥½äº†ã€‚å¦‚æœä½ é…ç½®äº† Lint å·¥å…·ï¼Œå®ƒä¹Ÿä¼šæé†’ä½ ä¼˜å…ˆä½¿ç”¨ TypeScript æ¥å®šä¹‰ç±»å‹ï¼Œä¸è¦é‡å¤å®šä¹‰ã€‚</p><h2>TSX å’Œ JSX</h2><p>ä¹‹å‰æˆ‘ä»¬åœ¨ç”¨ JavaScript å†™ React æ—¶ï¼Œå¯¹æ–‡ä»¶çš„æ‰©å±•åæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„è¦æ±‚ï¼Œ<code>*.js</code> æˆ–è€… <code>*.jsx</code> éƒ½è¡Œã€‚</p><p>ä½†åœ¨ TypeScript ä¸­ï¼Œå¦‚æœä½ è¦ä½¿ç”¨ JSX è¯­æ³•ï¼Œå°±ä¸èƒ½ä½¿ç”¨ <code>*.ts</code>ï¼Œå¿…é¡»ä½¿ç”¨ <code>*.tsx</code>ã€‚å¦‚æœä½ ä¸çŸ¥é“ï¼Œæˆ–è€…å¿˜äº†è¿™ä¹ˆåšï¼Œé‚£ä¹ˆä½ ä¼šåœ¨ä½¿ç”¨äº† JSX ä»£ç çš„åœ°æ–¹æ”¶åˆ°ç±»å‹æŠ¥é”™ï¼Œä½†ä»£ç æœ¬èº«æ€ä¹ˆçœ‹éƒ½æ²¡æœ‰é—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯åˆšä¸Šæ‰‹ TypeScript + React æ—¶å‡ ä¹æ¯ä¸ªäººéƒ½ä¼šé‡åˆ°çš„å‘ã€‚</p><p>å…³äºè¿™ä¸€ç‚¹ï¼ŒTypeScript åªæ˜¯åœ¨å®˜æ–¹æ•™ç¨‹çš„ç¤ºä¾‹ä»£ç ä¸­ç›´æ¥ç”¨äº† <code>*.tsx</code>ï¼Œä½†å¹¶æ²¡æœ‰æ˜ç¡®è¯´æ˜è¿™ä¸€é—®é¢˜ã€‚</p><p>React åˆ™åœ¨å®ƒçš„å®˜æ–¹æ–‡æ¡£ä¸­è¯´æ˜äº†è¿™ä¸€è§„åˆ™ï¼š</p><blockquote> In React, you most likely write your components in a <code>.js</code> file. In TypeScript we have 2 file extensions:<br/> <code>.ts</code> is the default file extension while <code>.tsx</code> is a special extension used for files which contain JSX.<br/> åœ¨ä½¿ç”¨ React æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŠŠç»„ä»¶å†™åœ¨ä¸€ä¸ª <code>.*js</code> æ–‡ä»¶é‡Œã€‚åœ¨ TypeScript ä¸­æˆ‘ä»¬æœ‰ä¸¤ç§æ–‡ä»¶æ‰©å±•åï¼š<br/> <code>.ts</code> æ˜¯é»˜è®¤çš„æ–‡ä»¶æ‰©å±•åï¼Œè€Œ <code>.tsx</code> æ˜¯ç”¨äºåŒ…å«äº† JSX çš„æ–‡ä»¶çš„ç‰¹æ®Šæ‰©å±•åã€‚<br/> </blockquote><p>å…¶å®ä¸Šé¢è¿™æ®µè¯ä¹Ÿæ²¡æœ‰æ˜è¯´åœ¨ <code>*.ts</code> ä¸­ä½¿ç”¨ JSX ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å³ä¾¿æœ‰äººçœ‹åˆ°äº†è¿™æ®µè¯ï¼Œå¯èƒ½ä¹Ÿä»¥ä¸ºåªæ˜¯åƒ <code>*.jsx</code> ä¸€æ ·å¤šäº†ä¸€ç§é€‰æ‹©ï¼Œå¹¶æ²¡æœ‰å¤ªå½“å›äº‹â€¦â€¦ç›´åˆ°é‡åˆ°é—®é¢˜ã€‚</p><h2>å˜é‡çš„ Type æ€ä¹ˆæ‰¾</h2><p>ä¸Šæ‰‹ TypeScript ä¹‹åå¾ˆå¿«æˆ‘ä»¬å°±å‘ç°ï¼Œå³ä¾¿æ˜¯åŸç”Ÿçš„ DOMã€æˆ–æ˜¯ React çš„ APIï¼Œä¹Ÿç»å¸¸ä¼šè¦æˆ‘ä»¬æ‰‹åŠ¨æŒ‡å®šç±»å‹ã€‚ä½†è¿™äº›ç»“æ„å¹¶ä¸æ˜¯ç®€å•çš„ JavaScript åŸå§‹ç±»å‹ï¼Œåœ¨ä½¿ç”¨ JavaScript ç¼–å†™ç›¸å…³ä»£ç æ—¶å€™ç”±äºæ²¡æœ‰è¿™ç§éœ€è¦ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡å…³å¿ƒè¿‡è¿™äº›ä¸œè¥¿çš„ç±»å‹ï¼Œçªç„¶é—®èµ·æ¥ï¼Œè¿˜çœŸä¸çŸ¥é“è¿™äº›ç±»å‹å«ä»€ä¹ˆåå­—ã€‚</p><p>ä¸å…‰æ˜¯è¿™äº›æ ‡å‡†ç±»å‹ï¼ŒåŒæ ·çš„é—®é¢˜åœ¨å¾ˆå¤šç¬¬ä¸‰æ–¹çš„åº“ä¸­ä¹Ÿä¼šé‡åˆ°ï¼Œæ¯”å¦‚ä¸€äº›ç»„ä»¶åº“ä¼šæ£€æŸ¥ä½ ä¼ å…¥çš„ Propsã€‚</p><p>åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™ä¸­é—´å…¶å®ç¼ºå°‘äº†ä¸€éƒ¨åˆ†çš„æ–‡æ¡£ï¼Œæ¥æŒ‡å¯¼æ–°ç”¨æˆ·å¦‚ä½•æ‰¾åˆ°æ‰€éœ€è¦çš„ç±»å‹ã€‚æ—¢ç„¶ç¤¾åŒºæ²¡æœ‰æä¾›ï¼Œé‚£å°±æˆ‘æ¥å§ã€‚</p><p>å½“ç„¶ï¼Œè®©æ¯ä¸ªå¼€å‘è€…éƒ½ç†Ÿè®°æ‰€æœ‰çš„ç±»å‹è‚¯å®šæ˜¯ä¸ç°å®çš„ï¼Œæ€»ä¸èƒ½æ¯æ¥è§¦ä¸€ä¸ªæ–°çš„åº“ï¼Œå°±è¦å»è®°ä¸€å †ç±»å‹å§ã€‚æ”¾å¿ƒï¼Œä¸–ç•Œè¿˜æ˜¯ç¾å¥½çš„ï¼Œè¿™ç§äº‹æƒ…ï¼Œå½“ç„¶æ˜¯æœ‰æ–¹æ³•çš„ã€‚</p><p>æœ€ç›´ç™½çš„æ–¹æ³•å°±æ˜¯å»çœ‹åº“çš„ Types Definitionï¼Œä¹Ÿå°±æ˜¯é‚£äº› <code>*.d.ts</code> æ–‡ä»¶ã€‚å¦‚æœä½ åˆšå¥½æœ‰åœ¨ç”¨ VS Code çš„è¯ï¼Œæœ‰ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„æ“ä½œï¼šæŠŠé¼ æ ‡ç§»åŠ¨åˆ°ä½ æƒ³çŸ¥é“å®ƒç±»å‹çš„ä»£ç ä¸Šï¼ˆæ¯”å¦‚æŸä¸ªå˜é‡ã€æŸä¸ªå‡½æ•°è°ƒç”¨ï¼Œæˆ–æ˜¯æŸä¸ª JSX æ ‡ç­¾ã€æŸä¸ªç»„ä»¶çš„ propsï¼‰ï¼Œå³é”®é€‰æ‹©ã€ŒGo to Definitionã€ï¼ˆæˆ–è€…å…‰æ ‡é€‰ä¸­åæŒ‰ F12ï¼‰ï¼Œå°±å¯ä»¥è·³è½¬åˆ°å®ƒçš„ç±»å‹å®šä¹‰æ–‡ä»¶äº†ã€‚</p><p>å¦‚æœä½ æ›´ä¹ æƒ¯ä½¿ç”¨ VS Code ä¹‹å¤–çš„ç¼–è¾‘å™¨ï¼Œæˆ‘ç›¸ä¿¡æ—¶è‡³ä»Šæ—¥ï¼Œå®ƒä»¬åº”è¯¥ä¹Ÿéƒ½æ—©å°±å¯¹ TypeScript æä¾›äº†æ”¯æŒã€‚å…·ä½“æ“ä½œæˆ‘ä¸å¤ªç†Ÿæ‚‰ï¼Œä½ å¯ä»¥è‡ªå·±æ¢ç´¢ä¸‹ï¼ˆæˆ‘ä¸€ç›´ç”¨ VS Codeï¼Œå…¶å®ƒçš„ä¸å¤ªç†Ÿï¼‰ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªæ“ä½œå¯ä»¥ç›´æ¥æŠŠä½ å¸¦åˆ°ä½ æƒ³è¦çš„åœ°æ–¹ï¼Œä½†è€ƒè™‘åˆ°ç±»å‹æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œæœ‰æ—¶å€™ä¸€æ¬¡è·³è½¬å¯èƒ½ä¸å¤ªå¤Ÿï¼Œé‡åˆ°è¿™ç§æƒ…å†µï¼Œé‚£å°±éœ€è¦ä½ éšæœºåº”å˜ä¸€ä¸‹ï¼Œæ²¿ç€ç»§æ‰¿å…³ç³»å¤šè·³å‡ æ¬¡ï¼Œç›´åˆ°æ‰¾åˆ°ä½ æƒ³è¦çš„å†…å®¹ã€‚</p><p>å¯¹äºä¸ç†Ÿæ‚‰çš„ç±»å‹ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹æ³•å»å¯»æ‰¾ï¼Œæ…¢æ…¢ç†Ÿæ‚‰ä»¥åï¼Œä½ ä¼šå‘ç°ï¼Œä¸€äº›å¸¸è§çš„ç±»å‹è¿˜æ˜¯å¾ˆå¥½æ‰¾çš„ï¼Œç¨å¾®è”æƒ³ä¸€ä¸‹è‹±æ–‡çš„è¡¨è¾¾æ–¹å¼ï¼Œé…åˆè‡ªåŠ¨è¡¥å…¨çš„æç¤ºï¼Œä¸€èˆ¬éƒ½ä¸éš¾æ‰¾åˆ°ã€‚</p><p>ä¸ºäº†æ–¹ä¾¿åˆå­¦è€…ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç¨å¾®åˆ—ä¸¾ä¸€äº›å¸¸è§çš„ç±»å‹ï¼Œæ‰¾æ‰¾æ„Ÿè§‰ï¼š</p><h3>å¸¸è§ Types ä¹‹ DOM</h3><p>TypeScript è‡ªå¸¦äº†ä¸€äº›åŸºæœ¬çš„ç±»å‹å®šä¹‰ï¼ŒåŒ…æ‹¬ ECMAScript å’Œ DOM çš„ç±»å‹å®šä¹‰ï¼Œæ‰€æœ‰ä½ éœ€è¦çš„ç±»å‹éƒ½å¯ä»¥ä»è¿™é‡Œæ‰¾åˆ°ã€‚å¦‚æœä½ æƒ³åšä¸€äº›ã€Œçº¯ TypeScript å¼€å‘ã€çš„è¯ï¼Œæœ‰è¿™äº›å°±å¤Ÿäº†ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™å¼ æˆªå›¾ï¼Œå°±æ˜¯å¯¹ <code>&lt;div&gt;</code> æ ‡ç­¾çš„ç±»å‹å®šä¹‰ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ƒç»§æ‰¿äº†æ›´åŠ é€šç”¨çš„ <code>HTMLElement</code> ç±»å‹ï¼Œå¹¶ä¸”æ‰©å±•äº†ä¸€ä¸ªå³å°†è¢«åºŸå¼ƒçš„ <code>align</code> å±æ€§ï¼Œä»¥åŠä¸¤ç»„ <code>addEventListener</code> å’Œ <code>removeEventListener</code>ï¼Œæ³¨æ„è¿™é‡Œä½¿ç”¨äº†é‡è½½ã€‚</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-eb9fc6a85e4e54e27e336dc7f92fed47_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1127\" data-rawheight=\"777\" class=\"origin_image zh-lightbox-thumb\" width=\"1127\" data-original=\"https://pic4.zhimg.com/v2-eb9fc6a85e4e54e27e336dc7f92fed47_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1127&#39; height=&#39;777&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1127\" data-rawheight=\"777\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1127\" data-original=\"https://pic4.zhimg.com/v2-eb9fc6a85e4e54e27e336dc7f92fed47_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-eb9fc6a85e4e54e27e336dc7f92fed47_b.jpg\"/></figure><p>è¿™é‡Œçš„å‘½åä¹Ÿä¸æ˜¯éšä¾¿èµ·çš„ï¼Œéƒ½æ˜¯åœ¨ <a href=\"https://link.zhihu.com/?target=https%3A//developer.mozilla.org/en-US/docs/Web/API/HTMLDivElement\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">MDN</a> ä¸Šå¯ä»¥æŸ¥åˆ°çš„ã€‚</p><p>è¿˜æ˜¯ä»¥ <code>&lt;div&gt;</code> ä¸ºä¾‹ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“å®ƒç»§æ‰¿è‡ª <code>HTMLElement</code>ï¼Œå…¶å®å†å¾€ä¸Šï¼Œ<code>HTMLElement</code> ç»§æ‰¿è‡ª <code>Element</code>ï¼Œ<code>Element</code> åˆç»§æ‰¿è‡ª <code>Node</code>ï¼Œé¡ºç€è¿™æ¡è·¯ï¼Œä½ å¯ä»¥æŒ–æ˜å‡ºæ‰€æœ‰ HTML æ ‡ç­¾çš„ç±»å‹ã€‚</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ee4b30b40251609d0119621208e4c42f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1213\" data-rawheight=\"408\" class=\"origin_image zh-lightbox-thumb\" width=\"1213\" data-original=\"https://pic4.zhimg.com/v2-ee4b30b40251609d0119621208e4c42f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1213&#39; height=&#39;408&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1213\" data-rawheight=\"408\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1213\" data-original=\"https://pic4.zhimg.com/v2-ee4b30b40251609d0119621208e4c42f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ee4b30b40251609d0119621208e4c42f_b.jpg\"/></figure><p>å¯¹äºä¸€äº› DOM ç›¸å…³çš„å±æ€§ï¼Œæ¯”å¦‚ <code>onclick</code>ã€<code>onchange</code> ç­‰ï¼Œä½ éƒ½å¯ä»¥å¦‚æ³•ç‚®åˆ¶ï¼Œæ‰¾åˆ°å®ƒä»¬çš„å®šä¹‰ã€‚</p><h3>å¸¸è§ Types ä¹‹ React</h3><p>å…³äº TypeScript çš„é—®é¢˜ï¼Œæœ‰ä¸å°‘å…¶å®æ˜¯åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™é‡åˆ°çš„ï¼ŒReact å°±æ˜¯å…¶ä¸­æ¯”è¾ƒå…¸å‹çš„ä¸€ä¸ªã€‚</p><p>å…¶å®æ–¹æ³•éƒ½ä¸€æ ·ï¼Œåªä¸è¿‡ç›¸å…³çš„ç±»å‹å®šä¹‰ä¸åœ¨ TypeScript ä¸­ï¼Œè€Œæ˜¯åœ¨ <code>@types/react</code> ä¸­ã€‚</p><p>React çš„ç±»å‹å®šä¹‰çš„åç§°å…¶å®ä¹Ÿå¾ˆç›´è§‚ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„ <code>React.Component</code>ï¼Œåœ¨å®šä¹‰ Class ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ Props å’Œ State é¢„å…ˆè¿›è¡Œç±»å‹å®šä¹‰ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨å®ƒçš„ç±»å‹å®šä¹‰ä¸­ã€‚</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-1affc8e8174fb04cda4ecdf0d6266e0c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1106\" data-rawheight=\"1228\" class=\"origin_image zh-lightbox-thumb\" width=\"1106\" data-original=\"https://pic1.zhimg.com/v2-1affc8e8174fb04cda4ecdf0d6266e0c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1106&#39; height=&#39;1228&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1106\" data-rawheight=\"1228\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1106\" data-original=\"https://pic1.zhimg.com/v2-1affc8e8174fb04cda4ecdf0d6266e0c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-1affc8e8174fb04cda4ecdf0d6266e0c_b.jpg\"/></figure><p>å†æ¯”å¦‚ï¼Œå½“æˆ‘ä»¬åœ¨å†™ä¸€äº›ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šéœ€è¦å‘ä¸‹ä¼ é€’ <code>this.props.children</code>ï¼Œä½† <code>children</code> å¹¶æ²¡æœ‰è¢«è®¾ä¸ºé»˜è®¤å€¼ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰åˆ° props ä¸Šï¼Œé‚£ä¹ˆå®ƒçš„ç±»å‹åº”è¯¥æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>åˆ°ç±»å‹å®šä¹‰ä¸­æœä¸€ä¸‹å…³é”®å­— childrenï¼Œå¾ˆå¿«æˆ‘ä»¬å°±æ‰¾åˆ°äº†ä¸‹é¢çš„å®šä¹‰ï¼š</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-6882b5bdca0070a8e5248110a267776b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1093\" data-rawheight=\"641\" class=\"origin_image zh-lightbox-thumb\" width=\"1093\" data-original=\"https://pic4.zhimg.com/v2-6882b5bdca0070a8e5248110a267776b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1093&#39; height=&#39;641&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1093\" data-rawheight=\"641\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1093\" data-original=\"https://pic4.zhimg.com/v2-6882b5bdca0070a8e5248110a267776b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-6882b5bdca0070a8e5248110a267776b_b.jpg\"/></figure><p>æ‰€æœ‰ React ä¸­ JSX æ‰€ä»£è¡¨çš„å†…å®¹ï¼Œæ— è®ºæ˜¯ <code>render()</code> çš„è¿”å›ï¼Œè¿˜æ˜¯ <code>children</code>ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥å®šä¹‰ä¸ºä¸€ä¸ª <code>ReactNode</code>ã€‚é‚£è¿™ä¸ª <code>ReactNode</code> é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡å³é”®ç»§ç»­å¯»æ‰¾ï¼š</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-b5b12874598f590ed04575d55ef3afed_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1089\" data-rawheight=\"518\" class=\"origin_image zh-lightbox-thumb\" width=\"1089\" data-original=\"https://pic2.zhimg.com/v2-b5b12874598f590ed04575d55ef3afed_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1089&#39; height=&#39;518&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1089\" data-rawheight=\"518\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1089\" data-original=\"https://pic2.zhimg.com/v2-b5b12874598f590ed04575d55ef3afed_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-b5b12874598f590ed04575d55ef3afed_b.jpg\"/></figure><p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¸å…‰æ‰¾åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„ç±»å‹ï¼Œè¿˜é¡ºå¸¦æ˜ç™½äº†ä¸ºä»€ä¹ˆ <code>render()</code> å¯ä»¥è¿”å› booleanã€nullã€undefined è¡¨ç¤ºä¸æ¸²æŸ“ä»»ä½•å†…å®¹ã€‚</p><p>é‚£ä¹ˆäº‹ä»¶å‘¢ï¼Ÿå½“æˆ‘ä»¬ç»™ç»„ä»¶å®šä¹‰äº‹ä»¶å¤„ç†å‡½æ•°çš„æ—¶å€™ï¼Œä¹Ÿç»å¸¸ä¼šè¢«è¦æ±‚æŒ‡å®šç±»å‹ã€‚è¿˜æ˜¯è€åŠæ³•ï¼Œæ‰¾ä¸åˆ°å’±å°±æœï¼Œæ¯”å¦‚ <code>onClick</code> ä¸æ¸…æ¥šï¼Œé‚£æˆ‘ä»¬å°±ä»¥å®ƒä¸ºå…³é”®å­—å»æœï¼š</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4f5054a84bc7a46acf170256a8d939aa_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1000\" data-rawheight=\"903\" class=\"origin_image zh-lightbox-thumb\" width=\"1000\" data-original=\"https://pic3.zhimg.com/v2-4f5054a84bc7a46acf170256a8d939aa_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1000&#39; height=&#39;903&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1000\" data-rawheight=\"903\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1000\" data-original=\"https://pic3.zhimg.com/v2-4f5054a84bc7a46acf170256a8d939aa_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-4f5054a84bc7a46acf170256a8d939aa_b.jpg\"/></figure><p>æ®æ­¤æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªå« <code>MouseEventHandler</code> çš„å®šä¹‰ï¼Œè¿™åå­—ï¼Œå¤Ÿç›´ç™½å§ã€‚</p><p>å¥½äº†ï¼Œæˆ‘ä»¬æ‰¾åˆ°æƒ³è¦çš„äº†ã€‚ä¸è¿‡æ—¢ç„¶æ¥äº†ï¼Œä¸å¦‚ç»§ç»­çœ‹ä¸€ä¸‹ï¼Œçœ‹çœ‹è¿˜èƒ½å‘ç°ä»€ä¹ˆã€‚æˆ‘ä»¬å³é”® MouseEventHandler ç»§ç»­å¾€ä¸‹çœ‹ï¼š</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8fd6b9945c155874535f22f163f4672f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1016\" data-rawheight=\"896\" class=\"origin_image zh-lightbox-thumb\" width=\"1016\" data-original=\"https://pic4.zhimg.com/v2-8fd6b9945c155874535f22f163f4672f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1016&#39; height=&#39;896&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1016\" data-rawheight=\"896\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1016\" data-original=\"https://pic4.zhimg.com/v2-8fd6b9945c155874535f22f163f4672f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8fd6b9945c155874535f22f163f4672f_b.jpg\"/></figure><p>çœ‹åˆ°äº†å—ï¼Œæ‰€æœ‰çš„äº‹ä»¶å¤„ç†å‡½æ•°éƒ½æœ‰å¯¹åº”çš„å®šä¹‰ï¼Œæ¯ä¸ªéƒ½éœ€è¦ä¸€ä¸ªæ³›å‹å‚æ•°ï¼Œä¼ é€’äº†äº‹ä»¶çš„ç±»å‹ï¼Œåç§°ä¹ŸæŒºç›´ç™½çš„ã€‚</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-168c05ca3cfef0f61979b4b96a4f7600_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"844\" data-rawheight=\"906\" class=\"origin_image zh-lightbox-thumb\" width=\"844\" data-original=\"https://pic1.zhimg.com/v2-168c05ca3cfef0f61979b4b96a4f7600_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;844&#39; height=&#39;906&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"844\" data-rawheight=\"906\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"844\" data-original=\"https://pic1.zhimg.com/v2-168c05ca3cfef0f61979b4b96a4f7600_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-168c05ca3cfef0f61979b4b96a4f7600_b.jpg\"/></figure><p>Okï¼Œäº‹ä»¶çš„ç±»å‹ä¹Ÿè¢«æˆ‘ä»¬æŒ–å‡ºæ¥äº†ï¼Œä»¥åå¦‚æœéœ€è¦å•ç‹¬å®šä¹‰ä¸€ä¸ªäº‹ä»¶ç›¸å…³çš„ç±»å‹ï¼Œå°±å¯ä»¥ç›´æ¥ç”¨äº†ã€‚</p><p>ä»¥æ­¤ç±»æ¨ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆä¸œè¥¿çš„ç±»å‹ï¼Œéƒ½å¯ä»¥å»å®ƒä»¬å¯¹åº”çš„ <code>@types/xxx</code> é‡Œï¼ŒæŒ‰å…³é”®å­—æœï¼Œåªè¦ä½ çš„è‹±è¯­åˆ«å¤ªå·®ï¼Œå¾ˆå®¹æ˜“å°±èƒ½æ‰¾åˆ°ã€‚</p><h2>å¤šé‡ extends</h2><p>æˆ‘ä»¬çŸ¥é“ Interface æ˜¯å¯ä»¥å¤šç»§æ‰¿çš„ï¼Œextends åé¢å¯ä»¥è·Ÿå¤šä¸ªå…¶å®ƒ Interfaceï¼Œæˆ‘ä»¬ä¸èƒ½ä¿è¯è¢«ç»§æ‰¿çš„å¤šä¸ª Interface ä¸€å®šæ²¡æœ‰é‡å¤çš„å±æ€§ï¼Œé‚£ä¹ˆå½“å±æ€§é‡å¤ï¼Œä½†ç±»å‹å®šä¹‰ä¸åŒæ—¶ï¼Œæœ€ç»ˆçš„ç»“æœä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿ</p><p>åœ¨ TypeScript ä¸­ï¼ŒInterface ä¼šæŒ‰ç…§ä»å³å¾€å·¦çš„é¡ºåºå»åˆå¹¶å¤šä¸ªè¢«ç»§æ‰¿çš„ Interfaceï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒåå±æ€§ï¼Œå·¦è¾¹çš„ä¼šè¦†ç›–å³è¾¹çš„ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">interface A {\n  value?: string\n}\n\ninterface B {\n  value: string\n}\n\ninterface C {\n  value: number\n}\n\ninterface D extends A, B {}\n// value?: string\n\ninterface E extends B, C {}\n// value: string</code></pre></div><h2><code>obj[prop]</code> æ— æ³•è®¿é—®æ€ä¹ˆåŠ</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå®šä¹‰ä¸€äº›é›†åˆå‹çš„æ•°æ®ï¼Œä¾‹å¦‚å¯¹è±¡ã€æšä¸¾ç­‰ï¼Œä½†åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬æœªå¿…ä¼šç›´æ¥é€šè¿‡ <code>obj.prop</code> çš„å½¢å¼å»è°ƒç”¨ï¼Œå¯èƒ½ä¼šæ˜¯ä»¥ <code>obj[prop]</code> è¿™ç§åŠ¨æ€ç´¢å¼•çš„å½¢å¼å»è®¿é—®ï¼Œä½†é€šè¿‡åŠ¨æ€ç´¢å¼•çš„æ–¹å¼å°±æ— æ³•ç¡®å®šæœ€ç»ˆè®¿é—®çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå› æ­¤åœ¨ TypeScript ä¸­ï¼Œé»˜è®¤æ˜¯ä¸å…è®¸è¿™ç§æ“ä½œçš„ã€‚</p><p>ä½†è¿™åˆæ˜¯ä¸ªéå¸¸åˆç†ï¼Œè€Œä¸”éå¸¸å¸¸è§çš„åœºæ™¯ï¼Œæ€ä¹ˆåŠå‘¢ï¼ŸTypeScript å…è®¸ä¸ºç±»å‹æ·»åŠ ç´¢å¼•ï¼Œä»¥å®ç°è¿™ä¸€ç‚¹ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">interface Foo {\n  x: string,\n  y: number\n  [index: string]: string | number\n}</code></pre></div><p>è¿™ä¸ªæ–¹æ³•è™½ç„¶æœ‰æ•ˆï¼Œä½†æ¯æ¬¡éƒ½è¦æ‰‹åŠ¨ä¸ºç±»å‹åŠ ç´¢å¼•ï¼Œé‡å¤å¤šäº†ä¹ŸæŒºå¿ƒç´¯çš„ã€‚åŒ…æ‹¬åœ¨ä¸€äº›ã€Œé…ç½®å¯¹è±¡ã€ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³æ— æ³•ç¡®å®šæœ‰å“ªäº›ç±»å‹ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ›´åŠ é€šç”¨ã€æ›´åŠ ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•ã€‚</p><p>å½“ç„¶æœ‰ã€‚</p><p>å…¶å®åœ¨ TypeScript çš„å®˜æ–¹æ–‡æ¡£ä¸­å°±æœ‰æåˆ°è¿™ä¸ªæ–¹æ¡ˆï¼Œå®˜æ–¹ç®¡å®ƒå« OptionBagï¼Œå¤§æ¦‚å°±æ˜¯æŒ‡ configã€option ç­‰ç”¨äºæä¾›é…ç½®ä¿¡æ¯çš„è¿™ä¹ˆä¸€ç±»å‚æ•°ã€‚æˆ‘ä¸æ˜¯å¾ˆç¡®å®šè¿™åˆ°åº•æ˜¯ä¸ªå¸¸è§„çš„è‹±æ–‡å•è¯ï¼Œè¿˜æ˜¯ TypeScript ä¸­ç‰¹å®šçš„æœ¯è¯­ï¼ˆä¸ªäººæ„Ÿè§‰æ˜¯å‰è€…ï¼‰ï¼Œåæ­£å°±è¿™ä¹ˆä¸ªæ„æ€å§ã€‚</p><p>ç®€å•è¯´æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸‹é¢è¿™æ ·ä¸€ä¸ªç±»å‹ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">interface OptionBag {\n  [index: string]: any\n}</code></pre></div><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸é€šç”¨çš„ç»“æ„ï¼Œä»¥å­—ç¬¦ä¸²ä¸ºé”®ï¼Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼Œå¹¶ä¸”æ”¯æŒç´¢å¼• â€”â€” è¿™ä¸å°±æ˜¯ Object ä¹ˆã€‚</p><p>ä¹‹åæ‰€æœ‰éœ€è¦åŠ¨æ€ç´¢å¼•çš„ç»“æ„ï¼Œæˆ–æ˜¯ä½œä¸ºé…ç½®å¯¹è±¡çš„ç»“æ„ï¼Œéƒ½å¯ä»¥ç›´æ¥æŒ‡å®šä¸ºï¼Œæˆ–æ˜¯ç»§æ‰¿ <code>OptionBag</code>ã€‚è¿™ä¸ªæ–¹æ¡ˆä»¥ç‰ºç‰²ä¸€å®šçš„ç±»å‹æ£€æŸ¥ä¸ºä»£ä»·ï¼Œæ¢å–äº†æ“ä½œä¸Šçš„ä¾¿åˆ©ã€‚</p><p>ç†è®ºä¸Šè®²ï¼Œ<code>OptionBag</code> å¯ä»¥é€‚ç”¨äºæ‰€æœ‰ç±»ä¼¼å¯¹è±¡è¿™æ ·çš„ç»“æ„ï¼Œä½†ä¸å»ºè®®å„ä½çœŸå°±è¿™ä¹ˆåšã€‚è¿™ä¸ªæ–¹æ¡ˆåªèƒ½æ˜¯ç”¨åœ¨ä¸€äº›å¯¹ç±»å‹è¦æ±‚ä¸é‚£ä¹ˆä¸¥æ ¼ï¼Œæˆ–æ˜¯æ— æ³•é¢„çŸ¥ç±»å‹çš„åœºæ™¯ä¸­ï¼Œèƒ½å¤Ÿç¡®å®šçš„ç±»å‹è¿˜æ˜¯å°½å¯èƒ½åœ°å†™ä¸€ä¸‹ï¼Œå¦åˆ™å°±å¤±å»äº†ä½¿ç”¨ TypeScript æ„ä¹‰äº†ã€‚</p><h2>å°ç»“</h2><p>TypeScript ç¡®å®æ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œä½†ä¸–ä¸Šæ²¡æœ‰ç»å¯¹å®Œç¾çš„ä¸œè¥¿ï¼Œå®è·µè¿‡ç¨‹ä¸­æ€»ä¼šæœ‰é‚£ä¹ˆäº›é˜»ç¢å®Œæˆ‘ä»¬å‰è¿›çš„å‘ã€‚ä½†æ˜¯æ‰å‘é‡Œå¹¶ä¸å¯æ€•ï¼Œåªè¦æœ‰åŠæ³•èƒ½çˆ¬å‡ºæ¥ï¼Œé‚£å°±éƒ½ä¸å«äº‹å„¿ã€‚</p><p>åŸåˆ›ä¸æ˜“ï¼ŒåšæŒåŸåˆ›æ›´æ˜¯ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¤šå°‘èƒ½ç»™å¤§å®¶å¸¦æ¥ä¸€äº›æ”¶è·å§ã€‚</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2000&#39; height=&#39;400&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "TypeScript", 
                    "tagLink": "https://api.zhihu.com/topics/19766226"
                }, 
                {
                    "tag": "React", 
                    "tagLink": "https://api.zhihu.com/topics/20013159"
                }
            ], 
            "comments": [
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "è¦æ˜¯æˆ‘å½“åˆåˆšä¸Šæ‰‹æ—¶èƒ½çœ‹åˆ°è¿™æ–‡ç« å°±å¥½äº†[é£™æ³ªç¬‘]", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "fhfuih", 
                    "userLink": "https://www.zhihu.com/people/c0e399b35474e84b6d636cc5e331b9e2", 
                    "content": "å†™çš„å¾ˆå¥½ï¼æ­£å¥½è¿™ä¸¤å¤©åˆšåˆšæ¥è§¦tsä»£ç ï¼Œæœ‰å¾ˆå¤šä¸€èˆ¬åˆ«äººè®²ä¸åˆ°çš„ç»†èŠ‚éƒ½åœ¨è¿™é‡Œè§£ç­”äº†ï¼", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "ä½˜ç‰é", 
                    "userLink": "https://www.zhihu.com/people/0fee029ddb80365f994a2ea6ff47de17", 
                    "content": "Reactéƒ¨åˆ†å†™çš„å¥½ã€‚", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "ç§è§‰å¾—ä¾‹å­ä¸­çš„ convert å‡½æ•°ä¸èƒ½è‡ªè§£é‡Šçš„åŸå› åªæ˜¯åå­—èµ·çš„å¤ªçƒ‚ [å¾®ç¬‘]  applyStarMask å¤šå¥½", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>æˆ‘åœ¨æ–‡ä¸­ç‰¹æ„è§£é‡Šäº†ä¸€éï¼Œç»“æœä½ è¿˜æ˜¯é’»äº†è¿™ä¸ªç‰›è§’å°–ï¼Œå“ˆå“ˆå“ˆ</p><a class=\"comment_sticker\" href=\"https://pic2.zhimg.com/v2-e213ddb29e5a2adb54d6343d5dea27d1.gif\" data-width=\"\" data-height=\"\">[æ‘Šæ‰‹]</a>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "é‚£çœŸçš„ä¸¾å¾—å‡ºè¿™æ ·çš„ä¾‹å­å—ï¼Ÿç±»æˆå‘˜å’Œç±»åæœ¬èº«å½¢æˆçš„è¯­ä¹‰ä¸ºä»€ä¹ˆä¼šå·®å‘¢ï¼Ÿè¯´å®è¯ï¼Œè¿™ä¸€ç‚¹çœŸçš„å¤ªå¼±ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼ŒTypeScriptä¸‹å¥½çš„èµ·åä¸‹ä¸ä»…å°‘äº†å¤ªå¤š jsDocçš„éœ€è¦ï¼Œæ³¨é‡Šçš„é‡éƒ½ä¼šå¤§å¤§å‡å°‘ã€‚", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "åˆ˜æ´¥ç®", 
                    "userLink": "https://www.zhihu.com/people/b939059cecfb337f68aea732d7f446a5", 
                    "content": "æˆ‘è§‰å¾—tsä¸æ˜¯ä¸é€‚åˆå°é¡¹ç›®ï¼Œè€Œæ˜¯ä¸é€‚åˆä¸´æ—¶é¡¹ç›®ï¼Œå“ªæ€•æ˜¯å…¬å¸å®˜ç½‘è¿™ç§è§„æ¨¡ä¸å¤§çš„é¡¹ç›®ï¼Œåªè¦å®ƒéœ€è¦è¢«é•¿æœŸç»´æŠ¤ï¼Œé‚£ä¹ˆç”¨tså°±æ˜¯éå¸¸å€¼å¾—çš„ã€‚ä¸å€¼å¾—ç”¨tsçš„æ˜¯ç±»ä¼¼ç”µå•†æ´»åŠ¨é¡µé¢è¿™ç§ä¸Šçº¿å‡ å¤©å°±ä¸‹è€Œä¸”ä»¥åå†ä¹Ÿä¸ä¼šç»´æŠ¤çš„é¡µé¢ã€‚", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>é¡¹ç›®å‘¨æœŸä¹Ÿå¯ä»¥ç®—ä¸€ä¸ªè€ƒé‡çš„è§’åº¦ï¼Œã€Œéœ€è¦é•¿æœŸç»´æŠ¤ã€å¯ä»¥ç†è§£ä¸ºã€Œå¤æ‚åº¦æŒç»­ä¸Šå‡ã€ï¼Œç´¯ç§¯åˆ°ä¸€å®šç¨‹åº¦å°±ä¼šå½¢æˆè§„æ¨¡ä¸Šçš„æå‡ã€‚ç»ˆç©¶è¿˜æ˜¯æˆæœ¬ä¸Šçš„è€ƒé‡ã€‚</p>", 
                            "likes": 0, 
                            "replyToAuthor": "åˆ˜æ´¥ç®"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/67183229", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 37, 
            "title": "é‡æ–° Think in Hooks", 
            "content": "<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š</p><a href=\"https://link.zhihu.com/?target=https%3A//tonghuashuo.github.io/blog/2019/05/27/rethink-in-hooks\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-f9fcd719dcab55af4a1ad3d3cfbe0585_180x120.jpg\" data-image-width=\"1200\" data-image-height=\"675\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">é‡æ–° Think in Hooks | åšå®¢</a><h2>ä¸ºä»€ä¹ˆè¦é‡æ–°æ¥è¿‡ï¼Ÿ</h2><p>æˆ‘ä¹‹å‰å†™è¿‡ <a href=\"https://zhuanlan.zhihu.com/blog/2019/02/15/how-to-think-in-hooks\" class=\"internal\">ä¸€ç¯‡åšå®¢</a>ï¼Œä»‹ç»äº† Class ç»„ä»¶çš„å„ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°åœ¨ Hooks ä¸­å¯¹åº”çš„æ–¹æ¡ˆã€‚é‚£æ—¶ Hooks åˆšåˆšå‘å¸ƒï¼Œå¼€å‘è€…æœ€å…³å¿ƒçš„è«è¿‡äºä»£ç çš„è¿ç§»é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æ€ä¹ˆæŠŠç°æœ‰çš„ Class ç»„ä»¶æ”¹é€ æˆ Hooks çš„æ–¹å¼ã€‚</p><p>å°½ç®¡è¿™ç§æ–¹å¼éå¸¸çš„ç›´è§‚æœ‰æ•ˆï¼Œä½†å¾ˆå¿«æˆ‘ä»¬å°±å‘ç°ï¼Œäº‹æƒ…ä¼¼ä¹æ²¡é‚£ä¹ˆç®€å•ã€‚å•çº¯ç”¨è¿™ä¸ªæ€ç»´æ¥è€ƒè™‘é—®é¢˜ï¼Œå¹¶ä¸èƒ½å¾ˆå¥½åœ°è§£é‡Š Hooks çš„ä¸€äº›è¡Œä¸ºï¼Œæ¯”å¦‚ <code>useEffect</code> ä¸­çš„å˜é‡æœ‰æ—¶å€™æ— æ³•è·å–æœ€æ–°çš„å€¼ã€å‘½ä»¤å¼çš„å›è°ƒå‡½æ•°ä¹Ÿä¸æ€»æ˜¯æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸå·¥ä½œï¼Œ<code>useEffect</code> çš„ä¾èµ–æ•°ç»„å¥½åƒæ€»æ˜¯ç¼ºç‚¹ä»€ä¹ˆã€‚</p><p>åœ¨äº²è‡ªè¸©äº† 2 ä¸ªå¤šæœˆçš„å‘ï¼Œå‚ä¸äº†ä¸€äº› <a href=\"https://link.zhihu.com/?target=https%3A//github.com/reactjs/zh-hans.reactjs.org/pull/121\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">React å®˜ç½‘çš„ç¿»è¯‘å·¥ä½œ</a>ï¼Œæ‹œè¯»äº† <a href=\"https://link.zhihu.com/?target=https%3A//overreacted.io/a-complete-guide-to-useeffect\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å‡ ç¯‡</a> <a href=\"https://link.zhihu.com/?target=https%3A//overreacted.io/react-as-a-ui-runtime\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">éå¸¸å¥½çš„</a> <a href=\"https://link.zhihu.com/?target=https%3A//overreacted.io/making-setinterval-declarative-with-react-hooks\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">åšå®¢</a> ä¹‹åï¼Œæˆ‘å¯¹ã€Œå¦‚ä½• Think in Hooksã€æœ‰äº†æ–°çš„è®¤è¯†ã€‚</p><p>å› æ­¤è¿™ç¯‡åšå®¢ï¼Œæˆ‘ä»¬æ¥ã€Œé‡æ–° Think in Hooksã€ã€‚</p><h2>å½“æˆ‘ä»¬è®¨è®º Hooks æ—¶ï¼Œæˆ‘ä»¬åˆ°åº•åœ¨è®¨è®ºä»€ä¹ˆï¼Ÿ</h2><p>è¦ç†è§£ Hooksï¼Œæˆ‘ä»¬å¾—å…ˆå›åˆ° Hooks çš„æœ¬è´¨ â€”â€” ä¸€ç§é€»è¾‘å¤ç”¨çš„æ–¹å¼ã€‚</p><p>Hooks å¹¶ä¸æ˜¯æ–°çš„ç»„ä»¶ç±»å‹ï¼Œå½“æˆ‘ä»¬è®¨è®º Hooks æ—¶ï¼Œæˆ‘ä»¬è®¨è®ºçš„å…¶å®æ˜¯å‡½æ•°ç»„ä»¶ â€”â€” å°±æ˜¯é‚£ç§åªæ˜¯æ ¹æ® props è¿”å›ç›¸åº”çš„ JSX çš„æ¸²æŸ“å‡½æ•°ã€‚Hooks çš„å‡ºç°è®©å‡½æ•°ç»„ä»¶å¯ä»¥å’Œ Class ç»„ä»¶ä¸€æ ·å¯ä»¥æ‹¥æœ‰ stateï¼ˆæ˜¯å¯ä»¥ï¼Œä¸æ˜¯å¿…é¡»ï¼‰ã€‚å› æ­¤ç¡®åˆ‡çš„è¯´ï¼Œæˆ‘ä»¬æ˜¯åœ¨è®¨è®ºä½¿ç”¨äº† Hooks çš„å‡½æ•°ç»„ä»¶ã€‚</p><p>ä½†æ˜¯ã€Œä½¿ç”¨äº† Hooks çš„å‡½æ•°ç»„ä»¶ã€è¿™ä¸ªè¯å¤ªé•¿äº†ï¼Œè€Œä¸‹æ–‡æˆ‘åˆå°†ç»å¸¸æåˆ°è¿™ä¸ªè¯ï¼Œæ‰€ä»¥åœ¨åé¢çš„æ–‡å­—ä¸­ï¼Œæˆ‘å°†ç®€å•ç”¨ Hooks æ¥è¡¨ç¤ºè¿™ä¸ªæ¦‚å¿µã€‚</p><h2>å¿˜æ‰ä½ æ‰€å­¦</h2><p>å½“æˆ‘ä»¬åœ¨ä½¿ç”¨ Class ç»„ä»¶æ—¶ï¼Œæ¯å½“ props æˆ– state æœ‰æ›´æ–°ï¼Œæ‰€æœ‰çš„ä¿®æ”¹éƒ½å‘ç”Ÿåœ¨ React ç»„ä»¶å®ä¾‹ä¸Šï¼Œå°±åƒä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ä¸€æ ·ã€‚è¿™ä¸ªé€»è¾‘æ”¾åˆ° Hooks é‡Œæ˜¯è¡Œä¸é€šçš„ï¼Œå‡½æ•°ç»„ä»¶çš„æ¸²æŸ“åªæ˜¯ç®€å•çš„å‡½æ•°è°ƒç”¨ï¼Œä¸åŠ  <code>new</code> çš„å‡½æ•°è°ƒç”¨æ˜¯ä¸å­˜åœ¨æ‰€è°“ç”Ÿæˆå®ä¾‹çš„ã€‚è¿™ä¹Ÿæ˜¯å¾ˆå¤šé—®é¢˜äº§ç”Ÿçš„æ ¹æºã€‚</p><p>æ‰€ä»¥è¦æƒ³çœŸæ­£ Think in Hooksï¼Œé¦–å…ˆä½ å¾—å¿˜è®°å¦‚ä½• Think in Classï¼Œæ”¹ä¸º Think in Functionsã€‚</p><h2>ä¸ºä»€ä¹ˆæˆ‘çš„ state ä¸æ›´æ–°ï¼Ÿ</h2><p>Hooks çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œå°±åƒæ˜¯æŠŠ Class ç»„ä»¶çš„ <code>render()</code> å‡½æ•°å•ç‹¬æå–å‡ºæ¥ä¸€æ ·ã€‚</p><p><code>render()</code> å‡½æ•°åœ¨è¿è¡Œæ—¶ä¼šæ ¹æ®é‚£ä¸€æ¬¡çš„ props å’Œ state å»æ¸²æŸ“ã€‚å¦‚æœåœ¨ <code>render()</code> å‡½æ•°è¿è¡ŒæœŸé—´ props æˆ–æ˜¯ state å†æ¬¡å‘ç”Ÿå˜åŒ–ï¼Œå¹¶ä¸ä¼šå½±å“è¿™ä¸€æ¬¡çš„æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šè§¦å‘æ–°ä¸€è½®çš„æ¸²æŸ“ï¼Œ<code>render()</code> å†ä¸€æ¬¡è¢«è°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸€æ¬¡ä¼ å…¥çš„æ˜¯å˜åŒ–åçš„ props å’Œ stateã€‚</p><p>åˆ°è¿™é‡Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼š</p><blockquote><code>render()</code> å‡½æ•°ä¸­ç”¨åˆ°çš„ props å’Œ state åœ¨å‡½æ•°æ‰§è¡Œçš„ä¸€å¼€å§‹å°±å·²ç»è¢«ç¡®å®šäº†ã€‚<br/> </blockquote><p>å¥½äº†ï¼Œç†è®ºè¯´å¾—å¤Ÿå¤šäº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä»£ç å§ã€‚å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªç»„ä»¶ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kd\">function</span> <span class=\"nx\">Counter</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"nx\">count</span><span class=\"p\">,</span> <span class=\"nx\">setCount</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nx\">useState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n  <span class=\"kd\">function</span> <span class=\"nx\">onClick</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setTimeout</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"nx\">setCount</span><span class=\"p\">(</span><span class=\"nx\">count</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n    <span class=\"p\">},</span> <span class=\"mi\">2000</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"nx\">p</span> <span class=\"nx\">onClick</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"nx\">onClick</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"nx\">You</span> <span class=\"nx\">clicked</span> <span class=\"p\">{</span><span class=\"nx\">count</span><span class=\"p\">}</span> <span class=\"nx\">times</span><span class=\"o\">&lt;</span><span class=\"err\">/p&gt;</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>ç­‰ä»·çš„ Class ç»„ä»¶å®ç°å¯ä»¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">class</span> <span class=\"nx\">Counter</span> <span class=\"k\">extends</span> <span class=\"nx\">Component</span> <span class=\"p\">{</span>\n  <span class=\"nx\">state</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n    <span class=\"nx\">count</span><span class=\"o\">:</span> <span class=\"mi\">0</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nx\">onClick</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setTimeout</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">setState</span><span class=\"p\">({</span>\n        <span class=\"nx\">count</span><span class=\"o\">:</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">state</span><span class=\"p\">.</span><span class=\"nx\">count</span> <span class=\"o\">+</span> <span class=\"mi\">1</span>\n      <span class=\"p\">})</span>\n    <span class=\"p\">},</span> <span class=\"mi\">2000</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"nx\">render</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"nx\">p</span> <span class=\"nx\">onClick</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">onClick</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"nx\">You</span> <span class=\"nx\">clicked</span> <span class=\"p\">{</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">state</span><span class=\"p\">.</span><span class=\"nx\">count</span><span class=\"p\">}</span> <span class=\"nx\">times</span><span class=\"o\">&lt;</span><span class=\"err\">/p&gt;</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>å¯¹æ¯”ä¸€ä¸‹ä¸¤æ®µå‡½æ•°ï¼Œå¦‚æœæŠŠ Class çš„è¯­æ³•ä¸­çš„æ‰€æœ‰ä¸œè¥¿å…¨éƒ¨å¡åˆ° <code>render()</code> å‡½æ•°é‡Œï¼Œç„¶åæŠŠ <code>render()</code> å‡½æ•°å•ç‹¬æ‹å‡ºæ¥ï¼Œç»™å˜é‡å’Œå‡½æ•°æ¢ä¸ªåå­— â€”â€” æ­å–œä½ ï¼Œä½ å¾—åˆ°äº†ä¸€ä¸ªç­‰æ•ˆçš„ Hooks ï¼</p><p>å¼€ç©ç¬‘çš„ï¼Œä½†è¿™çœŸçš„å¾ˆåƒå¯¹ä¸å¯¹ã€‚</p><p>ç°åœ¨è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœæˆ‘åœ¨ 2 ç§’å†…ç‚¹å‡»ç»„ä»¶ 3 æ¬¡ï¼Œé‚£ä¹ˆåˆ°ç¬¬ 5 ç§’çš„æ—¶å€™ï¼Œç»„ä»¶ä¼šæ˜¾ç¤ºä»€ä¹ˆï¼Ÿ</p><p>åœ¨ç±»ç»„ä»¶çš„å®ç°ä¸­ï¼Œç»“æœæ˜¯ 3ï¼Œå› ä¸ºè§¦å‘äº† 3 æ¬¡æ›´æ–°ï¼Œæ¯æ¬¡éƒ½åœ¨åŸæœ‰çš„åŸºç¡€ä¸ŠåŠ  1ã€‚</p><p>ä½†åœ¨ Hooks çš„å®ç°ä¸­ï¼Œç»“æœæ„å¤–åœ°å˜æˆäº† 1ã€‚å¾ˆå¥‡æ€ªå¯¹ä¸å¯¹ï¼Œæ˜æ˜æ˜¯ä¸€æ ·çš„é€»è¾‘ï¼Œä¸ºä»€ä¹ˆç»“æœä¸ä¸€æ ·ï¼Ÿï¼ˆæˆ‘å‘ä½ ä¿è¯è¿™è·Ÿé—­åŒ…æ²¡æœ‰å…³ç³»ï¼‰</p><p>å¦‚æœä½ åœ¨ <code>onClick</code> å‡½æ•°ä¸­ <code>console.log</code> ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç°ç‚¹å‡»äº‹ä»¶ç¡®å®è¢«è§¦å‘äº† 3 æ¬¡ï¼Œä½†æ˜¯ 3 æ¬¡ <code>count</code> çš„å€¼æ˜¯ä¸€æ ·çš„ã€‚</p><p>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿ</p><p>è¿˜è®°å¾—æˆ‘ä»¬å‰é¢çš„ç»“è®ºå—ï¼Ÿã€Œ<code>render()</code> å‡½æ•°ä¸­ç”¨åˆ°çš„ props å’Œ state åœ¨å‡½æ•°æ‰§è¡Œçš„ä¸€å¼€å§‹å°±å·²ç»è¢«ç¡®å®šäº†ã€ã€‚ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Hooks çš„ä»£ç ä¸­æ‰€æœ‰ç”¨åˆ°çš„ props å’Œ state ç›´æ¥æ›¿æ¢æˆé‚£ä¸€æ¬¡çš„å–å€¼ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"c1\">// ç¬¬ä¸€æ¬¡æ¸²æŸ“\n</span><span class=\"c1\"></span><span class=\"kd\">function</span> <span class=\"nx\">Counter</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// è¿™é‡Œæ˜¯å¯¹ useState çš„ç­‰ä»·æ›¿æ¢\n</span><span class=\"c1\"></span>  <span class=\"k\">const</span> <span class=\"nx\">count</span> <span class=\"o\">=</span> <span class=\"mi\">0</span> <span class=\"c1\">// highlight-line\n</span><span class=\"c1\"></span>  <span class=\"k\">const</span> <span class=\"nx\">setCount</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">val</span><span class=\"p\">)</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span> <span class=\"p\">...</span> <span class=\"p\">}</span>\n\n  <span class=\"kd\">function</span> <span class=\"nx\">onClick</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setTimeout</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"nx\">setCount</span><span class=\"p\">(</span><span class=\"mi\">0</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"c1\">// highlight-line\n</span><span class=\"c1\"></span>    <span class=\"p\">},</span> <span class=\"mi\">2000</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"nx\">p</span> <span class=\"nx\">onClick</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"nx\">onClick</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"nx\">You</span> <span class=\"nx\">clicked</span> <span class=\"mi\">0</span> <span class=\"nx\">times</span><span class=\"o\">&lt;</span><span class=\"sr\">/p&gt; /</span><span class=\"o\">/</span> <span class=\"nx\">highlight</span><span class=\"o\">-</span><span class=\"nx\">line</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>æ³¨æ„åˆ°ç¬¬ 9 è¡Œçš„å˜åŒ–äº†ä¹ˆï¼Ÿè¿™å°±æ˜¯ä¸ºä»€ä¹ˆã€‚åœ¨è¿™ 2 ç§’é’Ÿä¹‹å†…ï¼Œæ— è®ºç‚¹å‡»å¤šå°‘æ¬¡ï¼Œæˆ‘ä»¬éƒ½æ˜¯åœ¨ç»™ç»„ä»¶ä¸‹è¾¾åŒæ ·çš„æŒ‡ä»¤ï¼š2 ç§’é’ŸåæŠŠ <code>count</code> è®¾ç½®ä¸º 1ã€‚2 ç§’ä¹‹åç»„ä»¶æˆ–è®¸ä¼šè¢«æ›´æ–°å¤šæ¬¡ï¼Œä½†ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚<code>onClick</code> å‡½æ•°ä¸­ <code>count</code> çš„å€¼åœ¨ä¸€å¼€å§‹å°±å·²ç»è¢«ç¡®å®šäº†ã€‚</p><p>é‚£å¦‚æœæˆ‘æƒ³å®ç° Class ç‰ˆæœ¬çš„é‚£ç§æ•ˆæœè¦æ€ä¹ˆåŠï¼Ÿå¯ä»¥é€šè¿‡ç»™ <code>setCount()</code> ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥è§£å†³ï¼ˆå¦‚æœå¯ä»¥çš„è¯ï¼Œæˆ‘æ¨èåœ¨æ›´æ–° state æ—¶å°½é‡é‡‡ç”¨è¿™ç§å†™æ³•ï¼ŒåŸå› åé¢ä¼šè®²åˆ°ï¼‰ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kd\">function</span> <span class=\"nx\">Counter</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"nx\">count</span><span class=\"p\">,</span> <span class=\"nx\">setCount</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nx\">useState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n  <span class=\"kd\">function</span> <span class=\"nx\">onClick</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setTimeout</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"nx\">setCount</span><span class=\"p\">(</span><span class=\"nx\">c</span> <span class=\"p\">=&gt;</span> <span class=\"nx\">c</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"c1\">// highlight-line\n</span><span class=\"c1\"></span>    <span class=\"p\">},</span> <span class=\"mi\">2000</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"nx\">p</span> <span class=\"nx\">onClick</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"nx\">onClick</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"nx\">You</span> <span class=\"nx\">clicked</span> <span class=\"p\">{</span><span class=\"nx\">count</span><span class=\"p\">}</span> <span class=\"nx\">times</span><span class=\"o\">&lt;</span><span class=\"err\">/p&gt;</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>è¿™é‡Œè¡¨ç¤ºä¸ç®¡ count ç°åœ¨çš„å€¼æ˜¯å¤šå°‘ï¼Œå¾€ä¸ŠåŠ ä¸€å°±å¥½äº†ã€‚Class ç»„ä»¶ä¸­çš„ <code>setState()</code> å‡½æ•°ä¹Ÿæœ‰åŒæ ·çš„å†™æ³•ï¼Œè™½ç„¶å®ƒä¿©çš„ç›®çš„å¹¶ä¸ç›¸åŒã€‚</p><h2>useEffect çš„ä¾èµ–æ•°ç»„åˆ°åº•åº”è¯¥æ€ä¹ˆç”¨</h2><p>è¿™å¯èƒ½æ˜¯åˆšæ¥è§¦ Hooks æ—¶æœ€è®©äººå¤´ç–¼çš„ä¸€ä¸ªé—®é¢˜ï¼Œç›¸ä¿¡æ¯ä¸ªäººéƒ½å¯¹ã€Œä¾èµ–æ•°ç»„é‡Œçš„å†…å®¹ä¼šå†³å®š Effect æ˜¯å¦ä¼šé‡æ–°æ‰§è¡Œã€è¿™ä¸€ç‚¹å°è±¡æ·±åˆ»ï¼Œç»™äººæ„Ÿè§‰è¿™å°±æ˜¯ <code>componentDidUpdate()</code> çš„ç­‰æ•ˆå®ç°ï¼ŒæŒ‰ç…§æˆ‘ä»¬å¯¹ Class ç»„ä»¶çš„è®¤çŸ¥ï¼Œåªè¦ä¾èµ–æ•°ç»„é‡Œçš„å†…å®¹ä¸å˜ï¼ŒEffect å°±ä¸ä¼šé‡æ–°æ‰§è¡Œï¼›å¦‚æœæŸä¸ªå˜é‡ä¸å‚ä¸æ¯”å¯¹çš„è¿‡ç¨‹ï¼Œå°±ä¸éœ€è¦å‡ºç°åœ¨ä¾èµ–æ•°ç»„ä¸­ã€‚ç„¶è€Œä¾èµ–æ•°ç»„å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡çš„è¿™ä¹ˆç®€å•ã€‚</p><p>ä¾èµ–æ•°ç»„çœŸæ­£çš„å«ä¹‰ï¼Œæ˜¯ã€Œè¿™ä¸ª Effect å¼•ç”¨äº†å“ªäº›å¤–éƒ¨å˜é‡ã€ã€‚ä¸ç®¡å®ƒæ˜¯å¦å‚ä¸æ¯”å¯¹çš„è¿‡ç¨‹ï¼Œåªè¦ Effect ä¸­å¼•ç”¨äº†ï¼ˆä¹Ÿå°±æ˜¯ Effect ä¾èµ–äº†è¿™ä¸ªå˜é‡ï¼‰ï¼Œå°±å¿…é¡»å‡ºç°åœ¨ä¾èµ–æ•°ç»„ä¸­ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p><p>åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦å®ç°ï¼š<code>foo</code> æˆ– <code>bar</code> åœ¨è¢«ç‚¹å‡»æ—¶è‡ªèº«åŠ ä¸€ï¼Œå…¶ä¸­ä»»ä½•ä¸€ä¸ªçš„å˜åŒ–éƒ½ä¼šè§¦å‘ <code>total</code> ä¹ŸåŠ ä¸€ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ª Effect åœ¨æ¯ç§’æ‰“å° <code>total</code> çš„å€¼ã€‚ç”±äºæˆ‘ä»¬åªéœ€è¦åœ¨ç»„ä»¶æŒ‚è½½æ—¶å¯ç”¨ä¸€ä¸‹è®¡æ—¶å™¨å°±å¥½ï¼Œå› æ­¤æˆ‘ä»¬æŠŠä¾èµ–æ•°ç»„ç•™ç©ºã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span> <span class=\"nx\">App</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">props</span><span class=\"p\">)</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"nx\">total</span><span class=\"p\">,</span> <span class=\"nx\">setTotal</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nx\">useState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n  <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"nx\">foo</span><span class=\"p\">,</span> <span class=\"nx\">setFoo</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nx\">useState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n  <span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"nx\">bar</span><span class=\"p\">,</span> <span class=\"nx\">setBar</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nx\">useState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n  <span class=\"nx\">useEffect</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">total</span><span class=\"p\">)</span>\n    <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n  <span class=\"p\">},</span> <span class=\"p\">[])</span>\n    \n  <span class=\"kd\">function</span> <span class=\"nx\">updateTotal</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setTotal</span><span class=\"p\">(</span><span class=\"nx\">t</span> <span class=\"p\">=&gt;</span> <span class=\"nx\">t</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n   \n  <span class=\"kd\">function</span> <span class=\"nx\">addFoo</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setFoo</span><span class=\"p\">(</span><span class=\"nx\">f</span> <span class=\"p\">=&gt;</span> <span class=\"nx\">f</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n    <span class=\"nx\">updateTotal</span><span class=\"p\">()</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"kd\">function</span> <span class=\"nx\">addBar</span> <span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setBar</span><span class=\"p\">(</span><span class=\"nx\">b</span> <span class=\"p\">=&gt;</span> <span class=\"nx\">b</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n    <span class=\"nx\">updateTotal</span><span class=\"p\">()</span>\n  <span class=\"p\">}</span>\n\n  <span class=\"k\">return</span> <span class=\"o\">&lt;&gt;</span>\n    <span class=\"o\">&lt;</span><span class=\"nx\">button</span> <span class=\"nx\">onClick</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"nx\">addFoo</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"nx\">foo</span><span class=\"p\">}</span><span class=\"o\">&lt;</span><span class=\"err\">/button&gt;</span>\n    <span class=\"o\">+</span>\n    <span class=\"o\">&lt;</span><span class=\"nx\">button</span> <span class=\"nx\">onClick</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"nx\">addBar</span><span class=\"p\">}</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"nx\">bar</span><span class=\"p\">}</span><span class=\"o\">&lt;</span><span class=\"err\">/button&gt;</span>\n    <span class=\"o\">=</span>\n    <span class=\"o\">&lt;</span><span class=\"nx\">span</span><span class=\"o\">&gt;</span><span class=\"p\">{</span><span class=\"nx\">total</span><span class=\"p\">}</span><span class=\"o\">&lt;</span><span class=\"err\">/span&gt;</span>\n  <span class=\"o\">&lt;</span><span class=\"err\">/&gt;</span>\n<span class=\"p\">}</span>\n</code></pre></div><p><br/>è¿™ä¸ª Effect å¼•ç”¨äº† <code>total</code> è¿™ä¸ªå˜é‡ï¼Œä½†æ˜¯ <code>total</code> å¹¶æ²¡æœ‰å‚ä¸ã€Œæ˜¯å¦è¦æ‰§è¡Œè¿™ä¸ª Effectã€çš„å†³ç­–ã€‚æŒ‰ç…§æˆ‘ä»¬ä¹‹å‰å¯¹äº Class ç»„ä»¶çš„ç†è§£ï¼Œ<code>total</code> ä¸éœ€è¦å‡ºç°åœ¨ä¾èµ–æ•°ç»„ä¸­ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥æ‰§è¡Œä¸€ä¸‹è¿™æ®µä»£ç ã€‚</p><p> ç‚¹å‡»æŒ‰é’®ï¼Œ<code>foo</code> å’Œ <code>bar</code> å¦‚æˆ‘ä»¬é¢„æœŸçš„é‚£æ ·è‡ªå¢äº†ï¼Œé¡µé¢ä¸Š <code>total</code> ä¹Ÿæ˜¾ç¤ºäº†æœ€æ–°çš„å€¼ã€‚ç„¶è€Œæ§åˆ¶å°æ‰“å°å‡ºæ¥çš„ <code>total</code> å´å§‹ç»ˆä¸º 0ã€‚</p><p> ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ</p><p> å¦‚æˆ‘ä»¬ä¸Šä¸€èŠ‚æ‰€è¯´çš„ï¼Œã€Œ<code>render()</code> å‡½æ•°ä¸­ç”¨åˆ°çš„ props å’Œ state åœ¨å‡½æ•°æ‰§è¡Œçš„ä¸€å¼€å§‹å°±å·²ç»è¢«ç¡®å®šäº†ã€ï¼ŒEffect ä¹Ÿæ˜¯ render å‡½æ•°çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤åŒæ ·é€‚ç”¨è¿™æ¡è§„åˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸¦å…¥å˜é‡å€¼çœ‹ä¸€ä¸‹ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"c1\">// åˆå§‹åŒ–æ—¶\n</span><span class=\"c1\"></span><span class=\"nx\">useEffect</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n  <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n<span class=\"p\">},</span> <span class=\"p\">[])</span>\n\n<span class=\"c1\">// ç‚¹å‡» foo\n</span><span class=\"c1\"></span><span class=\"nx\">useEffect</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n  <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n<span class=\"p\">},</span> <span class=\"p\">[])</span>\n\n<span class=\"c1\">// å†ç‚¹å‡» bar\n</span><span class=\"c1\"></span><span class=\"nx\">useEffect</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n  <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n<span class=\"p\">},</span> <span class=\"p\">[])</span> \n</code></pre></div><p>ç”±äº <code>total</code> å¹¶æ²¡æœ‰åœ¨ä¾èµ–æ•°ç»„ä¸­ç”³æ˜ï¼Œå› æ­¤ <code>total</code> çš„æ›´æ–°ä¸ä¼šè§¦å‘ Effect é‡æ–°æ‰§è¡Œï¼Œä¹Ÿå°±ä¸ä¼šå»è·å–å®ƒçš„æœ€æ–°å€¼ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½å¼•ç”¨äº†ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶å€™çš„å€¼ã€‚</p><p> è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ <code>total</code> åŠ å…¥ä¾èµ–æ•°ç»„ï¼Œå‘Šè¯‰ Effect å½“ <code>total</code> æ›´æ–°æ—¶é‡æ–°æ‰§è¡Œ Effectï¼Œè¿™æ ·ä¾èµ– Effect å°±èƒ½åœ¨é‡æ–°æ‰§è¡Œæ—¶è·å–åˆ° <code>total</code> çš„æœ€æ–°å€¼äº†ã€‚åŒæ—¶æ³¨æ„ï¼Œç”±äºæ¯æ¬¡ <code>total</code> æ”¹å˜ä¼šå¼•èµ· Effect çš„é‡æ–°æ‰§è¡Œï¼Œå› æ­¤ <code>setInterval()</code> ä¹Ÿä¼šé‡å¤æ‰§è¡Œï¼Œåˆ›å»ºå¤šä¸ªè®¡æ—¶å™¨ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªè¦è®© Effect è¿”å›ä¸€ä¸ªæ¸…ç†å‡½æ•°ï¼Œç»“æŸæ‰ä¸Šä¸€ä¸ªè®¡æ—¶å™¨å³å¯ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"nx\">useEffect</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">const</span> <span class=\"nx\">id</span> <span class=\"o\">=</span> <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"nx\">total</span><span class=\"p\">)</span>\n  <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n  <span class=\"k\">return</span> <span class=\"p\">()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">clearInterval</span><span class=\"p\">(</span><span class=\"nx\">id</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">},</span> <span class=\"p\">[</span><span class=\"nx\">total</span><span class=\"p\">])</span> \n</code></pre></div><p>è¿™ä¹ˆä¸€æ¥ï¼Œç¨‹åºå°±æ­£å¸¸äº†ã€‚<br/><br/>ç°åœ¨æ–°ç‰ˆçš„ React å·²ç»è‡ªå¸¦äº†å¯¹ Hooks è§„åˆ™çš„ä¸€äº›æ£€æŸ¥ï¼Œå½“å®ƒå‘ç°ä¸€äº›ä¸åˆè§„çš„å†™æ³•ï¼ˆæ¯”å¦‚ Effect ä¸­å¼•ç”¨äº†å¤–éƒ¨å˜é‡ï¼Œä½†æ²¡æœ‰åœ¨ä¾èµ–æ•°ç»„ä¸­è¿›è¡Œç”³æ˜ï¼‰ï¼Œå°±ä¼šç»™å‡ºæç¤ºã€‚åªè¦ä¿æŒä½¿ç”¨æœ€æ–°ç‰ˆçš„ Reactï¼Œç†è®ºä¸Šå°±å¯ä»¥é¿å…è¿™ä¸€ç±»çš„é”™è¯¯ã€‚å¦‚æœä½ å‡ºäºæŸäº›åŸå› ä¸æ–¹ä¾¿å‡çº§ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨å®‰è£… <a href=\"https://link.zhihu.com/?target=https%3A//www.npmjs.com/package/eslint-plugin-react-hooks\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">eslint-plugin-react-hooks</a> æ¥è¿›è¡Œæ£€æŸ¥ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œå¯¹äº <code>useEffect()</code> çš„ä¾èµ–æ•°ç»„ï¼Œä¸€å®šè¦ç‰¢è®°ï¼š</p><blockquote> åªè¦æ˜¯ <code>useEffect()</code> ä¸­ç”¨åˆ°çš„ï¼Œéƒ½è¦åœ¨ä¾èµ–æ•°ç»„ä¸­ç”³æ˜ã€‚<br/> </blockquote><p>é‚£å¦‚æœ <code>useEffect()</code> ä¸­å¼•ç”¨äº†ä¸€äº›ä¸å‚ä¸ã€Œæ˜¯å¦æ‰§è¡Œ Effectã€çš„å†³ç­–çš„å˜é‡ï¼Œæˆ‘ä»¬è¦æ€ä¹ˆå¤„ç†è¿™äº›å°´å°¬çš„å˜é‡å‘¢ï¼Ÿåˆ«æ‹…å¿ƒï¼Œæ–¹æ³•æœ‰å¾ˆå¤šï¼š</p><ol><li>ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼æ¥è®¾ç½® stateï¼Œä»¥è§£é™¤å¯¹æŸäº› state å˜é‡çš„å¼•ç”¨ã€‚</li><li>å¦‚æœç»„ä»¶å†…éƒ¨çš„å‡½æ•°ä»…ç”¨äºæŸä¸ª Effectï¼Œå¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°çš„å®šä¹‰ç§»åˆ° <code>useEffect()</code> å†…éƒ¨ï¼Œä»¥è§£é™¤å¯¹æŸäº›å‡½æ•°çš„å¼•ç”¨ã€‚</li><li>å¦‚æœä¸€äº›å˜é‡çš„å­˜åœ¨æ˜¯ä¸ºäº†å†³å®šå¦ä¸€äº›å˜é‡ï¼ˆæ¯”å¦‚ url æŸ¥è¯¢å‚æ•°ï¼‰ï¼Œå¯ä»¥æŠŠç›¸å…³é€»è¾‘æŠ½å–ä¸ºç‹¬ç«‹çš„å‡½æ•°ï¼Œç”¨ <code>useCallback()</code> è¿›è¡Œä¼˜åŒ–ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™éƒ¨åˆ†å˜é‡æå–åˆ° Effect ä¹‹å¤–å»ï¼Œä»¥ç²¾ç®€ä¾èµ–æ•°ç»„ã€‚</li><li>å®åœ¨æ²¡æ³•ä¼˜åŒ–äº†ï¼Œè¿˜æœ‰ä¸ªæœ€ç®€å•ç²—æš´çš„æ–¹æ³•ã€‚åœ¨ <code>useEffect()</code> ä¸­å¯¹æ‰€æœ‰å‚ä¸å†³ç­–çš„å˜é‡è¿›è¡Œæ¯”å¯¹ï¼Œåˆ¤æ–­æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œä»¥å†³å®šæ˜¯ç»§ç»­æ‰§è¡Œè¿˜æ˜¯å°±æ­¤è¿”å›ã€‚</li></ol><h2>ä¸è¦æ‹…å¿ƒé‡å¤å®šä¹‰å‡½æ•°</h2><p>ä»å·¥ç¨‹å­¦çš„è§’åº¦ï¼Œæˆ‘ä»¬ä¹ æƒ¯é€šè¿‡ç¼“å­˜æ¥é¿å…é¢‘ç¹çš„é”€æ¯å’Œé‡å»ºåŒæ ·çš„å†…å®¹ã€‚åœ¨ Class ç»„ä»¶ä¸­ï¼Œé€šè¿‡å‡½æ•°ç»‘å®šï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ˜“çš„åšåˆ°è¿™ä¸€ç‚¹ã€‚ä½†åœ¨ Hooks ä¸­ï¼Œæˆ‘ä»¬æˆ–è®¸éœ€è¦æ”¹å˜ä¸€ä¸‹ä¹ æƒ¯ï¼Œè¯•ç€æ¥å—è¿™ä¸€ç±»çš„å¼€é”€ã€‚</p><p>ç”±äºå‡½æ•°ç»„ä»¶çš„ç‰¹æ€§ï¼Œå®ƒä¸åƒç±»ç»„ä»¶çš„å®ä¾‹é‚£æ ·ï¼Œå­˜åœ¨ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µã€‚å‡½æ•°ç»„ä»¶çš„æ ¸å¿ƒå°±åªæœ‰ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œå³ä¾¿ Hooks å¼•å…¥äº† stateï¼Œå‡½æ•°ç»„ä»¶çš„æ›´æ–°ä¹Ÿè¿˜æ˜¯é‡æ–°æ‰§è¡Œæ•´ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯åœ¨æŸä¸ªå®ä¾‹ä¸Šå°ä¿®å°æ”¹ã€‚è¿™æ ·çš„ç‰¹å®šå°±å†³å®šäº†å‡½æ•°ç»„ä»¶å†…å®šä¹‰çš„å‡½æ•°ï¼Œä¼šåœ¨ç»„ä»¶æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶è¢«é”€æ¯ç„¶åé‡å»ºï¼Œå³ä¾¿å‡½æ•°æœ¬èº«å¹¶æ²¡æœ‰æ”¹å˜ï¼Œåªæ˜¯ä¼ å…¥çš„å‚æ•°å‘ç”Ÿäº†æ”¹å˜ã€‚</p><p>å¥½åœ¨ï¼Œåªè¦ä¸æ˜¯éå¸¸é«˜é¢‘çš„æ›´æ–°ï¼Œè¿™ç§ç¨‹åº¦çš„å¼€é”€å¹¶ä¸ä¼šå¯¹æˆ‘ä»¬çš„åº”ç”¨é€ æˆæ˜æ˜¾çš„è´Ÿé¢å½±å“ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å…è®¸è¿™ç§åæ¨¡å¼çš„å­˜åœ¨ã€‚</p><h2>å¦‚ä½•åœ¨ Hooks ä¸­å‘èµ· HTTP è¯·æ±‚</h2><p>åœ¨ Class ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å¸¸è§çš„åšæ³•æ˜¯å®šä¹‰ä¸€ä¸ªè·å–æ•°æ®çš„å‡½æ•°ï¼Œåœ¨å…¶ä¸­è¯»å– props å’Œ stateï¼Œæ‹¼æ¥å‡ºè¦ä¼ é€’çš„å‚æ•°ï¼Œå¥½ä¸€ç‚¹çš„åšæ³•æˆ–è®¸è¿˜è¦åˆ¤æ–­ä¸€ä¸‹ loading çŠ¶æ€ä»¥é¿å…é‡å¤æ“ä½œå’Œå¼‚æ­¥å†²çªï¼Œç„¶åå‘èµ·å…¶è¯·æ±‚ï¼Œç­‰ Promise è¢« resolve åï¼Œå¤„ç†è¿”å›çš„ç»“æœï¼Œæ›´æ–°ä¸€äº› stateã€‚</p><p>ä½†å½“æˆ‘ä»¬å°è¯•åœ¨ Hooks ä¸­é‡ç°è¿™ä¸€å¥—è·¯æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†é—®é¢˜ã€‚è¦æƒ³è¯»å–æœ€æ–°çš„ props å’Œ stateï¼Œæˆ‘ä»¬å°±å¿…é¡»æŠŠå‘èµ·è¯·æ±‚çš„å‡½æ•°å†™åˆ°ä¸€ä¸ª Effect ä¸­ï¼Œå¹¶ä¸”æ‰€æœ‰å¼•ç”¨åˆ°çš„å˜é‡éƒ½å¿…é¡»æ”¾è¿›ä¾èµ–æ•°ç»„ä¸­ã€‚è¿™å°±å¯¼è‡´æˆ‘ä»¬å¿…é¡»éå¸¸å°å¿ƒåœ°å¤„ç†æ¯ä¸€ä¸ªä¾èµ–çš„å˜åŒ–ï¼Œä¸€ä¸å°å¿ƒå°±ä¼šé™·å…¥æ­»å¾ªç¯ã€‚</p><p>å…·ä½“çš„æ“ä½œï¼Œå±•å¼€æ¥ç¯‡å¹…å¤ªé•¿äº†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œæ¨èä¸€ç¯‡éå¸¸å…¨é¢çš„<a href=\"https://link.zhihu.com/?target=https%3A//www.robinwieruch.de/react-hooks-fetch-data/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">æ–‡ç« </a>ï¼Œéœ€è¦çš„å¯ä»¥çœ‹ä¸€ä¸‹ã€‚è¿™ç¯‡æ–‡ç« å›½å†…æœ‰ä¸å°‘äººåšäº†ç¿»è¯‘ï¼Œ<a href=\"https://link.zhihu.com/?target=https%3A//juejin.im/post/5c98fb35518825157172acc6\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">è¿™ç¯‡</a>æ˜¯ä¸€ä¸ªä¸é”™çš„è¯‘æœ¬ï¼Œè‹±æ–‡æœ‰å‹åŠ›çš„åŒå­¦å¯ä»¥çœ‹çœ‹ã€‚</p><h2>å¦‚ä½•ä½¿ç”¨ <code>setInterval()</code></h2><p>è¿˜æœ‰ä¸€ä¸ªéå¸¸å¸¸è§çš„å‘½ä»¤å¼æ“ä½œï¼Œå°±æ˜¯è®¾ç½®å®šæ—¶å™¨ã€‚</p><p>æ¯”å¦‚ä¸€ä¸ªçŸ­ä¿¡éªŒè¯ç çš„å€’è®¡æ—¶ï¼Œåœ¨ Class ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šè¿™ä¹ˆåšï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"nx\">state</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n  <span class=\"nx\">countdown</span><span class=\"o\">:</span> <span class=\"mi\">0</span>\n<span class=\"p\">}</span>\n\n<span class=\"nx\">timer</span> <span class=\"o\">=</span> <span class=\"kc\">null</span>\n\n<span class=\"nx\">startCountdown</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"nx\">duration</span><span class=\"p\">)</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">setState</span><span class=\"p\">({</span> <span class=\"nx\">countdown</span><span class=\"o\">:</span> <span class=\"nx\">duration</span> <span class=\"p\">},</span> <span class=\"p\">()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">timer</span> <span class=\"o\">=</span> <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">setState</span><span class=\"p\">({</span> <span class=\"nx\">countdown</span><span class=\"o\">:</span> <span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">state</span><span class=\"p\">.</span><span class=\"nx\">countdown</span> <span class=\"o\">-</span> <span class=\"mi\">1</span> <span class=\"p\">},</span> <span class=\"p\">()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">state</span><span class=\"p\">.</span><span class=\"nx\">countdown</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n          <span class=\"nx\">clearInterval</span><span class=\"p\">(</span><span class=\"k\">this</span><span class=\"p\">.</span><span class=\"nx\">timer</span><span class=\"p\">)</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">})</span>\n    <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n  <span class=\"p\">})</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>ç°åœ¨æˆ‘ä»¬å°è¯•æ”¹ç”¨ Hooks æ¥å®ç°ã€‚</p><p>è®¾ç½®ä¸€ä¸ª state ç”¨äºå­˜å‚¨å½“å‰å‰©ä½™ç§’æ•°ï¼Œç„¶ååœ¨ <code>setInterval()</code> çš„å›è°ƒå‡½æ•°ä¸­æ›´æ–°è¿™ä¸ªå€¼ï¼ˆé€šè¿‡å›è°ƒå‡½æ•°çš„å†™æ³•ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¼•ç”¨è¿™ä¸ª state ä¹Ÿèƒ½æ­£ç¡®æ›´æ–°å®ƒï¼‰ã€‚å¾ˆå¥½ï¼Œå€’è®¡æ—¶å¼€å§‹äº†ï¼Œé¡µé¢ä¸Šä¹Ÿèƒ½è·å–åˆ°æ›´æ–°äº†ï¼Œç›®å‰ä¸ºæ­¢ä¸€åˆ‡é¡ºåˆ©ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"nx\">countdown</span><span class=\"p\">,</span> <span class=\"nx\">setCountdown</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nx\">useState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"k\">const</span> <span class=\"nx\">timer</span> <span class=\"o\">=</span> <span class=\"nx\">useRef</span><span class=\"p\">()</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">startCountdown</span> <span class=\"p\">(</span><span class=\"nx\">duration</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">setCountdown</span><span class=\"p\">(</span><span class=\"nx\">duration</span><span class=\"p\">)</span>\n  <span class=\"nx\">timer</span> <span class=\"o\">=</span> <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setCountdown</span><span class=\"p\">(</span><span class=\"nx\">c</span> <span class=\"p\">=&gt;</span> <span class=\"nx\">c</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n  <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>3ã€2ã€1ã€0ã€-1ï¼Ÿé—®é¢˜å‡ºç°äº†ã€‚æˆ‘ä»¬å¸Œæœ›æ•°åˆ° 0 çš„æ—¶å€™ç»“æŸå€’è®¡æ—¶ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦åˆ¤æ–­ countdown æ˜¯å¦ä¸º 0 ä»¥å†³å®šæ˜¯å¦è¦ <code>clearInterval()</code>ï¼Œç„¶è€Œç°åœ¨æˆ‘ä»¬æ— æ³•ç›´æ¥è¯»å– countdown çš„æœ€æ–°å€¼ã€‚ä¸ºäº†èƒ½è¯»åˆ° countdown çš„æœ€æ–°å€¼ï¼Œæˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªé€»è¾‘æ”¾åˆ°ä¸€ä¸ª Effect é‡Œï¼Œå¹¶æŠŠ countdown æ”¾è¿›ä¾èµ–æ•°ç»„ä¸­ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span> <span class=\"p\">[</span><span class=\"nx\">countdown</span><span class=\"p\">,</span> <span class=\"nx\">setCountdown</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nx\">useState</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n\n<span class=\"kd\">function</span> <span class=\"nx\">startCountdown</span> <span class=\"p\">(</span><span class=\"nx\">duration</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">setCountdown</span><span class=\"p\">(</span><span class=\"nx\">duration</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n\n<span class=\"nx\">useEffect</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">countdown</span><span class=\"p\">)</span> <span class=\"k\">return</span>\n  <span class=\"nx\">timer</span> <span class=\"o\">=</span> <span class=\"nx\">setInterval</span><span class=\"p\">(()</span> <span class=\"p\">=&gt;</span> <span class=\"p\">{</span>\n    <span class=\"nx\">setCountdown</span><span class=\"p\">(</span><span class=\"nx\">c</span> <span class=\"p\">=&gt;</span> <span class=\"nx\">c</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"nx\">countdown</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"nx\">clearInterval</span><span class=\"p\">(</span><span class=\"nx\">timer</span><span class=\"p\">)</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">},</span> <span class=\"mi\">1000</span><span class=\"p\">)</span>\n<span class=\"p\">},</span> <span class=\"p\">[</span><span class=\"nx\">countdown</span><span class=\"p\">])</span>\n</code></pre></div><p>ç„¶è€Œäº‹æƒ…è¿˜æ²¡æœ‰ç»“æŸï¼Œä»”ç»†çœ‹ä¸€ä¸‹ä»£ç ï¼Œä¸éš¾å‘ç°æ¯æ¬¡ countdown æ›´æ–°éƒ½ä¼šè§¦å‘ä¸€æ¬¡æ–°çš„ <code>setInterval()</code>ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å¹¶ä¸”æˆ‘ä»¬æ²¡æ³•æå‰ç»“æŸè¿™ä¸ªè®¡æ—¶å™¨ã€‚</p><p>å“~æ˜æ˜åœ¨ Class ç»„ä»¶ä¸­å¾ˆç®€å•çš„äº‹æƒ…ï¼Œæ€ä¹ˆåˆ°äº† Hooks ä¸­è¿™ä¹ˆå¤æ‚ã€‚</p><p>è§£å†³æ–¹æ¡ˆçœ‹<a href=\"https://link.zhihu.com/?target=https%3A//overreacted.io/zh-hans/making-setinterval-declarative-with-react-hooks/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">è¿™é‡Œ</a>ï¼Œä½ ä¼šæƒŠè®¶çš„ã€‚</p><h2>å°ç»“</h2><p>ç¬¬ä¸€æ¬¡çœ‹åˆ°å®˜æ–¹æ–‡æ¡£ä¸­çš„ã€ŒIt takes a bit of a mindshift to start â€œthinking in Hooksâ€ã€è¿™å¥è¯çš„æ—¶å€™ï¼Œæˆ‘å¹¶æ²¡æœ‰å¤ªå½“å›äº‹ï¼Œè§‰å¾—æ— éå°±æ˜¯æœ‰ä¸€æ ·æ–°ä¸œè¥¿è¦å­¦è€Œå·²ã€‚æ—¶éš”å‡ ä¸ªæœˆå†çœ‹ï¼Œè¿™å¥è¯åˆ†é‡è¿˜æ˜¯æŒºé‡çš„ã€‚ä» Class åˆ° Hooks çš„å˜åŒ–çœŸçš„å¾ˆå¤§ï¼Œå¾ˆå¤šæ€ç»´æ¨¡å¼éƒ½å˜äº†ï¼Œæˆ‘ä»¬ç”šè‡³éœ€è¦æ¥å—ä¸€äº›æ›¾ç»æåŠ›é¿å…çš„åæ¨¡å¼ã€‚</p><p>React ä»ä¸€å¼€å§‹å°±æ¨å´‡å£°æ˜å¼çš„è®¾è®¡ï¼Œä¸‡ç‰©çš†ç»„ä»¶ï¼Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯è·¯ç”±çš„è®¾è®¡ã€‚Hooks ç›¸æ¯” Class æ›´åŠ ç¬¦åˆå£°æ˜å¼çš„è®¾è®¡ï¼Œä»æ­¤ React è¿›å…¥ã€Œä¸‡ç‰©çš†å‡½æ•°ã€çš„æ—¶ä»£ã€‚</p><p>å¦‚æœä½ è§‰å¾— Hooks æ˜¯ä¸€é¢—é‡ç£…ç‚¸å¼¹ï¼Œæˆ‘å»ºè®®ä½ äº†è§£ä¸€ä¸‹ <a href=\"https://link.zhihu.com/?target=https%3A//reactjs.org/blog/2018/11/27/react-16-roadmap.html%23react-16x-q2-2019-the-one-with-concurrent-mode\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Concurrent Mode</a>ã€‚ç„¶åä½ ä¼šå‘ç°ï¼ŒHooks åªæ˜¯ä¸€é“å‰èœï¼Œæ˜¯ä¸ºåé¢çœŸæ­£çš„ä¸»èœåšé“ºå«ç”¨çš„ã€‚</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2000&#39; height=&#39;400&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "React", 
                    "tagLink": "https://api.zhihu.com/topics/20013159"
                }, 
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }
            ], 
            "comments": [
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>æ„Ÿè§‰æ›´æ ¹æœ¬çš„åŸå› æ˜¯å› ä¸º useState è¿”å›çš„æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªå€¼æ°¸è¿œæ˜¯ä¸€ä¸ªæ–°å€¼ï¼Œè€Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œè®¿é—®åˆ°çš„å…¶å®æ˜¯è€å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å½“ç„¶è·å–ä¸åˆ°æ›´æ–°åçš„å€¼ã€‚è§£å†³åŠæ³•æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¿æŒæˆ‘ä»¬ä½¿ç”¨çš„è¿™ä¸ªå€¼ä¸å˜ï¼Œæ¯”å¦‚ä½¿ç”¨ useRef æ¥ä¿å­˜å€¼ï¼›å¦ä¸€ä¸ªå°±æ˜¯ä¿è¯æˆ‘ä»¬æ›´æ–°å€¼åè¿™ä¸ªå€¼æ‰€åœ¨çš„å‡½æ•°èƒ½å¤Ÿé‡æ–°åˆ›å»ºï¼Œè¿™æ ·è·å–çš„å°±æ˜¯æ›´æ–°åçš„å˜é‡äº†ã€‚æ¯”å¦‚ä¸‹é¢æ”¹å†™æ–‡ç« ä¸­ç¬¬ä¸€ä¸ª Counter çš„ä¾‹å­ä¸­ï¼ŒæŠŠ count å€¼æŒ‚åœ¨æ°¸è¿œä¸ä¼šå˜çš„ setCount ä¸Šï¼Œæ¯æ¬¡è·å–åˆ°çš„å°±éƒ½æ˜¯æœ€æ–°å€¼äº†</p><p><a href=\"http://link.zhihu.com/?target=https%3A//codesandbox.io/s/patient-pine-vmv7k\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">codesandbox.io/s/patien</span><span class=\"invisible\">t-pine-vmv7k</span><span class=\"ellipsis\"></span></a></p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>ç”¨ ref æ˜¯ä¸€ç§åŠæ³•ï¼Œä¸è¿‡ä¸€èˆ¬ç”¨æ¥è®°å½•ä¸Šä¸€è½®çš„å–å€¼ï¼Œä»¥ä¾¿ä½œå¯¹æ¯”ã€‚åé¢çš„æ–¹æ³•å±äºå¥‡æŠ€æ·«å·§ï¼Œä¸æ˜¯å¾ˆæ¨èã€‚è®¾è®¡åˆç†çš„è¯ï¼Œæ˜¯ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦çš„ã€‚</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }, 
                        {
                            "userName": "ç§‹é£", 
                            "userLink": "https://www.zhihu.com/people/b15d53a0a373975f6ad21cd5b5c86f0e", 
                            "content": "<p>æˆ‘è§‰å¾—ä½ è¿™ä¸ªæƒ³æ³•ï¼Œå’Œä»¥å‰çš„é¢å‘å¯¹è±¡æ€æƒ³å°±ä¸€æ ·äº†ã€‚</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/64445722", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 4, 
            "title": "æ¢ç´¢ React ç»„ä»¶ä¹‹é—´çš„ç”Ÿå‘½å‘¨æœŸ", 
            "content": "<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š</p><a href=\"https://link.zhihu.com/?target=http%3A//tonghuashuo.github.io/blog/2019/05/02/react-lifecycle\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic4.zhimg.com/v2-0edf69056144aaf512a28d0670b53b57_180x120.jpg\" data-image-width=\"1200\" data-image-height=\"675\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">æ¢ç´¢ React ç»„ä»¶ä¹‹é—´çš„ç”Ÿå‘½å‘¨æœŸ | åšå®¢</a><h2>0ï¼‰å†™åœ¨å‰é¢</h2><p>React ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œç›¸ä¿¡å¤§å®¶éƒ½éå¸¸ç†Ÿæ‚‰äº†ï¼Œæ— éé‚£ä¹ˆå‡ ä¸ªå‡½æ•°ï¼Œå®˜æ–¹æ–‡æ¡£å·²ç»å†™å¾—éå¸¸æ¸…æ¥šäº†ã€‚ï¼ˆé‚£è¿˜æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Ÿæµªè´¹æ„Ÿæƒ…ï¼åˆä¸Šï¼ï¼‰</p><p>ä¸€èˆ¬æˆ‘ä»¬æ‰€è®¨è®ºçš„ï¼Œéƒ½æ˜¯å•ä¸ªç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚å¦‚æœæ˜¯å¤šä¸ªç»„ä»¶ä¹‹é—´å‘¢ï¼Ÿæ¯”å¦‚çˆ¶å­ç»„ä»¶ï¼Ÿå…„å¼Ÿç»„ä»¶ï¼Ÿå„ä¸ªå‘¨æœŸåˆæ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿå¼‚æ­¥è·¯ç”±çš„æƒ…å†µå‘¢ï¼Ÿå‰é˜µå­æ–°å‡ºçš„ Hooks å‘¢ï¼Ÿæœ‰å‡ ä¸ªäººæ•¢ç«™å‡ºæ¥è¯´æˆ‘å…¨çŸ¥é“çš„ï¼Ÿï¼ˆåæ­£æˆ‘æ˜¯ä¸æ•¢ï¼‰</p><p>åˆšå¥½ä¹Ÿæ˜¯æœ€è¿‘é‡åˆ°ä¸€äº›å…³äºç”Ÿå‘½å‘¨æœŸçš„é—®é¢˜ï¼Œé¡¹ç›®ä¸­æ¶‰åŠåˆ°å¤§é‡çš„å¼‚æ­¥æ“ä½œï¼Œéœ€è¦æ¸…æ¥šåœ°çŸ¥é“å„éƒ¨åˆ†çš„æ‰§è¡Œé¡ºåºï¼Œå€Ÿæ­¤æœºä¼šæ•´ç†ä¸€ä¸‹ã€‚</p><h2>1ï¼‰åœ¨ä½ ç»§ç»­ä¹‹å‰</h2><p>è¿™ç¯‡æ–‡ç« å¹¶ä¸æ˜¯å…¥é—¨æ•™å­¦ï¼Œå¦‚æœä½ å¯¹ React ä¸€ç‚¹ä¸äº†è§£çš„è¯ï¼Œæˆ–è®¸è¿™ç¯‡æ–‡ç« å¹¶ä¸é€‚åˆä½ ã€‚</p><p>æˆ‘å‡å®šä½ å·²ç»æŒæ¡ React çš„åŸºæœ¬çŸ¥è¯†ï¼Œä¾‹å¦‚ï¼šç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€Hooks çš„åŸºæœ¬æ¦‚å¿µã€ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ« ç­‰ï¼Œå¹¶ç”¨ React å¼€å‘è¿‡æœ‰ä¸€å®šå¤æ‚åº¦çš„åº”ç”¨ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä¸è®¨è®º <code>shouldComponentUpdate()</code>ã€<code>React.memo()</code> ç­‰ä¼˜åŒ–æ‰‹æ®µï¼Œåªè€ƒè™‘æœ€åŸå§‹çš„æƒ…å†µã€‚</p><p>æœ¬æ–‡ä»¥æµè§ˆå™¨ä½œä¸ºç›®æ ‡ç¯å¢ƒï¼ŒReact Native å’Œ Electron åœ¨åŸºæœ¬æ¦‚å¿µä¸Šæ˜¯ä¸€æ ·çš„ï¼Œç»†èŠ‚ä¸Šçš„ä¸åŒä¸ä½œä¸ºæœ¬æ–‡çš„è®¨è®ºé‡ç‚¹ï¼Œ</p><h2>2ï¼‰å…³äº Hooks çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>ç¡®åˆ‡åœ°è¯´ï¼ŒHooks å¹¶ä¸æ˜¯ä¸€ç§æ–°çš„ç»„ä»¶ç±»å‹ï¼Œå®ƒåªæ˜¯ä¸€ç§ä»£ç å¤ç”¨çš„æ–¹å¼ï¼Œå¹¶ä¸”æ€»æ˜¯ä¼´éšç€å‡½æ•°ç»„ä»¶ä¸€èµ·å‡ºç°ã€‚</p><p>åœ¨ Hooks ä¹‹å‰ï¼Œå‡½æ•°ç»„ä»¶æ˜¯æ²¡æœ‰ state çš„æ¦‚å¿µçš„ï¼Œå› è€Œä¹Ÿå°±ä¸å­˜åœ¨ç”Ÿå‘½å‘¨æœŸä¸€è¯´ï¼Œå°±åªæ˜¯ä¸€ä¸ª render å‡½æ•°ã€‚Hooks çš„å‡ºç°ï¼Œè®©å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥æ‹¥æœ‰ stateï¼Œç›¸åº”çš„ä¹Ÿå°±å¼•å…¥äº†ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µï¼Œå…·ä½“æ¥è¯´ä¹Ÿå°±æ˜¯ <code>useEffect()</code> å’Œ <code>useLayoutEffect()</code> å…·ä½“ä½•æ—¶æ‰§è¡Œçš„é—®é¢˜ã€‚</p><p>å‡½æ•°ç»„ä»¶çš„æœ¬è´¨æ˜¯å‡½æ•°ï¼Œè€Œå‡½æ•°æœ¬èº«æ˜¯æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼ŒHooks çš„å‡ºç°ä¹Ÿæ²¡æœ‰æ”¹å˜è¿™ä¸€ç‚¹ã€‚è¿™é‡Œæˆ‘ä»¬è®¨è®ºçš„å¯¹è±¡æ˜¯ã€Œç»„ä»¶ã€ï¼Œç»„ä»¶æ˜¯å¯ä»¥æœ‰ç”Ÿå‘½å‘¨æœŸçš„ã€‚å› æ­¤å½“æˆ‘åœ¨åé¢çš„æ–‡å­—ä¸­æåˆ° Hooks æ—¶ï¼Œæˆ‘å…¶å®æ˜¯åœ¨è¡¨ç¤ºã€Œä½¿ç”¨äº† Hooks çš„å‡½æ•°ç»„ä»¶ã€ï¼ˆè™½ç„¶è¿™ä¸ªè¯´æ³•ä¸æ˜¯å¾ˆä¸¥è°¨ï¼Œä½†æ˜¯è¿™ä¸é‡è¦ï¼Œä½ æ‡‚æˆ‘æ„æ€å°±å¥½ï¼‰ã€‚</p><h2>3ï¼‰é‚£ä¹ˆæˆ‘ä»¬å°±æ¥åšä¸ªå®éªŒå§</h2><p>ä¸ºäº†ä¸€æ¢ç©¶ç«Ÿï¼Œæˆ‘å†™äº†ä¸€ä¸ª <a href=\"https://link.zhihu.com/?target=https%3A//tonghuashuo.github.io/react-lifecycle\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Demo</a> æ¥æ¨¡æ‹Ÿä¸€äº›å¸¸è§çš„ç”¨ä¾‹ï¼šçˆ¶å­ç»„ä»¶ã€å…„å¼Ÿç»„ä»¶ã€åŒæ­¥/å¼‚æ­¥è·¯ç”±ã€ç±»ç»„ä»¶å’Œ Hooksã€ç»„ä»¶åˆå§‹åŒ–æ—¶çš„å¼‚æ­¥æ“ä½œï¼ˆå¦‚è®¿é—® APIï¼‰ç­‰ã€‚</p><p>å¦‚æœä½ æœ‰é‡åˆ° Demo æ²¡è¦†ç›–åˆ°çš„ä½¿ç”¨åœºæ™¯ï¼Œæ¬¢è¿æ Issueã€‚</p><h3>3.1ï¼‰TL,DR;</h3><p>æˆ‘çŸ¥é“å¤§å®¶çš„æ—¶é—´éƒ½å¾ˆå®è´µï¼Œèµ¶æ—¶é—´çš„æœ‹å‹å¯ä»¥ç›´æ¥çœ‹ç»“è®ºï¼›æ—¶é—´å®½è£•çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä»ä¸‹ä¸€èŠ‚å¼€å§‹ç»†èŠï¼š</p><ol><li>åŒæ­¥è·¯ç”±ï¼Œçˆ¶ç»„ä»¶åœ¨ <code>render</code> é˜¶æ®µåˆ›å»ºå­ç»„ä»¶ã€‚</li><li>å¼‚æ­¥è·¯ç”±ï¼Œçˆ¶ç»„ä»¶åœ¨è‡ªèº«æŒ‚è½½å®Œæˆä¹‹åæ‰å¼€å§‹åˆ›å»ºå­ç»„ä»¶ã€‚</li><li>æŒ‚è½½å®Œæˆä¹‹åï¼Œåœ¨æ›´æ–°æ—¶ï¼ŒåŒæ­¥ç»„ä»¶å’Œå¼‚æ­¥ç»„ä»¶æ˜¯ä¸€æ ·çš„ã€‚</li><li>æ— è®ºæ˜¯æŒ‚è½½è¿˜æ˜¯æ›´æ–°ï¼Œä»¥ <code>render</code> å®Œæˆä¸ºç•Œï¼Œä¹‹å‰çˆ¶ç»„ä»¶å…ˆæ‰§è¡Œï¼Œä¹‹åå­ç»„ä»¶å…ˆæ‰§è¡Œã€‚</li><li>å…„å¼Ÿç»„ä»¶å¤§ä½“ä¸ŠæŒ‰ç…§åœ¨çˆ¶ç»„ä»¶ä¸­çš„å‡ºåœºé¡ºåºæ‰§è¡Œã€‚</li><li><code>useEffect</code> ä¼šåœ¨æŒ‚è½½/æ›´æ–°å®Œæˆä¹‹åï¼Œå»¶è¿Ÿæ‰§è¡Œã€‚</li><li>å¼‚æ­¥è¯·æ±‚ï¼ˆå¦‚è®¿é—® APIï¼‰ä½•æ—¶å¾—åˆ°å“åº”ä¸ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ— å…³ï¼Œå³çˆ¶ç»„ä»¶ä¸­å‘èµ·çš„å¼‚æ­¥è¯·æ±‚ä¸ä¿è¯åœ¨å­ç»„ä»¶æŒ‚è½½å®Œæˆå‰å¾—åˆ°å“åº”ã€‚</li></ol><h3>3.2ï¼‰æŒ‚è½½è¿‡ç¨‹</h3><p>çˆ¶å­ç»„ä»¶çš„æŒ‚è½½åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µã€‚</p><p>ç¬¬ä¸€é˜¶æ®µï¼Œçˆ¶ç»„ä»¶æ‰§è¡Œåˆ°è‡ªèº«çš„ <code>render</code>ï¼Œè§£æå…¶ä¸‹æœ‰å“ªäº›å­ç»„ä»¶éœ€è¦æ¸²æŸ“ï¼Œå¹¶å¯¹å…¶ä¸­åŒæ­¥çš„å­ç»„ä»¶è¿›è¡Œåˆ›å»ºï¼ŒæŒ¨ä¸ªæ‰§è¡Œå„ç»„ä»¶åˆ° <code>render</code>ï¼Œç”Ÿæˆåˆ°ç›®å‰ä¸ºæ­¢çš„ Virtual DOM æ ‘ï¼Œå¹¶ commit åˆ° DOMã€‚</p><p>ç¬¬äºŒé˜¶æ®µï¼Œæ­¤æ—¶ DOM èŠ‚ç‚¹å·²ç»ç”Ÿæˆå®Œæ¯•ï¼Œç»„ä»¶æŒ‚è½½å®Œæˆï¼Œå¼€å§‹åç»­æµç¨‹ã€‚å…ˆä¾æ¬¡è§¦å‘åŒæ­¥å­ç»„ä»¶å„è‡ªçš„ <code>componentDidMount</code> / <code>useLayoutEffect</code>ï¼Œæœ€åè§¦å‘çˆ¶ç»„ä»¶çš„ã€‚</p><p>ç¬¬ä¸‰é˜¶æ®µï¼Œå¦‚æœç»„ä»¶ä½¿ç”¨äº† <code>useEffect</code>ï¼Œåˆ™ä¼šåœ¨ç¬¬äºŒé˜¶æ®µä¹‹åè§¦å‘ <code>useEffect</code>ã€‚å¦‚æœçˆ¶å­ç»„ä»¶éƒ½ä½¿ç”¨äº† <code>useEffect</code>ï¼Œé‚£ä¹ˆå­ç»„ä»¶å…ˆè§¦å‘ï¼Œç„¶åæ˜¯çˆ¶ç»„ä»¶ã€‚</p><p>å¦‚æœçˆ¶ç»„ä»¶ä¸­åŒ…å«å¼‚æ­¥å­ç»„ä»¶ï¼Œåˆ™ä¼šåœ¨çˆ¶ç»„ä»¶æŒ‚è½½å®Œæˆåè¢«åˆ›å»ºã€‚</p><p>å¯¹äºå…„å¼Ÿç»„ä»¶ï¼Œå¦‚æœæ˜¯åŒæ­¥è·¯ç”±ï¼Œå®ƒä»¬çš„åˆ›å»ºé¡ºåºå’Œåœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰çš„å‡ºåœºé¡ºåºæ˜¯ä¸€è‡´çš„ã€‚</p><blockquote> å¯¹äºã€Œå¼‚æ­¥çš„å…„å¼Ÿç»„ä»¶ã€ï¼Œæœ€ç»ˆçš„åŠ è½½é¡ºåºæ˜¯æŒ‰ç…§ JSX ä¸­å®šä¹‰çš„é¡ºåºï¼Œè¿˜æ˜¯æŒ‰ç…§ js æ–‡ä»¶ä¸‹è½½å®Œæˆçš„é¡ºåºï¼Œæˆ‘æš‚æ—¶è¿˜ä¸èƒ½ç¡®å®šã€‚<br/> æŒ‰ç…§æˆ‘å¯¹â€œå¼‚æ­¥â€çš„ç†è§£ï¼Œæˆ‘æ›´å€¾å‘äºè®¤ä¸ºæ˜¯æŒ‰ç…§ä¸‹è½½å®Œæˆçš„é¡ºåºï¼Œè¿™æ›´ç¬¦åˆâ€œæŒ‰éœ€åŠ è½½â€çš„æ¦‚å¿µã€‚<br/> ä¹‹æ‰€ä»¥ä¼šé€ æˆå›°æ‰°ï¼Œæ˜¯å› ä¸ºæ®æˆ‘ç›®å‰æ‰€è§‚å¯Ÿåˆ°çš„æƒ…å†µï¼Œä¸¤ç§é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œæˆ‘è¿˜æ²¡æœ‰é‡åˆ°è¿‡åå®šä¹‰ä½†å…ˆåŠ è½½çš„æƒ…å†µã€‚<br/> å¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬ä¼šä»¥é¡µé¢ä¸ºå•ä½å»åˆ’åˆ†å¼‚æ­¥ç»„ä»¶ï¼Œå•ä¸ªé¡µé¢éœ€è¦åŠ è½½å¤šä¸ªå¼‚æ­¥ç»„ä»¶çš„åœºæ™¯æ¯”è¾ƒå°‘ï¼›å³ä¾¿åœ¨è¿™äº›å°‘æ•°åœºæ™¯ä¸­ï¼Œå•æ¬¡éœ€è¦è¯·æ±‚çš„æ–‡ä»¶æ•°é‡ä¹Ÿä¸ä¼šå¾ˆå¤šï¼Œä¸è‡³äºè¶…è¿‡æµè§ˆå™¨çš„å¹¶å‘ä¸Šé™ï¼›å³ä¾¿è¶…è¿‡ï¼Œä¹Ÿä¼šæŒ‰ç…§åœ¨çˆ¶ç»„ä»¶ä¸­å®šä¹‰çš„å‡ºåœºé¡ºåºå»åˆ†æ‰¹å‘èµ·è¯·æ±‚ã€‚è€ƒè™‘åˆ°å•ä¸ªå¼‚æ­¥ç»„ä»¶çš„æ–‡ä»¶å°ºå¯¸é€šå¸¸éƒ½å¾ˆå°ï¼ŒåŠ è½½é€Ÿåº¦éå¸¸å¿«ï¼ŒåŒä¸€æ‰¹å‘èµ·çš„è¯·æ±‚åŸºæœ¬ä¸Šä¹Ÿéƒ½æ˜¯åŒæ—¶åˆ°è¾¾ï¼Œå› æ­¤å¤§éƒ¨åˆ†æ—¶å€™ä¸‹è½½å®Œæˆçš„é¡ºåºå’Œå®šä¹‰çš„é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚<br/> ä½†æ²¡é‡åˆ°ä¸ä»£è¡¨ä¸å­˜åœ¨ï¼Œè¯¥é—®é¢˜æˆ‘ä¼šè¿›ä¸€æ­¥éªŒè¯ï¼Œå·²ç»æœ‰ç»“æœçš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥åˆ†äº«ä¸€ä¸‹ã€‚<br/> </blockquote><p>å¦‚æœç»„ä»¶çš„åˆå§‹åŒ–è¿‡ç¨‹åŒ…å«å¼‚æ­¥æ“ä½œï¼ˆé€šå¸¸åœ¨ <code>componentDidMount()</code> å’Œ <code>useEffect(fn, [])</code> ä¸­è¿›è¡Œï¼‰ï¼Œè¿™äº›æ“ä½œä½•æ—¶å¾—åˆ°å“åº”ä¸ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ— å…³ï¼Œå®Œå…¨çœ‹å¼‚æ­¥æ“ä½œæœ¬èº«èŠ±äº†å¤šå°‘æ—¶é—´ã€‚</p><h3>3.3ï¼‰æ›´æ–°è¿‡ç¨‹</h3><p>React çš„è®¾è®¡éµå¾ªå•å‘æ•°æ®æµæ¨¡å‹ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡ä¹Ÿä¼šç»è¿‡çˆ¶ç»„ä»¶ï¼ˆRedux å’Œ Context ä¹Ÿæ˜¯é€šè¿‡æ”¹å˜çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„ <code>props</code> å®ç°çš„ï¼‰ï¼Œå› æ­¤ä»»ä½•ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œæœ¬è´¨ä¸Šéƒ½å¯ä»¥å½’ç»“ä¸ºçˆ¶ç»„ä»¶æ›´æ–°å¯¼è‡´å­ç»„ä»¶æ›´æ–°çš„æƒ…å†µã€‚</p><p>çˆ¶å­ç»„ä»¶çš„æ›´æ–°åŒæ ·åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µã€‚</p><p>ç¬¬ä¸€ã€ä¸‰é˜¶æ®µï¼Œå’ŒæŒ‚è½½è¿‡ç¨‹åŸºæœ¬ä¸€æ ·ï¼Œæ— éæ˜¯ç¬¬ä¸€é˜¶æ®µå¤šäº†ä¸€ä¸ª Reconciliation çš„è¿‡ç¨‹ï¼Œç¬¬ä¸‰é˜¶æ®µéœ€è¦å…ˆæ‰§è¡Œ <code>useEffect</code> çš„ Cleanup å‡½æ•°ã€‚</p><p>ç¬¬äºŒé˜¶æ®µï¼Œå’ŒæŒ‚è½½è¿‡ç¨‹ä¹Ÿå¾ˆç±»ä¼¼ï¼Œéƒ½æ˜¯å­ç»„ä»¶å…ˆäºçˆ¶ç»„ä»¶ï¼Œä½†æ›´æ–°æ¯”æŒ‚è½½æ¶‰åŠçš„å‡½æ•°è¦å¤šä¸€äº›ï¼š</p><ol><li><code>getSnapshotBeforeUpdate()</code></li><li><code>useLayoutEffect() çš„ Cleanup</code></li><li><code>useLayoutEffect()</code> / <code>componentDidUpdate()</code></li></ol><p>React ä¼šæŒ‰ç…§ä¸Šé¢çš„é¡ºåºä¾æ¬¡æ‰§è¡Œè¿™äº›å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æ˜¯å„ä¸ªå­ç»„ä»¶çš„å…ˆæ‰§è¡Œï¼Œç„¶åæ‰æ˜¯çˆ¶ç»„ä»¶çš„æ‰§è¡Œã€‚å…·ä½“è¯´æ¥ï¼Œå°±æ˜¯å…ˆæ‰§è¡Œå„ä¸ªå­ç»„ä»¶çš„ <code>getSnapshotBeforeUpdate()</code>ï¼Œç„¶åæ˜¯çˆ¶ç»„ä»¶çš„ <code>getSnapshotBeforeUpdate()</code>ï¼Œå†ç„¶åæ˜¯å„ä¸ªå­ç»„ä»¶çš„ <code>componentDidUpdate()</code>ï¼Œçˆ¶ç»„ä»¶çš„ <code>componentDidUpdate()</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æŠŠç±»ç»„ä»¶å’Œ Hooks çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ”¾åœ¨äº†ä¸€èµ·ï¼Œå› ä¸ºçˆ¶å­ç»„ä»¶å¯ä»¥æ˜¯è¿™ä¸¤ç§ç»„ä»¶ç±»å‹çš„ä»»æ„æ’åˆ—ç»„åˆã€‚å®é™…æ¸²æŸ“æ—¶ä¸ä¸€å®šæ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ç”¨åˆ°ï¼Œåªä¼šè°ƒç”¨ç»„ä»¶å®é™…æ‹¥æœ‰çš„å‡½æ•°ã€‚</p><h3>3.4ï¼‰å¸è½½è¿‡ç¨‹</h3><p>å¸è½½è¿‡ç¨‹æ¶‰åŠåˆ° <code>componentWillUnmount()</code>ã€<code>useEffect()</code> çš„ Cleanupã€<code>useLayoutEffect()</code> çš„ Cleanup è¿™ä¸‰ç§å‡½æ•°ï¼Œé¡ºåºå›ºå®šä¸ºçˆ¶ç»„ä»¶çš„å…ˆæ‰§è¡Œï¼Œå­ç»„ä»¶æŒ‰ç…§åœ¨ JSX ä¸­å®šä¹‰çš„é¡ºåºä¾æ¬¡æ‰§è¡Œå„è‡ªçš„æ–¹æ³•ã€‚</p><p>æ³¨æ„ï¼Œæ­¤æ—¶çš„ Cleanup å‡½æ•°ä¼šæŒ‰ç…§åœ¨ä»£ç ä¸­å®šä¹‰çš„é¡ºåºå…ˆåæ‰§è¡Œï¼Œä¸å‡½æ•°æœ¬èº«çš„ç‰¹æ€§æ— å…³ã€‚</p><p>å¦‚æœå¸è½½æ—§ç»„ä»¶çš„åŒæ—¶ä¼´éšæœ‰æ–°ç»„ä»¶çš„åˆ›å»ºï¼Œæ–°ç»„ä»¶ä¼šå…ˆè¢«åˆ›å»ºå¹¶æ‰§è¡Œå®Œ <code>render</code>ï¼Œç„¶åå¸è½½ä¸éœ€è¦çš„æ—§ç»„ä»¶ï¼Œæœ€åæ–°ç»„ä»¶æ‰§è¡ŒæŒ‚è½½å®Œæˆçš„å›è°ƒã€‚</p><h2>4ï¼‰Hooks çš„ç‰¹åˆ«ä¹‹å¤„</h2><p>æ ¹æ® React çš„å®˜æ–¹æ–‡æ¡£ï¼Œ<code>useEffect()</code> å’Œ <code>useLayoutEffect()</code> éƒ½æ˜¯ç­‰æ•ˆäº <code>componentDidUpdate()</code> / <code>componentDidMount()</code> çš„å­˜åœ¨ï¼Œä½†å®é™…ä¸Šä¸¤è€…åœ¨ä¸€äº›ç»†èŠ‚ä¸Šè¿˜æ˜¯æœ‰æ‰€ä¸åŒï¼š</p><h3>4.1ï¼‰å…ˆæ¥æœªå¿…å…ˆèµ°</h3><p><code>useLayoutEffect()</code> æ°¸è¿œæ¯” <code>useEffect()</code> å…ˆæ‰§è¡Œï¼Œå³ä¾¿åœ¨ä½ çš„ä»£ç ä¸­ <code>useEffect()</code> æ˜¯å†™åœ¨å‰é¢çš„ã€‚æ‰€ä»¥ <code>useLayoutEffect()</code> æ‰æ˜¯äº‹å®ä¸Šå’Œ <code>componentDidUpdate()</code> / <code>componentDidMount()</code> å¹³èµ·å¹³åçš„å­˜åœ¨ã€‚</p><p><code>useEffect()</code> ä¼šåœ¨çˆ¶å­ç»„ä»¶çš„ <code>componentDidUpdate()</code> / <code>componentDidMount()</code> éƒ½è§¦å‘ä¹‹åæ‰è¢«è§¦å‘ã€‚å½“çˆ¶å­ç»„ä»¶éƒ½ç”¨åˆ° <code>useEffect()</code> æ—¶ï¼Œå­ç»„ä»¶ä¸­çš„ä¼šæ¯”çˆ¶ç»„ä»¶ä¸­çš„å…ˆè§¦å‘ã€‚</p><h3>4.2ï¼‰ä¸å›¢ç»“çš„ Cleanup</h3><p>åŒæ ·éƒ½æ‹¥æœ‰ Cleanup å‡½æ•°ï¼Œ<code>useLayoutEffect()</code> å’Œå®ƒçš„ Cleanup æœªå¿…æ˜¯æŒ¨ç€çš„ã€‚</p><p>å½“çˆ¶ç»„ä»¶æ˜¯ Hooksã€å­ç»„ä»¶æ˜¯ Class æ—¶ï¼Œèƒ½å¤Ÿå¾ˆæ˜æ˜¾çœ‹å‡ºï¼Œ<code>useLayoutEffect()</code> çš„ Cleanup ä¼šåœ¨ <code>getSnapshotBeforeUpdate()</code> å’Œ <code>componentDidUpdate()</code> ä¹‹é—´è¢«è°ƒç”¨ï¼Œè€Œ <code>useLayoutEffect()</code> åˆ™æ˜¯å’Œ <code>componentDidUpdate()</code> åŒçº§ï¼ŒæŒ‰ç…§æ›´æ–°è¿‡ç¨‹çš„é¡ºåºè¢«è°ƒç”¨ã€‚</p><p>Hooks ä½œä¸ºå­ç»„ä»¶æ—¶ä¹Ÿæ˜¯è¿™ä¹ˆä¸ªè¿‡ç¨‹ï¼Œåªæ˜¯æ²¡æœ‰äº†å­ç»„ä»¶ï¼Œçœ‹ä¸Šå»ä¸é‚£ä¹ˆæ˜æ˜¾ç½¢äº†ã€‚</p><p>è€Œ <code>useEffect()</code> å°±ä¸ä¸€æ ·ï¼Œå®ƒå’Œå®ƒçš„ Cleanup ç´§å¯†å›¢ç»“åœ¨ä¸€èµ·ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯å‰åè„šä¸€èµ·çš„ï¼Œä»ä¸åˆ†ç¦»ã€‚</p><h2>5ï¼‰å°ç»“</h2><p>æ— è®ºæ˜¯ç±»ç»„ä»¶è¿˜æ˜¯ Hooksï¼Œå•æ‹å‡ºæ¥å¤§å®¶è‚¯å®šéƒ½å¾ˆç†Ÿæ‚‰å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½†å½“æŠŠå®ƒä»¬æ··åœ¨ä¸€èµ·ï¼Œå°±æ²¡é‚£ä¹ˆç®€å•äº†ã€‚æ’°å†™è¿™ç¯‡åšå®¢çš„è¿‡ç¨‹ï¼Œå¸®åŠ©æˆ‘ç†æ¸…äº†è¿™é€šä¹±éº»ï¼Œä½†æ„¿ä¹Ÿèƒ½å¤Ÿå¸®åˆ°åšæŒçœ‹åˆ°è¿™é‡Œçš„ä½ ã€‚</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2000&#39; height=&#39;400&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2000\" data-rawheight=\"400\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2000\" data-original=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e2512d6fb3bbfb5d563a92e7b471d96f_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }, 
                {
                    "tag": "React", 
                    "tagLink": "https://api.zhihu.com/topics/20013159"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/57376166", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 2, 
            "title": "å¦‚ä½• Think in Hooks", 
            "content": "<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š</p><a href=\"https://link.zhihu.com/?target=http%3A//tonghuashuo.github.io/blog/2019/02/15/how-to-think-in-hooks\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic1.zhimg.com/v2-26d13ef2591ee05a3c4bba7fc34daa88_180x120.jpg\" data-image-width=\"1200\" data-image-height=\"675\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å¦‚ä½• Think in Hooks | åšå®¢</a><h2>å–œè¿ Hooks</h2><p>æ­£å½“ä¸­å›½äººæ°‘è¿˜æ²‰æµ¸åœ¨è¿‡å¹´çš„å¿™ç¢Œä¸­ï¼Œåœ¨ä¸–ç•Œçš„å¦ä¸€å¤´ï¼ŒReact å›¢é˜Ÿçš„å°ä¼™ä¼´ä»¬ä¸€ç‚¹ä¹Ÿæ²¡é—²ç€ï¼Œä»–ä»¬å†™äº† <a href=\"https://link.zhihu.com/?target=https%3A//reactjs.org/blog/2019/02/06/react-v16.8.0.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ä¸€ç¯‡åšå®¢</a> ï¼Œå¹¶å€Ÿæ­¤æ­£å¼å‘å¸ƒäº† Hooks â€”â€” ä¸€ä¸ªå®˜æ–¹å®£ä¼ äº†å¥½ä¹…ã€å¼€å‘è€…ä»¬ä¹ŸæœŸå¾…äº†å¥½ä¹…çš„æ–°ç‰¹æ€§ã€‚</p><p>Hooks æ­£å¼å‘å¸ƒäº v16.8.0ï¼Œä½†ç”±äºå®˜æ–¹å›¢é˜Ÿçš„ <a href=\"https://link.zhihu.com/?target=https%3A//reactjs.org/blog/2018/12/19/react-v-16-7.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ä¸€ç‚¹ç‚¹å°å¤±è¯¯</a>ï¼Œåœ¨ v16.7.0-alpha.1 ä¸­å°±å·²ç»åŒ…å«äº† Hooks çš„éƒ¨åˆ†ä»£ç ã€‚å¥½åœ¨ Dan Abramov ä¹‹å‰åœ¨ React Conf ä¸Šä¸€å†å¼ºè°ƒè¿™è¿˜åªæ˜¯å®éªŒç‰¹æ€§ï¼ŒAPI éšæ—¶æœ‰å¯èƒ½ä¼šæ”¹ï¼Œæ¬¢è¿æ—©æœŸåé¦ˆï¼Œä½†ä¸å»ºè®®ç”¨äºç”Ÿäº§ç¯å¢ƒï¼›å®˜æ–¹åœ¨äº‹åä¹ŸåŠæ—¶å‘æ–‡è¯´æ˜äº†åŸå§”ï¼Œå¹¶è¡¨ç¤ºâ€œä»¥åæ³¨æ„â€ã€‚ç®—æ˜¯ä¸€ä¸ªå°æ’æ›²å§ï¼Œæ— ä¼¤å¤§é›…ã€‚</p><h2>ç¨³ä½ï¼Œåˆ«æ€¥</h2><p>æœ€è¿‘æŠŠ Hooks éƒ¨åˆ†çš„æ–‡æ¡£é€šè¯»äº†ä¸€éï¼ŒåŠ ä¸Šå»å¹´ React Conf ä¸Šå‡ ä¸ªå…³äº Hooks çš„æ¼”è®²ï¼Œå¯¹ Hooks çš„æ¦‚å¿µåŠç”¨æ³•æœ‰äº†åŸºæœ¬çš„äº†è§£ã€‚</p><p>ä½œä¸ºå¯èƒ½æ˜¯ React ç»§ Fiber ä¹‹åæœ€å¤§çš„æ”¹å˜ï¼Œå®˜æ–¹å›¢é˜ŸçœŸçš„æ˜¯æ…ä¹‹åˆæ…ã€‚ä¸‹é¢è¿™äº›è¯æ‘˜è‡ª React å®˜æ–¹æ–‡æ¡£ä¸­å…³äº Hooks çš„éƒ¨åˆ†ï¼š</p><blockquote>You donâ€™t have to learn Hooks right now.<br/>ä½ ä¸å¿…ç°åœ¨å°±å­¦ä¹  Hooksã€‚<br/>There is no rush to migrate to Hooks. It takes a bit of a mindshift to start â€œthinking in Hooksâ€.<br/>ä¸ç”¨ç€æ€¥é©¬ä¸Šè¿ç§»åˆ° Hooksï¼Œå¼€å§‹â€œä»¥ Hooks çš„æ–¹å¼æ€è€ƒâ€éœ€è¦ä¸€ç‚¹ç‚¹æ€ç»´ä¸Šçš„è½¬å˜ã€‚<br/>It is an early time for Hooks, and some third-party libraries might not be compatible with Hooks at the moment.<br/>Hooks ç›®å‰å°šå¤„äºæ—©æœŸé˜¶æ®µï¼Œä¸€äº›ç¬¬ä¸‰æ–¹åº“ç›®å‰å¯èƒ½è¿˜ä¸å…¼å®¹ Hooksã€‚<br/>We intend for Hooks to cover all existing use cases for classes, but we will keep supporting class components for the foreseeable future.<br/>æˆ‘ä»¬è®¡åˆ’è®© Hooks è¦†ç›– class çš„æ‰€æœ‰ç°æœ‰ä½¿ç”¨åœºæ™¯ï¼Œä½†åœ¨å¯è§çš„æœªæ¥é‡Œæˆ‘ä»¬è¿˜æ˜¯ä¼šç»§ç»­æ”¯æŒ class ç»„ä»¶ã€‚<br/>There are no plans to remove classes from React.<br/>æˆ‘ä»¬ä¸æ‰“ç®—æŠŠ class ä» React ä¸­ç§»é™¤ã€‚<br/>Conceptually, React components have always been closer to functions.<br/>ä»æ¦‚å¿µä¸Šè®²ï¼ŒReact ç»„ä»¶ä¸€ç›´ä»¥æ¥éƒ½æ›´æ¥è¿‘å‡½æ•°ã€‚</blockquote><p>ç±»ä¼¼çš„è¡¨è¿°åœ¨å®˜æ–¹æ–‡æ¡£ä¸­éšå¤„å¯è§ã€‚å¯ä»¥çœ‹å‡ºï¼Œå®˜æ–¹å¯¹ Hooks çš„æ€åº¦éå¸¸æ˜ç¡®ï¼š<b><i>æœªæ¥æ˜¯å±äº Hooks çš„</i></b>ã€‚</p><p>ä½†è·¯å¾—ä¸€æ­¥ä¸€æ­¥èµ°ï¼Œå®˜æ–¹å¯¹å¼€å‘è€…ä¹Ÿæ˜¯ä¸€å†è¡¨ç¤ºï¼š</p><ol><li>Hooks æ˜¯å¯é€‰çš„ï¼Œè€ä»£ç ä¸ç”¨æ”¹ã€‚</li><li>Hooks çš„æ¦‚å¿µå¾ˆæ–°ï¼Œåˆ«ç€æ€¥ç”¨ã€‚</li><li>æ”¾å¿ƒï¼ŒClass è¿˜åœ¨ã€‚ï¼ˆè‡³å°‘çŸ­æœŸå†…ï¼‰</li></ol><h2>è¿ç§»åˆ° Hooks</h2><p>ç›¸ä¿¡å¤§éƒ¨åˆ†äººåœ¨å­¦ä¹  Hooks æ—¶éƒ½æƒ³è¿‡ï¼šæˆ‘å·²ç»æœ‰ä¸€ä¸ªå‡½æ•°ç»„ä»¶ / class ç»„ä»¶äº†ï¼Œè¦æ€ä¹ˆæŠŠå®ƒæ”¹é€ æˆç”¨ Hooks å®ç°å‘¢ï¼Ÿè¿™ä¸ªå¼¯è¦æ˜¯è½¬ä¸è¿‡æ¥ï¼Œåé¢çš„äº‹æƒ…å°±å¾ˆéš¾åŠäº†ã€‚</p><p>Hooks çš„æ–¹æ¡ˆï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæŠŠ class ç‹¬æœ‰çš„ä¸œè¥¿å…¨éƒ½æ•´åˆåˆ°å‡½æ•°ç»„ä»¶ä¸­å»ï¼Œæœ€ç»ˆè®©æ‰€æœ‰ç»„ä»¶å˜æˆå‡½æ•°ï¼Œä¸»è¦æ¶‰åŠå‡ ä¸ªæ–¹é¢ï¼š</p><h2>1. state</h2><p>å®šä¹‰ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œåˆ°åº•åº”è¯¥ç”¨å‡½æ•°è¿˜æ˜¯ç”¨ Classï¼Œè¿™æ˜¯è¿‡å»å¤§å®¶ä¸€ç›´éå¸¸å…³å¿ƒçš„é—®é¢˜ï¼Œæœ€æ ¸å¿ƒçš„ä¸€ç‚¹å°±æ˜¯ï¼šç»„ä»¶æ˜¯å¦åŒ…å« stateã€‚</p><p>Hooks é€šè¿‡ <code>useState()</code> æŠŠ state å¼•è¿›äº†å‡½æ•°ï¼Œå¹¶ä¸”ç›¸æ¯”åœ¨ Class ä¸­çš„è¯­æ³•è¿˜æ›´åŠ ç®€æ´ã€‚</p><h2>2. ç”Ÿå‘½å‘¨æœŸ</h2><p>ä½¿ç”¨ Class çš„å¦ä¸€ä¸ªåŸå› å°±æ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ŒHooks å»æ‰äº†ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œæ”¹ä¸ºç”¨ <code>useEffect()</code> ç­‰æ–¹æ³•å®ç°ã€‚å› æ­¤å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿç»™æ¯ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°éƒ½æ‰¾åˆ°å¯¹åº”çš„è§£å†³åŠæ³•ï¼Œé—®é¢˜ä¸å°±è§£å†³äº†å˜›ã€‚è®©æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯æ¥è¯•ä¸€ä¸‹ï¼š</p><blockquote>è¿™é‡Œæˆ‘ä»¬åªè®¨è®º React 16 å¼€å§‹çš„æ–°çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œ<code>UNSAFE_</code> å¼€å¤´çš„æ–¹æ³•ç”±äºè¦è¢«åºŸé™¤äº†ï¼Œå°±ä¸å†è®¨è®ºäº†ã€‚</blockquote><h2>2.1. <code>componentDidUpdate()</code></h2><p>Hooks ä½¿ç”¨ <code>useEffect(callback[, depends])</code> æ›¿ä»£ <code>componentDidUpdate()</code> æ¥å¤„ç†â€œå‰¯ä½œç”¨ï¼ˆSide Effectï¼Œç®€ç§° Effectï¼‰â€ã€‚</p><p>Effect ä¼šåœ¨æ¯æ¬¡ render å®Œæˆä¹‹åè¢«æ‰§è¡Œï¼Œåˆšå¥½å°±æ˜¯ <code>componentDidUpdate()</code> è§¦å‘çš„æ—¶æœºã€‚å¯ä»¥åœ¨ callback ä¸­é€šè¿‡æ¡ä»¶åˆ¤æ–­æ¥å†³å®šå…·ä½“è¦æ‰§è¡Œå“ªäº›é€»è¾‘ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>useEffect()</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­æ”¾å…¥éœ€è¦æ£€æŸ¥çš„å±æ€§ï¼Œåªæœ‰å½“æ•°ç»„é‡Œçš„å±æ€§å’Œä¸Šä¸€æ¬¡ä¸åŒæ—¶ï¼Œcallback æ‰ä¼šè¢«æ‰§è¡Œã€‚</p><p>Hooks çš„è®¾è®¡ç›®çš„ä¹‹ä¸€ï¼Œå°±æ˜¯è®©ç›¸å…³çš„é€»è¾‘é å¾—æ›´è¿‘ï¼Œè®©ä¸ç›¸å…³çš„é€»è¾‘ç‹¬ç«‹å¼€æ¥ï¼Œå› æ­¤å¦‚æœç»„ä»¶ä¸­åŒ…å«æœ‰å¤šç§ä¸åŒçš„å‰¯ä½œç”¨ï¼Œæœ€å¥½äº¤ç»™ä¸åŒçš„ <code>useEffect()</code> å»å¤„ç†ã€‚</p><h2>2.2. <code>componentDidMount()</code></h2><p><code>componentDidMount()</code> åŒæ ·ä¹Ÿç”¨äºå¤„ç†å‰¯ä½œç”¨ï¼Œå› æ­¤ä¹Ÿæ˜¯é€šè¿‡ <code>useEffect()</code> å®ç°ã€‚</p><p><code>componentDidMount()</code> å’Œ <code>componentDidUpdate()</code> éƒ½æ˜¯åœ¨ render ä¹‹åè¢«è§¦å‘ï¼Œæœ€å¤§çš„ä¸åŒåœ¨äºå‰è€…ä»…åœ¨ç¬¬ä¸€æ¬¡è§¦å‘ï¼Œåè€…ä»ç¬¬äºŒæ¬¡å¼€å§‹å¾€åéƒ½ä¼šè§¦å‘ã€‚å› æ­¤åªè¦èƒ½å¤ŸåŒºåˆ†è§¦å‘çš„æ—¶æœºï¼Œå°±èƒ½å¤Ÿç”¨åŒæ ·çš„å‡½æ•°æ¥å®Œæˆä¸¤ä¸ªé˜¶æ®µçš„ä»»åŠ¡ã€‚</p><blockquote>Instead of thinking in terms of â€œmountingâ€ and â€œupdatingâ€, you might find it easier to think that effects happen â€œafter renderâ€.<br/>ä¸ç”¨çº ç»“â€œæŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ï¼Œä½ åªéœ€è¦ç®€å•è®¤ä¸ºâ€œå‰¯ä½œç”¨å‘ç”Ÿåœ¨ render ä¹‹åâ€å°±å¥½äº†ã€‚</blockquote><p>åªéœ€è¦åœ¨ç¬¬äºŒä¸ªå‚æ•°ä½ç½®ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå‘ŠçŸ¥è¯¥ Effect ä¸ä¾èµ–ä»»ä½•å±æ€§çš„å˜åŒ–ï¼Œå³å¯å°†å…¶å’Œ <code>componentDidUpdate()</code> åŒºåˆ†å¼€æ¥ã€‚</p><p>åŒæ ·çš„ï¼Œä¸åŒçš„å‰¯ä½œç”¨åº”è¯¥äº¤ç»™ä¸åŒçš„ <code>useEffect()</code> å»å¤„ç†ã€‚</p><h2>2.3. <code>componentWillUnmount()</code></h2><p><code>useEffect()</code> é»˜è®¤ä¸éœ€è¦è¿”å›ä»»ä½•ä¸œè¥¿ï¼Œä½†å¦‚æœä½ å¸Œæœ›æŸä¸ªå‰¯ä½œç”¨åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œä¹‹å‰å…ˆåšç‚¹ä»€ä¹ˆï¼ˆæ¯”å¦‚æ¸…ç†ä¸€äº›æ—§æ•°æ®ï¼‰ï¼Œå¯ä»¥åœ¨ <code>useEffect()</code> çš„ callback ä¸­è¿”å›ä¸€ä¸ª cleanup å‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­å®šä¹‰çš„å†…å®¹ä¼šåœ¨ Effect ä¸‹ä¸€æ¬¡è¢«è°ƒç”¨ä¹‹å‰æ‰§è¡Œã€‚</p><p>å¦‚æœæ­¤æ—¶ <code>useEffect()</code> çš„ç¬¬äºŒä¸ªå‚æ•°åˆšå¥½æ˜¯ä¸ªç©ºæ•°ç»„ï¼Œé‚£ä¹ˆå°±åªä¼šåœ¨ç»„ä»¶é”€æ¯æ—¶è¢«è§¦å‘ï¼Œèµ·åˆ° <code>componentWillUnMount()</code> çš„ä½œç”¨ï¼Œå¦åˆ™å°±ç›¸å½“äºæ˜¯ <code>componentDidUpdate()</code> çš„ä¸€éƒ¨åˆ†ã€‚</p><h2>2.4. <code>getDerivedStateFromProps()</code></h2><p>åœ¨ Hooks çš„è®¾è®¡ä¸­ï¼Œæ˜¯æ²¡æœ‰è¿™ä¸ªç¯èŠ‚çš„ï¼Œç›¸å…³é€»è¾‘å…¨éƒ¨é€šè¿‡ç”¨ <code>useEffect()</code> è§¦å‘ update æ¥å®ç°ã€‚</p><h2>2.5. <code>shouldComponentUpdate()</code></h2><p>å‡½æ•°å¼ç»„ä»¶å¯ä»¥ä½¿ç”¨ <code>React.memo(renderFn, areEqualFn)</code> æ¥è¿›è¡Œæ€§èƒ½ä¼˜åŒ–ã€‚</p><p><code>React.memo()</code> é»˜è®¤ç›¸å½“äº <code>React.PureComponent</code>ï¼Œé€šè¿‡å¯¹ props è¿›è¡Œæµ…æ¯”è¾ƒæ¥å†³å®šæ˜¯å¦è¦æ›´æ–°ã€‚ä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡å…¶ä¸­çš„ <code>areEqualFn</code> æ¥è‡ªå®šä¹‰åˆ¤æ–­çš„æ–¹å¼ï¼Œèµ·åˆ° <code>shouldComponentUpdate()</code> çš„ä½œç”¨ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ <code>areEqualFn</code> å¦‚æœè¿”å› true è¡¨ç¤ºä¸¤æ¬¡çš„ props ç›¸åŒï¼Œä¸æ›´æ–°ï¼Œè¿™ä¸€ç‚¹å’Œ <code>shouldComponentUpdate()</code> åˆšå¥½ç›¸åã€‚ä»å‡½æ•°å‘½åä¸Šä¹Ÿèƒ½çœ‹å‡ºæ¥ã€‚</p><p>å¦å¤–ï¼Œç”±äº <code>React.memo()</code> ä»…é€‚ç”¨äºå‡½æ•°å¼ç»„ä»¶ï¼Œå› æ­¤åªæ¯”è¾ƒ propsï¼Œä¸æ¯”è¾ƒ stateã€‚</p><h2>2.6. <code>getSnapshotBeforeUpdate()</code>ã€<code>componentDidCatch()</code></h2><p>ç›®å‰è¿˜æ²¡æœ‰é’ˆå¯¹è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½†å®˜æ–¹è¡¨ç¤ºæœªæ¥ä¼šæœ‰çš„ã€‚</p><p>å‰è€…ç”¨çš„æ¯”è¾ƒå°‘ï¼Œå½±å“ä¸å¤§ï¼›åè€…æ„å‘³ç€ Error Boundary åœ¨ Hooks ä¸­æš‚æ—¶è¿˜ç”¨ä¸äº†ï¼Œä¸è¿‡å¦‚æœç»„ä»¶è®¾è®¡çš„åˆç†çš„è¯ï¼Œä¸ç”¨ä¹Ÿæ²¡é—®é¢˜ã€‚</p><h2>2.7. <code>forceUpdate()</code></h2><p>ä¸¥æ ¼è¯´æ¥ï¼Œè¿™ä¸ªå‡½æ•°ä¸å±äºç”Ÿå‘½å‘¨æœŸï¼Œä½†æ˜¯å› ä¸ºå’Œç”Ÿå‘½å‘¨æœŸæ¯æ¯ç›¸å…³ï¼Œæ‰€ä»¥æ”¾äº†è¿›æ¥ã€‚</p><p>React ä¿ç•™äº†è¿™ä¸ªå‡½æ•°ï¼Œç”¨äºåœ¨å®åœ¨æ²¡åŠæ³•çš„æƒ…å†µä¸‹å¼ºåˆ¶è§¦å‘ä¸€æ¬¡ updateã€‚æ³¨æ„ä½¿ç”¨æ—¶å€™å‰é¢ä¸ç”¨åŠ  <code>this.</code>ï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚</p><h2>Thinking in Hooks</h2><p>é™¤äº†è¯­æ³•ä¸Šçš„å˜åŒ–ï¼ŒHooks åœ¨ä»£ç è®¾è®¡æ€æƒ³ä¸Šä¹Ÿæœ‰ä¸å°çš„å˜åŒ–ã€‚å¦‚æœä½ å·²ç»å†³å®šè¦å¼€å§‹ä½¿ç”¨ Hooksï¼Œé‚£ä¹ˆæœ‰äº›è§‚å¿µéœ€è¦è½¬å˜ä¸€ä¸‹ï¼š</p><h2>1. ç”¨è‡ªå®šä¹‰ Hook ä»£æ›¿ Render Props å’Œ HOC</h2><p>åœ¨ Hooks å‡ºç°ä¹‹å‰ï¼Œæƒ³è¦åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨ä¸€æ®µé€»è¾‘é€šå¸¸ä¼šä½¿ç”¨ Render Props å’Œ High-Order Component æ¥è§£å†³ã€‚</p><p>åœ¨ React â€œä¸€åˆ‡çš†ç»„ä»¶â€çš„æ€æƒ³ä¸‹ï¼Œæˆ‘ä»¬æ—©å·²ä¹ æƒ¯äº†è¿™æ ·çš„æ€ç»´æ¨¡å¼ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¹ æƒ¯äº†å¦ä¸€ä»¶äº‹ï¼šåŒ…è£¹å™¨åœ°ç‹±ï¼ˆwrapper hellï¼‰ï¼Œç»„ä»¶å±‚å±‚åµŒå¥—ï¼Œå­å­å­™å­™æ— ç©·æ— å°½ã€‚</p><p>Hooks é€šè¿‡è‡ªå®šä¹‰ Hook æŠŠå¯å¤ç”¨çš„é€»è¾‘æŠ½å–å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚ç»„ä»¶é—´å¤ç”¨é€»è¾‘å°±åƒå¤ç”¨ä¸€ä¸ªå·¥å…·å‡½æ•°ä¸€æ ·ã€‚</p><h2>2. æŒ‰ä¸šåŠ¡é€»è¾‘æ‹†åˆ†ä»£ç ï¼Œè€Œä¸æ˜¯ç”Ÿå‘½å‘¨æœŸ</h2><p>åœ¨ Class ä¸­ï¼Œæˆ‘ä»¬æŒ‰ç”Ÿå‘½å‘¨æœŸæ¥æ‹†åˆ†ä»£ç ï¼Œè¿™å°±å¯¼è‡´ä¸€äº›ç´§å¯†ç›¸å…³çš„ä¸šåŠ¡è¢«æ‹†åˆ†åˆ°ä¸åŒå‡½æ•°ä¸­ï¼ŒåŒä¸€å‡½æ•°ä¸­å¯èƒ½åŒ…å«äº†å¤šä¸ªä¸ç›¸å…³çš„ä¸šåŠ¡ã€‚</p><p>ä»è®¡ç®—æœºçš„è§’åº¦ï¼Œç”Ÿå‘½å‘¨æœŸå›ºç„¶éå¸¸é‡è¦ï¼Œå¿…é¡»ç†Ÿç»ƒæŒæ¡ï¼›ä½†ä»å†™ä»£ç çš„ç›®çš„æ¥çœ‹ï¼Œä¸šåŠ¡é€»è¾‘æ‰æ˜¯æˆ‘ä»¬å…³å¿ƒçš„é‡ç‚¹ã€‚</p><p>Hooks æŠŠä»£ç æŒ‰ç…§ä¸šåŠ¡é€»è¾‘çš„ç›¸å…³æ€§è¿›è¡Œæ‹†åˆ†ï¼ŒæŠŠåŒä¸€ä¸šåŠ¡çš„ä»£ç é›†ä¸­åœ¨ä¸€èµ·ï¼Œä¸åŒçš„ä¸šåŠ¡çš„ä»£ç ç‹¬ç«‹å¼€æ¥ï¼Œç»´æŠ¤èµ·æ¥å°±æ¸…æ¥šå¾ˆå¤šã€‚</p><h2>æœ€å</h2><p>Hooks ä»è®¾è®¡æ€è·¯ä¸Šè®²ï¼Œç¡®å®ä¼šæ¯” Class æ›´ç¬¦åˆç›´è§‰ä¸€ç‚¹ã€‚å…·ä½“åœ¨ä½¿ç”¨ä¸Šè¿˜ä¼šä¸ä¼šæœ‰åˆ«çš„å‘ï¼Œç­‰å¤§å®¶å†ä½¿ç”¨ä¸€æ®µæ—¶é—´çœ‹çœ‹å§ã€‚</p><p>Happy Hooking !</p>", 
            "topic": [
                {
                    "tag": "React", 
                    "tagLink": "https://api.zhihu.com/topics/20013159"
                }, 
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }
            ], 
            "comments": [
                {
                    "userName": "å‘†æ¯›ç‹çš„äº²å«å…µ", 
                    "userLink": "https://www.zhihu.com/people/6e457d30248cb24aca979620650510ee", 
                    "content": "<p>useEffectçš„ç¬¬äºŒä¸ªå‚æ•°ä¸º[]çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½ç®—ä½œå½»åº•åŒºåˆ†componentDidUpdatedå’ŒcomponentDidMountedï¼ŒuseEffectç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºçš„æ—¶å€™ï¼Œæ¯æ¬¡ï¼ˆåŒ…æ‹¬ç¬¬ä¸€æ¬¡ï¼‰éƒ½ä¼šè¢«è°ƒç”¨ï¼Œè€ŒcomponentDidUpdatedåœ¨ç¬¬ä¸€æ¬¡æŒ‚è½½æ—¶æ˜¯ä¸ä¼šè¢«è°ƒç”¨çš„ã€‚</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/57376013", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 5, 
            "title": "ä½ å¯èƒ½å·²ç»çŸ¥é“çš„ ES 2018 å’Œ 2019", 
            "content": "<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š</p><a href=\"https://link.zhihu.com/?target=http%3A//tonghuashuo.github.io/blog/2019/02/11/es2018-and-es2019\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-5646b4878e533cd7c725ce4c17984071_180x120.jpg\" data-image-width=\"1200\" data-image-height=\"675\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ä½ å¯èƒ½å·²ç»çŸ¥é“çš„ ES 2018 å’Œ 2019 | åšå®¢</a><h2>æ ‡å‡†è¿™äº‹å„¿å§â€¦â€¦</h2><p>ES 2019ï¼ˆES 10ï¼‰æ ‡å‡†äºå¹´å‰æ­£å¼å‘å¸ƒï¼Œå€Ÿæ­¤æœºä¼šï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹éƒ½æœ‰å“ªäº›ç‰¹æ€§æœ‰å¹¸è½¬æ­£å§ã€‚é¡ºå¸¦æŠŠ ES 2018 çš„å†…å®¹ä¹Ÿè¡¥ä¸€ä¸‹ã€‚</p><p>ECMAScript æ ‡å‡†çš„åˆ¶å®šè¿‡ç¨‹ï¼Œè‡ª 2015 å¹´å¤§æ”¹ï¼Œè‡³ä»Šå·²ç»æ˜¯ç¬¬ 5 ä¸ªå¹´å¤´äº†ï¼Œæƒ³å¿…å¤§å®¶éƒ½å¿ƒé‡Œæœ‰æ•°äº†ã€‚ä¸ Java ç­‰è¯­è¨€ä¸åŒï¼ŒJS å¹¶éå…ˆåˆ¶å®šæ ‡å‡†å†å¼€å§‹ä½¿ç”¨ï¼Œæ°æ°ç›¸åï¼Œæ˜¯å¤§å®¶å…ˆç”¨ç€ï¼Œè§‰å¾—åˆé€‚çš„ï¼Œæ‰æ”¶å½•è¿›æ ‡å‡†ã€‚æ ‡å‡†çš„å­˜åœ¨æ›´åƒæ˜¯ä¸€ä¸ªâ€œå¹´åº¦ä¼˜ç§€ç‰¹æ€§åˆé›†â€ã€‚å¯¹ç»å¤§éƒ¨åˆ†å¼€å‘è€…æ¥è¯´ï¼Œä¸€é¡¹ç‰¹æ€§è¿›æ²¡è¿›æ ‡å‡†ä¸é‡è¦ï¼ŒBabel æ”¯ä¸æ”¯æŒæ‰é‡è¦ã€‚æ ‡å‡†ä½ éšä¾¿å†™ï¼Œä¸ç”¨ Babel ç®—æˆ‘è¾“ã€‚</p><p>é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹ 2018 å’Œ 2019 ä¸¤ä¸ªå¹´åº¦çš„å¤§åˆé›†éƒ½æœ‰äº›å•¥å§ã€‚</p><h2>ES2018ï¼ˆES9ï¼‰</h2><h2>1ï¼‰å¼‚æ­¥è¿­ä»£å™¨ï¼ˆAsynchronous Iterationï¼‰</h2><p>æ€»æœ‰é‚£ä¹ˆäº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦åŒæ­¥æ‰§è¡Œä¸€äº›å¼‚æ­¥çš„æ“ä½œï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·çš„ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span> <span class=\"nx\">actions</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n  <span class=\"nb\">Promise</span><span class=\"p\">.</span><span class=\"nx\">resolve</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span>\n  <span class=\"nb\">Promise</span><span class=\"p\">.</span><span class=\"nx\">resolve</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">),</span>\n  <span class=\"nb\">Promise</span><span class=\"p\">.</span><span class=\"nx\">resolve</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span>\n<span class=\"p\">]</span>\n</code></pre></div><p>åˆ©ç”¨ <code>async / await</code> è¯­æ³•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„åšåˆ°è¿™ç‚¹ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kr\">async</span> <span class=\"kd\">function</span> <span class=\"nx\">process</span> <span class=\"p\">(</span><span class=\"nx\">actions</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">for</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"nx\">action</span> <span class=\"k\">of</span> <span class=\"nx\">actions</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"kr\">await</span> <span class=\"nx\">asyncFunc</span><span class=\"p\">(</span><span class=\"nx\">action</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>ä¸Šé¢çš„å†™æ³•ï¼Œä¼šæŒ‰é¡ºåºæ‰§è¡Œ <code>asyncFunc</code>ï¼Œä¸Šä¸€ä¸ªç»“æŸä¹‹åæ‰ä¼šå¼€å§‹ä¸‹ä¸€ä¸ªï¼Œæ¯æ¬¡å¾—åˆ°çš„ <code>action</code> éƒ½æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œæœ¬èº«ï¼ˆæ¯”å¦‚è¿™é‡Œæ˜¯ä¸€ä¸ª Promise å¯¹è±¡ï¼‰ã€‚</p><p>ES 2018 ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ–°çš„æ–¹å¼ï¼Œåœ¨å‰é¢ä»£ç çš„åŸºç¡€ä¹‹ä¸Šï¼Œè®©æ¯æ¬¡å¾—åˆ°çš„ <code>action</code> ç›´æ¥æ˜¯å¼‚æ­¥æ“ä½œå®Œæˆä¹‹åçš„ç»“æœï¼ˆæ¯”å¦‚è¿™é‡Œæ˜¯ Promise è¢« resolve ä¹‹åçš„ç»“æœï¼‰ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kr\">async</span> <span class=\"kd\">function</span> <span class=\"nx\">process</span> <span class=\"p\">(</span><span class=\"nx\">actions</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"k\">for</span> <span class=\"kr\">await</span> <span class=\"p\">(</span><span class=\"k\">const</span> <span class=\"nx\">action</span> <span class=\"k\">of</span> <span class=\"nx\">actions</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n    <span class=\"nx\">asyncFunc</span><span class=\"p\">(</span><span class=\"nx\">action</span><span class=\"p\">)</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div><h2>2ï¼‰Rest/Spread Properties å¼€å§‹é€‚ç”¨äºå¯¹è±¡</h2><p>è¿™æ˜¯ä¸€ä¸ªä» ES 2015 å¼€å§‹å°±è¢«å¹¿æ³›ä½¿ç”¨çš„ç‰¹æ€§ï¼Œåªä¸è¿‡ ES 2015 çš„æ ‡å‡†åªæ”¯æŒç”¨äºæ•°ç»„ï¼Œä» ES 2018 å¼€å§‹ä¹Ÿæ”¯æŒå¯¹è±¡äº†ã€‚</p><p>äº‹å®ä¸Š Mapã€Setã€String åŒæ ·æ”¯æŒ <code>...</code>ï¼Œä½†å…·ä½“æ˜¯å“ªä¸ªç‰ˆæœ¬å¼•å…¥çš„æˆ‘è¿˜çœŸæ²¡æ•°ã€‚ï¼ˆåæ­£æˆ‘å·²ç»ç”¨äº†å¾ˆä¹…äº†ï¼Œä¸ç®¡äº†ï¼‰</p><h2>3ï¼‰Promise.finally</h2><p>æ­£å¦‚å®ƒçš„åå­—ï¼Œfinallyã€‚è¿™ä¹Ÿæ˜¯ä¸ªç”¨äº†å¥½ä¹…ç»ˆäºè¿›æ ‡å‡†çš„ç‰¹æ€§ã€‚</p><p>åœ¨å¤„ç† Promise çš„è¿”å›æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šæ— è®ºç»“æœçŠ¶æ€æ˜¯ resolved è¿˜æ˜¯ rejectedï¼Œéƒ½æ‰§è¡Œä¸€æ ·çš„é€»è¾‘ã€‚</p><p>æ—©å…ˆé‡åˆ°è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬ä¸å¾—ä¸åœ¨ <code>then()</code> å’Œ <code>catch()</code> é‡Œéƒ½å†™ä¸€éï¼Œç°åœ¨å¯ä»¥ä¸€æ¬¡æ€§å†™åœ¨ <code>finally()</code> é‡Œã€‚ä¸€ä¸ª <code>finally()</code> å°±ç­‰ä»·äºä¸€ç»„å›è°ƒå‡½æ•°ç›¸åŒçš„ <code>then()</code> å’Œ <code>catch()</code>ã€‚</p><p>è™½ç„¶åå­—å«â€œæœ€ç»ˆâ€ï¼Œä½†å¹¶ä¸ä»£è¡¨è¿™æ˜¯ Promise æ‰§è¡Œçš„ç»ˆç‚¹ã€‚<code>finally()</code> åé¢è¿˜å¯ä»¥ç»§ç»­è·Ÿ <code>then()</code> å’Œ <code>catch()</code>ï¼Œæ— é™è·Ÿã€‚</p><h2>4ï¼‰ç§»é™¤å¯¹â€œåœ¨â€˜å¸¦æ ‡ç­¾çš„æ¨¡ç‰ˆå­—é¢é‡â€™ä¸­ä½¿ç”¨éæ³•è½¬ä¹‰åºåˆ—â€çš„é™åˆ¶</h2><p>ä»è¿™é‡Œå¼€å§‹çš„å†…å®¹æ¯”è¾ƒé«˜é˜¶ï¼Œä¸€èˆ¬ç”¨ä¸åˆ°ï¼Œèµ¶æ—¶é—´çš„è¯ä½ å¯ä»¥è·³è¿‡ï¼Œç›´æ¥å»çœ‹ ES 2019ã€‚</p><p>è¿™ä¸€èŠ‚çš„æ ‡é¢˜æœ‰ç‚¹ç»•ï¼Œæˆ‘ä»¬æ‹†å¼€æ¥è®²ã€‚é¦–å…ˆæ˜¯â€œå¸¦æ ‡ç­¾çš„æ¨¡ç‰ˆå­—é¢é‡â€ã€‚</p><p>ES 2015 å¼•å…¥äº†â€œæ¨¡æ¿å­—é¢é‡â€çš„ç‰¹æ€§ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œé•¿è¿™æ ·ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span> <span class=\"nx\">name</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;John&#39;</span>\n<span class=\"k\">const</span> <span class=\"nx\">greetings</span> <span class=\"o\">=</span> <span class=\"sb\">`Hi, </span><span class=\"si\">${</span><span class=\"nx\">name</span><span class=\"si\">}</span><span class=\"sb\">`</span> <span class=\"c1\">// &#39;Hi, John&#39;\n</span></code></pre></div><p>è¿™ä¸ªç‰¹æ€§æœ‰ä¸€ä¸ªç”Ÿåƒ»ç”¨æ³•ï¼Œå®ƒå…è®¸æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡æ¿å‡½æ•°ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kd\">function</span> <span class=\"nx\">myTag</span><span class=\"p\">(</span><span class=\"nx\">strings</span><span class=\"p\">,</span> <span class=\"p\">...</span><span class=\"nx\">params</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"c1\">// strings: [&#39;that &#39;, &#39; is a &#39;, &#39;&#39;]\n</span><span class=\"c1\"></span>\n  <span class=\"k\">const</span> <span class=\"nx\">name</span> <span class=\"o\">=</span> <span class=\"nx\">params</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n  <span class=\"k\">const</span> <span class=\"nx\">age</span> <span class=\"o\">=</span> <span class=\"nx\">params</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n  <span class=\"k\">const</span> <span class=\"nx\">title</span> <span class=\"o\">=</span> <span class=\"nx\">age</span> <span class=\"o\">&gt;</span> <span class=\"mi\">99</span> <span class=\"o\">?</span> <span class=\"s1\">&#39;centenarian&#39;</span> <span class=\"o\">:</span> <span class=\"s1\">&#39;youngster&#39;</span>\n\n  <span class=\"k\">return</span> <span class=\"nx\">strings</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"nx\">name</span> <span class=\"o\">+</span> <span class=\"nx\">strings</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"o\">+</span> <span class=\"nx\">title</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">const</span> <span class=\"nx\">person</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;Mike&#39;</span>\n<span class=\"k\">const</span> <span class=\"nx\">age</span> <span class=\"o\">=</span> <span class=\"mi\">28</span>\n<span class=\"k\">const</span> <span class=\"nx\">output</span> <span class=\"o\">=</span> <span class=\"nx\">myTag</span><span class=\"sb\">`that </span><span class=\"si\">${</span> <span class=\"nx\">person</span> <span class=\"si\">}</span><span class=\"sb\"> is a </span><span class=\"si\">${</span> <span class=\"nx\">age</span> <span class=\"si\">}</span><span class=\"sb\">`</span>\n<span class=\"c1\">// that Mike is a youngster\n</span></code></pre></div><p>è¿™å°±æ˜¯â€œå¸¦æ ‡ç­¾çš„æ¨¡ç‰ˆå­—é¢é‡â€ã€‚å°½ç®¡æˆ‘ä¸¥é‡æ€€ç–‘è¿™ä¸ªç”¨æ³•çš„å®ç”¨æ€§ï¼ˆæˆ–è®¸æ˜¯è§‰å¾—è¿™æ ·æ›´åŠ è¯­ä¹‰åŒ–ï¼Ÿæ™®é€šå‡½æ•°è¯­ä¹‰ä¹Ÿä¸å·®å•Šï¼Ÿï¼‰ï¼Œä½† ES 2018 è¿˜æ˜¯é€‰æ‹©äº†å¯¹è¿™ä¸ªç‰¹æ€§è¿›è¡Œå®Œå–„ã€‚</p><p>ES 2016 ä¸ºè¿™ä¸ªç‰¹æ€§åŠ å…¥äº†å¯¹è½¬ä¹‰åºåˆ—çš„æ”¯æŒï¼Œæ¯”å¦‚å…«è¿›åˆ¶ï¼ˆ\\ å¼€å¤´ï¼‰ã€åå…­è¿›åˆ¶ï¼ˆ\\x å¼€å¤´ï¼‰ã€Unicode å­—ç¬¦ï¼ˆ\\u å¼€å¤´ï¼‰ï¼Œä½†å‰æå¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„è½¬ä¹‰åºåˆ—ã€‚å¦‚æœæ˜¯æ— æ•ˆçš„åºåˆ—ï¼Œä¼šæŠ¥é”™ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"nx\">latex</span><span class=\"sb\">`</span><span class=\"err\">\\</span><span class=\"sb\">u00A9`</span>   <span class=\"c1\">// åˆæ³•ï¼Œè¡¨ç¤ºâ€œç‰ˆæƒç¬¦å·â€\n</span><span class=\"c1\"></span><span class=\"nx\">latex</span><span class=\"sb\">`</span><span class=\"err\">\\</span><span class=\"sb\">unicode`</span> <span class=\"c1\">// ä¸åˆæ³•ï¼ŒæŠ¥é”™\n</span></code></pre></div><p>ES 2018 å»æ‰äº†è¿™ä¸ªé™åˆ¶ï¼Œä¸»è¦æ˜¯è€ƒè™‘åˆ°å¯¹ä¸€äº›é¢†åŸŸç‰¹å®šè¯­è¨€çš„æ”¯æŒï¼Œæ¯”å¦‚ <a href=\"https://link.zhihu.com/?target=https%3A//www.latex-project.org/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">LaTeX</a>ã€‚ï¼ˆå­¦æœ¯ç•Œä¸€ç§å¸¸ç”¨çš„æ ‡è®°å‹è¯­è¨€ï¼Œç±»ä¼¼ HTMLï¼Œå…¶è¯­æ³•ä¼šç”¨åˆ°å¤§é‡å½¢å¦‚è½¬ä¹‰åºåˆ—çš„æŒ‡ä»¤ï¼Œå¦‚<code>\\section</code>ã€<code>\\frac</code>ã€<code>\\sum</code> ç­‰ï¼‰</p><p>ä½†å»æ‰é™åˆ¶åªæ˜¯è¯´ä¸æŠ¥é”™äº†ï¼Œæ¨¡æ¿ä¸­çš„æ— æ•ˆè½¬ä¹‰åºåˆ—ä¼šè¢«æ›¿æ¢ä¸º undefinedã€‚æ¯”å¦‚ä¸‹é¢è¿™æ ·ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kd\">function</span> <span class=\"nx\">myTag</span> <span class=\"p\">(</span><span class=\"nx\">template</span><span class=\"p\">,</span> <span class=\"p\">...</span><span class=\"nx\">params</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">({</span> <span class=\"nx\">template</span><span class=\"p\">,</span> <span class=\"nx\">params</span> <span class=\"p\">})</span>\n<span class=\"p\">}</span>\n\n<span class=\"k\">const</span> <span class=\"nx\">foo</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;foo&#39;</span>\n<span class=\"k\">const</span> <span class=\"nx\">bar</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;bar&#39;</span>\n<span class=\"nx\">myTag</span><span class=\"sb\">`aaa</span><span class=\"si\">${</span><span class=\"nx\">foo</span><span class=\"si\">}</span><span class=\"err\">\\</span><span class=\"sb\">unicode</span><span class=\"si\">${</span><span class=\"nx\">bar</span><span class=\"si\">}</span><span class=\"sb\">bbb`</span>\n<span class=\"cm\">/* {\n</span><span class=\"cm\">  template: [&#39;aaa&#39;, undefined, &#39;bbb&#39;, raw: [&#39;aaa&#39;, &#39;\\unicode&#39;, &#39;bbb]],\n</span><span class=\"cm\">  params: [&#39;foo&#39;, &#39;bar&#39;]\n</span><span class=\"cm\">} */</span>\n</code></pre></div><p>ä¸Šé¢çš„ä»£ç é‡Œï¼Œ<code>template</code> æ˜¯æ¨¡æ¿éƒ¨åˆ†è¢« <code>${foo}</code> ç­‰å˜é‡åˆ†å‰²å½¢æˆçš„æ•°ç»„ï¼›<code>params</code> å°±æ˜¯ <code>${foo}</code> ç­‰å˜é‡ç»„æˆçš„æ•°ç»„ã€‚å¯ä»¥çœ‹åˆ°ï¼Œ<code>\\unicode</code> ç”±äºæ˜¯æ— æ•ˆçš„è½¬ä¹‰åºåˆ—ï¼Œè¢«æ›¿æ¢ä¸º <code>undefined</code>ï¼Œä½†åœ¨ <code>template.raw</code> é‡Œå¾—ä»¥ä¿ç•™ã€‚</p><p><code>template.raw</code> æ˜¯â€œå¸¦æ ‡ç­¾çš„æ¨¡ç‰ˆå­—é¢é‡â€ä¸­ <code>template</code> å‚æ•°ç‰¹æœ‰çš„ä¸€ä¸ªå±æ€§ï¼Œä¿å­˜äº†æœªè¢«æ›¿æ¢çš„åŸå§‹å­—ç¬¦ä¸²ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œæ—¢é¿å…äº†æŠ¥é”™ï¼Œåˆä¿ç•™äº†å¼€å‘è€…è‡ªè¡Œå¤„ç†è¿™äº›è½¬ä¹‰åºåˆ—çš„èƒ½åŠ›ã€‚</p><h2>5ï¼‰å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€äº›æ”¹è¿›</h2><h2>5.1ï¼‰<code>s</code> æ ‡å¿—ï¼ˆdotAll æ¨¡å¼ï¼‰</h2><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç‚¹å· <code>.</code> è¡¨ç¤ºåŒ¹é…ä»»ä¸€å•ä¸ªå­—ç¬¦ï¼Œä½†è¿™ä¸åŒ…å«æ¢è¡Œç¬¦ï¼ˆå¦‚ï¼š<code>\\n</code>ã€<code>\\r</code>ã€<code>\\f</code> ç­‰ï¼‰ã€‚</p><p>ç°åœ¨å¯ä»¥é€šè¿‡åœ¨å°¾éƒ¨å¢åŠ  <code>s</code> æ ‡å¿—çš„æ–¹å¼ï¼Œè®©å®ƒåŒ¹é…äº†ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"o\">/</span><span class=\"nx\">hello</span><span class=\"p\">.</span><span class=\"nx\">world</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"nx\">test</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello\\nworld&#39;</span><span class=\"p\">)</span>  <span class=\"c1\">// false\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"nx\">hello</span><span class=\"p\">.</span><span class=\"nx\">world</span><span class=\"o\">/</span><span class=\"nx\">s</span><span class=\"p\">.</span><span class=\"nx\">test</span><span class=\"p\">(</span><span class=\"s1\">&#39;hello\\nworld&#39;</span><span class=\"p\">)</span> <span class=\"c1\">// true\n</span></code></pre></div><h2>5.2ï¼‰æ‰©å±• Unicode åŒ¹é…èŒƒå›´</h2><p>ä¸€ç›´ä»¥æ¥ï¼Œè¦ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å„ç§ Unicode å­—ç¬¦å¹¶ä¸å®¹æ˜“ï¼Œåƒ <code>\\w</code>ã€<code>\\W</code>ã€<code>\\d</code> ç­‰éƒ½åªèƒ½åŒ¹é…è‹±æ–‡å­—ç¬¦å’Œæ•°å­—ï¼Œå¯¹äºé™¤æ­¤ä¹‹å¤–çš„å­—ç¬¦å°±å¾ˆéš¾åŒ¹é…äº†ï¼Œä¾‹å¦‚éè‹±è¯­çš„æ–‡å­—ã€‚</p><p>å¹¸è¿çš„æ˜¯ï¼ŒUnicode ä¸ºæ¯ä¸ªç¬¦å·æ·»åŠ äº†å…ƒæ•°æ®å±æ€§ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å¯¹å„ç§ç¬¦å·è¿›è¡Œåˆ†ç»„å’Œæè¿°ã€‚ä¾‹å¦‚ï¼ŒUnicode æ•°æ®åº“ç»™æ‰€æœ‰å°åœ°è¯­å­—ç¬¦ï¼ˆà¤¹à¤¿à¤¨à¥à¤¦à¥€ï¼‰è®¾ç½®äº† Script å±æ€§ï¼Œå–å€¼ä¸º Devanagariï¼ˆæ¢µæ–‡ï¼‰ï¼Œè¿˜è®¾ç½®äº†ä¸€ä¸ª Script_Extensions å±æ€§ï¼ŒåŒæ ·å–å€¼ä¸º Devanagariã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æœç´¢ Script=Devanagari æ¥å¾—åˆ°æ‰€æœ‰å°åœ°æ–‡å­—ç¬¦ã€‚</p><p>ES 2018 å…è®¸æ­£åˆ™è¡¨è¾¾å¼é€šè¿‡ <code>\\p{...}</code> æ¥æ‰©å±• Unicode ç¬¦å·çš„åŒ¹é…èŒƒå›´ã€‚ä¾‹å¦‚ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"c1\">// æ‰©å±•åŒ¹é…èŒƒå›´ï¼Œå…è®¸åŒ¹é…å¸Œè…Šå­—ç¬¦\n</span><span class=\"c1\"></span><span class=\"k\">const</span> <span class=\"nx\">reGreekSymbol</span> <span class=\"o\">=</span> <span class=\"sr\">/\\p{Script=Greek}/u</span>\n<span class=\"nx\">reGreekSymbol</span><span class=\"p\">.</span><span class=\"nx\">test</span><span class=\"p\">(</span><span class=\"s1\">&#39;Ï€&#39;</span><span class=\"p\">)</span> <span class=\"c1\">// true\n</span><span class=\"c1\"></span>\n<span class=\"c1\">// æ‰©å±•åŒ¹é…èŒƒå›´ï¼Œå…è®¸åŒ¹é… Emoji\n</span><span class=\"c1\"></span><span class=\"k\">const</span> <span class=\"nx\">reEmoji</span> <span class=\"o\">=</span> <span class=\"sr\">/\\p{Emoji}\\p{Emoji_Modifier}/u</span>\n<span class=\"nx\">reEmoji</span><span class=\"p\">.</span><span class=\"nx\">test</span><span class=\"p\">(</span><span class=\"s1\">&#39;âœŒğŸ½&#39;</span><span class=\"p\">)</span> <span class=\"c1\">//true\n</span></code></pre></div><p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ <code>\\P{...}</code>ï¼ˆæ³¨æ„ï¼Œå¤§å†™ Pï¼‰æ¥å»åï¼Œç¼©å°åŒ¹é…èŒƒå›´ã€‚</p><h2>5.3ï¼‰æ­£åˆ™è¡¨è¾¾å¼å‘½åæ•è·ç»„</h2><p>æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒé€šè¿‡æ‹¬å·åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­æŒ‡å®šå¤šä¸ªæ•è·ç»„ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span>\n  <span class=\"nx\">reDate</span> <span class=\"o\">=</span> <span class=\"sr\">/([0-9]{4})-([0-9]{2})-([0-9]{2})/</span><span class=\"p\">,</span>\n  <span class=\"nx\">match</span>  <span class=\"o\">=</span> <span class=\"nx\">reDate</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-02-11&#39;</span><span class=\"p\">),</span>\n  <span class=\"nx\">year</span>   <span class=\"o\">=</span> <span class=\"nx\">match</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">],</span> <span class=\"c1\">// 2019\n</span><span class=\"c1\"></span>  <span class=\"nx\">month</span>  <span class=\"o\">=</span> <span class=\"nx\">match</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">],</span> <span class=\"c1\">// 02\n</span><span class=\"c1\"></span>  <span class=\"nx\">day</span>    <span class=\"o\">=</span> <span class=\"nx\">match</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">];</span> <span class=\"c1\">// 11\n</span></code></pre></div><p>è¿™æ ·çš„ä»£ç è™½ç„¶å¯ä»¥è·‘é€šï¼Œä½†é˜…è¯»èµ·æ¥æ¯”è¾ƒéš¾æ‡‚ï¼Œè€Œä¸”ä¿®æ”¹æ­£åˆ™æœ‰å¯èƒ½ä¼šå½±å“åˆ°åŒ¹é…å†…å®¹çš„ç´¢å¼•ã€‚</p><p>ES 2018 å…è®¸åœ¨ <code>(</code> åç«‹å³ä½¿ç”¨ç¬¦å· <code>?&lt;name&gt;</code> å¯¹æ•è·ç»„è¿›è¡Œå‘½åï¼ŒåŒ¹é…å¤±è´¥çš„ä¼šè¿”å› <code>undefined</code>ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span>\n  <span class=\"nx\">reDate</span> <span class=\"o\">=</span> <span class=\"sr\">/(?&lt;year&gt;[0-9]{4})-(?&lt;month&gt;[0-9]{2})-(?&lt;day&gt;[0-9]{2})/</span><span class=\"p\">,</span>\n  <span class=\"nx\">match</span>  <span class=\"o\">=</span> <span class=\"nx\">reDate</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;2019-02-11&#39;</span><span class=\"p\">),</span>\n  <span class=\"nx\">year</span>   <span class=\"o\">=</span> <span class=\"nx\">match</span><span class=\"p\">.</span><span class=\"nx\">groups</span><span class=\"p\">.</span><span class=\"nx\">year</span><span class=\"p\">,</span>  <span class=\"c1\">// 2019\n</span><span class=\"c1\"></span>  <span class=\"nx\">month</span>  <span class=\"o\">=</span> <span class=\"nx\">match</span><span class=\"p\">.</span><span class=\"nx\">groups</span><span class=\"p\">.</span><span class=\"nx\">month</span><span class=\"p\">,</span> <span class=\"c1\">// 02\n</span><span class=\"c1\"></span>  <span class=\"nx\">day</span>    <span class=\"o\">=</span> <span class=\"nx\">match</span><span class=\"p\">.</span><span class=\"nx\">groups</span><span class=\"p\">.</span><span class=\"nx\">day</span>   <span class=\"c1\">// 11\n</span></code></pre></div><p>å‘½åæ•è·ç»„ä¹Ÿå¯ä»¥ç”¨åœ¨ <code>replace()</code> ä¸­ï¼Œç”¨ <code>$&lt;name&gt;</code> è¿›è¡Œå¼•ç”¨ï¼ˆæ³¨æ„ï¼Œè™½ç„¶è¿™é‡Œçš„è¯­æ³•å’Œæ¨¡æ¿å­—é¢é‡å¾ˆåƒï¼Œä½†å¹¶ä¸æ˜¯ï¼‰ã€‚ä¾‹å¦‚æ”¹å˜æ—¥æœŸæ ¼å¼çš„é¡ºåºï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span>\n  <span class=\"nx\">reDate</span> <span class=\"o\">=</span> <span class=\"sr\">/(?&lt;year&gt;[0-9]{4})-(?&lt;month&gt;[0-9]{2})-(?&lt;day&gt;[0-9]{2})/</span><span class=\"p\">,</span>\n  <span class=\"nx\">d</span>      <span class=\"o\">=</span> <span class=\"s1\">&#39;2019-02-11&#39;</span><span class=\"p\">,</span>\n  <span class=\"nx\">usDate</span> <span class=\"o\">=</span> <span class=\"nx\">d</span><span class=\"p\">.</span><span class=\"nx\">replace</span><span class=\"p\">(</span><span class=\"nx\">reDate</span><span class=\"p\">,</span> <span class=\"s1\">&#39;$&lt;month&gt;-$&lt;day&gt;-$&lt;year&gt;&#39;</span><span class=\"p\">);</span> <span class=\"c1\">// 02-11-2019\n</span></code></pre></div><h2>5.4ï¼‰æ­£åˆ™è¡¨è¾¾å¼çš„åå‘æ–­è¨€ï¼ˆlookbehindï¼‰</h2><p>æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒæ­£å‘æ–­è¨€ï¼ˆlookaheadï¼‰ï¼Œä¾‹å¦‚ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"c1\">// æ­£å‘è‚¯å®šæŸ¥æ‰¾\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"nx\">x</span><span class=\"p\">(</span><span class=\"o\">?=</span><span class=\"nx\">y</span><span class=\"p\">)</span><span class=\"o\">/</span> <span class=\"c1\">// åŒ¹é… xï¼Œä½†ä»…å½“ x åé¢ç´§è·Ÿç€ y æ—¶\n</span><span class=\"c1\"></span><span class=\"sr\">/Jack(?=Sprat)/</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;JackSprat&#39;</span><span class=\"p\">)</span> <span class=\"c1\">// &#39;Jack&#39;\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"nx\">Jack</span><span class=\"p\">(</span><span class=\"o\">?=</span><span class=\"nx\">Sprat</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;JackFrost&#39;</span><span class=\"p\">)</span> <span class=\"c1\">// null\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"nx\">Jack</span><span class=\"p\">(</span><span class=\"o\">?=</span><span class=\"nx\">Sprat</span><span class=\"o\">|</span><span class=\"nx\">Frost</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;JackFrost&#39;</span><span class=\"p\">)</span> <span class=\"c1\">// &#39;Jack&#39;\n</span><span class=\"c1\"></span>\n<span class=\"c1\">// æ­£å‘å¦å®šæŸ¥æ‰¾\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"nx\">x</span><span class=\"p\">(</span><span class=\"o\">?!</span><span class=\"nx\">y</span><span class=\"p\">)</span><span class=\"o\">/</span> <span class=\"c1\">// åŒ¹é… xï¼Œä½†ä»…å½“ x åé¢ä¸ç´§è·Ÿç€ y æ—¶\n</span><span class=\"c1\"></span><span class=\"sr\">/Jack(?!Sprat)/</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;JackSprat&#39;</span><span class=\"p\">)</span> <span class=\"c1\">// null\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"nx\">Jack</span><span class=\"p\">(</span><span class=\"o\">?!</span><span class=\"nx\">Sprat</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;Jack Sprat&#39;</span><span class=\"p\">)</span> <span class=\"c1\">// &#39;Jack&#39;\n</span></code></pre></div><p>ES 2018 å¼•å…¥äº†å·¥ä½œæ–¹å¼ç›¸åŒï¼Œä½†æ˜¯æ–¹å‘ç›¸åçš„åå‘æ–­è¨€ï¼ˆlookbehindï¼‰ï¼Œè¯­æ³•ä¸Šçš„å·®åˆ«å°±åœ¨äº <code>?</code> å˜æˆäº† <code>?&lt;</code>ï¼Œä¾‹å¦‚ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"c1\">// åå‘è‚¯å®šæ–­è¨€\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"o\">?&lt;</span><span class=\"nx\">x</span><span class=\"p\">)</span><span class=\"nx\">y</span><span class=\"o\">/</span> <span class=\"c1\">// åŒ¹é… yï¼Œä½†ä»…å½“å®ƒç´§è·Ÿåœ¨ x åé¢æ—¶\n</span><span class=\"c1\"></span><span class=\"sr\">/(?&lt;=\\D)\\d+/</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;$123.89&#39;</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"c1\">// 123.89\n</span><span class=\"c1\"></span>\n<span class=\"c1\">// åå‘å¦å®šæ–­è¨€\n</span><span class=\"c1\"></span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"o\">?&lt;!</span><span class=\"nx\">x</span><span class=\"p\">)</span><span class=\"nx\">y</span><span class=\"o\">/</span> <span class=\"c1\">// åŒ¹é… yï¼Œä½†ä»…å½“å®ƒç´§è·Ÿåœ¨ x åé¢æ—¶\n</span><span class=\"c1\"></span><span class=\"sr\">/(?&lt;!\\D)\\d+/</span><span class=\"p\">.</span><span class=\"nx\">exec</span><span class=\"p\">(</span><span class=\"s1\">&#39;$123.89&#39;</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">]</span> <span class=\"c1\">// null\n</span></code></pre></div><h2>ES 2019ï¼ˆES 10ï¼‰</h2><h2>1ï¼‰JSON æˆä¸º ECMAScript çš„å®Œå…¨å­é›†</h2><p>ä»å­¦ä¹  JSON çš„ç¬¬ä¸€è¯¾èµ·ï¼Œæˆ‘ä»¬å°±è¢«å‘ŠçŸ¥ JSON åº”è¯¥æ˜¯ä¸“ä¸º JavaScript è€Œå­˜åœ¨çš„ï¼Œå› æ­¤ JSON æ˜¯ JavaScript çš„å­é›†è¿™ä¸€ç‚¹åº”è¯¥æ¯«æ— äº‰è®®å•Šï¼Œè¿™ç®—ä»€ä¹ˆæ–°ç‰¹æ€§ï¼ï¼Ÿ</p><p>ç„¶è€Œç»†å¿ƒçš„å¼€å‘è€…å´å‘ç°ï¼Œæœ‰ä¸¤ä¸ªç¬¦å·æ˜¯ä¾‹å¤–ï¼šè¡Œåˆ†éš”ç¬¦ï¼ˆU + 2028ï¼‰å’Œæ®µåˆ†éš”ç¬¦ï¼ˆU + 2029ï¼‰ã€‚åœ¨ <code>JSON.parse()</code> ä¸­ä½¿ç”¨è¿™ä¸¤ä¸ªä¼šæŠ¥è¯­æ³•é”™è¯¯ã€‚</p><p>ES 2019 æŠŠè¿™ä¸¤ä¸ªä¹Ÿæ”¶å…¥å›Šä¸­ï¼Œä»ä»Šå¾€åï¼ŒJSON çœŸæ­£æˆä¸º ECMAScript çš„å®Œå…¨å­é›†ï¼Œä¸€ä¸ªéƒ½ä¸å°‘ã€‚</p><h2>2ï¼‰æ›´å‹å¥½çš„ <code>JSON.stringify()</code></h2><p>è¿‡å»ï¼Œå¯¹äºä¸€äº›è¶…å‡º Unicode èŒƒå›´çš„è½¬ä¹‰åºåˆ—ï¼Œ<code>JSON.stringify()</code> ä¼šè¾“å‡ºæœªçŸ¥å­—ç¬¦ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nx\">stringify</span><span class=\"p\">(</span><span class=\"s1\">&#39;\\uDF06\\uD834&#39;</span><span class=\"p\">);</span> <span class=\"c1\">// &#39;&#34;ï¿½ï¿½&#34;&#39;\n</span><span class=\"c1\"></span><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nx\">stringify</span><span class=\"p\">(</span><span class=\"s1\">&#39;\\uDEAD&#39;</span><span class=\"p\">);</span> <span class=\"c1\">// &#39;&#34;ï¿½&#34;&#39;\n</span></code></pre></div><p>ç°åœ¨ï¼Œ<code>JSON.stringify()</code> ä¼šä¸ºå…¶é‡æ–°è½¬ä¹‰ï¼Œæ˜¾ç¤ºä¸ºæœ‰æ•ˆçš„ Unicode åºåˆ—ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nx\">stringify</span><span class=\"p\">(</span><span class=\"s1\">&#39;\\uDF06\\uD834&#39;</span><span class=\"p\">);</span> <span class=\"c1\">// &#39;&#34;\\\\udf06\\\\ud834&#34;&#39;\n</span><span class=\"c1\"></span><span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nx\">stringify</span><span class=\"p\">(</span><span class=\"s1\">&#39;\\uDEAD&#39;</span><span class=\"p\">);</span> <span class=\"c1\">// &#39;&#34;\\\\udead&#34;&#39;\n</span></code></pre></div><p>è¿™å’Œ ES 2018 ä¸­å¯¹â€œå¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—é¢é‡â€çš„ä¿®æ­£ï¼Œä¼¼ä¹æœ‰äº›è®¸è”ç³»ã€‚ç»“åˆå†ä»£ ECMAScript æ ‡å‡†ï¼ŒECMAScript åœ¨å¤„ç† Unicode çš„é—®é¢˜ä¸Šç€å®ä¸‹äº†ä¸å°‘åŠŸå¤«ã€‚</p><h2>3ï¼‰<code>Function.prototpye.toString()</code> æ˜¾ç¤ºæ›´åŠ å®Œå–„</h2><p>å¯¹ä¸€ä¸ªå‡½æ•°ä½¿ç”¨ <code>toString()</code> ä¼šè¿”å›å‡½æ•°å®šä¹‰çš„å†…å®¹ã€‚</p><p>è¿‡å»ï¼Œè¿”å›çš„å†…å®¹ä¸­ <code>function</code> å…³é”®å­—å’Œå‡½æ•°åä¹‹é—´çš„æ³¨é‡Šï¼Œä»¥åŠå‡½æ•°åå’Œå‚æ•°åˆ—è¡¨å·¦æ‹¬å·ä¹‹é—´çš„ç©ºæ ¼ï¼Œæ˜¯ä¸ä¼šè¢«æ‰“å‡ºæ¥çš„ã€‚ES 2019 ç°åœ¨å›ç²¾ç¡®è¿”å›è¿™äº›å†…å®¹ï¼Œå‡½æ•°æ€ä¹ˆå®šä¹‰çš„ï¼Œè¿™å°±å°±æ€ä¹ˆæ˜¾ç¤ºã€‚</p><h2>4ï¼‰<code>Array.prorptype.flat()</code> å’Œ <code>Array.prorptype.flatMap()</code></h2><p>ES 2019 ä¸ºæ•°ç»„æ–°å¢ä¸¤ä¸ªå‡½æ•°ã€‚</p><p><code>flat()</code> ç”¨äºå¯¹æ•°ç»„è¿›è¡Œé™ç»´ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šé™å¤šå°‘ç»´ï¼Œé»˜è®¤ä¸º 1ã€‚é™ç»´æœ€å¤šé™åˆ°ä¸€ç»´ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span> <span class=\"nx\">array</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]]]</span>\n<span class=\"nx\">array</span><span class=\"p\">.</span><span class=\"nx\">flat</span><span class=\"p\">()</span> <span class=\"c1\">// [1, 2, [3]]\n</span><span class=\"c1\"></span><span class=\"nx\">array</span><span class=\"p\">.</span><span class=\"nx\">flat</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"c1\">// [1, 2, [3]]ï¼Œé»˜è®¤é™ 1 ç»´\n</span><span class=\"c1\"></span><span class=\"nx\">array</span><span class=\"p\">.</span><span class=\"nx\">flat</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">)</span> <span class=\"c1\">// [1, 2, 3]\n</span><span class=\"c1\"></span><span class=\"nx\">array</span><span class=\"p\">.</span><span class=\"nx\">flat</span><span class=\"p\">(</span><span class=\"mi\">3</span><span class=\"p\">)</span> <span class=\"c1\">// [1, 2, 3]ï¼Œæœ€å¤šé™åˆ°ä¸€ç»´\n</span></code></pre></div><p><code>flatMap()</code> å…è®¸åœ¨å¯¹æ•°ç»„è¿›è¡Œé™ç»´ä¹‹å‰ï¼Œå…ˆè¿›è¡Œä¸€è½®æ˜ å°„ï¼Œç”¨æ³•å’Œ <code>map()</code> ä¸€æ ·ã€‚ç„¶åå†å°†æ˜ å°„çš„ç»“æœé™ä½ä¸€ä¸ªç»´åº¦ã€‚å¯ä»¥è¯´ <code>arr.flatMap(fn)</code> ç­‰æ•ˆäº <code>arr.map(fn).flat(1)</code>ã€‚ï¼ˆä½†æ˜¯æ ¹æ® <a href=\"https://link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">MDN</a>ï¼Œ<code>flatMap()</code> åœ¨æ•ˆç‡ä¸Šç•¥èƒœä¸€ç­¹ï¼‰</p><p><code>flatMap()</code> ä¹Ÿå¯ä»¥ç­‰æ•ˆä¸º <code>reduce()</code> å’Œ <code>concat()</code> çš„ç»„åˆï¼Œä¸‹é¢è¿™ä¸ªæ¡ˆä¾‹æ¥è‡ª <a href=\"https://link.zhihu.com/?target=https%3A//developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap%23%25E7%25AD%2589%25E4%25BB%25B7%25E6%2593%258D%25E4%25BD%259C\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">MDN</a>ï¼Œä½†æ˜¯â€¦â€¦è¿™ä¸æ˜¯ä¸€ä¸ª <code>map</code> å°±èƒ½æå®šçš„äº‹ä¹ˆï¼Ÿ</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kd\">var</span> <span class=\"nx\">arr1</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"mi\">3</span><span class=\"p\">,</span> <span class=\"mi\">4</span><span class=\"p\">];</span>\n\n<span class=\"nx\">arr1</span><span class=\"p\">.</span><span class=\"nx\">flatMap</span><span class=\"p\">(</span><span class=\"nx\">x</span> <span class=\"p\">=&gt;</span> <span class=\"p\">[</span><span class=\"nx\">x</span> <span class=\"o\">*</span> <span class=\"mi\">2</span><span class=\"p\">]);</span>\n<span class=\"c1\">// ç­‰ä»·äº\n</span><span class=\"c1\"></span><span class=\"nx\">arr1</span><span class=\"p\">.</span><span class=\"nx\">reduce</span><span class=\"p\">((</span><span class=\"nx\">acc</span><span class=\"p\">,</span> <span class=\"nx\">x</span><span class=\"p\">)</span> <span class=\"p\">=&gt;</span> <span class=\"nx\">acc</span><span class=\"p\">.</span><span class=\"nx\">concat</span><span class=\"p\">([</span><span class=\"nx\">x</span> <span class=\"o\">*</span> <span class=\"mi\">2</span><span class=\"p\">]),</span> <span class=\"p\">[]);</span>\n<span class=\"c1\">// [2, 4, 6, 8]\n</span></code></pre></div><p><code>flat()</code> å’Œ <code>flatMap()</code> éƒ½æ˜¯è¿”å›æ–°çš„æ•°ç»„ï¼ŒåŸæ•°ç»„ä¸å˜ã€‚</p><h2>5ï¼‰<code>String.prototype.trimStart()</code> å’Œ <code>String.prototype.trimEnd()</code></h2><p>ES 2019 ä¸ºå­—ç¬¦ä¸²ä¹Ÿæ–°å¢äº†ä¸¤ä¸ªå‡½æ•°ï¼š<code>trimStart()</code> å’Œ <code>trimEnd()</code>ã€‚ç”¨è¿‡ <code>trim()</code> çš„æœ‹å‹éƒ½çŸ¥é“äº†ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°å„è‡ªè´Ÿè´£åªå»æ‰å•è¾¹çš„å¤šä½™ç©ºæ ¼ã€‚<code>trim()</code> æ˜¯ä¸¤è¾¹éƒ½å»ã€‚</p><h2>6ï¼‰<code>Object.fromEntries()</code></h2><p>ä»åå­—å°±èƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ <code>Object.entries()</code> çš„é€†è¿‡ç¨‹ã€‚</p><h2>7ï¼‰<code>Symbol.prototype.description</code></h2><p>Symbol æ˜¯ ES 2015 å¼•å…¥çš„æ–°çš„åŸå§‹ç±»å‹ï¼Œé€šå¸¸åœ¨åˆ›å»º Symbol æ—¶æˆ‘ä»¬ä¼šé™„åŠ ä¸€æ®µæè¿°ã€‚è¿‡å»ï¼Œåªæœ‰æŠŠè¿™ä¸ª Symbol è½¬æˆ String æ‰èƒ½çœ‹åˆ°è¿™æ®µæè¿°ï¼Œè€Œä¸”å¤–å±‚è¿˜å¥—äº†ä¸ª &#39;Symbol()&#39; å­—æ ·ã€‚ES 2019 ä¸º Symbol æ–°å¢äº† <code>description</code> å±æ€§ï¼Œä¸“é—¨ç”¨äºæŸ¥çœ‹è¿™æ®µæè¿°ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">const</span> <span class=\"nx\">sym</span> <span class=\"o\">=</span> <span class=\"nx\">Symbol</span><span class=\"p\">(</span><span class=\"s1\">&#39;The description&#39;</span><span class=\"p\">);</span>\n<span class=\"nb\">String</span><span class=\"p\">(</span><span class=\"nx\">sym</span><span class=\"p\">)</span> <span class=\"c1\">// &#39;Symbol(The description)&#39;\n</span><span class=\"c1\"></span><span class=\"nx\">sym</span><span class=\"p\">.</span><span class=\"nx\">description</span> <span class=\"c1\">// &#39;The description&#39;\n</span></code></pre></div><h2>8ï¼‰å¯é€‰çš„ <code>catch</code> ç»‘å®š</h2><p><code>try...catch</code> çš„è¯­æ³•å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œè¿‡å»ï¼Œ<code>catch</code> åé¢å¿…é¡»æœ‰ä¸€ç»„æ‹¬å·ï¼Œé‡Œé¢ç”¨ä¸€ä¸ªå˜é‡ï¼ˆé€šå¸¸å« <code>e</code> æˆ–è€… <code>err</code>ï¼‰ä»£è¡¨é”™è¯¯ä¿¡æ¯å¯¹è±¡ã€‚ç°åœ¨è¿™éƒ¨åˆ†æ˜¯å¯é€‰çš„äº†ï¼Œå¦‚æœå¼‚å¸¸å¤„ç†éƒ¨åˆ†ä¸éœ€è¦é”™è¯¯ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒçœç•¥ï¼Œåƒå†™ <code>if...else</code> ä¸€æ ·å†™ <code>try...catch</code>ã€‚</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">try</span> <span class=\"p\">{</span>\n  <span class=\"k\">throw</span> <span class=\"k\">new</span> <span class=\"nb\">Error</span><span class=\"p\">(</span><span class=\"s1\">&#39;Some Error&#39;</span><span class=\"p\">)</span>\n<span class=\"p\">}</span> <span class=\"k\">catch</span> <span class=\"p\">{</span>\n  <span class=\"nx\">handleError</span><span class=\"p\">()</span> <span class=\"c1\">// è¿™é‡Œæ²¡æœ‰ç”¨åˆ°é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥çœç•¥ catch åé¢çš„ (e)ã€‚\n</span><span class=\"c1\"></span><span class=\"p\">}</span>\n</code></pre></div><h2>é—æ†¾</h2><p>ES 2019 æ”¶å½•äº†éå¸¸å¤šå¥½ç”¨çš„ç‰¹æ€§ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šæˆ‘ä»¬éå¸¸ç†Ÿæ‚‰ï¼Œç”šè‡³å·²ç»ç”¨äº†å¥½ä¹…çš„ç‰¹æ€§æ²¡èƒ½è¿›å…¥æ ‡å‡†ï¼Œæ¯”å¦‚ï¼š</p><ul><li>Stage 3ï¼ˆæ˜å¹´è§ï¼Ÿï¼‰</li><ul><li>Dynamic Import</li><li>ç§æœ‰å±æ€§</li></ul><li>Stage 2ï¼ˆåŠ æ²¹ï¼Ÿï¼‰</li><ul><li>è£…é¥°å™¨</li></ul><li>Stage 1ï¼ˆä½ ä»¬æ…¢æ…¢è®¨è®ºï¼Œæˆ‘ä»¬å…ˆç”¨ä¸ºæ•¬ï¼‰</li><ul><li>Observable</li><li>Promise.try</li><li>String.prototype.replaceAll</li><li>do</li></ul></ul><p>ä¸è¿‡è¿™ä¸é‡è¦ï¼Œæ ‡å‡†åªæ˜¯å®˜å®£ï¼Œåªè¦ Babel æ”¯æŒå°±å¥½ï¼Œå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆã€‚</p>", 
            "topic": [
                {
                    "tag": "ECMAScript", 
                    "tagLink": "https://api.zhihu.com/topics/19600610"
                }, 
                {
                    "tag": "JavaScript", 
                    "tagLink": "https://api.zhihu.com/topics/19552521"
                }, 
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }
            ], 
            "comments": [
                {
                    "userName": "simon3000", 
                    "userLink": "https://www.zhihu.com/people/56f3795b634a0e8123c1f87469ded13a", 
                    "content": "<p>replaceAllè¿˜æ²¡å¥½2333</p>", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>æˆ‘ä¹‹å‰ä¸€ç›´ä»¥ä¸ºè¿™åº”è¯¥æ˜¯åŸç”Ÿçš„è¯­æ³•ï¼Œç»“æœå¹¶ä¸æ˜¯ã€‚ä½†å¯ä»¥é€šè¿‡æ­£åˆ™åŠ  g æ ‡è¯†æ¥å®ç°ã€‚</p>", 
                            "likes": 0, 
                            "replyToAuthor": "simon3000"
                        }, 
                        {
                            "userName": "simon3000", 
                            "userLink": "https://www.zhihu.com/people/56f3795b634a0e8123c1f87469ded13a", 
                            "content": "<p>å—¯ï¼Œæˆ‘å‡ ä¸ªå°æ—¶å‰å°±å†™äº†ä¸€ä¸ªæ­£åˆ™åŠ g...</p>", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "æ¨æ ‘", 
                    "userLink": "https://www.zhihu.com/people/81320240e25f6efa8c253db88163d315", 
                    "content": "ç§æœ‰å±æ€§ã€è£…é¥°å™¨ï¼Œè¦æŠŠJavaScriptå˜æˆJavaPlus", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/57375824", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 172, 
            "title": "é™¤äº† SSRï¼Œå°±æ²¡æœ‰åˆ«çš„åŠæ³•äº†å—ï¼Ÿ", 
            "content": "<p>æœ¬æ–‡é¦–å‘äºæˆ‘çš„åšå®¢ï¼š</p><a href=\"https://link.zhihu.com/?target=https%3A//tonghuashuo.github.io/blog/2019/02/07/explore-static-site-generation\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-c2ac5cf49eafd77a1b2ce1fab7f53515_180x120.jpg\" data-image-width=\"1200\" data-image-height=\"675\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">é™¤äº† SSRï¼Œå°±æ²¡æœ‰åˆ«çš„åŠæ³•äº†å— | åšå®¢</a><h2>SSR å‡ºå•¥äº‹äº†</h2><p>æ”¾å¿ƒï¼ŒSSR æ²¡å‡ºäº‹ã€‚</p><p>å†™è¿™ç¯‡åšå®¢å¹¶ä¸æ˜¯æƒ³è¯´ SSR æœ‰ä»€ä¹ˆä¸å¥½ï¼Œè€Œæ˜¯å› ä¸ºä¸€äº›åˆ«çš„åŸå› ã€‚</p><h2>æƒ³è±¡ä¸€ä¸ªè¿™æ ·çš„åœºæ™¯</h2><p>ä½œä¸ºæœ‰è¿½æ±‚çš„å¼€å‘è€…ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›è‡ªå·±èƒ½å¤Ÿè´Ÿè´£ä¸€äº›æ¯”è¾ƒæœ‰æŠ€æœ¯éš¾åº¦çš„é¡¹ç›®ã€‚ä½†ä½œä¸ºå…¬å¸ä¸šåŠ¡æ¥è¯´ï¼Œæ€»ä¼šæœ‰ä¸€äº›æ¯”è¾ƒç®€å•çš„éœ€æ±‚ï¼Œéœ€è¦åšå‡ ä¸ªé™æ€é¡µï¼Œæ¯”å¦‚äº§å“å®˜ç½‘ã€æ´»åŠ¨é¡µä¹‹ç±»çš„ã€‚è¿™äº›éœ€æ±‚è™½ç„¶æ²¡ä»€ä¹ˆæŒ‘æˆ˜æ€§ï¼Œä½†æ€»å¾—æœ‰äººæ¥åšã€‚</p><h2>æ²¡æœ‰ä»€ä¹ˆæ˜¯ jQuery ä¸€æŠŠæ¢­æä¸å®šçš„</h2><p>ä¸€èˆ¬æ¥åˆ°è¿™ç±»â€œç®€å•â€çš„éœ€æ±‚ï¼Œç›¸ä¿¡ç»å¤§éƒ¨åˆ†äººçš„ç¬¬ä¸€ååº”è‚¯å®šæ˜¯ jQueryï¼Œå°½ç®¡å®ƒæ—©å·²è½å…¥å‰ç«¯é„™è§†é“¾çš„æœ€åº•å±‚ï¼Œä½†ä¾ç„¶é­…åŠ›ä¸å‡ï¼Œå®åˆ€æœªè€ã€‚é…åˆ BootStrap åˆæ˜¯ä¸€æŠŠæ¢­ï¼Œåˆ†åˆ†é’Ÿæå®šã€‚</p><p>æ—¶è‡³ä»Šæ—¥ï¼Œè¿™å¥—æ–¹æ¡ˆä¾ç„¶å¯è¡Œï¼Œå¾ˆå¥½çš„æ»¡è¶³äº†ä¸šåŠ¡çš„éœ€æ±‚ï¼Œå¯¹å¼€å‘è€…çš„æŠ€æœ¯è¦æ±‚ä¹Ÿä¸é«˜ï¼Œå¯ä»¥è¯´æ˜¯éå¸¸ç¨³äº†ã€‚</p><p>é‚£ä¸å°±è¡Œäº†ï¼Œä½ è¿˜æ‹…å¿ƒå•¥ï¼Ÿ</p><h2>æ•™ç»ƒï¼Œæˆ‘æƒ³æ‰“ç¯®çƒ</h2><p>è¿™æ˜¯ä¸€ä¸ªå±äº MVVM çš„æ—¶ä»£ï¼Œå³ä¾¿æ˜¯åˆšå…¥è¡Œçš„æ–°äººä¹Ÿéƒ½çŸ¥é“ï¼šjQuery ä¸æ˜¯ç»ˆç‚¹ã€‚</p><p>Angularã€Reactã€Vueï¼Œä¸ç®¡è°æ˜¯ä½ çš„æœ¬å‘½ï¼Œä¸€æ—¦å…¥å‘ï¼Œå°±å†ä¹Ÿå›ä¸å»äº†ã€‚å³ä¾¿ä¸ä¸ºæ¡†æ¶æ•…ï¼ŒES 2015+ äº†è§£ä¸€ä¸‹ï¼ŸLESSã€SCSS äº†è§£ä¸€ä¸‹ï¼ŸPugã€EJS äº†è§£ä¸€ä¸‹ï¼Ÿç”¨äº†è¿™äº›é‚£è‚¯å®šé€ƒä¸å¼€ Babelã€Gulpã€Webpack äº†å§ï¼Ÿ</p><p>Seeï¼Ÿä¸æ˜¯ jQuery ä¸è¡Œäº†ï¼Œè€Œæ˜¯è¡Œä¸šçš„å‘å±•ï¼Œè®©å¼€å‘è€…æ›´å€¾å‘äºï¼ˆè‡³å°‘å·²ç»ä¹ æƒ¯äºï¼‰ç”¨ MVVM æ¥å¼€å‘ã€‚</p><h2>è€ç”Ÿå¸¸è°ˆ SEO</h2><p>MVVM çš„å¼€å‘ä½“éªŒæ˜¯ä¸é”™ï¼Œæå¤§çš„è§£æ”¾äº†å‰ç«¯å¼€å‘è€…çš„ç”Ÿäº§åŠ›ã€‚ä½†å’Œ MVVM ç»å¸¸ä¸€èµ·å‡ºç°çš„è¿˜æœ‰å¦ä¸€ä¸ªè®©äººåˆçˆ±åˆæ¨çš„ä¸œè¥¿ï¼Œå« SPAã€‚</p><p>SPA çš„ä½“éªŒéå¸¸å¥½ï¼Œé¡µé¢åˆ‡æ¢éå¸¸è‡ªç„¶ã€‚ä½† SPA æœ€å¤§çš„é—®é¢˜ï¼Œå°±æ˜¯ç¼ºå°‘å¯¹ SEO çš„æ”¯æŒã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸»æµ MVVM æŠ€æœ¯æ ˆéƒ½æä¾›äº†å¯¹åº”çš„ SSR çš„æ–¹æ¡ˆã€‚</p><p>SSR ä»æ ¹æœ¬ä¸Šè§£å†³äº† SEO çš„é—®é¢˜ï¼Œä½†æ˜¯å®è·µèµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚ä¸€æ–¹é¢ä¸Šæ‰‹éš¾åº¦è¾ƒé«˜ï¼šå¿…é¡»ä½¿ç”¨ Node.jsã€ä¸šåŠ¡ä»£ç è¦è¿›è¡ŒåŒæ„åŒ–æ”¹é€ ã€Webpack éœ€è¦å¤šä¸€å¥—é…ç½®ã€ç¬¬ä¸‰æ–¹åº“éœ€è¦å®¡æŸ¥æ˜¯å¦æ”¯æŒ SSRï¼›å¦ä¸€æ–¹é¢ SSR ä½¿å¾—å‰ç«¯çš„å·¥ä½œéœ€è¦åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œç›¸æ¯”å•çº¯çš„å®¢æˆ·ç«¯å¼€å‘ï¼Œæˆ–æ˜¯æœåŠ¡ç«¯å¼€å‘ï¼Œå·¥ä½œå†…å®¹è¦æ›´æ‚ã€‚</p><p>æ‰€ä»¥å°½ç®¡ SSR å¾ˆå¼ºå¤§ï¼Œä½†æ€é¸¡ç„‰ç”¨ç‰›åˆ€ã€‚</p><h2>å›åˆ°æœªæ¥</h2><p>SSR å…¶å®å¹¶ä¸æ˜¯ä»€ä¹ˆæ–°é²œç©æ„å„¿ï¼Œæ—©åœ¨ SPA å é¢†ä¸–ç•Œä¹‹å‰ï¼ŒåŠ¨æ€é¡µé¢æœ¬å°±æ˜¯ç”±æœåŠ¡ç«¯è¾“å‡ºçš„ï¼Œå‰ç«¯ä¸è¿‡æ˜¯åç«¯ä»£ç ä¸­çš„ä¸€ä¸ªè§†å›¾è€Œå·²ã€‚</p><p>æˆ‘ä»¬ç°åœ¨æ‰€è°ˆçš„ SSR æ–¹æ¡ˆï¼Œä¸»è¦å¾—å½’åŠŸäº Node.jsã€‚ä½œä¸ºä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œå®ƒä½¿å¾— JS æˆä¸ºä¸€é—¨å…¨ç«¯è¯­è¨€ï¼Œå‰ç«¯ç°åœ¨æ‰€æœ‰çš„ç¹è£æ˜Œç››å’Œéº»çƒ¦äº‹å„¿ï¼Œéƒ½æºè‡ª Node.js çš„è¯ç”Ÿã€‚</p><p>ç›¸æ¯”äºä¼ ç»Ÿçš„åç«¯æ¸²æŸ“æ–¹æ¡ˆï¼ŒSSR æœ€å¤§çš„å¥½å¤„ï¼Œæ˜¯å…¼é¡¾äº†å‰ç«¯çš„ç»„ä»¶åŒ–ï¼Œå’Œåç«¯è¾“å‡ºçš„æ•ˆç‡ã€‚é¡ºå¸¦åœ°ï¼Œç”±äºå‰åç«¯ä½¿ç”¨äº†åŒä¸€é—¨è¯­è¨€ï¼Œå¤§é‡ä»£ç å¾—ä»¥å¤ç”¨ã€‚</p><p>å°½ç®¡å‰ç«¯ç°åœ¨å¼€å‘æ‰‹æ®µèŠ±é‡Œèƒ¡å“¨ï¼Œä½†ç½‘é¡µæœ€ç»ˆçš„æ ·å­å§‹ç»ˆæ²¡å˜ã€‚</p><p>å› æ­¤æ€»çš„æ¥è¯´ï¼Œæˆ‘ä»¬çš„è¯‰æ±‚å°±æ˜¯ï¼šå¼€å‘é˜¶æ®µç”¨ MVVMï¼Œæ„å»ºé˜¶æ®µåˆ©ç”¨å·¥å…·ç”Ÿæˆé™æ€é¡µé¢ã€‚</p><h2>â€œé¢„æ¸²æŸ“â€äº†è§£ä¸€ä¸‹</h2><p>æ˜¾ç„¶ï¼Œæˆ‘è‚¯å®šä¸æ˜¯ç¬¬ä¸€ä¸ªæå‡ºè¿™ä¸ªè¯‰æ±‚çš„äººï¼Œåœ¨ SSR æ–¹æ¡ˆå‡ºæ¥æ²¡å¤šä¹…ï¼Œå°±æœ‰äººå¼€å§‹ç ”ç©¶å¦ä¸€ç§æ–¹æ¡ˆ â€”â€” é¢„æ¸²æŸ“ã€‚</p><p>å¤§å®¶éƒ½è§‰å¾—ï¼Œè¿™äº‹å„¿ä¸ä¸€å®šéå¾—æ”¾åˆ°æœåŠ¡å™¨å»åšï¼ŒNode.js åªæ˜¯ä¸€ä¸ªè¿è¡Œç¯å¢ƒï¼Œä¸ç”¨éæŠŠå®ƒå½“åšæœåŠ¡å™¨æ¥çœ‹ã€‚å¦‚æœèƒ½åœ¨æ„å»ºé˜¶æ®µç›´æ¥æŠŠæ¸²æŸ“å¥½çš„ HTML æ‰“å‡ºæ¥ï¼Œé—®é¢˜ä¸å°±è§£å†³äº†ã€‚</p><p>äºæ˜¯æœ‰äººå¼€å‘å‡ºæ¥è¿™æ ·ä¸€ä¸ª Webpack æ’ä»¶ â€”â€” <a href=\"https://link.zhihu.com/?target=https%3A//github.com/chrisvfritz/prerender-spa-plugin\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">PrerenderSPAPlugin</a>ã€‚</p><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå‰å®³çš„æ’ä»¶ï¼Œä¸æŒ‘æŠ€æœ¯æ ˆï¼Œæ— è®ºä½ æ˜¯ Angularã€Reactã€Vue ä¸­è°çš„ç²‰ï¼Œåªéœ€è¦ç®€å•è®¾å®šä¸€ä¸‹è·¯ç”±ï¼Œå°±å¯ä»¥åœ¨æ„å»ºé˜¶æ®µç›´æ¥è¾“å‡ºæ¸²æŸ“å¥½çš„é™æ€é¡µé¢ã€‚èƒŒåçš„åŸç†ä¸»è¦æ˜¯åˆ©ç”¨ <a href=\"https://link.zhihu.com/?target=https%3A//github.com/GoogleChrome/puppeteer\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Puppeteer</a> åŠ è½½é¡µé¢ï¼Œå¹¶æŠŠåŠ è½½å®Œæˆåçš„å†…å®¹ä¿å­˜ä¸‹æ¥ã€‚</p><p>PrerenderSPAPlugin çš„å¥½å¤„æ˜¯æ”¹é€ æˆæœ¬ä½ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªç°æœ‰çš„ç³»ç»Ÿï¼Œéœ€è¦è¿›è¡Œé¢„æ¸²æŸ“æ”¹é€ ï¼Œé‚£ä¹ˆä½ åªéœ€è¦è°ƒæ•´ä¸€ä¸‹ Webpack çš„é…ç½®å³å¯ï¼Œä¸šåŠ¡ä»£ç ä¸ç”¨åŠ¨ã€‚</p><p>ä½†è¿™ä¸ªæ–¹æ¡ˆåªèƒ½å¤„ç†é™æ€çš„è·¯ç”±ï¼Œå¯¹äºåŠ¨æ€è·¯ç”±ï¼Œè¿™ä¸ªæ’ä»¶æš‚æ—¶è¿˜æ²¡æœ‰å¾ˆå¥½çš„åŠæ³•æ¥è§£å†³ã€‚</p><h2>äº†ä¸èµ·çš„ç›–èŒ¨æ¯”</h2><p>å¼€å‘è€…å¤§å¤šæœ‰è‡ªå·±çš„åšå®¢ï¼Œåšå®¢æ˜¯ä¸€ç§å…¸å‹çš„é™æ€ç«™ç‚¹ï¼Œè¿‡å»æœ‰ WordPressã€JekyIIã€Hexo ç­‰å¤§åé¼é¼çš„ CMSï¼Œéƒ½èƒ½ç”Ÿæˆé™æ€ç«™ç‚¹ã€‚ä½†è¿™äº›å·¥å…·ç›®çš„æ€§éƒ½å¤ªå¼ºï¼Œæ˜ç™½å„¿åœ°å‘Šè¯‰ä½ ï¼šæˆ‘å°±æ˜¯ä¸ªåšå®¢ã€‚</p><p><a href=\"https://link.zhihu.com/?target=https%3A//www.gatsbyjs.org/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Gatsby</a> æ˜¯æœ€è¿‘æµè¡Œèµ·æ¥çš„ä¸€ç§æ–°å‹æ–¹æ¡ˆï¼Œ<a href=\"https://link.zhihu.com/?target=https%3A//github.com/gatsbyjs/gatsby/commits/master%3Fafter%3D2032147f23d40fe8d986fd33996a8c5362e6c75d%2B7960\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">é¡¹ç›®å§‹äº 2015 å¹´</a>ï¼ŒåŸæœ¬åªæ˜¯ä¸ªå‰¯ä¸šï¼Œå¼€å‘äº†ä¸€å¹´ä¹‹åï¼Œå‘ç°åå“ä¸é”™ï¼Œäºæ˜¯ <a href=\"https://link.zhihu.com/?target=https%3A//www.bricolage.io/gatsby-open-source-work/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">åˆ›å§‹äººå¼€å§‹å…¨èŒæŠ•å…¥ Gatsby çš„å¼€å‘å·¥ä½œ</a>ã€‚</p><p>åŒºåˆ«äºå…¶å®ƒæ–¹æ¡ˆï¼ŒGatsby å¹¶æ²¡æœ‰æ­»ç›¯ç€ CMS è¿™ä¸€ä¸ªé¢†åŸŸï¼Œå®ƒå®šä½äºä¸€ç§ä½¿ç”¨ React æŠ€æœ¯æ ˆå¼€å‘ç«™ç‚¹çš„æ–¹å¼ã€‚ä¸å…‰å¯ä»¥ç”¨äºå¼€å‘é™æ€ç«™ç‚¹ï¼ŒåŠ¨æ€ç«™ç‚¹ä¹Ÿå®Œå…¨ä¸åœ¨è¯ä¸‹ã€‚</p><p>Gatsby çš„é¡µé¢å°±æ˜¯ React ç»„ä»¶ï¼Œä½ ä¹‹å‰ç§¯ç´¯çš„æ‰€æœ‰ React çŸ¥è¯†åˆ°è¿™é‡Œéƒ½å¯ä»¥ç»§ç»­ç”¨ï¼Œå¯å®šåˆ¶æ€§éå¸¸é«˜ã€‚</p><p>Gatsby ä¸å…‰æ”¯æŒ Markdown è½¬ HTML çš„æ–¹å¼æ¥ç”Ÿæˆå†…å®¹ï¼ŒåŒæ—¶è¿˜æ”¯æŒä» WordPress ç­‰ä¸»æµ CMS å¯¼å…¥æ•°æ®ï¼Œæˆ–é€šè¿‡å¤–éƒ¨ API è·å–æ•°æ®æ¥åŠ¨æ€ç”Ÿæˆé¡µé¢ï¼Œæ–¹ä¾¿è¿ç§»ã€‚</p><p>Gatsby æ”¯æŒè‡ªå®šä¹‰è·¯ç”±ï¼Œé™æ€åŠ¨æ€å‡å¯ï¼Œæ²¡æœ‰ä»»ä½•å›ºå®šçš„è·¯ç”±å¥—è·¯ã€‚</p><p>Gatsby æ”¯æŒéƒ¨ç½²åˆ° Github Pageã€Now.shã€Surge.sh ç­‰å„å¤§ä¸»æµæ‰˜ç®¡å¹³å°ã€‚å¦‚æœä½ æœ‰è‡ªå·±çš„æœåŠ¡å™¨ï¼Œä½ å½“ç„¶ä¹Ÿå¯ä»¥è‡ªç”±å‘æŒ¥ã€‚</p><p>äº‹å®ä¸Šï¼Œè¿™ç¯‡åšå®¢å‘å¸ƒä¹‹æ—¶ï¼Œæˆ‘åˆšåˆšæŠŠæ•´ä¸ªåšå®¢ç”¨ Gatsby å½»åº•æ”¹é€ äº†ä¸€éï¼Œå¤§å®¶å¯ä»¥æ„Ÿå—ä¸€ä¸‹ã€‚</p><h2>æƒ³å¾—è¿œä¸€ç‚¹</h2><p>æ—¢ç„¶ Gatsby è¿™ä¹ˆå¼ºå¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä¸å¯ä»¥ç”¨ Gastby æ¥æ›¿ä»£ SSR å‘¢ï¼Ÿåœ¨ä¸€å®šæ¡ä»¶ä¸‹æ˜¯å¯ä»¥çš„ï¼Œä½†ç›®å‰æœ‰å‡ ä¸ªé—®é¢˜è¿˜æ²¡èƒ½å¾—åˆ°å¾ˆå¥½çš„å¤„ç†ï¼š</p><h2>1ï¼‰åŠ¨æ€è·¯ç”±ï¼ˆ/user/:idï¼‰</h2><p>å¯¹äºåšå®¢è¿™ç§å†…å®¹å·²ç»ç¡®å®šçš„ï¼Œå¯ä»¥åœ¨æ„å»ºæœŸå°±ç¡®å®šæœ‰å“ªäº›è·¯ç”±ï¼Œä½†å¦‚æœéœ€è¦é€šè¿‡å¤–éƒ¨ API æ¥è·å–ï¼Œå°±éœ€è¦ API æ”¯æŒ GraphQLï¼Œå¦åˆ™ç›®å‰è¿˜æ— æ³•å®ç°ã€‚</p><p>å½“ç„¶è¿™ç§æƒ…å†µæˆ‘ä»¬å¯ä»¥æ¢ç§æ€è·¯æ¥è€ƒè™‘ï¼Œä½¿ç”¨å›ºå®šçš„å­è·¯ç”±ï¼Œé€šè¿‡æ”¹å˜æŸ¥è¯¢å‚æ•°ï¼Œåœ¨é¡µé¢è½½å…¥ä¹‹åå†åŠ¨æ€è·å–å†…å®¹ã€‚è¿™ç§æ–¹æ³•è™½ç„¶ URL çœ‹ä¸Šå»ä¸é‚£ä¹ˆå®Œç¾ï¼Œä½†è§£å†³é—®é¢˜è¿˜æ˜¯å¯ä»¥çš„ã€‚</p><h2>2ï¼‰React-Router</h2><p>ä¸€èˆ¬æˆ‘ä»¬åœ¨ä½¿ç”¨ React æ—¶éƒ½ä¼šé…åˆ React-Router æ¥ç®¡ç†è·¯ç”±ï¼Œç„¶è€Œ Gatsby å¹¶éä½¿ç”¨ React-Routerï¼Œå®ƒçš„è·¯ç”±æœ‰ä¸¤ç§ï¼Œä¸€ä¸ªæ˜¯ <code>src/pages</code> ç›®å½•ä¸‹æŒ‰ç…§ç›®å½•å’Œæ–‡ä»¶çš„åç§°æ¥å®šä¹‰è·¯ç”±ï¼Œå¦ä¸€ä¸ªæ˜¯é€šè¿‡ <code>onCreateNode</code> ç”Ÿå‘½å‘¨æœŸæ‰‹åŠ¨åˆ›å»º slug æ¥æ‰©å±•è·¯ç”±ã€‚React çš„ SSR æ¡†æ¶ Next.js ä¹Ÿæ˜¯é‡‡ç”¨çš„ç±»ä¼¼çš„æ–¹å¼ã€‚è¿™ç‚¹åœ¨è¿ç§»è€ç³»ç»Ÿæ—¶éœ€è¦é‡æ–°è®¾è®¡ä¸€ä¸‹ã€‚</p><h2>åˆ«æ€¥</h2><p>å°½ç®¡è¿˜æœ‰ä¸€äº›é—®é¢˜ï¼Œä½† Gatsby å¯ä»¥è¯´æ˜¯ç›®å‰åˆ›å»ºé™æ€ç«™ç‚¹æœ€å®Œå–„çš„æ–¹æ¡ˆï¼Œæ—¢æ»¡è¶³äº†ä¸€ä¸ªé™æ€ç½‘ç«™æ‰€éœ€è¦çš„ä¸€åˆ‡ï¼Œåˆæä¾›ç»™äº†å¼€å‘è€…éå¸¸ç°ä»£åŒ–çš„å¼€å‘æ–¹å¼ã€‚</p><p>é¡¹ç›®ç°åœ¨æ›´æ–°å¾ˆé¢‘ç¹ï¼ŒåŒ…æ‹¬æ ¸å¿ƒåº“åœ¨å†…ï¼Œæ¯å¤©éƒ½æœ‰å¤§é‡çš„ commitã€‚æˆ‘è¿™æ¬¡æ”¹é€ å¤§æ¦‚èŠ±äº†ä¸€å‘¨æ—¶é—´ï¼ŒæœŸé—´æ‰§è¡Œè¿‡å‡ æ¬¡ <code>yarn outdated</code>ï¼Œæ¯æ¬¡éƒ½æœ‰ä¸€å †çš„å¯æ›´æ–°é¡¹ç›®ï¼Œå…¨éƒ½æ˜¯ <code>gatsby-</code> å¼€å¤´ã€‚</p><p>é¢‘ç¹æ›´æ–°çš„èƒŒåï¼Œæ˜¯ä¸€æ•´ä¸ªå›¢é˜Ÿä¸å±‘çš„åŠªåŠ›ã€‚æˆªè‡³å‘æ–‡å½“æ—¶ï¼ŒGatsby æœ€æ–°ç‰ˆæœ¬æ˜¯ <code>2.0.117</code>ã€‚</p><h2>å°ç»“</h2><p>æ€»çš„çœ‹æ¥ï¼ŒGatsby è™½ç„¶éœ€è¦æŠ•å…¥ä¸€äº›é¢å¤–çš„å­¦ä¹ æˆæœ¬ï¼Œä½†å›æŠ¥ç‡è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p><h2>é¢˜å¤–è¯ï¼šç®€å•è°ˆä¸€è°ˆ Imgcook</h2><p>å‰é˜µå­é˜¿é‡Œçˆ¸çˆ¸æ”¾åˆå‡ºæ¥ä¸€ä¸ªå¤§æ€å™¨ â€”â€” <a href=\"https://link.zhihu.com/?target=https%3A//imgcook.taobao.org/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Imgcook</a>ï¼Œå¯ä»¥æŠŠè®¾è®¡ç¨¿ä¸€é”®ç”Ÿæˆå¯è¯»æ€§å¾ˆé«˜çš„ä»£ç ï¼Œè®©ä¸€æ‰¹å‰ç«¯ä»ä¸šè€…èƒŒååˆä¸€å‡‰ã€‚</p><p>ä¸ºä»€ä¹ˆæ˜¯â€œåˆâ€ï¼Ÿ</p><p>ä¸€æ–¹é¢ï¼Œäººä»¬ç ”ç©¶è®¾è®¡ç¨¿è‡ªåŠ¨è½¬ HTML çš„æŠ€æœ¯ä¹Ÿä¸æ˜¯ä¸€ä¸¤å¤©äº†ã€‚å‰æœ‰ <a href=\"https://link.zhihu.com/?target=https%3A//github.com/tonybeltramelli/pix2code\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Pixel2Code</a> ä¸€æ–‡æƒŠå¤©ä¸‹ï¼Œåæœ‰ <a href=\"https://link.zhihu.com/?target=https%3A//github.com/Microsoft/ailab/tree/master/Sketch2Code\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å¾®è½¯</a>ã€<a href=\"https://link.zhihu.com/?target=https%3A//airbnb.design/sketching-interfaces/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Airbnb</a> ç­‰å¤§å‚å‘åŠ›ç›¸å…³æŠ€æœ¯ã€‚å¦ä¸€æ–¹é¢ï¼Œé˜¿é‡Œçˆ¸çˆ¸åœ¨è¿‡å»ä¸€å¹´å…ˆåæ¨å‡ºè¿‡å¥½å¤šè¿™ä¸€ç±»è‡ªåŠ¨åŒ–çš„é¡¹ç›®ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//luban.aliyun.com/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">é¹¿ç­</a>ã€<a href=\"https://link.zhihu.com/?target=https%3A//alibaba.github.io/ice/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">é£å†°</a>ã€<a href=\"https://link.zhihu.com/?target=https%3A//fusion.design/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Fusion Design</a>ã€‚</p><p>å…¶å®è¿™æ²¡ä»€ä¹ˆæ–°é²œï¼ŒWordã€Photoshopã€Sketch å¯¼å‡ºæˆ HTML æ—©å°±å·²ç»æ˜¯å­˜åœ¨äº†å¾ˆä¹…çš„åŠŸèƒ½äº†ã€‚</p><p>æ¯æ¬¡ AI å‡ºç‚¹ä»€ä¹ˆæ–°é—»ï¼Œéƒ½ä¼šè®©ä¸€æ‰¹äººèƒŒåä¸€å‡‰ï¼Œæ‹…å¿ƒä»€ä¹ˆæ—¶å€™è‡ªå·±å°±å¤±ä¸šäº†ã€‚ä½†åœ¨æˆ‘çœ‹æ¥ï¼ŒAI å†å‰å®³ä¸è¿‡æ˜¯ä¸ªç†Ÿç»ƒå·¥ã€‚å¦‚æœä¸€ä»¶äº‹æƒ…åªè¦é‡å¤æ¬¡æ•°å¤šäº†è°éƒ½èƒ½æ¥ï¼Œé‚£å®ƒå°±æœ‰å¯èƒ½è¢« AI åšåˆ°ï¼Œå¦åˆ™ï¼Œé‚£å°±ä¸ç”¨æ‹…å¿ƒã€‚ä¸ç®¡æ˜¯è®¾è®¡ï¼Œè¿˜æ˜¯å¼€å‘ï¼Œéƒ½å±äºåˆ›é€ å‹å·¥ä½œï¼Œä»åˆ›æ„åˆ°å®ç°çš„è¿‡ç¨‹æˆ–è®¸èƒ½è¢« AI ä»£æ›¿ï¼Œä½†å½¢æˆåˆ›æ„çš„è¿‡ç¨‹ï¼Œå†å¼ºå¤§çš„ç”µè„‘ä¹Ÿç®—ä¸è¿‡æ¥ã€‚</p>", 
            "topic": [
                {
                    "tag": "Gatsby", 
                    "tagLink": "https://api.zhihu.com/topics/20172777"
                }, 
                {
                    "tag": "React", 
                    "tagLink": "https://api.zhihu.com/topics/20013159"
                }, 
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }
            ], 
            "comments": [
                {
                    "userName": "Chino", 
                    "userLink": "https://www.zhihu.com/people/6b079a9a7b100d7bfd7db55f0e089445", 
                    "content": "<p>æƒ³æ­ªäº†ï¼Œæƒ³æ­ªäº†</p><a class=\"comment_sticker\" href=\"https://pic1.zhimg.com/v2-12562ad40366818a1ea39bcecb2599a0.gif\" data-width=\"\" data-height=\"\">[å®³ç¾]</a>", 
                    "likes": 113, 
                    "childComments": []
                }, 
                {
                    "userName": "Hun Soul", 
                    "userLink": "https://www.zhihu.com/people/494716de5484e86020fb1aad6c1c6737", 
                    "content": "å†™çš„å¾ˆä¸é”™ï¼ŒSPAçš„åŠ¨æ€è·¯ç”±å¯ä»¥ç”¨æ— å¤´æµè§ˆå™¨å»åšæ¸²æŸ“ï¼Œç„¶åè·å–å…¶htmlè¿”å›ï¼Œä¹Ÿæœ‰ç›¸å…³çš„æ¡†æ¶ï¼Œ", 
                    "likes": 4, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>é—®é¢˜ä¸åœ¨äºå®ç°ï¼Œè€Œåœ¨äºåŠ¨æ€çš„å†…å®¹æ•°é‡æ— æ³•ç¡®å®šï¼Œè€Œä¸”å¤§æ¦‚ç‡ä¼šæ˜¯æµ·é‡çš„æ•°æ®ã€‚åƒä¸ªäººåšå®¢è¿™ç§å°‘é‡ä¸”æœ‰é™çš„å¯ä»¥é¢„å…ˆç”Ÿæˆå¥½ï¼Œå¦‚æœæ˜¯èµ„è®¯ã€ç”µå•†ç±»çš„å¹³å°ï¼Œå°±åªèƒ½é€šè¿‡ SSR + ç¼“å­˜äº†ã€‚</p>", 
                            "likes": 1, 
                            "replyToAuthor": "Hun Soul"
                        }, 
                        {
                            "userName": "Hun Soul", 
                            "userLink": "https://www.zhihu.com/people/494716de5484e86020fb1aad6c1c6737", 
                            "content": "ä¸æ˜¯æˆ‘çš„æ„æ€æ˜¯ åç«¯Nginxæ£€æµ‹åˆ°UAæ˜¯æ¥è‡ªæœç´¢å¼•æ“çš„ åˆ™æŠŠè¯·æ±‚è½¬å‘åˆ°æ— å¤´æµè§ˆå™¨å»ï¼Œæ— å¤´æµè§ˆå™¨ä¼šæ‰“å¼€æµè§ˆå™¨è®¿é—®å½“å‰çš„urlç„¶åæ¸²æŸ“å®Œæ¯•åæ‹¿åˆ°å…¶htmlè¿”å›è¿‡å»ï¼Œ", 
                            "likes": 1, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "Destiny", 
                    "userLink": "https://www.zhihu.com/people/0ce9fda06d49d1db5c6ac5b05f4b05a2", 
                    "content": "ä¹‹å‰çœ‹åˆ°æœ‰ä¸ªç¨‹åºï¼Œå¦‚æœæ˜¯çˆ¬è™«çš„è¯è¿”å›æ¸²æŸ“å®Œçš„htmlï¼Œå…¶ä»–çš„ä¸ç”¨ç®¡", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>èƒ½åšåˆ°è¿™ä¸€æ­¥çš„ï¼Œç›´æ¥éƒ¨ç½² SSR å°±å¥½äº†å•Šï¼Œä¸ç”¨åŒºåˆ†æ˜¯ä¸æ˜¯çˆ¬è™«</p>", 
                            "likes": 0, 
                            "replyToAuthor": "Destiny"
                        }, 
                        {
                            "userName": "safa", 
                            "userLink": "https://www.zhihu.com/people/e594cabbdb3ef61f38e183441e35e117", 
                            "content": "ä½†æ˜¯æœ‰å¯èƒ½ssrçš„æ–¹æ¡ˆä¼šè®©æœåŠ¡å™¨å¾ˆåƒåŠ›ï¼Œæ‰€ä»¥å°½é‡é¿å…ssr", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "Chino", 
                    "userLink": "https://www.zhihu.com/people/6b079a9a7b100d7bfd7db55f0e089445", 
                    "content": "<p>æƒ³æ­ªäº†ï¼Œæƒ³æ­ªäº†</p><a class=\"comment_sticker\" href=\"https://pic1.zhimg.com/v2-12562ad40366818a1ea39bcecb2599a0.gif\" data-width=\"\" data-height=\"\">[å®³ç¾]</a>", 
                    "likes": 113, 
                    "childComments": [
                        {
                            "userName": "ç“œå­é­”æœ¯æ–°ä¼ äºº", 
                            "userLink": "https://www.zhihu.com/people/19c34e441ceb6f446acc6eba5b198fb8", 
                            "content": "å“ˆå“ˆ", 
                            "likes": 0, 
                            "replyToAuthor": "Chino"
                        }, 
                        {
                            "userName": "å¯ä¹å‘¢o3o", 
                            "userLink": "https://www.zhihu.com/people/505d08fa273f27d986c3a335b8637111", 
                            "content": "æƒ³æ­ªäº†ï¼Œç¬¬ä¸€ååº”æ˜¯æ¢¯å­ï¼Œåæ¥çœ‹åˆ°ä¸€åŠã€‚ã€‚ã€‚ã€‚é¢å£å»äº†", 
                            "likes": 14, 
                            "replyToAuthor": "ç“œå­é­”æœ¯æ–°ä¼ äºº"
                        }
                    ]
                }, 
                {
                    "userName": "tauCross", 
                    "userLink": "https://www.zhihu.com/people/c77580b2c3e9e989fc8c59d9cab52e77", 
                    "content": "çœ‹åˆ°æ ‡é¢˜æˆ‘è¿˜ä»¥ä¸ºæ˜¯è¦ä»‹ç»æ¢¯å­å‘¢â€¦[æ‚è„¸]", 
                    "likes": 49, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>æˆ‘ä¹Ÿæ˜¯</p>", 
                            "likes": 0, 
                            "replyToAuthor": "tauCross"
                        }, 
                        {
                            "userName": "æœ‰æœ¨æ¡‘", 
                            "userLink": "https://www.zhihu.com/people/4d64fe840012903ee8b3f9b3d4e3b668", 
                            "content": "<p>æˆ‘ä¹Ÿæ˜¯</p>", 
                            "likes": 0, 
                            "replyToAuthor": "tauCross"
                        }
                    ]
                }, 
                {
                    "userName": "å‘¨å¤§æ±¤", 
                    "userLink": "https://www.zhihu.com/people/14738c04d0418f3100a0d11361e8f285", 
                    "content": "æˆ‘è¿˜ä»¥ä¸ºæ˜¯ç§‘å­¦ä¸Šç½‘çš„é‚£ä¸ª", 
                    "likes": 13, 
                    "childComments": []
                }, 
                {
                    "userName": "ä¿ŠJack", 
                    "userLink": "https://www.zhihu.com/people/0f26865a7df5a25261f6d0b68f665d6a", 
                    "content": "é—®ä¸€ä¸‹ssræ˜¯ä»€ä¹ˆ", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "æœåŠ¡ç«¯æ¸²æŸ“", 
                            "likes": 0, 
                            "replyToAuthor": "ä¿ŠJack"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "asp net core MVC  åŠ  vue", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Yehowah", 
                    "userLink": "https://www.zhihu.com/people/82a23e7b08f969bae82f60c7332b60cf", 
                    "content": "è¯¶ï¼Œä¸æ˜¯é‚£ä¸ªssrå•Š", 
                    "likes": 9, 
                    "childComments": []
                }, 
                {
                    "userName": "æŸæ³½è¥¿", 
                    "userLink": "https://www.zhihu.com/people/18c2acb045a2a71dfd90f8690e8fc274", 
                    "content": "<p>è¿˜ä»¥ä¸ºæ˜¯é…¸é…¸ä¹³ã€‚ã€‚</p>", 
                    "likes": 14, 
                    "childComments": []
                }, 
                {
                    "userName": "æ¸æ¸", 
                    "userLink": "https://www.zhihu.com/people/3d1d9c0669e36eae18d48e35dcd60d2b", 
                    "content": "æˆ‘ä¸€ä¸ªç©é˜´é˜³å¸ˆçš„ç‚¹è¿›æ¥å¹²å˜›", 
                    "likes": 2, 
                    "childComments": []
                }, 
                {
                    "userName": "å°˜åŸƒçœ äºå…‰å¹´", 
                    "userLink": "https://www.zhihu.com/people/d02837fbf4659b342de40e0b63d488a1", 
                    "content": "éš”è¡Œå¦‚éš”å±±å•Š[æ‚è„¸]å¤§ä½¬è¯´è¯ä¸€ä¸ªå­—éƒ½çœ‹ä¸æ‡‚", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "é€”ä¸­", 
                    "userLink": "https://www.zhihu.com/people/fdceeb69de68873f457b69bfaa8b3867", 
                    "content": "ä¸æ˜¯çº¸é£æœºï¼Ÿï¼Ÿ", 
                    "likes": 3, 
                    "childComments": []
                }, 
                {
                    "userName": "ç½—è¾‘", 
                    "userLink": "https://www.zhihu.com/people/2a9c5649509c6811635053f9f30096f6", 
                    "content": "é…¸â€¦é…¸é…¸ä¹³", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "æ²™é›•ç½‘å‹", 
                    "userLink": "https://www.zhihu.com/people/2355d833773da2fbfc230724a7f2a311", 
                    "content": "æˆ‘ä»¥ä¸ºæ˜¯ç§‘å­¦ä¸Šç½‘çš„æ›´ä¼˜è§£å†³æ–¹æ¡ˆã€‚ã€‚", 
                    "likes": 2, 
                    "childComments": []
                }, 
                {
                    "userName": "æˆ‘è¦å†™bug", 
                    "userLink": "https://www.zhihu.com/people/1295bda3e6f3333abcb3ce7ddcf8a3ba", 
                    "content": "æˆ‘ä»¥ä¸ºç§‘å­¦ä¸Šç½‘å‘¢", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>æŠ±æ­‰ï¼Œæƒ³æ­ªäº†ï¼Œæˆ‘è¯´è°æ•¢å…¬å¼€è®¨è®ºé…¸é…¸ä¹³å‘¢</p>", 
                    "likes": 1, 
                    "childComments": []
                }, 
                {
                    "userName": "kill4peace", 
                    "userLink": "https://www.zhihu.com/people/4488b3b07dc4602f73d97c6be742c504", 
                    "content": "çœ‹ä¸æ‡‚ï¼Œè¿˜ä»¥ä¸ºæ˜¯å¦å¤–ä¸€ä¸ªssr", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "æ­¤SSRéå½¼ssr", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "é™ˆæ´²", 
                    "userLink": "https://www.zhihu.com/people/88e69a674fa5fb7126bbdc4192f12f8e", 
                    "content": "å“æˆ‘ä¸€å¤§è·³ï¼ŒåŸæ¥æˆ‘ä»¬æƒ³çš„ä¸ä¸€æ ·", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Chino", 
                    "userLink": "https://www.zhihu.com/people/6b079a9a7b100d7bfd7db55f0e089445", 
                    "content": "<p>æƒ³æ­ªäº†ï¼Œæƒ³æ­ªäº†</p><a class=\"comment_sticker\" href=\"https://pic1.zhimg.com/v2-12562ad40366818a1ea39bcecb2599a0.gif\" data-width=\"\" data-height=\"\">[å®³ç¾]</a>", 
                    "likes": 113, 
                    "childComments": []
                }, 
                {
                    "userName": "Hun Soul", 
                    "userLink": "https://www.zhihu.com/people/494716de5484e86020fb1aad6c1c6737", 
                    "content": "å†™çš„å¾ˆä¸é”™ï¼ŒSPAçš„åŠ¨æ€è·¯ç”±å¯ä»¥ç”¨æ— å¤´æµè§ˆå™¨å»åšæ¸²æŸ“ï¼Œç„¶åè·å–å…¶htmlè¿”å›ï¼Œä¹Ÿæœ‰ç›¸å…³çš„æ¡†æ¶ï¼Œ", 
                    "likes": 4, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>é—®é¢˜ä¸åœ¨äºå®ç°ï¼Œè€Œåœ¨äºåŠ¨æ€çš„å†…å®¹æ•°é‡æ— æ³•ç¡®å®šï¼Œè€Œä¸”å¤§æ¦‚ç‡ä¼šæ˜¯æµ·é‡çš„æ•°æ®ã€‚åƒä¸ªäººåšå®¢è¿™ç§å°‘é‡ä¸”æœ‰é™çš„å¯ä»¥é¢„å…ˆç”Ÿæˆå¥½ï¼Œå¦‚æœæ˜¯èµ„è®¯ã€ç”µå•†ç±»çš„å¹³å°ï¼Œå°±åªèƒ½é€šè¿‡ SSR + ç¼“å­˜äº†ã€‚</p>", 
                            "likes": 1, 
                            "replyToAuthor": "Hun Soul"
                        }, 
                        {
                            "userName": "Hun Soul", 
                            "userLink": "https://www.zhihu.com/people/494716de5484e86020fb1aad6c1c6737", 
                            "content": "ä¸æ˜¯æˆ‘çš„æ„æ€æ˜¯ åç«¯Nginxæ£€æµ‹åˆ°UAæ˜¯æ¥è‡ªæœç´¢å¼•æ“çš„ åˆ™æŠŠè¯·æ±‚è½¬å‘åˆ°æ— å¤´æµè§ˆå™¨å»ï¼Œæ— å¤´æµè§ˆå™¨ä¼šæ‰“å¼€æµè§ˆå™¨è®¿é—®å½“å‰çš„urlç„¶åæ¸²æŸ“å®Œæ¯•åæ‹¿åˆ°å…¶htmlè¿”å›è¿‡å»ï¼Œ", 
                            "likes": 1, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "Destiny", 
                    "userLink": "https://www.zhihu.com/people/0ce9fda06d49d1db5c6ac5b05f4b05a2", 
                    "content": "ä¹‹å‰çœ‹åˆ°æœ‰ä¸ªç¨‹åºï¼Œå¦‚æœæ˜¯çˆ¬è™«çš„è¯è¿”å›æ¸²æŸ“å®Œçš„htmlï¼Œå…¶ä»–çš„ä¸ç”¨ç®¡", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>èƒ½åšåˆ°è¿™ä¸€æ­¥çš„ï¼Œç›´æ¥éƒ¨ç½² SSR å°±å¥½äº†å•Šï¼Œä¸ç”¨åŒºåˆ†æ˜¯ä¸æ˜¯çˆ¬è™«</p>", 
                            "likes": 0, 
                            "replyToAuthor": "Destiny"
                        }, 
                        {
                            "userName": "safa", 
                            "userLink": "https://www.zhihu.com/people/e594cabbdb3ef61f38e183441e35e117", 
                            "content": "ä½†æ˜¯æœ‰å¯èƒ½ssrçš„æ–¹æ¡ˆä¼šè®©æœåŠ¡å™¨å¾ˆåƒåŠ›ï¼Œæ‰€ä»¥å°½é‡é¿å…ssr", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "Chino", 
                    "userLink": "https://www.zhihu.com/people/6b079a9a7b100d7bfd7db55f0e089445", 
                    "content": "<p>æƒ³æ­ªäº†ï¼Œæƒ³æ­ªäº†</p><a class=\"comment_sticker\" href=\"https://pic1.zhimg.com/v2-12562ad40366818a1ea39bcecb2599a0.gif\" data-width=\"\" data-height=\"\">[å®³ç¾]</a>", 
                    "likes": 113, 
                    "childComments": [
                        {
                            "userName": "ç“œå­é­”æœ¯æ–°ä¼ äºº", 
                            "userLink": "https://www.zhihu.com/people/19c34e441ceb6f446acc6eba5b198fb8", 
                            "content": "å“ˆå“ˆ", 
                            "likes": 0, 
                            "replyToAuthor": "Chino"
                        }, 
                        {
                            "userName": "å¯ä¹å‘¢o3o", 
                            "userLink": "https://www.zhihu.com/people/505d08fa273f27d986c3a335b8637111", 
                            "content": "æƒ³æ­ªäº†ï¼Œç¬¬ä¸€ååº”æ˜¯æ¢¯å­ï¼Œåæ¥çœ‹åˆ°ä¸€åŠã€‚ã€‚ã€‚ã€‚é¢å£å»äº†", 
                            "likes": 14, 
                            "replyToAuthor": "ç“œå­é­”æœ¯æ–°ä¼ äºº"
                        }
                    ]
                }, 
                {
                    "userName": "tauCross", 
                    "userLink": "https://www.zhihu.com/people/c77580b2c3e9e989fc8c59d9cab52e77", 
                    "content": "çœ‹åˆ°æ ‡é¢˜æˆ‘è¿˜ä»¥ä¸ºæ˜¯è¦ä»‹ç»æ¢¯å­å‘¢â€¦[æ‚è„¸]", 
                    "likes": 49, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>æˆ‘ä¹Ÿæ˜¯</p>", 
                            "likes": 0, 
                            "replyToAuthor": "tauCross"
                        }, 
                        {
                            "userName": "æœ‰æœ¨æ¡‘", 
                            "userLink": "https://www.zhihu.com/people/4d64fe840012903ee8b3f9b3d4e3b668", 
                            "content": "<p>æˆ‘ä¹Ÿæ˜¯</p>", 
                            "likes": 0, 
                            "replyToAuthor": "tauCross"
                        }
                    ]
                }, 
                {
                    "userName": "å‘¨å¤§æ±¤", 
                    "userLink": "https://www.zhihu.com/people/14738c04d0418f3100a0d11361e8f285", 
                    "content": "æˆ‘è¿˜ä»¥ä¸ºæ˜¯ç§‘å­¦ä¸Šç½‘çš„é‚£ä¸ª", 
                    "likes": 13, 
                    "childComments": []
                }, 
                {
                    "userName": "ä¿ŠJack", 
                    "userLink": "https://www.zhihu.com/people/0f26865a7df5a25261f6d0b68f665d6a", 
                    "content": "é—®ä¸€ä¸‹ssræ˜¯ä»€ä¹ˆ", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "æœåŠ¡ç«¯æ¸²æŸ“", 
                            "likes": 0, 
                            "replyToAuthor": "ä¿ŠJack"
                        }
                    ]
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "asp net core MVC  åŠ  vue", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Yehowah", 
                    "userLink": "https://www.zhihu.com/people/82a23e7b08f969bae82f60c7332b60cf", 
                    "content": "è¯¶ï¼Œä¸æ˜¯é‚£ä¸ªssrå•Š", 
                    "likes": 9, 
                    "childComments": []
                }, 
                {
                    "userName": "æŸæ³½è¥¿", 
                    "userLink": "https://www.zhihu.com/people/18c2acb045a2a71dfd90f8690e8fc274", 
                    "content": "<p>è¿˜ä»¥ä¸ºæ˜¯é…¸é…¸ä¹³ã€‚ã€‚</p>", 
                    "likes": 14, 
                    "childComments": []
                }, 
                {
                    "userName": "æ¸æ¸", 
                    "userLink": "https://www.zhihu.com/people/3d1d9c0669e36eae18d48e35dcd60d2b", 
                    "content": "æˆ‘ä¸€ä¸ªç©é˜´é˜³å¸ˆçš„ç‚¹è¿›æ¥å¹²å˜›", 
                    "likes": 2, 
                    "childComments": []
                }, 
                {
                    "userName": "å°˜åŸƒçœ äºå…‰å¹´", 
                    "userLink": "https://www.zhihu.com/people/d02837fbf4659b342de40e0b63d488a1", 
                    "content": "éš”è¡Œå¦‚éš”å±±å•Š[æ‚è„¸]å¤§ä½¬è¯´è¯ä¸€ä¸ªå­—éƒ½çœ‹ä¸æ‡‚", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "é€”ä¸­", 
                    "userLink": "https://www.zhihu.com/people/fdceeb69de68873f457b69bfaa8b3867", 
                    "content": "ä¸æ˜¯çº¸é£æœºï¼Ÿï¼Ÿ", 
                    "likes": 3, 
                    "childComments": []
                }, 
                {
                    "userName": "ç½—è¾‘", 
                    "userLink": "https://www.zhihu.com/people/2a9c5649509c6811635053f9f30096f6", 
                    "content": "é…¸â€¦é…¸é…¸ä¹³", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "æ²™é›•ç½‘å‹", 
                    "userLink": "https://www.zhihu.com/people/2355d833773da2fbfc230724a7f2a311", 
                    "content": "æˆ‘ä»¥ä¸ºæ˜¯ç§‘å­¦ä¸Šç½‘çš„æ›´ä¼˜è§£å†³æ–¹æ¡ˆã€‚ã€‚", 
                    "likes": 2, 
                    "childComments": []
                }, 
                {
                    "userName": "æˆ‘è¦å†™bug", 
                    "userLink": "https://www.zhihu.com/people/1295bda3e6f3333abcb3ce7ddcf8a3ba", 
                    "content": "æˆ‘ä»¥ä¸ºç§‘å­¦ä¸Šç½‘å‘¢", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>æŠ±æ­‰ï¼Œæƒ³æ­ªäº†ï¼Œæˆ‘è¯´è°æ•¢å…¬å¼€è®¨è®ºé…¸é…¸ä¹³å‘¢</p>", 
                    "likes": 1, 
                    "childComments": []
                }, 
                {
                    "userName": "kill4peace", 
                    "userLink": "https://www.zhihu.com/people/4488b3b07dc4602f73d97c6be742c504", 
                    "content": "çœ‹ä¸æ‡‚ï¼Œè¿˜ä»¥ä¸ºæ˜¯å¦å¤–ä¸€ä¸ªssr", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "æ­¤SSRéå½¼ssr", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "é™ˆæ´²", 
                    "userLink": "https://www.zhihu.com/people/88e69a674fa5fb7126bbdc4192f12f8e", 
                    "content": "å“æˆ‘ä¸€å¤§è·³ï¼ŒåŸæ¥æˆ‘ä»¬æƒ³çš„ä¸ä¸€æ ·", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/57375349", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 39, 
            "title": "ã€è¯‘ã€‘React æ˜¯å¦‚ä½•åŒºåˆ† Class å’Œ Function çš„ ?", 
            "content": "<blockquote>åŸæ–‡åœ°å€ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//overreacted.io/how-does-react-tell-a-class-from-a-function/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">How Does React Tell a Class from a Function?</a><br/>åŸæ–‡ä½œè€…ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//mobile.twitter.com/dan_abramov\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Dan Abramov</a><br/>è¯‘è€…ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//tonghuashuo.github.io/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Washington Hua</a></blockquote><h2>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªä»¥å‡½æ•°å½¢å¼å®šä¹‰çš„ <code>Greeting</code> ç»„ä»¶ï¼š</h2><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"kd\">function</span> <span class=\"nx\">Greeting</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n  <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"nx\">p</span><span class=\"o\">&gt;</span><span class=\"nx\">Hello</span><span class=\"o\">&lt;</span><span class=\"err\">/p&gt;;</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>React ä¹Ÿæ”¯æŒå°†ä»–å®šä¹‰æˆä¸€ä¸ªç±»ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"k\">class</span> <span class=\"nx\">Greeting</span> <span class=\"k\">extends</span> <span class=\"nx\">React</span><span class=\"p\">.</span><span class=\"nx\">Component</span> <span class=\"p\">{</span>\n  <span class=\"nx\">render</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n    <span class=\"k\">return</span> <span class=\"o\">&lt;</span><span class=\"nx\">p</span><span class=\"o\">&gt;</span><span class=\"nx\">Hello</span><span class=\"o\">&lt;</span><span class=\"err\">/p&gt;;</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div><p>ï¼ˆç›´åˆ° <a href=\"https://link.zhihu.com/?target=https%3A//reactjs.org/docs/hooks-intro.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">æœ€è¿‘</a>ï¼Œè¿™æ˜¯ä½¿ç”¨ state ç‰¹æ€§çš„å”¯ä¸€æ–¹å¼ï¼‰</p><p>å½“ä½ è¦æ¸²æŸ“ä¸€ä¸ª <code>&lt;Greeting /&gt;</code> ç»„ä»¶æ—¶ï¼Œä½ å¹¶ä¸éœ€è¦å…³å¿ƒå®ƒæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼š</p><div class=\"highlight\"><pre><code class=\"language-js\"><span class=\"c1\">// æ˜¯ç±»è¿˜æ˜¯å‡½æ•° â€”â€” æ— æ‰€è°“\n</span><span class=\"c1\"></span><span class=\"o\">&lt;</span><span class=\"nx\">Greeting</span> <span class=\"o\">/&gt;</span>\n</code></pre></div><p>ä½† <b>React æœ¬èº«</b>åœ¨æ„å…¶ä¸­çš„å·®åˆ«ï¼</p><p>å¦‚æœ <code>Greeting</code> æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒReact éœ€è¦è°ƒç”¨å®ƒã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">// ä½ çš„ä»£ç \nfunction Greeting() {\n  return &lt;p&gt;Hello&lt;/p&gt;;\n}\n\n// React å†…éƒ¨\nconst result = Greeting(props); // &lt;p&gt;Hello&lt;/p&gt;</code></pre></div><p>ä½†å¦‚æœ <code>Greeting</code> æ˜¯ä¸€ä¸ªç±»ï¼ŒReact éœ€è¦å…ˆç”¨ <code>new</code> æ“ä½œç¬¦å°†å…¶å®ä¾‹åŒ–ï¼Œ<b>ç„¶å</b> è°ƒç”¨åˆšæ‰ç”Ÿæˆå®ä¾‹çš„ <code>render</code> æ–¹æ³•ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// ä½ çš„ä»£ç \nclass Greeting extends React.Component {\n  render() {\n    return &lt;p&gt;Hello&lt;/p&gt;;\n  }\n}\n\n// React å†…éƒ¨\nconst instance = new Greeting(props); // Greeting {}\nconst result = instance.render(); // &lt;p&gt;Hello&lt;/p&gt;</code></pre></div><p>æ— è®ºå“ªç§æƒ…å†µ React çš„ç›®æ ‡éƒ½æ˜¯å»è·å–æ¸²æŸ“åçš„èŠ‚ç‚¹ï¼ˆåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ<code>&lt;p&gt;Hello&lt;/p&gt;</code>ï¼‰ã€‚ä½†å…·ä½“çš„æ­¥éª¤å–å†³äº <code>Greeting</code> æ˜¯å¦‚ä½•å®šä¹‰çš„ã€‚</p><p><b>æ‰€ä»¥ React æ˜¯æ€ä¹ˆçŸ¥é“æŸæ ·ä¸œè¥¿æ˜¯ class è¿˜æ˜¯ function çš„å‘¢ï¼Ÿ</b></p><p>å°±åƒæˆ‘ <a href=\"https://link.zhihu.com/?target=https%3A//overreacted.io/why-do-we-write-super-props/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ä¸Šä¸€ç¯‡åšå®¢</a> ä¸­æåˆ°çš„ï¼Œ<b>ä½ å¹¶ä¸éœ€è¦çŸ¥é“è¿™ä¸ªæ‰èƒ½é«˜æ•ˆä½¿ç”¨ Reactã€‚</b> æˆ‘å‡ å¹´æ¥éƒ½ä¸çŸ¥é“è¿™ä¸ªã€‚è¯·ä¸è¦æŠŠè¿™å˜æˆä¸€é“é¢è¯•é¢˜ã€‚äº‹å®ä¸Šï¼Œè¿™ç¯‡åšå®¢æ›´å¤šçš„æ˜¯å…³äº JavaScript è€Œä¸æ˜¯ Reactã€‚</p><p>è¿™ç¯‡åšå®¢æ˜¯å†™ç»™é‚£äº›å¯¹ React å…·ä½“æ˜¯ <b>å¦‚ä½•</b> å·¥ä½œçš„è¡¨ç¤ºå¥½å¥‡çš„è¯»è€…çš„ã€‚ä½ æ˜¯é‚£æ ·çš„äººå—ï¼Ÿé‚£æˆ‘ä»¬ä¸€èµ·æ·±å…¥æ¢è®¨ä¸€ä¸‹å§ã€‚</p><p><b>è¿™å°†æ˜¯ä¸€æ®µæ¼«é•¿çš„æ—…ç¨‹ï¼Œç³»å¥½å®‰å…¨å¸¦ã€‚è¿™ç¯‡æ–‡ç« å¹¶æ²¡æœ‰å¤šå°‘å…³äº React æœ¬èº«çš„ä¿¡æ¯ï¼Œä½†æˆ‘ä»¬ä¼šæ¶‰åŠåˆ°</b> <b><code>new</code>ã€<code>this</code>ã€<code>class</code>ã€ç®­å¤´å‡½æ•°ã€<code>prototype</code>ã€<code>__proto__</code>ã€<code>instanceof</code></b> <b>ç­‰æ–¹é¢ï¼Œä»¥åŠè¿™äº›ä¸œè¥¿æ˜¯å¦‚ä½•åœ¨ JavaScript ä¸­ä¸€èµ·å·¥ä½œçš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œä½ å¹¶ä¸éœ€è¦åœ¨ä½¿ç”¨ React æ—¶ä¸€ç›´æƒ³ç€è¿™äº›ï¼Œé™¤éä½ æ­£åœ¨å®ç° React...</b></p><p>ï¼ˆå¦‚æœä½ çœŸçš„å¾ˆæƒ³çŸ¥é“ç­”æ¡ˆï¼Œç›´æ¥ç¿»åˆ°æœ€ä¸‹é¢ã€‚ï¼‰</p><hr/><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ä¸ºä»€ä¹ˆæŠŠå‡½æ•°å’Œç±»åˆ†å¼€å¤„ç†å¾ˆé‡è¦ã€‚æ³¨æ„çœ‹æˆ‘ä»¬æ˜¯æ€ä¹ˆä½¿ç”¨ <code>new</code> æ“ä½œç¬¦æ¥è°ƒç”¨ä¸€ä¸ªç±»çš„ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// å¦‚æœ Greeting æ˜¯ä¸€ä¸ªå‡½æ•°\nconst result = Greeting(props); // &lt;p&gt;Hello&lt;/p&gt;\n\n// å¦‚æœ Greeting æ˜¯ä¸€ä¸ªç±»\nconst instance = new Greeting(props); // Greeting {}\nconst result = instance.render(); // &lt;p&gt;Hello&lt;/p&gt;</code></pre></div><p>æˆ‘ä»¬æ¥ç®€å•çœ‹ä¸€ä¸‹ <code>new</code> åœ¨ JavaScript æ˜¯å¹²ä»€ä¹ˆçš„ã€‚</p><hr/><p>åœ¨è¿‡å»ï¼ŒJavaScript è¿˜æ²¡æœ‰ç±»ã€‚ä½†æ˜¯ï¼Œä½ å¯ä»¥ä½¿ç”¨æ™®é€šå‡½æ•°æ¥æ¨¡æ‹Ÿã€‚<b>å…·ä½“æ¥è®²ï¼Œåªè¦åœ¨å‡½æ•°è°ƒç”¨å‰åŠ ä¸Š</b> <b><code>new</code></b> <b>æ“ä½œç¬¦ï¼Œä½ å°±å¯ä»¥æŠŠä»»ä½•å‡½æ•°å½“åšä¸€ä¸ªç±»çš„æ„é€ å‡½æ•°æ¥ç”¨ï¼š</b></p><div class=\"highlight\"><pre><code class=\"language-text\">// åªæ˜¯ä¸€ä¸ªå‡½æ•°\nfunction Person(name) {\n  this.name = name;\n}\n\nvar fred = new Person(&#39;Fred&#39;); // âœ… Person {name: &#39;Fred&#39;}\nvar george = Person(&#39;George&#39;); // ğŸ”´ æ²¡ç”¨çš„</code></pre></div><p>ç°åœ¨ä½ ä¾ç„¶å¯ä»¥è¿™æ ·å†™ï¼åœ¨ DevTools é‡Œè¯•è¯•å§ã€‚</p><p>å¦‚æœä½ è°ƒç”¨ <code>Person(&#39;Fred&#39;)</code> æ—¶ <b>æ²¡æœ‰</b> åŠ  <code>new</code>ï¼Œå…¶ä¸­çš„ <code>this</code> ä¼šæŒ‡å‘æŸä¸ªå…¨å±€ä¸”æ— ç”¨çš„ä¸œè¥¿ï¼ˆæ¯”å¦‚ï¼Œ<code>window</code> æˆ–è€… <code>undefined</code>ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬çš„ä»£ç ä¼šå´©æºƒï¼Œæˆ–è€…åšä¸€äº›åƒè®¾ç½® <code>window.name</code> ä¹‹ç±»çš„å‚»äº‹ã€‚</p><p>é€šè¿‡åœ¨è°ƒç”¨å‰å¢åŠ  <code>new</code>ï¼Œæˆ‘ä»¬è¯´ï¼šâ€œå˜¿ JavaScriptï¼Œæˆ‘çŸ¥é“ <code>Person</code> åªæ˜¯ä¸ªå‡½æ•°ï¼Œä½†è®©æˆ‘ä»¬å‡è£…å®ƒæ˜¯ä¸ªæ„é€ å‡½æ•°å§ã€‚<b>åˆ›å»ºä¸€ä¸ª</b> <code><b>{}</b></code> <b>å¯¹è±¡å¹¶æŠŠ</b> <code><b>Person</b></code> <b>ä¸­çš„</b> <code><b>this</b></code> <b>æŒ‡å‘é‚£ä¸ªå¯¹è±¡ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥é€šè¿‡ç±»ä¼¼</b> <code><b>this.name</b></code> <b>çš„å½¢å¼å»è®¾ç½®ä¸€äº›ä¸œè¥¿ï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡è¿”å›ç»™æˆ‘ã€‚</b>â€</p><p>è¿™å°±æ˜¯ <code>new</code> æ“ä½œç¬¦æ‰€åšçš„äº‹ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">var fred = new Person(&#39;Fred&#39;); // å’Œ `Person` ä¸­çš„ `this` ç­‰æ•ˆçš„å¯¹è±¡</code></pre></div><p><code>new</code> æ“ä½œç¬¦åŒæ—¶ä¹ŸæŠŠæˆ‘ä»¬æ”¾åœ¨ <code>Person.prototype</code> ä¸Šçš„ä¸œè¥¿æ”¾åˆ°äº† <code>fred</code> å¯¹è±¡ä¸Šï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">function Person(name) {\n  this.name = name;\n}\nPerson.prototype.sayHi = function() {  alert(&#39;Hi, I am &#39; + this.name);}\nvar fred = new Person(&#39;Fred&#39;);\nfred.sayHi();</code></pre></div><p>è¿™å°±æ˜¯åœ¨ JavaScript ç›´æ¥æ”¯æŒç±»ä¹‹å‰ï¼Œäººä»¬æ¨¡æ‹Ÿç±»çš„æ–¹å¼ã€‚</p><hr/><p><code>new</code> åœ¨ JavaScript ä¸­å·²ç»å­˜åœ¨äº†å¥½ä¹…äº†ï¼Œç„¶è€Œç±»è¿˜åªæ˜¯æœ€è¿‘çš„äº‹ï¼Œå®ƒçš„å‡ºç°è®©æˆ‘ä»¬èƒ½å¤Ÿé‡æ„æˆ‘ä»¬å‰é¢çš„ä»£ç ä»¥ä½¿å®ƒæ›´ç¬¦åˆæˆ‘ä»¬çš„æœ¬æ„ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">class Person {\n  constructor(name) {\n    this.name = name;\n  }\n  sayHi() {\n    alert(&#39;Hi, I am &#39; + this.name);\n  }\n}\n\nlet fred = new Person(&#39;Fred&#39;);\nfred.sayHi();</code></pre></div><p><b>æ•æ‰å¼€å‘è€…çš„æœ¬æ„</b> æ˜¯è¯­è¨€å’Œ API è®¾è®¡ä¸­éå¸¸é‡è¦çš„ä¸€ç‚¹ã€‚</p><p>å¦‚æœä½ å†™äº†ä¸€ä¸ªå‡½æ•°ï¼ŒJavaScript æ²¡åŠæ³•åˆ¤æ–­å®ƒåº”è¯¥åƒ <code>alert()</code> ä¸€æ ·è¢«è°ƒç”¨ï¼Œè¿˜æ˜¯åº”è¯¥è¢«è§†ä½œåƒ <code>new Person()</code> ä¸€æ ·çš„æ„é€ å‡½æ•°ã€‚å¿˜è®°ç»™åƒ <code>Person</code> è¿™æ ·çš„å‡½æ•°æŒ‡å®š <code>new</code> ä¼šå¯¼è‡´ä»¤äººè´¹è§£çš„è¡Œä¸ºã€‚</p><p><b>ç±»è¯­æ³•å…è®¸æˆ‘ä»¬è¯´ï¼šâ€œè¿™ä¸ä»…ä»…æ˜¯ä¸ªå‡½æ•° â€”â€” è¿™æ˜¯ä¸ªç±»å¹¶ä¸”å®ƒæœ‰æ„é€ å‡½æ•°â€ã€‚</b> å¦‚æœä½ åœ¨è°ƒç”¨å®ƒæ—¶å¿˜äº†åŠ  <code>new</code>ï¼ŒJavaScript ä¼šæŠ¥é”™ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">let fred = new Person(&#39;Fred&#39;);\n// âœ…  å¦‚æœ Person æ˜¯ä¸ªå‡½æ•°ï¼šæœ‰æ•ˆ\n// âœ…  å¦‚æœ Person æ˜¯ä¸ªç±»ï¼šä¾ç„¶æœ‰æ•ˆ\n\nlet george = Person(&#39;George&#39;); // æˆ‘ä»¬å¿˜è®°ä½¿ç”¨ `new`\n// ğŸ˜³ å¦‚æœ Person æ˜¯ä¸ªé•¿å¾—åƒæ„é€ å‡½æ•°çš„æ–¹æ³•ï¼šä»¤äººå›°æƒ‘çš„è¡Œä¸ºbr/&gt;// ğŸ”´ å¦‚æœ Person æ˜¯ä¸ªç±»ï¼šç«‹å³å¤±è´¥</code></pre></div><p>è¿™å¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨æ—©æœŸæ•æ‰é”™è¯¯ï¼Œè€Œä¸ä¼šé‡åˆ°ç±»ä¼¼ <code>this.name</code> è¢«å½“æˆ <code>window.name</code> å¯¹å¾…è€Œä¸æ˜¯ <code>george.name</code> çš„éšæ™¦é”™è¯¯ã€‚</p><p>ç„¶è€Œï¼Œè¿™æ„å‘³ç€ React éœ€è¦åœ¨è°ƒç”¨æ‰€æœ‰ç±»ä¹‹å‰åŠ ä¸Š <code>new</code>ï¼Œè€Œä¸èƒ½æŠŠå®ƒç›´æ¥å½“åšä¸€ä¸ªå¸¸è§„çš„å‡½æ•°å»è°ƒç”¨ï¼Œå› ä¸º JavaScript ä¼šæŠŠå®ƒå½“åšä¸€ä¸ªé”™è¯¯å¯¹å¾…ï¼</p><div class=\"highlight\"><pre><code class=\"language-text\">class Counter extends React.Component {\n  render() {\n    return &lt;p&gt;Hello&lt;/p&gt;;\n  }\n}\n\n// ğŸ”´ React ä¸èƒ½ç®€å•è¿™ä¹ˆåšï¼š\nconst instance = Counter(props);</code></pre></div><p>è¿™æ„å‘³ç€éº»çƒ¦ã€‚</p><hr/><p>åœ¨æˆ‘ä»¬çœ‹åˆ° React å¦‚ä½•å¤„ç†è¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯è¦è®°å¾—å¤§éƒ¨åˆ† React çš„ç”¨æˆ·ä¼šä½¿ç”¨ Babel ç­‰ç¼–è¯‘å™¨æ¥ç¼–è¯‘ç±»ç­‰ç°ä»£åŒ–çš„ç‰¹æ€§ä»¥ä¾¿èƒ½åœ¨è€æ—§çš„æµè§ˆå™¨ä¸Šè¿è¡Œã€‚å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬çš„è®¾è®¡ä¸­è€ƒè™‘ç¼–è¯‘å™¨ã€‚</p><p>åœ¨ Babel çš„æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œç±»ä¸åŠ  <code>new</code> ä¹Ÿå¯ä»¥è¢«è°ƒç”¨ã€‚ä½†è¿™ä¸ªé—®é¢˜å·²ç»è¢«ä¿®å¤äº† â€”â€” é€šè¿‡ç”Ÿæˆé¢å¤–çš„ä»£ç çš„æ–¹å¼ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">function Person(name) {\n  // ç¨å¾®ç®€åŒ–äº†ä¸€ä¸‹ Babel çš„è¾“å‡ºï¼š\n  if (!(this instanceof Person)) {\n    throw new TypeError(&#34;Cannot call a class as a function&#34;);\n  }\n  // æˆ‘ä»¬çš„ä»£ç :\n  this.name = name;\n}\n\nnew Person(&#39;Fred&#39;); // âœ… OK\nPerson(&#39;George&#39;);   // ğŸ”´ æ— æ³•æŠŠç±»å½“åšå‡½æ•°æ¥è°ƒç”¨</code></pre></div><p>ä½ æˆ–è®¸å·²ç»åœ¨ä½ æ„å»ºå‡ºæ¥çš„åŒ…ä¸­è§è¿‡ç±»ä¼¼çš„ä»£ç ï¼Œè¿™å°±æ˜¯é‚£äº› <code>_classCallCheck</code> å‡½æ•°åšçš„äº‹ã€‚ï¼ˆä½ å¯ä»¥é€šè¿‡å¯ç”¨â€œloose modeâ€æ¥å…³é—­æ£€æŸ¥ä»¥å‡å°æ„å»ºåŒ…çš„å°ºå¯¸ï¼Œä½†è¿™æˆ–è®¸ä¼šä½¿ä½ æœ€ç»ˆè½¬å‘çœŸæ­£çš„åŸç”Ÿç±»æ—¶å˜å¾—å¤æ‚ï¼‰</p><hr/><p>è‡³æ­¤ï¼Œä½ åº”è¯¥å·²ç»å¤§è‡´ç†è§£äº†è°ƒç”¨æ—¶åŠ ä¸åŠ  <code>new</code> çš„å·®åˆ«ï¼š</p><p>è¯‘è€…æ³¨ï¼šçŸ¥ä¹ä¸æ”¯æŒè¡¨æ ¼ï¼Œæ— å¥ˆåªèƒ½å½“ä»£ç å¤„ç†äº†</p><div class=\"highlight\"><pre><code class=\"language-text\">|          | new Person()                 | Person()                       |\n| -------- | ---------------------------- | ------------------------------ | \n| class    | âœ… this æ˜¯ä¸€ä¸ª Person å®ä¾‹     | ğŸ”´ TypeError                  | \n| function | âœ… this æ˜¯ä¸€ä¸ª Person å®ä¾‹     | ğŸ˜³ this æ˜¯ window æˆ– undefined |</code></pre></div><p>è¿™å°±æ˜¯ React æ­£ç¡®è°ƒç”¨ä½ çš„ç»„ä»¶å¾ˆé‡è¦çš„åŸå› ã€‚ <b>å¦‚æœä½ çš„ç»„ä»¶è¢«å®šä¹‰ä¸ºä¸€ä¸ªç±»ï¼ŒReact éœ€è¦ä½¿ç”¨</b> <b><code>new</code></b> <b>æ¥è°ƒç”¨å®ƒ</b></p><p>æ‰€ä»¥ React èƒ½æ£€æŸ¥å‡ºæŸæ ·ä¸œè¥¿æ˜¯å¦æ˜¯ç±»å—ï¼Ÿ</p><p>æ²¡é‚£ä¹ˆå®¹æ˜“ï¼å³ä¾¿æˆ‘ä»¬èƒ½å¤Ÿ <a href=\"https://link.zhihu.com/?target=https%3A//stackoverflow.com/questions/29093396/how-do-you-check-the-difference-between-an-ecmascript-6-class-and-function\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">åœ¨ JavaScript ä¸­åŒºåˆ†ç±»å’Œå‡½æ•°</a>ï¼Œé¢å¯¹è¢« Babel ç­‰å·¥å…·å¤„ç†è¿‡çš„ç±»è¿™è¿˜æ˜¯æ²¡ç”¨ã€‚å¯¹æµè§ˆå™¨è€Œè¨€ï¼Œå®ƒä»¬åªæ˜¯ä¸åŒçš„å‡½æ•°ã€‚è¿™æ˜¯ React çš„ä¸å¹¸ã€‚</p><hr/><p>å¥½ï¼Œé‚£ React å¯ä»¥ç›´æ¥åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½åŠ ä¸Š <code>new</code> å—ï¼Ÿå¾ˆé—æ†¾ï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸æ€»æ˜¯æœ‰ç”¨ã€‚</p><p>å¯¹äºå¸¸è§„å‡½æ•°ï¼Œç”¨ <code>new</code> è°ƒç”¨ä¼šç»™å®ƒä»¬ä¸€ä¸ª <code>this</code> ä½œä¸ºå¯¹è±¡å®ä¾‹ã€‚å¯¹äºç”¨ä½œæ„é€ å‡½æ•°çš„å‡½æ•°ï¼ˆæ¯”å¦‚æˆ‘ä»¬å‰é¢æåˆ°çš„ <code>Person</code>ï¼‰æ˜¯å¯å–çš„ï¼Œä½†å¯¹å‡½æ•°ç»„ä»¶è¿™æˆ–è®¸å°±æ¯”è¾ƒä»¤äººå›°æƒ‘äº†ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">function Greeting() {\n  // æˆ‘ä»¬å¹¶ä¸æœŸæœ› `this` åœ¨è¿™é‡Œè¡¨ç¤ºä»»ä½•ç±»å‹çš„å®ä¾‹\n  return &lt;p&gt;Hello&lt;/p&gt;;\n}</code></pre></div><p>è¿™æš‚ä¸”è¿˜èƒ½å¿ï¼Œè¿˜æœ‰ä¸¤ä¸ª <b>å…¶ä»–</b> ç†ç”±ä¼šæ‰¼æ€è¿™ä¸ªæƒ³æ³•ã€‚</p><hr/><p>å…³äºä¸ºä»€ä¹ˆæ€»æ˜¯ä½¿ç”¨ <code>new</code> æ˜¯æ²¡ç”¨çš„çš„ç¬¬ä¸€ä¸ªç†ç”±æ˜¯ï¼Œå¯¹äºåŸç”Ÿçš„ç®­å¤´å‡½æ•°ï¼ˆä¸æ˜¯é‚£äº›è¢« Babel ç¼–è¯‘è¿‡çš„ï¼‰ï¼Œç”¨ <code>new</code> è°ƒç”¨ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">const Greeting = () =&gt; &lt;p&gt;Hello&lt;/p&gt;;\nnew Greeting(); // ğŸ”´ Greeting ä¸æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°</code></pre></div><p>è¿™ä¸ªè¡Œä¸ºæ˜¯éµå¾ªç®­å¤´å‡½æ•°çš„è®¾è®¡è€Œåˆ»æ„ä¸ºä¹‹çš„ã€‚ç®­å¤´å‡½æ•°çš„ä¸€ä¸ªé™„å¸¦ä½œç”¨æ˜¯å®ƒ <b>æ²¡æœ‰</b> è‡ªå·±çš„ <code>this</code> å€¼ â€”â€” <code>this</code> è§£æè‡ªç¦»å¾—æœ€è¿‘çš„å¸¸è§„å‡½æ•°ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">class Friends extends React.Component {\n  render() {\n    const friends = this.props.friends;\n    return friends.map(friend =&gt;\n      &lt;Friend\n        // `this` è§£æè‡ª `render` æ–¹æ³•\n        size={this.props.size}\n        name={friend.name}\n        key={friend.id}\n      /&gt;\n    );\n  }\n}</code></pre></div><p>OKï¼Œæ‰€ä»¥ <b>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„</b> <b><code>this</code>ã€‚</b>ä½†è¿™æ„å‘³ç€å®ƒä½œä¸ºæ„é€ å‡½æ•°æ˜¯å®Œå…¨æ— ç”¨çš„ï¼</p><div class=\"highlight\"><pre><code class=\"language-text\">const Person = (name) =&gt; {\n  // ğŸ”´ è¿™ä¹ˆå†™æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼\n  this.name = name;\n}</code></pre></div><p>å› æ­¤ï¼Œ<b>JavaScript ä¸å…è®¸ç”¨</b> <b><code>new</code></b> <b>è°ƒç”¨ç®­å¤´å‡½æ•°ã€‚</b> å¦‚æœä½ è¿™ä¹ˆåšï¼Œä½ æˆ–è®¸å·²ç»çŠ¯äº†é”™ï¼Œæœ€å¥½æ—©ç‚¹å‘Šè¯‰ä½ ã€‚è¿™å’Œ JavaScript ä¸è®©ä½  <b>ä¸åŠ </b> <code>new</code> å»è°ƒç”¨ä¸€ä¸ªç±»æ˜¯ç±»ä¼¼çš„ã€‚</p><p>è¿™æ ·å¾ˆä¸é”™ï¼Œä½†è¿™ä¹Ÿè®©æˆ‘ä»¬çš„è®¡åˆ’å—é˜»ã€‚React ä¸èƒ½ç®€å•å¯¹æ‰€æœ‰ä¸œè¥¿éƒ½ä½¿ç”¨ <code>new</code>ï¼Œå› ä¸ºä¼šç ´åç®­å¤´å‡½æ•°ï¼æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç®­å¤´å‡½æ•°æ²¡æœ‰ <code>prototype</code> çš„ç‰¹ç‚¹æ¥æ£€æµ‹ç®­å¤´å‡½æ•°ï¼Œä¸å¯¹å®ƒä»¬ä½¿ç”¨ <code>new</code>ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">(() =&gt; {}).prototype // undefined\n(function() {}).prototype // {constructor: f}</code></pre></div><p>ä½†è¿™å¯¹äºè¢« Babel ç¼–è¯‘è¿‡çš„å‡½æ•°æ˜¯ <a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/issues/4599%23issuecomment-136562930\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">æ²¡ç”¨</a> çš„ã€‚è¿™æˆ–è®¸æ²¡ä»€ä¹ˆå¤§ä¸äº†ï¼Œä½†è¿˜æœ‰å¦ä¸€ä¸ªåŸå› ä½¿å¾—è¿™æ¡è·¯ä¸ä¼šæœ‰ç»“æœã€‚</p><hr/><p>å¦ä¸€ä¸ªæˆ‘ä»¬ä¸èƒ½æ€»æ˜¯ä½¿ç”¨ <code>new</code> çš„åŸå› æ˜¯å®ƒä¼šå¦¨ç¢ React æ”¯æŒè¿”å›å­—ç¬¦ä¸²æˆ–å…¶å®ƒåŸå§‹ç±»å‹çš„ç»„ä»¶ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">function Greeting() {\n  return &#39;Hello&#39;;\n}\n\nGreeting(); // âœ… &#39;Hello&#39;\nnew Greeting(); // ğŸ˜³ Greeting {}</code></pre></div><p>è¿™ï¼Œå†ä¸€æ¬¡ï¼Œå’Œ <code>href=&#34;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/new&#34;&gt;new æ“ä½œç¬¦ çš„æ€ªå¼‚è®¾è®¡æœ‰å…³ã€‚å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€çœ‹åˆ°çš„ï¼Œnew å‘Šè¯‰ JavaScript å¼•æ“å»åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè®©è¿™ä¸ªå¯¹è±¡æˆä¸ºå‡½æ•°å†…éƒ¨çš„ thisï¼Œç„¶åæŠŠè¿™ä¸ªå¯¹è±¡ä½œä¸º new çš„ç»“æœç»™æˆ‘ä»¬ã€‚</code></p><p>ç„¶è€Œï¼ŒJavaScript ä¹Ÿå…è®¸ä¸€ä¸ªä½¿ç”¨ <code>new</code> è°ƒç”¨çš„å‡½æ•°è¿”å›å¦ä¸€ä¸ªå¯¹è±¡ä»¥ <b>è¦†ç›–</b> <code>new</code> çš„è¿”å›å€¼ã€‚æˆ–è®¸ï¼Œè¿™åœ¨æˆ‘ä»¬åˆ©ç”¨è¯¸å¦‚â€œå¯¹è±¡æ± æ¨¡å¼â€æ¥å¯¹ç»„ä»¶è¿›è¡Œå¤ç”¨æ—¶æ˜¯è¢«è®¤ä¸ºæœ‰ç”¨çš„ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// åˆ›å»ºäº†ä¸€ä¸ªæ‡’å˜é‡ zeroVector = null;\nfunction Vector(x, y) {\n  if (x === 0 &amp;&amp; y === 0) {\n    if (zeroVector !== null) {\n      // å¤ç”¨åŒä¸€ä¸ªå®ä¾‹\n      return zeroVector;\n    }\n    zeroVector = this;\n  }\n  this.x = x;\n  this.y = y;\n}\n\nvar a = new Vector(1, 1);\nvar b = new Vector(0, 0);\nvar c = new Vector(0, 0); // ğŸ˜² b === c</code></pre></div><p>ç„¶è€Œï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ <b>ä¸æ˜¯</b> ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¼šè¢« <code>new</code> <b>å®Œå…¨å¿½ç•¥</b>ã€‚å¦‚æœä½ è¿”å›äº†ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œå°±å¥½åƒå®Œå…¨æ²¡æœ‰ <code>return</code> ä¸€æ ·ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">function Answer() {\n  return 42;\n}\n\nAnswer(); // âœ… 42\nnew Answer(); // ğŸ˜³ Answer {}</code></pre></div><p>å½“ä½¿ç”¨ <code>new</code> è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ˜¯æ²¡åŠæ³•è¯»å–åŸå§‹ç±»å‹ï¼ˆä¾‹å¦‚ä¸€ä¸ªæ•°å­—æˆ–å­—ç¬¦ä¸²ï¼‰çš„è¿”å›å€¼çš„ã€‚å› æ­¤å¦‚æœ React æ€»æ˜¯ä½¿ç”¨ <code>new</code>ï¼Œå°±æ²¡åŠæ³•å¢åŠ å¯¹è¿”å›å­—ç¬¦ä¸²çš„ç»„ä»¶çš„æ”¯æŒï¼</p><p>è¿™æ˜¯ä¸å¯æ¥å—çš„ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»å¦¥åã€‚</p><hr/><p>è‡³æ­¤æˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆï¼ŸReact åœ¨è°ƒç”¨ç±»ï¼ˆåŒ…æ‹¬ Babel è¾“å‡ºçš„ï¼‰æ—¶ <b>éœ€è¦ç”¨</b> <code>new</code>ï¼Œä½†åœ¨è°ƒç”¨å¸¸è§„å‡½æ•°æˆ–ç®­å¤´å‡½æ•°æ—¶ï¼ˆåŒ…æ‹¬ Babel è¾“å‡ºçš„ï¼‰<b>ä¸éœ€è¦ç”¨</b> <code>new</code>ï¼Œå¹¶ä¸”æ²¡æœ‰å¯é çš„æ–¹æ³•æ¥åŒºåˆ†è¿™äº›æƒ…å†µã€‚</p><p><b>å¦‚æœæˆ‘ä»¬æ²¡æ³•è§£å†³ä¸€ä¸ªç¬¼ç»Ÿçš„é—®é¢˜ï¼Œæˆ‘ä»¬èƒ½è§£å†³ä¸€ä¸ªå…·ä½“çš„å—ï¼Ÿ</b></p><p>å½“ä½ æŠŠä¸€ä¸ªç»„ä»¶å®šä¹‰ä¸ºç±»ï¼Œä½ å¾ˆå¯èƒ½ä¼šæƒ³è¦æ‰©å±• <code>React.Component</code> ä»¥ä¾¿è·å–å†…ç½®çš„æ–¹æ³•ï¼Œæ¯”å¦‚ <code>this.setState()</code>ã€‚ <b>ä¸å…¶è¯•å›¾æ£€æµ‹æ‰€æœ‰çš„ç±»ï¼Œæˆ‘ä»¬èƒ½å¦åªæ£€æµ‹</b> <code><b>React.Component</b></code> <b>çš„åä»£å‘¢ï¼Ÿ</b></p><p>å‰§é€ï¼šReact å°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚</p><hr/><p>æˆ–è®¸ï¼Œæ£€æŸ¥ <code>Greeting</code> æ˜¯å¦æ˜¯ä¸€ä¸ª React ç»„ä»¶ç±»çš„æœ€ç¬¦åˆè¯­è¨€ä¹ æƒ¯çš„æ–¹å¼æ˜¯æµ‹è¯• <code>Greeting.prototype instanceof React.Component</code>ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">class A {}\nclass B extends A {}\n\nconsole.log(B.prototype instanceof A); // true</code></pre></div><p>æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼Œåˆšæ‰å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£ JavaScript åŸå‹ã€‚</p><p>ä½ æˆ–è®¸å¯¹â€œåŸå‹é“¾â€å¾ˆç†Ÿæ‚‰ã€‚JavaScript ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªâ€œåŸå‹â€ã€‚å½“æˆ‘ä»¬å†™ <code>fred.sayHi()</code> ä½† <code>fred</code> å¯¹è±¡æ²¡æœ‰ <code>sayHi</code> å±æ€§ï¼Œæˆ‘ä»¬å°è¯•åˆ° <code>fred</code> çš„åŸå‹ä¸Šå»æ‰¾ <code>sayHi</code> å±æ€§ã€‚è¦æ˜¯æˆ‘ä»¬åœ¨è¿™å„¿æ‰¾ä¸åˆ°ï¼Œå°±å»æ‰¾åŸå‹é“¾çš„ä¸‹ä¸€ä¸ªåŸå‹ â€”â€” <code>fred</code> çš„åŸå‹çš„åŸå‹ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><b>è´¹è§£çš„æ˜¯ï¼Œä¸€ä¸ªç±»æˆ–å‡½æ•°çš„</b> <b><code>prototype</code></b> <b>å±æ€§</b> <b><i>å¹¶ä¸</i></b> <b>æŒ‡å‘é‚£ä¸ªå€¼çš„åŸå‹ã€‚</b> æˆ‘æ²¡å¼€ç©ç¬‘ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">function Person() {}\n\nconsole.log(Person.prototype); // ğŸ¤ª ä¸æ˜¯ Person çš„åŸå‹\nconsole.log(Person.__proto__); // ğŸ˜³ Person çš„åŸå‹</code></pre></div><p>å› æ­¤â€œåŸå‹é“¾â€æ›´åƒæ˜¯ <code>__proto__.__proto__.__proto__</code> è€Œä¸æ˜¯ <code>prototype.prototype.prototype</code>ï¼Œæˆ‘èŠ±äº†å¥½å‡ å¹´æ‰ææ‡‚è¿™ä¸€ç‚¹ã€‚</p><p>é‚£ä¹ˆå‡½æ•°å’Œç±»çš„ <code>prototype</code> å±æ€§åˆæ˜¯ä»€ä¹ˆï¼Ÿ<b>æ˜¯ç”¨</b> <code><b>new</b></code> <b>è°ƒç”¨é‚£ä¸ªç±»æˆ–å‡½æ•°ç”Ÿæˆçš„æ‰€æœ‰å¯¹è±¡çš„</b> <code><b>__proto__</b></code> <b>ï¼</b></p><div class=\"highlight\"><pre><code class=\"language-text\">function Person(name) {\n  this.name = name;\n}\nPerson.prototype.sayHi = function() {\n  alert(&#39;Hi, I am &#39; + this.name);\n}\n\nvar fred = new Person(&#39;Fred&#39;); // è®¾ç½® `fred.__proto__` ä¸º `Person.prototype`</code></pre></div><p>é‚£ä¸ª <code>__proto__</code> é“¾æ‰æ˜¯ JavaScript ç”¨æ¥æŸ¥æ‰¾å±æ€§çš„ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">fred.sayHi();\n// 1. fred æœ‰ sayHi å±æ€§å—ï¼Ÿä¸ã€‚\n// 2. fred.__proto__ æœ‰ sayHi å±æ€§å—ï¼Ÿæ˜¯çš„ï¼Œè°ƒç”¨å®ƒï¼\n\nfred.toString();\n// 1. fred æœ‰ toString å±æ€§å—ï¼Ÿä¸ã€‚\n// 2. fred.__proto__ æœ‰ toString å±æ€§å—ï¼Ÿä¸ã€‚\n// 3. fred.__proto__.__proto__ æœ‰ toString å±æ€§å—ï¼Ÿæ˜¯çš„ï¼Œè°ƒç”¨å®ƒï¼</code></pre></div><p>åœ¨å®æˆ˜ä¸­ï¼Œä½ åº”è¯¥å‡ ä¹æ°¸è¿œä¸éœ€è¦ç›´æ¥åœ¨ä»£ç é‡ŒåŠ¨åˆ° <code>__proto__</code> é™¤éä½ åœ¨è°ƒè¯•å’ŒåŸå‹é“¾ç›¸å…³çš„é—®é¢˜ã€‚å¦‚æœä½ æƒ³è®©æŸæ ·ä¸œè¥¿åœ¨ <code>fred.__proto__</code> ä¸Šå¯ç”¨ï¼Œä½ åº”è¯¥æŠŠå®ƒæ”¾åœ¨ <code>Person.prototype</code>ï¼Œè‡³å°‘å®ƒæœ€åˆæ˜¯è¿™ä¹ˆè®¾è®¡çš„ã€‚</p><p><code>__proto__</code> å±æ€§ç”šè‡³ä¸€å¼€å§‹å°±ä¸åº”è¯¥è¢«æµè§ˆå™¨æš´éœ²å‡ºæ¥ï¼Œå› ä¸ºåŸå‹é“¾åº”è¯¥è¢«è§†ä¸ºä¸€ä¸ªå†…éƒ¨æ¦‚å¿µï¼Œç„¶è€ŒæŸäº›æµè§ˆå™¨å¢åŠ äº† <code>__proto__</code> å¹¶æœ€ç»ˆå‹‰å¼ºè¢«æ ‡å‡†åŒ–ï¼ˆä½†å·²è¢«åºŸå¼ƒå¹¶æ¨èä½¿ç”¨ <code>Object.getPrototypeOf()</code>ï¼‰ã€‚</p><p><b>ç„¶è€Œä¸€ä¸ªåå«â€œåŸå‹â€çš„å±æ€§å´ç»™ä¸äº†æˆ‘ä¸€ä¸ªå€¼çš„â€œåŸå‹â€è¿™ä¸€ç‚¹è¿˜æ˜¯å¾ˆè®©æˆ‘å›°æƒ‘</b>ï¼ˆä¾‹å¦‚ï¼Œ<code>fred.prototype</code> æ˜¯æœªå®šä¹‰çš„ï¼Œå› ä¸º <code>fred</code> ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ã€‚ä¸ªäººè§‚ç‚¹ï¼Œæˆ‘è§‰å¾—è¿™æ˜¯å³ä¾¿æœ‰ç»éªŒçš„å¼€å‘è€…ä¹Ÿå®¹æ˜“è¯¯è§£ JavaScript åŸå‹é“¾çš„æœ€å¤§åŸå› ã€‚</p><hr/><p>è¿™ç¯‡åšå®¢å¾ˆé•¿ï¼Œæ˜¯å§ï¼Ÿå·²ç»åˆ° 80% äº†ï¼ŒåšæŒä½ã€‚</p><p>æˆ‘ä»¬çŸ¥é“å½“è¯´ <code>obj.foo</code> çš„æ—¶å€™ï¼ŒJavaScript äº‹å®ä¸Šä¼šæ²¿ç€ <code>obj</code>, <code>obj.__proto__</code>, <code>obj.__proto__.__proto__</code> ç­‰ç­‰ä¸€è·¯å¯»æ‰¾ <code>foo</code>ã€‚</p><p>åœ¨ä½¿ç”¨ç±»æ—¶ï¼Œä½ å¹¶éç›´æ¥é¢å¯¹è¿™ä¸€æœºåˆ¶ï¼Œä½† <code>extends</code> çš„åŸç†ä¾ç„¶æ˜¯åŸºäºè¿™é¡¹è€æ—§ä½†æœ‰æ•ˆçš„åŸå‹é“¾æœºåˆ¶ã€‚è¿™ä¹Ÿæ˜¯çš„æˆ‘ä»¬çš„ React ç±»å®ä¾‹èƒ½å¤Ÿè®¿é—®å¦‚ <code>setState</code> è¿™æ ·æ–¹æ³•çš„åŸå› ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">class Greeting extends React.Component {\n  render() {\n    return &lt;p&gt;Hello&lt;/p&gt;;\n  }\n}\n\nlet c = new Greeting();\nconsole.log(c.__proto__); // Greeting.prototype\nconsole.log(c.__proto__.__proto__); // React.Component.prototype\nconsole.log(c.__proto__.__proto__.__proto__); // Object.prototype\n\nc.render();      // åœ¨ c.__proto__ (Greeting.prototype) ä¸Šæ‰¾åˆ°\nc.setState();    // åœ¨ c.__proto__.__proto__ (React.Component.prototype) ä¸Šæ‰¾åˆ°\nc.toString();    // åœ¨ c.__proto__.__proto__.__proto__ (Object.prototype) ä¸Šæ‰¾åˆ°</code></pre></div><p>æ¢å¥è¯è¯´ï¼Œ<b>å½“ä½ åœ¨ä½¿ç”¨ç±»çš„æ—¶å€™ï¼Œå®ä¾‹çš„</b> <b><code>__proto__</code></b> <b>é“¾â€œé•œåƒâ€äº†ç±»çš„å±‚çº§ç»“æ„ï¼š</b></p><div class=\"highlight\"><pre><code class=\"language-text\">// `extends` é“¾\nGreeting\n  â†’ React.Component\n    â†’ Object (é—´æ¥çš„)\n\n// `__proto__` é“¾\nnew Greeting()\n  â†’ Greeting.prototype\n    â†’ React.Component.prototype\n      â†’ Object.prototype</code></pre></div><p>2 æ¡é“¾ã€‚</p><hr/><p>æ—¢ç„¶ <code>__proto__</code> é“¾é•œåƒäº†ç±»çš„å±‚çº§ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥ä¸€ä¸ª <code>Greeting</code> æ˜¯å¦æ‰©å±•äº† <code>React.Component</code>ï¼Œæˆ‘ä»¬ä» <code>Greeting.prototype</code> å¼€å§‹ï¼Œä¸€è·¯æ²¿ç€ <code>__proto__</code> é“¾ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// `__proto__` chain\nnew Greeting()\n  â†’ Greeting.prototype // ğŸ•µï¸ æˆ‘ä»¬ä»è¿™å„¿å¼€å§‹\n    â†’ React.Component.prototype // âœ… æ‰¾åˆ°äº†ï¼\n      â†’ Object.prototype</code></pre></div><p>æ–¹ä¾¿çš„æ˜¯ï¼Œ<code>x instanceof Y</code> åšçš„å°±æ˜¯è¿™ç±»æœç´¢ã€‚å®ƒæ²¿ç€ <code>x.__proto__</code> é“¾å¯»æ‰¾ <code>Y.prototype</code> æ˜¯å¦åœ¨é‚£å„¿ã€‚</p><p>é€šå¸¸ï¼Œè¿™è¢«ç”¨æ¥åˆ¤æ–­æŸæ ·ä¸œè¥¿æ˜¯å¦æ˜¯ä¸€ä¸ªç±»çš„å®ä¾‹ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">let greeting = new Greeting();\n\nconsole.log(greeting instanceof Greeting); // true\n// greeting (ğŸ•µï¸â€ æˆ‘ä»¬ä»è¿™å„¿å¼€å§‹)br/&gt;//   .__proto__ â†’ Greeting.prototype (âœ… æ‰¾åˆ°äº†ï¼)br/&gt;//     .__proto__ â†’ React.Component.prototypebr/&gt;//       .__proto__ â†’ Object.prototype\n\nconsole.log(greeting instanceof React.Component); // truebr/&gt;// greeting (ğŸ•µï¸â€ æˆ‘ä»¬ä»è¿™å„¿å¼€å§‹)br/&gt;//   .__proto__ â†’ Greeting.prototypebr/&gt;//     .__proto__ â†’ React.Component.prototype (âœ… æ‰¾åˆ°äº†ï¼)br/&gt;//       .__proto__ â†’ Object.prototype\n\nconsole.log(greeting instanceof Object); // truebr/&gt;// greeting (ğŸ•µï¸â€ æˆ‘ä»¬ä»è¿™å„¿å¼€å§‹)br/&gt;//   .__proto__ â†’ Greeting.prototypebr/&gt;//     .__proto__ â†’ React.Component.prototypebr/&gt;//       .__proto__ â†’ Object.prototype (âœ… æ‰¾åˆ°äº†ï¼)\n\nconsole.log(greeting instanceof Banana); // falsebr/&gt;// greeting (ğŸ•µï¸â€ æˆ‘ä»¬ä»è¿™å„¿å¼€å§‹)br/&gt;//   .__proto__ â†’ Greeting.prototypebr/&gt;//     .__proto__ â†’ React.Component.prototypebr/&gt;//       .__proto__ â†’ Object.prototype (ğŸ™…â€ æ²¡æ‰¾åˆ°ï¼)</code></pre></div><p>ä½†è¿™ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªç±»æ˜¯å¦æ‰©å±•äº†å¦ä¸€ä¸ªç±»è¿˜æ˜¯æœ‰æ•ˆçš„</p><div class=\"highlight\"><pre><code class=\"language-text\">console.log(Greeting.prototype instanceof React.Component);\n// greeting\n//   .__proto__ â†’ Greeting.prototype (ğŸ•µï¸â€ æˆ‘ä»¬ä»è¿™å„¿å¼€å§‹)br/&gt;//     .__proto__ â†’ React.Component.prototype (âœ… æ‰¾åˆ°äº†ï¼)br/&gt;//       .__proto__ â†’ Object.prototype</code></pre></div><p>è¿™ç§æ£€æŸ¥æ–¹å¼å°±æ˜¯æˆ‘ä»¬åˆ¤æ–­æŸæ ·ä¸œè¥¿æ˜¯ä¸€ä¸ª React ç»„ä»¶ç±»è¿˜æ˜¯ä¸€ä¸ªå¸¸è§„å‡½æ•°çš„æ–¹å¼ã€‚</p><hr/><p>ç„¶è€Œ React å¹¶ä¸æ˜¯è¿™ä¹ˆåšçš„ ğŸ˜³</p><p>å…³äº <code>instanceof</code> è§£å†³æ–¹æ¡ˆæœ‰ä¸€ç‚¹é™„åŠ è¯´æ˜ï¼Œå½“é¡µé¢ä¸Šæœ‰å¤šä¸ª React å‰¯æœ¬ï¼Œå¹¶ä¸”æˆ‘ä»¬è¦æ£€æŸ¥çš„ç»„ä»¶ç»§æ‰¿è‡ª <b>å¦ä¸€ä¸ª</b> React å‰¯æœ¬çš„ <code>React.Component</code> æ—¶ï¼Œè¿™ç§æ–¹æ³•æ˜¯æ— æ•ˆçš„ã€‚åœ¨ä¸€ä¸ªé¡¹ç›®é‡Œæ··åˆå¤šä¸ª React å‰¯æœ¬æ˜¯ä¸å¥½çš„ï¼ŒåŸå› æœ‰å¾ˆå¤šï¼Œä½†ç«™åœ¨å†å²è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬è¯•å›¾å°½å¯èƒ½é¿å…é—®é¢˜ã€‚ï¼ˆæœ‰äº† Hooksï¼Œæˆ‘ä»¬ <a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/issues/13991\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">æˆ–è®¸å¾—</a> å¼ºåˆ¶é¿å…é‡å¤ï¼‰</p><p>å¦ä¸€ç‚¹å¯å‘å¯ä»¥æ˜¯å»æ£€æŸ¥åŸå‹é“¾ä¸Šçš„ <code>render</code> æ–¹æ³•ã€‚ç„¶è€Œï¼Œå½“æ—¶è¿˜ <a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/issues/4599%23issuecomment-129714112\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ä¸ç¡®å®š</a> ç»„ä»¶çš„ API ä¼šå¦‚ä½•æ¼”åŒ–ã€‚æ¯ä¸€æ¬¡æ£€æŸ¥éƒ½æœ‰æˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸æƒ³å†å¤šåŠ äº†ã€‚å¦‚æœ <code>render</code> è¢«å®šä¹‰ä¸ºä¸€ä¸ªå®ä¾‹æ–¹æ³•ï¼Œä¾‹å¦‚ä½¿ç”¨ç±»å±æ€§è¯­æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿä¼šå¤±æ•ˆã€‚</p><p>å› æ­¤, React ä¸ºåŸºç±» <a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/pull/4663\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å¢åŠ äº†</a> ä¸€ä¸ªç‰¹åˆ«çš„æ ‡è®°ã€‚React æ£€æŸ¥æ˜¯å¦æœ‰è¿™ä¸ªæ ‡è®°ï¼Œä»¥æ­¤çŸ¥é“æŸæ ·ä¸œè¥¿æ˜¯å¦æ˜¯ä¸€ä¸ª React ç»„ä»¶ç±»ã€‚</p><p>æœ€åˆè¿™ä¸ªæ ‡è®°æ˜¯åœ¨ <code>React.Component</code> è¿™ä¸ªåŸºç±»è‡ªå·±èº«ä¸Šï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// React å†…éƒ¨\nclass Component {}\nComponent.isReactClass = {};\n\n// æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·æ£€æŸ¥å®ƒ\nclass Greeting extends Component {}\nconsole.log(Greeting.isReactClass); // âœ… æ˜¯çš„</code></pre></div><p>ç„¶è€Œï¼Œæœ‰äº›æˆ‘ä»¬å¸Œæœ›ä½œä¸ºç›®æ ‡çš„ç±»å®ç° <a href=\"https://link.zhihu.com/?target=https%3A//github.com/scala-js/scala-js/issues/1900\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å¹¶æ²¡æœ‰</a> å¤åˆ¶é™æ€å±æ€§ï¼ˆæˆ–è®¾ç½®éæ ‡å‡†çš„ <code>__proto__</code>ï¼‰ï¼Œæ ‡è®°ä¹Ÿå› æ­¤ä¸¢å¤±ã€‚</p><p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ React æŠŠè¿™ä¸ªæ ‡è®° <a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/pull/5021\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ç§»åŠ¨åˆ°äº†</a> <code>React.Component.prototype</code>ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// React å†…éƒ¨\nclass Component {}\nComponent.prototype.isReactComponent = {};\n\n// æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·æ£€æŸ¥å®ƒ\nclass Greeting extends Component {}\nconsole.log(Greeting.prototype.isReactComponent); // âœ… æ˜¯çš„</code></pre></div><p><b>è¯´çœŸçš„è¿™å°±æ˜¯å…¨éƒ¨äº†ã€‚</b></p><p>ä½ æˆ–è®¸å¥‡æ€ªä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å®æˆ˜ä¸­è¿™å¹¶ä¸é‡è¦ï¼Œä½†æ—©æœŸç‰ˆæœ¬çš„ Jestï¼ˆåœ¨ Jest å•†å“åŒ–ä¹‹å‰ï¼‰æ˜¯é»˜è®¤å¼€å§‹è‡ªåŠ¨æ¨¡æ‹ŸåŠŸèƒ½çš„ï¼Œç”Ÿæˆçš„æ¨¡æ‹Ÿæ•°æ®çœç•¥æ‰äº†åŸå§‹ç±»å‹å±æ€§ï¼Œ<a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/pull/4663%23issuecomment-136533373\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ç ´åäº†æ£€æŸ¥</a>ã€‚è°¢äº†ï¼ŒJestã€‚</p><p>ä¸€ç›´åˆ°ä»Šå¤©ï¼Œ<a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/blob/769b1f270e1251d9dbdce0fcbd9e92e502d059b8/packages/react-reconciler/src/ReactFiber.js%23L297-L300\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">React éƒ½åœ¨ç”¨</a> <code>isReactComponent</code> è¿›è¡Œæ£€æŸ¥ã€‚</p><p>å¦‚æœä½ ä¸æ‰©å±• <code>React.Component</code>ï¼ŒReact ä¸ä¼šåœ¨åŸå‹ä¸Šæ‰¾åˆ° <code>isReactComponent</code>ï¼Œå› æ­¤å°±ä¸ä¼šæŠŠç»„ä»¶å½“åšç±»å¤„ç†ã€‚ç°åœ¨ä½ çŸ¥é“ä¸ºä»€ä¹ˆè§£å†³ <code>Cannot call a class as a function</code> é”™è¯¯çš„ <a href=\"https://link.zhihu.com/?target=https%3A//stackoverflow.com/a/42680526/458193\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å¾—ç¥¨æ•°æœ€é«˜çš„ç­”æ¡ˆ</a> æ˜¯å¢åŠ  <code>extends React.Component</code>ã€‚æœ€åï¼Œæˆ‘ä»¬è¿˜ <a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/pull/11168\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å¢åŠ äº†ä¸€é¡¹è­¦å‘Š</a>ï¼Œå½“ <code>prototype.render</code> å­˜åœ¨ä½† <code>prototype.isReactComponent</code> ä¸å­˜åœ¨æ—¶ä¼šå‘å‡ºè­¦å‘Šã€‚</p><hr/><p>ä½ æˆ–è®¸ä¼šè§‰å¾—è¿™ä¸ªæ•…äº‹æœ‰ä¸€ç‚¹â€œæ ‡é¢˜å…šâ€ã€‚ <b>å®é™…çš„è§£å†³æ–¹æ¡ˆå…¶å®çœŸçš„å¾ˆç®€å•ï¼Œä½†æˆ‘èŠ±äº†å¤§é‡çš„ç¯‡å¹…åœ¨è½¬æŠ˜ä¸Šæ¥è§£é‡Šä¸ºä»€ä¹ˆ React æœ€ç»ˆé€‰æ‹©äº†è¿™å¥—æ–¹æ¡ˆï¼Œä»¥åŠè¿˜æœ‰å“ªäº›å€™é€‰æ–¹æ¡ˆã€‚</b></p><p>ä»¥æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œè®¾è®¡ä¸€ä¸ªåº“çš„ API ä¹Ÿç»å¸¸ä¼šé‡åˆ°è¿™ç§æƒ…å†µã€‚ä¸ºäº†ä¸€ä¸ª API èƒ½å¤Ÿç®€å•æ˜“ç”¨ï¼Œä½ ç»å¸¸éœ€è¦è€ƒè™‘è¯­ä¹‰åŒ–ï¼ˆå¯èƒ½çš„è¯ï¼Œä¸ºå¤šç§è¯­è¨€è€ƒè™‘ï¼ŒåŒ…æ‹¬æœªæ¥çš„å‘å±•æ–¹å‘ï¼‰ã€è¿è¡Œæ—¶æ€§èƒ½ã€æœ‰æˆ–æ²¡æœ‰ç¼–è¯‘æ—¶æ­¥éª¤çš„å·¥ç¨‹æ•ˆèƒ½ã€ç”Ÿæ€çš„çŠ¶æ€ä»¥åŠæ‰“åŒ…æ–¹æ¡ˆã€æ—©æœŸçš„è­¦å‘Šï¼Œä»¥åŠå¾ˆå¤šå…¶å®ƒé—®é¢˜ã€‚æœ€ç»ˆçš„ç»“æœæœªå¿…æ€»æ˜¯æœ€ä¼˜é›…çš„ï¼Œä½†å¿…é¡»è¦æ˜¯å¯ç”¨çš„ã€‚</p><p><b>å¦‚æœæœ€ç»ˆçš„ API æˆåŠŸçš„è¯,</b> <b><i>å®ƒçš„ç”¨æˆ·</i></b> <b>æ°¸è¿œä¸å¿…æ€è€ƒè¿™ä¸€è¿‡ç¨‹</b>ã€‚ä»–ä»¬åªéœ€è¦ä¸“å¿ƒåˆ›å»ºåº”ç”¨å°±å¥½äº†ã€‚</p><p>ä½†å¦‚æœä½ åŒæ—¶ä¹Ÿå¾ˆå¥½å¥‡...çŸ¥é“å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ä¹Ÿæ˜¯æå¥½çš„ã€‚</p>", 
            "topic": [
                {
                    "tag": "React", 
                    "tagLink": "https://api.zhihu.com/topics/20013159"
                }, 
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }
            ], 
            "comments": [
                {
                    "userName": "çŸ¥ä¹ç”¨æˆ·", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>ä½ å°±ä¸èƒ½ä¸€å¼€å§‹è¯´ç­”æ¡ˆå—ï¼Ÿç­”æ¡ˆå°±æ˜¯æ£€æµ‹ Greeting.prototype.isReactComponent</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "è¿™ä½ å¾—é—® Dan [æ‘Šæ‰‹]", 
                            "likes": 1, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }, 
                {
                    "userName": "Sean", 
                    "userLink": "https://www.zhihu.com/people/24b76c1d7aeeaf595f10790aa3ec801a", 
                    "content": "é€™æ©Ÿç¿»çš„éº¼â€¦<br><br>ï¼ˆç›´åˆ° æœ€è¿‘ï¼Œè¿™æ˜¯ä½¿ç”¨ state ç‰¹æ€§çš„å”¯ä¸€æ–¹å¼ï¼‰<br><br>åŸæ–‡å¤§æ¦‚ä½¿ç”¨ until å§ï¼Œæ„æ€æ˜¯åœ¨ hook ç‰¹æ€§å‡ºä¾†ä¹‹å‰ï¼Œä½¿ç”¨ class å‰µå»º react çµ„ä»¶æ˜¯èƒ½å¤ å‚³é state çš„å”¯ä¸€æ–¹å¼ã€‚", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "çŸ¥ä¹ç”¨æˆ·", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "ä¸ç”¨å¤§æ¦‚ï¼ŒåŸæ–‡æœ‰é“¾æ¥ï¼Œæ‚¨å¯ä»¥ç›´æ¥æŸ¥çœ‹ã€‚å¦‚æœæœ‰æ›´å¥½çš„è¯‘æœ¬ï¼Œæ¬¢è¿ç•™è¨€ï¼Œå…±åŒæ”¹è¿›", 
                            "likes": 0, 
                            "replyToAuthor": "Sean"
                        }, 
                        {
                            "userName": "Sean", 
                            "userLink": "https://www.zhihu.com/people/24b76c1d7aeeaf595f10790aa3ec801a", 
                            "content": "å°±é‚£æ®µå¯èƒ½ç¨å¾®æ”¹ä¸€ä¸‹æœƒæ¯”è¼ƒè²¼è¿‘ä¸­æ–‡çš„èªåº", 
                            "likes": 0, 
                            "replyToAuthor": "çŸ¥ä¹ç”¨æˆ·"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/57372137", 
            "userName": "Washington Hua", 
            "userLink": "https://www.zhihu.com/people/8c05fd9fe17e0d8a38e42ea7d6760242", 
            "upvote": 18, 
            "title": "ã€è¯‘ã€‘æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å†™ super(props)?", 
            "content": "<blockquote>åŸæ–‡åœ°å€ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//overreacted.io/why-do-we-write-super-props/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Why Do We Write super(props) ?</a><br/>åŸæ–‡ä½œè€…ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//twitter.com/dan_abramov\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Dan Abramov</a><br/>è¯‘è€…ï¼š<a href=\"https://link.zhihu.com/?target=https%3A//tonghuashuo.github.io/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Washington Hua</a></blockquote><p class=\"ztext-empty-paragraph\"><br/></p><p>æˆ‘å¬è¯´ <a href=\"https://link.zhihu.com/?target=https%3A//reactjs.org/docs/hooks-intro.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Hooks</a> æœ€è¿‘å¾ˆç«ã€‚è®½åˆºçš„æ˜¯ï¼Œæˆ‘æƒ³ä»¥ä¸€äº›å…³äº class ç»„ä»¶çš„æœ‰è¶£æ•…äº‹æ¥å¼€å§‹è¿™ä¸ªåšå®¢ã€‚æ€æ ·ï¼ï¼ˆçš®ä¸€ä¸‹å¾ˆå¼€å¿ƒï¼‰</p><p>è¿™äº›å°å‘å¹¶ä¸ä¼šå½±å“ä½ é«˜æ•ˆçš„ä½¿ç”¨ Reactï¼Œä½†å¦‚æœä½ æ„¿æ„æ·±å…¥äº†è§£ä¸‹èƒŒåçš„å·¥ä½œåŸç†ï¼Œä½ ä¼šå‘ç°å®ƒä»¬éå¸¸æœ‰æ„æ€ã€‚</p><p>è¿™æ˜¯ç¬¬ä¸€ä¸ªã€‚</p><hr/><p>æˆ‘è¿™è¾ˆå­å†™è¿‡çš„ <code>super(props)</code> æ¯”æˆ‘æƒ³è±¡çš„è¦å¤šå¾—å¤š</p><div class=\"highlight\"><pre><code class=\"language-text\">class Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOn: true };\n  }\n  // ...\n}</code></pre></div><p>å½“ç„¶ï¼Œ<a href=\"https://link.zhihu.com/?target=https%3A//github.com/tc39/proposal-class-fields\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">class fields proposal</a> å…è®¸æˆ‘ä»¬è·³è¿‡è¿™ä¸ªä»ªå¼ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">class Checkbox extends React.Component {\n  state = { isOn: true };\n  // ...\n}</code></pre></div><p>è¿™æ ·çš„è¯­æ³•æ˜¯åœ¨ 2015 å¹´ React 0.13 å¢åŠ å¯¹çº¯ Class çš„æ”¯æŒçš„æ—¶å€™åŠ å…¥ <a href=\"https://link.zhihu.com/?target=https%3A//reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html%23es7-property-initializers\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">è®¡åˆ’</a> çš„. å®šä¹‰ <code>constructor</code> å’Œè°ƒç”¨ <code>super(props)</code> ä¸€ç›´éƒ½åªæ˜¯ class fiels å‡ºç°ä¹‹å‰çš„ä¸´æ—¶è§£å†³æ–¹æ¡ˆã€‚</p><p>ç„¶è€Œï¼Œè®©æˆ‘ä»¬åªç”¨ ES2015 çš„ç‰¹æ€§æ¥å›é¡¾ä¸€ä¸‹è¿™ä¸ªä¾‹å­ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">class Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOn: true };\n  }\n  // ...\n}</code></pre></div><p><b>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è°ƒç”¨<code>super</code>ï¼Ÿèƒ½ä¸èƒ½ä¸è°ƒç”¨å®ƒï¼Ÿå¦‚æœéè¦è°ƒç”¨ï¼Œå¦‚æœä¸ä¼ </b> <b><code>props</code></b> <b>ä¼šæ€æ ·ï¼Ÿè¿˜æœ‰å…¶å®ƒå‚æ•°å—ï¼Ÿ</b>è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚</p><p>åœ¨ JavaScript ä¸­ï¼Œ<code>super</code> æŒ‡ä»£çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚ï¼ˆåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œå®ƒæŒ‡å‘ <code>React.Component</code> è¿™ä¸ªå®ç°ï¼‰</p><p>é‡ç‚¹åœ¨äºï¼Œåœ¨ä½ è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¹‹å‰ï¼Œä½ æ— æ³•åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨ <code>this</code>ã€‚JavaScript ä¸ä¼šå…è®¸ä½ è¿™ä¹ˆåšã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">class Checkbox extends React.Component {\n  constructor(props) {\n    // ğŸ”´ è¿™æ—¶å€™è¿˜ä¸èƒ½ä½¿ç”¨ `this`\n    super(props);\n    // âœ… ç°åœ¨å¼€å§‹å¯ä»¥äº†\n    this.state = { isOn: true };\n  }\n  // ...\n}</code></pre></div><p>JavaScript å¼ºåˆ¶ä½ åœ¨ä½¿ç”¨ <code>this</code> å‰è¿è¡Œçˆ¶ç±»æ„é€ å‡½æ•°æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç†ç”±ã€‚è€ƒè™‘è¿™æ ·ä¸€ä¸ªç±»ç»“æ„ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">class Person {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nclass PolitePerson extends Person {\n  constructor(name) {\n    this.greetColleagues(); // ğŸ”´ è¿™æ˜¯ä¸å…è®¸çš„ï¼Œä¸‹é¢ä¼šè§£é‡ŠåŸå› \n    super(name);\n  }\n  greetColleagues() {\n    alert(&#39;Good morning folks!&#39;);\n  }\n}</code></pre></div><p>æƒ³è±¡ä¸€ä¸‹å¦‚æœåœ¨è°ƒç”¨ <code>super</code> å‰ä½¿ç”¨ <code>this</code> æ˜¯è¢«å…è®¸çš„ã€‚ä¸€ä¸ªæœˆä¹‹åã€‚æˆ‘ä»¬æˆ–è®¸ä¼šæ”¹å˜ <code>greetColleagues</code> æŠŠ person çš„ name åŠ åˆ°æ¶ˆæ¯ä¸­ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">greetColleagues() {\n  alert(&#39;Good morning folks!&#39;);\n  alert(&#39;My name is &#39; + this.name + &#39;, nice to meet you!&#39;);\n}</code></pre></div><p>ä½†æˆ‘ä»¬å¿˜äº† <code>this.greetColleagues()</code> æ˜¯åœ¨ <code>super()</code> æœ‰æœºä¼šè®¾ç½® <code>this.name</code> ä¹‹å‰è¢«è°ƒç”¨çš„ã€‚<code>this.name</code> ç”šè‡³è¿˜æ²¡è¢«å®šä¹‰ï¼å¦‚ä½ æ‰€è§ï¼Œåƒè¿™æ ·çš„ä»£ç ç†è§£èµ·æ¥ä¼šå¾ˆå›°éš¾ã€‚</p><p>ä¸ºäº†é¿å…è¿™æ ·çš„é™·é˜±ï¼Œ<b>JavaScript å¼ºåˆ¶è§„å®šï¼Œå¦‚æœä½ æƒ³åœ¨æ„é€ å‡½æ•°ä¸­åªç”¨<code>this</code>ï¼Œå°±å¿…é¡»å…ˆè°ƒç”¨</b> <b><code>super</code></b>ã€‚è®©çˆ¶ç±»åšå®ƒè¯¥åšçš„äº‹ï¼è¿™ä¸€é™åˆ¶ä¹Ÿé€‚ç”¨äºå®šä¹‰æˆç±»çš„ React ç»„ä»¶ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">constructor(props) {\n  super(props);\n  // âœ… ç°åœ¨å¯ä»¥ä½¿ç”¨ `this` äº†\n  this.state = { isOn: true };\n}</code></pre></div><p>è¿™ç»™æˆ‘ä»¬ç•™ä¸‹äº†å¦ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦ä¼  <code>props</code>ï¼Ÿ</p><hr/><p>ä½ æˆ–è®¸è§‰å¾—æŠŠ <code>props</code> ä¼ è¿› <code>super</code> æ˜¯å¿…è¦çš„ï¼Œè¿™ä½¿å¾—åŸºç±» <code>React.Component</code> å¯ä»¥åˆå§‹åŒ– <code>this.props</code>ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// React å†…éƒ¨\nclass Component {\n  constructor(props) {\n    this.props = props;\n    // ...\n  }\n}</code></pre></div><p>å¾ˆæ¥è¿‘äº†â€”â€”äº‹å®ä¸Šï¼Œ<a href=\"https://link.zhihu.com/?target=https%3A//github.com/facebook/react/blob/1d25aa5787d4e19704c049c3cfa985d3b5190e0d/packages/react/src/ReactBaseClasses.js%23L22\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">å®ƒå°±æ˜¯è¿™ä¹ˆåšçš„</a>ã€‚</p><p>ç„¶è€Œï¼Œå³ä¾¿åœ¨è°ƒç”¨ <code>super()</code> æ—¶æ²¡æœ‰ä¼ å…¥ <code>props</code> å‚æ•°ï¼Œä½ ä¾ç„¶èƒ½å¤Ÿåœ¨ <code>render</code> å’Œå…¶å®ƒæ–¹æ³•ä¸­è®¿é—® <code>this.props</code>ã€‚ï¼ˆä½ è¦æ˜¯ä¸ç›¸ä¿¡æˆ‘ï¼Œå¯ä»¥è‡ªå·±è¯•ä¸€è¯•ï¼‰</p><p>è¿™æ˜¯ä»€ä¹ˆåŸç†ï¼Ÿå…¶å® <b>React åœ¨è°ƒç”¨ä½ çš„æ„é€ å‡½æ•°ä¹‹åï¼Œé©¬ä¸Šåˆç»™å®ä¾‹è®¾ç½®äº†ä¸€é</b> <b><code>props</code></b>ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">// React å†…éƒ¨\nconst instance = new YourComponent(props);\ninstance.props = props;</code></pre></div><p>å› æ­¤ï¼Œå³ä¾¿ä½ å¿˜äº†æŠŠ <code>props</code> ä¼ å…¥ <code>super()</code>ï¼ŒReact ä¾ç„¶ä¼šåœ¨äº‹åè®¾ç½®å®ƒä»¬ã€‚è¿™æ˜¯æœ‰ç†ç”±çš„ã€‚</p><p>å½“ React æ·»åŠ å¯¹ Class çš„æ”¯æŒæ—¶ï¼Œå®ƒå¹¶ä¸æ˜¯åªæ·»åŠ äº†å¯¹ ES6 çš„æ”¯æŒï¼Œè€Œæ˜¯å¸Œæœ›èƒ½å¤Ÿæ”¯æŒå°½å¯èƒ½å¹¿æ³›çš„ class æŠ½è±¡ã€‚ç”±äº<a href=\"https://link.zhihu.com/?target=https%3A//reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html%23other-languages\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ä¸æ˜¯å¾ˆç¡®å®š</a> ClojureScriptã€CoffeeScriptã€ES6ã€Fableã€Scala.jsã€TypeScript æˆ–å…¶ä»–è§£å†³æ–¹æ¡ˆè°æ›´é€‚åˆç”¨æ¥å®šä¹‰ç»„ä»¶ï¼ŒReact å¯¹äºæ˜¯å¦æœ‰å¿…è¦è°ƒç”¨ <code>super()</code> åˆ»æ„ä¸è¡¨æ€ã€‚</p><p>é‚£ä¹ˆè¿™æ˜¯å¦æ„å‘³ç€ä½ å¯ä»¥åªå†™ <code>super()</code> è€Œä¸ç”¨ <code>super(props)</code>ï¼Ÿ</p><p><b>æˆ–è®¸å¹¶éå¦‚æ­¤ï¼Œå› ä¸ºè¿™ä¾ç„¶è®©äººå›°æ‰°</b>ã€‚è¯šç„¶ï¼ŒReact ä¼šåœ¨ä½ çš„æ„é€ å‡½æ•°è¿è¡Œä¹‹åè®¾ç½® <code>this.props</code>ã€‚ä½†åœ¨ <code>super</code> è°ƒç”¨ä¸€ç›´åˆ°æ„é€ å‡½æ•°ç»“æŸä¹‹å‰ï¼Œ<code>this.props</code> ä¾ç„¶æ˜¯æœªå®šä¹‰çš„ã€‚</p><div class=\"highlight\"><pre><code class=\"language-text\">// React å†…éƒ¨\nclass Component {\n  constructor(props) {\n    this.props = props;\n    // ...\n  }\n}\n\n// ä½ çš„ä»£ç \nclass Button extends React.Component {\n  constructor(props) {\n    super(); // ğŸ˜¬ æˆ‘ä»¬å¿˜äº†ä¼ å…¥ props\n    console.log(props);      // âœ… {}\n    console.log(this.props); // ğŸ˜¬ undefined \n  }\n  // ...\n}</code></pre></div><p>å¦‚æœè¿™å‘ç”Ÿåœ¨æŸäº›ä»æ„é€ å‡½æ•°ä¸­è°ƒç”¨çš„å‡½æ•°ï¼Œè°ƒè¯•èµ·æ¥ä¼šæ›´åŠ éº»çƒ¦ã€‚<b>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘æ¨èæ€»æ˜¯ä½¿ç”¨</b> <b><code>super(props)</code></b> <b>çš„å†™æ³•ï¼Œå³ä¾¿è¿™æ˜¯éå¿…è¦çš„</b>ï¼š</p><div class=\"highlight\"><pre><code class=\"language-text\">class Button extends React.Component {\n  constructor(props) {\n    super(props); // âœ… æˆ‘ä»¬ä¼ äº† props\n    console.log(props);      // âœ… {}\n    console.log(this.props); // âœ… {}\n  }\n  // ...\n}</code></pre></div><p>è¿™æ ·çš„å†™æ³•ç¡®ä¿äº† <code>this.props</code>å³ä¾¿åœ¨æ„é€ å‡½æ•°è¿”å›ä¹‹å‰å°±è¢«è®¾ç½®å¥½äº†ã€‚</p><hr/><p>æœ€åè¿˜æœ‰ä¸€ç‚¹æ˜¯ React çš„é•¿æœŸç”¨æˆ·æˆ–è®¸ä¼šå¥½å¥‡çš„ã€‚</p><p>ä½ æˆ–è®¸å·²ç»æ³¨æ„åˆ°ï¼Œå½“ä½ åœ¨ Class ä¸­ä½¿ç”¨ Context API æ—¶ï¼ˆæ— è®ºæ˜¯æ—§ç‰ˆçš„è¯­æ³•è¿˜æ˜¯ React 16.6 ä¸­æ–°å¢çš„ç°ä»£åŒ–è¯­æ³•ï¼‰ï¼Œcontext æ˜¯è¢«ä½œä¸ºæ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥çš„ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸å†™ <code>super(props, context)</code> å‘¢ï¼Ÿå½“ç„¶æˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼Œä½† context çš„ä½¿ç”¨é¢‘ç‡æ²¡é‚£ä¹ˆé«˜ï¼Œæ‰€ä»¥è¿™ä¸ªé™·é˜±å½±å“è¿˜æ²¡é‚£ä¹ˆå¤§ã€‚</p><p><b>ä¼´éšç€ class fields proposal çš„å‘å¸ƒï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå°±ä¸å¤å­˜åœ¨äº†ã€‚</b>å³ä¾¿ä¸æ˜¾å¼è°ƒç”¨æ„é€ å‡½æ•°ï¼Œæ‰€æœ‰å‚æ•°ä¹Ÿä¼šè‡ªåŠ¨ä¼ å…¥ã€‚è¿™å°±å…è®¸åƒ <code>state = {}</code> è¿™æ ·çš„è¡¨è¾¾å¼åœ¨å¿…è¦æ—¶å¯ä»¥ç›´æ¥å¼•ç”¨ <code>this.props.</code> æˆ– <code>this.context</code>ã€‚</p><p>åœ¨ Hooks ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³éƒ½æ²¡æœ‰ <code>super</code> æˆ– <code>this</code>ã€‚è¿™ä¸ªè¯é¢˜æˆ‘ä»¬æ‹©æ—¥å†è¯´ã€‚</p>", 
            "topic": [
                {
                    "tag": "React", 
                    "tagLink": "https://api.zhihu.com/topics/20013159"
                }, 
                {
                    "tag": "å‰ç«¯å¼€å‘", 
                    "tagLink": "https://api.zhihu.com/topics/19550901"
                }
            ], 
            "comments": []
        }
    ], 
    "url": "https://zhuanlan.zhihu.com/tonghuashuo"
}
