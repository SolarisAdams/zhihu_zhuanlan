{
    "title": "TCP/IP技术笔记", 
    "description": "很抱歉，作者很懒没有添加任何专栏介绍", 
    "followers": [
        "https://www.zhihu.com/people/jiang-yao-20-54-78", 
        "https://www.zhihu.com/people/ren-wen-bin-9", 
        "https://www.zhihu.com/people/programmer_song", 
        "https://www.zhihu.com/people/zhang-19-86-75", 
        "https://www.zhihu.com/people/yoha-ha", 
        "https://www.zhihu.com/people/mimihong", 
        "https://www.zhihu.com/people/ji-ban-li", 
        "https://www.zhihu.com/people/madaozhizhan", 
        "https://www.zhihu.com/people/zheng-dao-64-91", 
        "https://www.zhihu.com/people/xi-mo-51-79", 
        "https://www.zhihu.com/people/123-21-60-23", 
        "https://www.zhihu.com/people/cao-xin-58-59", 
        "https://www.zhihu.com/people/ren-huan-70-27", 
        "https://www.zhihu.com/people/wo-you-yi-hu-jiu-11", 
        "https://www.zhihu.com/people/bai-yun-xiu-shui-zhi", 
        "https://www.zhihu.com/people/change-73-80", 
        "https://www.zhihu.com/people/yi-ya-12-99-1", 
        "https://www.zhihu.com/people/huang-hai-lan-yu", 
        "https://www.zhihu.com/people/SuperHans", 
        "https://www.zhihu.com/people/dai-zong-93", 
        "https://www.zhihu.com/people/man-man-zheng-tu-44", 
        "https://www.zhihu.com/people/tzhfrank", 
        "https://www.zhihu.com/people/13652402190", 
        "https://www.zhihu.com/people/shun-wang-41", 
        "https://www.zhihu.com/people/imagine2017", 
        "https://www.zhihu.com/people/zhang-ling-shan-32", 
        "https://www.zhihu.com/people/bwq-6", 
        "https://www.zhihu.com/people/ken-96-25", 
        "https://www.zhihu.com/people/yang-rui-xuan-76", 
        "https://www.zhihu.com/people/cheng-guang-98-56", 
        "https://www.zhihu.com/people/thanatus-11", 
        "https://www.zhihu.com/people/huo-huo-199711", 
        "https://www.zhihu.com/people/qi-yu-zhu-84-96", 
        "https://www.zhihu.com/people/sha-po-lang-44-54", 
        "https://www.zhihu.com/people/bi-hai-chao-sheng-6-98", 
        "https://www.zhihu.com/people/ceng-wen-tao-2", 
        "https://www.zhihu.com/people/ji-zhi-shao-nian-14", 
        "https://www.zhihu.com/people/lightman-53", 
        "https://www.zhihu.com/people/wu-hu-tai-he-zhi", 
        "https://www.zhihu.com/people/zhang-hong-zu", 
        "https://www.zhihu.com/people/chenhanzhang", 
        "https://www.zhihu.com/people/mervin", 
        "https://www.zhihu.com/people/orrinal", 
        "https://www.zhihu.com/people/jixie-56", 
        "https://www.zhihu.com/people/ba-bao-jing-tian-47", 
        "https://www.zhihu.com/people/errorgrammer", 
        "https://www.zhihu.com/people/fa-kuan-mao", 
        "https://www.zhihu.com/people/___-hui-11", 
        "https://www.zhihu.com/people/hxctian-tian-xiang-shang", 
        "https://www.zhihu.com/people/lei-la-er-duo", 
        "https://www.zhihu.com/people/sheng-sheng-man-10-85", 
        "https://www.zhihu.com/people/ken-51-92", 
        "https://www.zhihu.com/people/a-yang-15-75", 
        "https://www.zhihu.com/people/xu-qing-he-24", 
        "https://www.zhihu.com/people/wxy-44-79-27", 
        "https://www.zhihu.com/people/ai-chi-rou-de-xia-mo", 
        "https://www.zhihu.com/people/qiang-wei-fei-guo", 
        "https://www.zhihu.com/people/zhang-jia-wang-38-94", 
        "https://www.zhihu.com/people/li-yuan-yuan-42-33", 
        "https://www.zhihu.com/people/niubilityjiang", 
        "https://www.zhihu.com/people/ai-chi-cheng-zi-de-tu-zi-45-36", 
        "https://www.zhihu.com/people/wang-hai-long-46-99", 
        "https://www.zhihu.com/people/luo-hong-liang-63", 
        "https://www.zhihu.com/people/denishu", 
        "https://www.zhihu.com/people/qian-hang-jian", 
        "https://www.zhihu.com/people/zhang-xuan-66-45", 
        "https://www.zhihu.com/people/li-yong-6-14", 
        "https://www.zhihu.com/people/dong-ci-gu-zhi-hou-de-chun-fan-hua", 
        "https://www.zhihu.com/people/xu-xiao-sheng-18", 
        "https://www.zhihu.com/people/ggg-35-86", 
        "https://www.zhihu.com/people/gan-liang-25-67", 
        "https://www.zhihu.com/people/innocence-37-40", 
        "https://www.zhihu.com/people/shi-guang-mo-yi-53", 
        "https://www.zhihu.com/people/xiao-zcawdy", 
        "https://www.zhihu.com/people/zheng-huan-rong", 
        "https://www.zhihu.com/people/zhang-di-6-99", 
        "https://www.zhihu.com/people/hobart-75-67", 
        "https://www.zhihu.com/people/littlefat", 
        "https://www.zhihu.com/people/GhibliTony", 
        "https://www.zhihu.com/people/hui-ming-xing-68", 
        "https://www.zhihu.com/people/wesley-d-lee", 
        "https://www.zhihu.com/people/zhang-hai-jun-18-27", 
        "https://www.zhihu.com/people/a-si-bo-ge-zong-he-zheng-14", 
        "https://www.zhihu.com/people/qi-che-gong-cheng-shi-17-84", 
        "https://www.zhihu.com/people/fong-34-17", 
        "https://www.zhihu.com/people/liu-yu-46-59", 
        "https://www.zhihu.com/people/wu-ban-tu-de-xiao-mao-lu", 
        "https://www.zhihu.com/people/kensuke-hinata", 
        "https://www.zhihu.com/people/gfy-60", 
        "https://www.zhihu.com/people/wu-shi-en-9", 
        "https://www.zhihu.com/people/peng-xue-cai", 
        "https://www.zhihu.com/people/xiao-qiang-luo-fu-si-ji-46", 
        "https://www.zhihu.com/people/koci-jia-27", 
        "https://www.zhihu.com/people/aigong", 
        "https://www.zhihu.com/people/ren-tao-28-36", 
        "https://www.zhihu.com/people/hua-78-73", 
        "https://www.zhihu.com/people/kissweb", 
        "https://www.zhihu.com/people/xie-zi-67-4", 
        "https://www.zhihu.com/people/wang-le-ni-30", 
        "https://www.zhihu.com/people/LiuZhiHu0313", 
        "https://www.zhihu.com/people/songroom", 
        "https://www.zhihu.com/people/susi369", 
        "https://www.zhihu.com/people/sundakang", 
        "https://www.zhihu.com/people/ye-ban-2-10", 
        "https://www.zhihu.com/people/lumia-a", 
        "https://www.zhihu.com/people/lizong-82-20", 
        "https://www.zhihu.com/people/youmindang", 
        "https://www.zhihu.com/people/zhang-kun-21-52", 
        "https://www.zhihu.com/people/lsyyyan", 
        "https://www.zhihu.com/people/shuai-yan-20-4", 
        "https://www.zhihu.com/people/coolder-42", 
        "https://www.zhihu.com/people/liu-shen-ming", 
        "https://www.zhihu.com/people/xiao-ma-gua-21", 
        "https://www.zhihu.com/people/li-guo-lin-81-19", 
        "https://www.zhihu.com/people/gao-yu-long-5", 
        "https://www.zhihu.com/people/zhao-fei-45-6", 
        "https://www.zhihu.com/people/vince_wu", 
        "https://www.zhihu.com/people/liu-yu-guang-28-98", 
        "https://www.zhihu.com/people/oim-15", 
        "https://www.zhihu.com/people/guo-xiao-cheng-10-64", 
        "https://www.zhihu.com/people/xoxo-22-39", 
        "https://www.zhihu.com/people/shou-wang-80-40", 
        "https://www.zhihu.com/people/sxsjt", 
        "https://www.zhihu.com/people/fan-qing-4-49", 
        "https://www.zhihu.com/people/fredshi", 
        "https://www.zhihu.com/people/zhe-ge-hao-wan-ma-84", 
        "https://www.zhihu.com/people/li-dong-57-21", 
        "https://www.zhihu.com/people/han-kang-81", 
        "https://www.zhihu.com/people/zhang-he-9-12", 
        "https://www.zhihu.com/people/qianrui53", 
        "https://www.zhihu.com/people/yao-wen-jie-80", 
        "https://www.zhihu.com/people/chen-lin-50-63-27", 
        "https://www.zhihu.com/people/dai-li-72-46", 
        "https://www.zhihu.com/people/lan-yi-44-28", 
        "https://www.zhihu.com/people/dopamine-80", 
        "https://www.zhihu.com/people/strrx", 
        "https://www.zhihu.com/people/zhang-meng-25-5", 
        "https://www.zhihu.com/people/li-zexian-62", 
        "https://www.zhihu.com/people/ge-biao-1021", 
        "https://www.zhihu.com/people/po-wang-69", 
        "https://www.zhihu.com/people/shuimqcn", 
        "https://www.zhihu.com/people/tu-dou-34-84", 
        "https://www.zhihu.com/people/xing-bei-bei-44-42", 
        "https://www.zhihu.com/people/zhu-jun-98-96", 
        "https://www.zhihu.com/people/zhao-guang-65", 
        "https://www.zhihu.com/people/hua-hua-zhu-53", 
        "https://www.zhihu.com/people/cyn-24-73", 
        "https://www.zhihu.com/people/iliuyao", 
        "https://www.zhihu.com/people/rfyiamcool", 
        "https://www.zhihu.com/people/li-xiao-bin-27", 
        "https://www.zhihu.com/people/fcgo", 
        "https://www.zhihu.com/people/zi-wu-yi-25", 
        "https://www.zhihu.com/people/yun-dong-nei-yi", 
        "https://www.zhihu.com/people/wen-xu-yang-28", 
        "https://www.zhihu.com/people/jyrunner", 
        "https://www.zhihu.com/people/yang-guang-xia-de-zi-ying", 
        "https://www.zhihu.com/people/wadeng-0080", 
        "https://www.zhihu.com/people/ju-rui-31", 
        "https://www.zhihu.com/people/cheng-tian-you-90-1", 
        "https://www.zhihu.com/people/xia-tian-1-91-85", 
        "https://www.zhihu.com/people/wang-jian-an-88-97", 
        "https://www.zhihu.com/people/AndLeev", 
        "https://www.zhihu.com/people/ewall-46", 
        "https://www.zhihu.com/people/huang-yong-chuan", 
        "https://www.zhihu.com/people/kirahsosha", 
        "https://www.zhihu.com/people/han-chang-wei", 
        "https://www.zhihu.com/people/geeksammao", 
        "https://www.zhihu.com/people/chen-yue-54", 
        "https://www.zhihu.com/people/han-xiao-23-25", 
        "https://www.zhihu.com/people/HS_0916", 
        "https://www.zhihu.com/people/frank-47-93-17", 
        "https://www.zhihu.com/people/yang-yuan-18-45", 
        "https://www.zhihu.com/people/zhao-meng-long-17", 
        "https://www.zhihu.com/people/wang-peng-yu-93-28", 
        "https://www.zhihu.com/people/veeking-lin", 
        "https://www.zhihu.com/people/zealoussnow", 
        "https://www.zhihu.com/people/feng-se-39", 
        "https://www.zhihu.com/people/jiang-xiao-an-5", 
        "https://www.zhihu.com/people/bao-xiao-yi-14", 
        "https://www.zhihu.com/people/andy-11-11-23", 
        "https://www.zhihu.com/people/xu-shi-pei-79", 
        "https://www.zhihu.com/people/xi-xi-94-24-98", 
        "https://www.zhihu.com/people/defgao", 
        "https://www.zhihu.com/people/liu-yi-chao-24-11", 
        "https://www.zhihu.com/people/ceng-qing-lan", 
        "https://www.zhihu.com/people/huan-gan-bu-gan", 
        "https://www.zhihu.com/people/nagra-king", 
        "https://www.zhihu.com/people/li-yi-hui-55-78", 
        "https://www.zhihu.com/people/chen-hao-ming-41", 
        "https://www.zhihu.com/people/xin-sheng-12-36", 
        "https://www.zhihu.com/people/xiazhinidemeng", 
        "https://www.zhihu.com/people/fengbeihong", 
        "https://www.zhihu.com/people/cjj-super", 
        "https://www.zhihu.com/people/ren-sheng-lu-tu-56-85", 
        "https://www.zhihu.com/people/jsong-4", 
        "https://www.zhihu.com/people/fancrif", 
        "https://www.zhihu.com/people/littletiger-25", 
        "https://www.zhihu.com/people/bachelor-89", 
        "https://www.zhihu.com/people/jun-52-13", 
        "https://www.zhihu.com/people/gu-gu-55-25", 
        "https://www.zhihu.com/people/li-long-47-29", 
        "https://www.zhihu.com/people/phdchao-39", 
        "https://www.zhihu.com/people/t9007", 
        "https://www.zhihu.com/people/qian-mi-98", 
        "https://www.zhihu.com/people/gong-sun-xuan-yuan-2601", 
        "https://www.zhihu.com/people/shu-sheng-90-66", 
        "https://www.zhihu.com/people/cao-animalsi-qing-shou", 
        "https://www.zhihu.com/people/ying-sui-feng-25-21", 
        "https://www.zhihu.com/people/bcmy", 
        "https://www.zhihu.com/people/xu-ling-yun-30-18", 
        "https://www.zhihu.com/people/yang-yu-hao-6-69", 
        "https://www.zhihu.com/people/shit-yang", 
        "https://www.zhihu.com/people/jb-xing", 
        "https://www.zhihu.com/people/lu-bai-10", 
        "https://www.zhihu.com/people/hou-mao-lin-98", 
        "https://www.zhihu.com/people/tu-ni-si-ruan-zi-shi-liu", 
        "https://www.zhihu.com/people/cai-sha-sha-84-21", 
        "https://www.zhihu.com/people/taiyij-jiang", 
        "https://www.zhihu.com/people/suncar110", 
        "https://www.zhihu.com/people/su-yin-ping-99", 
        "https://www.zhihu.com/people/gu-du-de-hua-feng", 
        "https://www.zhihu.com/people/javiero", 
        "https://www.zhihu.com/people/Sun.Ting", 
        "https://www.zhihu.com/people/min-min-63-46", 
        "https://www.zhihu.com/people/yang-fan-15-34", 
        "https://www.zhihu.com/people/an-jing-de-54", 
        "https://www.zhihu.com/people/lai-quan-long", 
        "https://www.zhihu.com/people/sai-tchxi", 
        "https://www.zhihu.com/people/nay-said", 
        "https://www.zhihu.com/people/lisume-i", 
        "https://www.zhihu.com/people/18883944426", 
        "https://www.zhihu.com/people/yu-jiang-92-52", 
        "https://www.zhihu.com/people/cai-jun-85-35", 
        "https://www.zhihu.com/people/davy-thomas", 
        "https://www.zhihu.com/people/qia-la-37-94", 
        "https://www.zhihu.com/people/chris314", 
        "https://www.zhihu.com/people/xiejunlong", 
        "https://www.zhihu.com/people/rockyao-gun-wu-mo-ri", 
        "https://www.zhihu.com/people/chen-sha-nian-sui-liao-shui-de-si-nian", 
        "https://www.zhihu.com/people/wo-yao-jian-fei-99", 
        "https://www.zhihu.com/people/kong-shan-niao-yu-58", 
        "https://www.zhihu.com/people/choujiazi5724", 
        "https://www.zhihu.com/people/lin-hao-cheng", 
        "https://www.zhihu.com/people/shui-de-qing-chun-bu-yan-qing", 
        "https://www.zhihu.com/people/feng-ji-63", 
        "https://www.zhihu.com/people/liu-cong-1-14", 
        "https://www.zhihu.com/people/hzdmm123_remain", 
        "https://www.zhihu.com/people/gyf-98", 
        "https://www.zhihu.com/people/leviathan-66-76", 
        "https://www.zhihu.com/people/pokerface-21-17", 
        "https://www.zhihu.com/people/bai-xiao-bai-56-10", 
        "https://www.zhihu.com/people/jjww-71-58", 
        "https://www.zhihu.com/people/lao-si-ji-yi-kai-che", 
        "https://www.zhihu.com/people/sly-78-16", 
        "https://www.zhihu.com/people/li-yun-liang-72", 
        "https://www.zhihu.com/people/yang-zi-38-99-90", 
        "https://www.zhihu.com/people/xin-ling-jun-20", 
        "https://www.zhihu.com/people/xiaoyu1327", 
        "https://www.zhihu.com/people/mars170cm", 
        "https://www.zhihu.com/people/hmsien-14", 
        "https://www.zhihu.com/people/louis-42-52", 
        "https://www.zhihu.com/people/yin-zi-mao-25", 
        "https://www.zhihu.com/people/li-tao-88-33", 
        "https://www.zhihu.com/people/someone-36-88", 
        "https://www.zhihu.com/people/fen-dou-de-xiao-niao-52", 
        "https://www.zhihu.com/people/oakenshield-72", 
        "https://www.zhihu.com/people/xu-yin-da-58", 
        "https://www.zhihu.com/people/li-fei-yu-65", 
        "https://www.zhihu.com/people/lfl-64", 
        "https://www.zhihu.com/people/chen-bo-77-78-8", 
        "https://www.zhihu.com/people/mu-zhi-yu", 
        "https://www.zhihu.com/people/eyeglasses", 
        "https://www.zhihu.com/people/shi-shi-yu-91", 
        "https://www.zhihu.com/people/yun-xin-2-38", 
        "https://www.zhihu.com/people/szcccc-49", 
        "https://www.zhihu.com/people/liu-hong-meng-46", 
        "https://www.zhihu.com/people/xing_xingxing", 
        "https://www.zhihu.com/people/shiyue_L", 
        "https://www.zhihu.com/people/wang-luo-gong-ren-13", 
        "https://www.zhihu.com/people/liang-zan-55", 
        "https://www.zhihu.com/people/xin-kong-59", 
        "https://www.zhihu.com/people/shou-tou-tuo-98", 
        "https://www.zhihu.com/people/leide-99", 
        "https://www.zhihu.com/people/aguaithefreak"
    ], 
    "article": [
        {
            "url": "https://zhuanlan.zhihu.com/p/41173338", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "OSPF-构建LSDB", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、OSPF数据包</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.1 数据包类型</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-53ea22915700998e5f084235782771e6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1373\" data-rawheight=\"283\" class=\"origin_image zh-lightbox-thumb\" width=\"1373\" data-original=\"https://pic3.zhimg.com/v2-53ea22915700998e5f084235782771e6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1373&#39; height=&#39;283&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1373\" data-rawheight=\"283\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1373\" data-original=\"https://pic3.zhimg.com/v2-53ea22915700998e5f084235782771e6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-53ea22915700998e5f084235782771e6_b.jpg\"/></figure><p><b>1.2 数据包头部</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-0bf6256a0d328f127c11227334df0530_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1218\" data-rawheight=\"537\" class=\"origin_image zh-lightbox-thumb\" width=\"1218\" data-original=\"https://pic1.zhimg.com/v2-0bf6256a0d328f127c11227334df0530_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1218&#39; height=&#39;537&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1218\" data-rawheight=\"537\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1218\" data-original=\"https://pic1.zhimg.com/v2-0bf6256a0d328f127c11227334df0530_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-0bf6256a0d328f127c11227334df0530_b.jpg\"/></figure><p><b>Autype = 0 不认证 = 1 明文 = 2 密文</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4443464c6041840a8e33e452b2050cf0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1233\" data-rawheight=\"249\" class=\"origin_image zh-lightbox-thumb\" width=\"1233\" data-original=\"https://pic1.zhimg.com/v2-4443464c6041840a8e33e452b2050cf0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1233&#39; height=&#39;249&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1233\" data-rawheight=\"249\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1233\" data-original=\"https://pic1.zhimg.com/v2-4443464c6041840a8e33e452b2050cf0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4443464c6041840a8e33e452b2050cf0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.3 LSA格式</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-7319f256e53e13d342b2989288bc6602_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1241\" data-rawheight=\"314\" class=\"origin_image zh-lightbox-thumb\" width=\"1241\" data-original=\"https://pic3.zhimg.com/v2-7319f256e53e13d342b2989288bc6602_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1241&#39; height=&#39;314&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1241\" data-rawheight=\"314\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1241\" data-original=\"https://pic3.zhimg.com/v2-7319f256e53e13d342b2989288bc6602_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-7319f256e53e13d342b2989288bc6602_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Router - LSA</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-ab1acbb1cc363ad16bafa2889c299762_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1329\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb\" width=\"1329\" data-original=\"https://pic3.zhimg.com/v2-ab1acbb1cc363ad16bafa2889c299762_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1329&#39; height=&#39;640&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1329\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1329\" data-original=\"https://pic3.zhimg.com/v2-ab1acbb1cc363ad16bafa2889c299762_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-ab1acbb1cc363ad16bafa2889c299762_b.jpg\"/></figure><p>LinkstateID：始发路由器的router-id</p><p>V位 ：置1说明始发路由器是虚链路的一个端点（传送区域）</p><p>E位 ：置1说明该路由器是ASBR</p><p>B位 ：置1说明该路由器是ABR</p><p>LinkID、Link Date如下分布：\t</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1426\" data-rawheight=\"325\" class=\"origin_image zh-lightbox-thumb\" width=\"1426\" data-original=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1426&#39; height=&#39;325&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1426\" data-rawheight=\"325\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1426\" data-original=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_b.jpg\"/></figure><p>TOS号 ：略</p><p>Metric :度量值</p><p>TOS ：略</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Network - LSA</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-2f3e36e37c014f19ec2a8cc8eeb0422b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1157\" data-rawheight=\"485\" class=\"origin_image zh-lightbox-thumb\" width=\"1157\" data-original=\"https://pic4.zhimg.com/v2-2f3e36e37c014f19ec2a8cc8eeb0422b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1157&#39; height=&#39;485&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1157\" data-rawheight=\"485\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1157\" data-original=\"https://pic4.zhimg.com/v2-2f3e36e37c014f19ec2a8cc8eeb0422b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-2f3e36e37c014f19ec2a8cc8eeb0422b_b.jpg\"/></figure><p>链路状态ID ：DR路由器接口上IP地址</p><p>（二类LSA不携带metric值）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Network summary LSA ， ASBR summary LSA</b></p><p>两者拥有相同的格式，唯一的不同之处是它们所指的类型和链路状态ID</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-4e19e41e7bd5e90703e09a8dc4e19e7b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1270\" data-rawheight=\"493\" class=\"origin_image zh-lightbox-thumb\" width=\"1270\" data-original=\"https://pic4.zhimg.com/v2-4e19e41e7bd5e90703e09a8dc4e19e7b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1270&#39; height=&#39;493&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1270\" data-rawheight=\"493\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1270\" data-original=\"https://pic4.zhimg.com/v2-4e19e41e7bd5e90703e09a8dc4e19e7b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-4e19e41e7bd5e90703e09a8dc4e19e7b_b.jpg\"/></figure><p>链路状态 ID：</p><p>对于类型3的LSA来说，它是通告的<b>网络或子网</b>的IP地址</p><p>对于类型4的LSA来说，LSID是所通告的ASBR路由器的路由器ID</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>自制系统外LSA</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-060d88869ab58a363aa5f3824b126a32_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1093\" data-rawheight=\"513\" class=\"origin_image zh-lightbox-thumb\" width=\"1093\" data-original=\"https://pic3.zhimg.com/v2-060d88869ab58a363aa5f3824b126a32_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1093&#39; height=&#39;513&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1093\" data-rawheight=\"513\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1093\" data-original=\"https://pic3.zhimg.com/v2-060d88869ab58a363aa5f3824b126a32_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-060d88869ab58a363aa5f3824b126a32_b.jpg\"/></figure><p>链路状态ID ：AS外部LSA的链路状态ID是值外部网络地址 </p><p>E ：设置为0，则为E1类型，设置为1，则为E2类型，</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>NSSA 外部 LSA</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-9c31035b58c811ed4692747e0a979e43_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1129\" data-rawheight=\"582\" class=\"origin_image zh-lightbox-thumb\" width=\"1129\" data-original=\"https://pic4.zhimg.com/v2-9c31035b58c811ed4692747e0a979e43_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1129&#39; height=&#39;582&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1129\" data-rawheight=\"582\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1129\" data-original=\"https://pic4.zhimg.com/v2-9c31035b58c811ed4692747e0a979e43_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-9c31035b58c811ed4692747e0a979e43_b.jpg\"/></figure><p><b>1.4特殊的LSA</b></p><p>类型6：组播OSPF应用中使用的专属LSA</p><p>类型7：在特殊区域类型NSSA中对外部路由使用</p><p>类型8、9：OSPFv3中对链路本地地址和区域内前缀使用</p><p>类型10、11：通用LSA，也称透明（opaque），</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、链路类型</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1426\" data-rawheight=\"325\" class=\"origin_image zh-lightbox-thumb\" width=\"1426\" data-original=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1426&#39; height=&#39;325&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1426\" data-rawheight=\"325\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1426\" data-original=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-0280263708417275e9d5875796322d25_b.jpg\"/></figure><p><b>2.1 point to point link：网络类型是P2P的接口，链路类型就是P2P，环回接口除外</b></p><p><b>2.2 transit link：拥有邻居的链路，除了点到点和点到多点</b></p><p><b>2.3 stub network link：在一个网段只有一台路由器的情况下，该网段被定义为末梢网络，只要该接口上没有OSPF邻居，那么就是末梢网络</b></p><p><b>2.4 virtual link ：虚链路可以被定义成手工配置地址的成P2P链路</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>三、LSA小解</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.1 Router LSA</b></p><p>（每一个运行OSPF的路由器均会产生一类LSA）</p><p><b>主要功能：</b></p><ol><ol><li>表示路由器的特殊角色，如virtual-link、ABR、ASBR</li><li>描述本路由器在某个区域内部与直连链路及接口的COST值</li></ol></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.2 Network LSA</b></p><p>在MA网络中，会选举DR、BDR，而所有的other只能和DR以及BDR建立邻接关系，从某种层面上说，DR实际上代表了这个MA网络</p><ul><li>LSA 2 描述 transnet（MA，NBMA）网络信息</li><li>由DR产生，描述其在该MA网络上连接的所有路由器的router-id，以及该MA网络的掩码</li><li>LSA 2 只能在本区域内泛洪，不允许跨越ABR</li><li>LSA 2中没有COST字段（因此需要LSA 1 来进行SPF算法）</li></ul><p><b>靠着1，2类LSA，OSPF在一个区域内的路由计算就没有问题了，由此产生的路由，在路由表中标记为“O”,表示本区域内的路由</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.3 Summary LSA</b></p><p><b>前两类LSA解决了区域内路由计算的问题，那么区域间呢？如果路由器需要访问其他区域呢？这时就需要3类LSA。3类LSA是网络汇总LSA。由于ABR同时属于两个以上区域，它知道这些区域的1、2类LSA，那么就可以将某个区域的1、2类LSA做个归纳，然后为其他区域生成三类LSA并泛洪到其他区域，这样一来区域间的路由计算就没问题了</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.4  ASBR summary LSA</b></p><p>4类LSA是一个指向ASBR的LSA，由该ASBR所在区域中的ABR产生，ASBR作为域边界路由器，将外部的路由通过重发布的方式注入OSPF域，这些外部路由在OSPF中进行传递（外部路由是以5类LSA的形式在域内传递），而我们OSPF内部的路由器如果想要前往这些外部网段，需要具备两个条件：</p><ul><li>知道外部的路由（这通过重发布的动作，已经完成注入，借助5类LSA完成传播）</li><li>知道完成这个重分发动作的ASBR的位置</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.5  AS external LSA</b></p><p>外部路由，被重发布进OSPF以后，将产生5类LSA，在OSPF域中进行传递</p><p>（5类LSA由ASBR产生）</p><ol><ol><li><b>E1、E2路由的优选问题：E1永远优于E2路由，</b></li><li><b>E1路由之间的比较：当本地收到多条描述同一外部路由信息的类型1外部LSA时，需要比较每条外部LSA中携带metric与本地产生该LSA的ASBR的metric之和，优选值小的（可负载均衡）</b></li><li><b>E2路由之间的比较：①首先比较外部LSA本身携带的metric，优选值小的外部LSA；②如果外部LSA携带的metric值相同，比较本地到达通告每条LSA的ASBR/FA地址的metric，优选值小的（可负载均衡）</b></li><li><b>ON2和OE2的选择问题：当metric值一样时，cisco优选OE2，如果metric相同单各自到ASBR的metric不等时，优选距离小的</b></li></ol></ol><p></p><p></p>", 
            "topic": [
                {
                    "tag": "Cisco（思科）", 
                    "tagLink": "https://api.zhihu.com/topics/19568106"
                }, 
                {
                    "tag": "路由协议", 
                    "tagLink": "https://api.zhihu.com/topics/19702640"
                }, 
                {
                    "tag": "网络协议", 
                    "tagLink": "https://api.zhihu.com/topics/19779985"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/41048085", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 0, 
            "title": "OSPF-建立邻居", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序</b>：开放式最短路径优先协议，由IETF开发，SPF是OSPF的核心思想，运用Dijkstra算法</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、基础知识</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.1预知知识</b></p><ol><ol><li>OSPF的流量使用IP协议号89，不依赖TCP、UDP</li><li>天然无类路由协议，支持VLSM\t</li><li>OSPF是IGP协议中的链路状态协议</li><li>OSPF的管理距离是110</li><li>OSPF只支持等价负载均衡</li><li>OSPF的周期更新时间为30min</li><li>OSPF不可以通过Offset list来改变路由的metric</li></ol></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.2 术语解析</b></p><ol><ol><li><b>Router-ID：OSPF路由器唯一的身份标识，用IP地址的形式来表示（Router-ID只在OSPF启动时，或者重置OSPF进程后计算）</b></li><li><b>COST：OSPF使用接口的带宽计算metric值（一般计算方法为（带宽/100M），有例外）</b></li><li><b>链路（Link）：特指运行在OSPF进程下的接口</b></li><li><b>链路状态（Link-State）：就是OSPF接口上的描述信息，储存在链路状态数据库</b></li><li><b>组播地址：224.0.0.5，所有OSPF路由器；224.0.0.6，DR和BDR专属</b></li></ol></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.3核心计时器</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-a140a600b88de9a3849e2cad49a1e243_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1488\" data-rawheight=\"716\" class=\"origin_image zh-lightbox-thumb\" width=\"1488\" data-original=\"https://pic4.zhimg.com/v2-a140a600b88de9a3849e2cad49a1e243_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1488&#39; height=&#39;716&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1488\" data-rawheight=\"716\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1488\" data-original=\"https://pic4.zhimg.com/v2-a140a600b88de9a3849e2cad49a1e243_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a140a600b88de9a3849e2cad49a1e243_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.4 DR BDR选举（MA网络）</b></p><ul><li>比较接口优先级，选举优先级最高的称为DR，次优先级的为BDR，优先级范围时0-255，默认时1，优先级设置为0表示不参与DR和BDR的选举</li><li>在优先级相同时，route-id 最大的成为DR，其次BDR</li></ul><p>！注意：</p><p>①多路访问网络可以没有DR，但是将无法建立邻接关系</p><p>②DR和BDR非抢占，DR和BDR与任何R都是FULL状态，但是普通R和普通R之间是two-way状态</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.5序列号</b></p><p>①线性空间：从0x80000001到0x7fffffff</p><p>②循环序列号空间：（假设序列号空间为n）</p><p>a&gt;b 且 （a-b）&lt;=n/2</p><p>a&gt;b 且 （b-a）&gt;n/2</p><p>!略</p><p>③棒棒糖：圆形空间，无限序列</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、OSPF邻居建立</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.1 OSPF概括</b></p><ol><ol><li>宣告OSPF的路由器从所有启动OSPF协议的接口上发出hello包。如果两台路由器共享一条公共数据链路，并且相互成功协商hello包中相关参数，那么它们就成为了邻居</li><li>邻接关系，可以想象为一条点到点的虚链路，它是在一些邻居路由器之间构成的。</li><li>每台路由器都会在所有形成邻接关系的邻居之间发送LSA（链路状态通告）。LSA描述了路由器所有的链路、接口、路由器的邻居以及链路状态信息。</li><li>每一台收到从邻居路由器发出的LSA的路由器都会把这些LSA记录在它的链路状态数据库中，并且发送一份LSA的拷贝给其他邻居</li><li>通过LSA泛洪到整个区域，所有的路由器都会形成相同的链路状态数据库</li><li>当这些路由器的数据库完全相同时，每一台路由器都将以其自身为根，使用SPF算法来计算一个无环路的拓扑图</li><li>每一台路由器都将从SPF算法树中构建出自己的路由表</li></ol></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.2邻居建立过程</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-f11d00c486c24a74fe01b453943d0afe_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1543\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb\" width=\"1543\" data-original=\"https://pic3.zhimg.com/v2-f11d00c486c24a74fe01b453943d0afe_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1543&#39; height=&#39;640&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1543\" data-rawheight=\"640\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1543\" data-original=\"https://pic3.zhimg.com/v2-f11d00c486c24a74fe01b453943d0afe_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-f11d00c486c24a74fe01b453943d0afe_b.jpg\"/></figure><ol><ol><li><b>down：网段上没有收到消息</b></li><li><b>init：接口检测到来自邻居的hello包，但是还未建立双向通信</b></li><li><b>two-way：与邻居建立双向通信，路由器在邻居发来的hello包中看到自己。（是否选举DR和BDR取决于网络类型）</b></li></ol></ol><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-dca8bdef109ec8f68084e424f20353bd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1455\" data-rawheight=\"665\" class=\"origin_image zh-lightbox-thumb\" width=\"1455\" data-original=\"https://pic2.zhimg.com/v2-dca8bdef109ec8f68084e424f20353bd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1455&#39; height=&#39;665&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1455\" data-rawheight=\"665\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1455\" data-original=\"https://pic2.zhimg.com/v2-dca8bdef109ec8f68084e424f20353bd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-dca8bdef109ec8f68084e424f20353bd_b.jpg\"/></figure><ol><ol><li><b>ex-start：路由器尝试建立初始序列号，在信息交换包中会用到。序列号确保路由器总是能获取最新的消息。一台路由器将成为主主路由器，另一条将成为从路由器。此时I（init）、M（more）、MS（master）位全部为1.</b></li><li><b>exchange：路由器发送DBD（数据库描述）包来描述整个LSDB。DBD包中包含有关路由器LSDB中出现的LSA条目的头部信息。I为此时置0，M位置1表示接下来还有DBD报文，MS置1表示主路由器</b></li></ol></ol><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-65b4871d2aa5598ab874a70cea4e1405_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1262\" data-rawheight=\"645\" class=\"origin_image zh-lightbox-thumb\" width=\"1262\" data-original=\"https://pic2.zhimg.com/v2-65b4871d2aa5598ab874a70cea4e1405_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1262&#39; height=&#39;645&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1262\" data-rawheight=\"645\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1262\" data-original=\"https://pic2.zhimg.com/v2-65b4871d2aa5598ab874a70cea4e1405_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-65b4871d2aa5598ab874a70cea4e1405_b.jpg\"/></figure><ol><ol><li><b>loading：当路由器收到了M位置0的DBD包时，将进入loading状态，在此状态中，路由器完成信息交换。路由器构建链路状态请求表和链路状态重传表，任何不完整或过时的消息都会放在请求表里，任何要发出的更新都会放在重传表里，直到收到确认</b></li><li><b>full：在此状态中，邻接关系建立完成，邻居路由器建立了完全邻接关系，双方拥有相同的LSDB</b></li></ol></ol><p><b>2.3 OSPF网络类型</b></p><ol><ol><li><b>点到点：串行链路和点到点帧中继链路</b></li><li><b>广播：以太网链路</b></li><li><b>非广播：帧中继链路和ATM，需要手动指定邻居，没有发现邻居的能力</b></li><li><b>点到多点：视为点到点链路对待</b></li><li><b>点到多点非广播：与点到多点链路类似，但是不支持广播，没有发现邻居的能力</b></li></ol></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.4 OSPF邻居建立中的问题</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>2.4.0<b> 建立邻居的四大必备条件：</b></p><ol><ol><li><b>Area-id 必须相同</b></li><li><b>hello，dead时间必须相同</b></li><li><b>认证通过</b></li><li><b>区域类型相同</b></li></ol></ol><p>2.4.1<b> MTU不一致</b></p><p>MTU不一致时，邻居时建立不起来的，不过可以在接口模式下配置 ip ospf mtu-ignore 去忽略MTU，注意在MTU小的接口上配置</p><p>2.4.2 <b>接口掩码不一致</b></p><p>a，在MA网络中不一致，邻居无法建立，因为2类LSA有掩码字段用于描述信息</p><p>b，在p2p网络中，邻居可以建立，路由也能学到，不过别闹······</p><p>2.4.3<b> 网络类型不同</b></p><p>两端如果网络类型不同，邻居可以建立，LSA可以传递，但是路由学不到</p><p></p><p></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "路由器", 
                    "tagLink": "https://api.zhihu.com/topics/19561099"
                }, 
                {
                    "tag": "Cisco（思科）", 
                    "tagLink": "https://api.zhihu.com/topics/19568106"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/40921973", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 2, 
            "title": "RIPv2的二三事", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>四、RIPv2</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.1 RIPv2的改进</b></p><ol><ol><li><b>外部路由标记：支持路由重发布</b></li><li><b>VLSM支持</b></li><li><b>组播能力：224.0.0.9</b></li><li><b>认证机制</b></li><li><b>下一跳：指出一个比通告路由器的地址更好的下一跳地址，如果是全0，则通告路由器是最优下一跳地址</b></li></ol></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.2消息类型</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-f1fc5bf4d6d89c35ae0a458fcabfd287_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1264\" data-rawheight=\"387\" class=\"origin_image zh-lightbox-thumb\" width=\"1264\" data-original=\"https://pic4.zhimg.com/v2-f1fc5bf4d6d89c35ae0a458fcabfd287_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1264&#39; height=&#39;387&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1264\" data-rawheight=\"387\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1264\" data-original=\"https://pic4.zhimg.com/v2-f1fc5bf4d6d89c35ae0a458fcabfd287_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-f1fc5bf4d6d89c35ae0a458fcabfd287_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-23bd0bd492e77ed6ee33e3caeaa205ed_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1509\" data-rawheight=\"773\" class=\"origin_image zh-lightbox-thumb\" width=\"1509\" data-original=\"https://pic2.zhimg.com/v2-23bd0bd492e77ed6ee33e3caeaa205ed_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1509&#39; height=&#39;773&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1509\" data-rawheight=\"773\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1509\" data-original=\"https://pic2.zhimg.com/v2-23bd0bd492e77ed6ee33e3caeaa205ed_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-23bd0bd492e77ed6ee33e3caeaa205ed_b.jpg\"/></figure><p>其中地址族消息默认位2（ip），当请求整个路由表时为0</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.3认证消息</b></p><p>（认证是通过设置地址族标识字段为全1，0xFFFF）来标识的，（由于认证消息的占用，含有认证消息的更新报文最多可携带24个路由条目）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-1eeddec1bf5e4e455b6dbbca0d5b4c68_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1156\" data-rawheight=\"327\" class=\"origin_image zh-lightbox-thumb\" width=\"1156\" data-original=\"https://pic1.zhimg.com/v2-1eeddec1bf5e4e455b6dbbca0d5b4c68_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1156&#39; height=&#39;327&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1156\" data-rawheight=\"327\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1156\" data-original=\"https://pic1.zhimg.com/v2-1eeddec1bf5e4e455b6dbbca0d5b4c68_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-1eeddec1bf5e4e455b6dbbca0d5b4c68_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-381f9dce34be155869619460414f8932_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1454\" data-rawheight=\"629\" class=\"origin_image zh-lightbox-thumb\" width=\"1454\" data-original=\"https://pic3.zhimg.com/v2-381f9dce34be155869619460414f8932_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1454&#39; height=&#39;629&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1454\" data-rawheight=\"629\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1454\" data-original=\"https://pic3.zhimg.com/v2-381f9dce34be155869619460414f8932_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-381f9dce34be155869619460414f8932_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.4兼容性</b></p><p>（在Cisco中，默认发送v1，接收v1，v2）</p><p>（手动指定v1，则只发送、接收v1信息，手动指定v2类似）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-5f46d26ca5349965d1a04bcffb5e0974_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1164\" data-rawheight=\"223\" class=\"origin_image zh-lightbox-thumb\" width=\"1164\" data-original=\"https://pic1.zhimg.com/v2-5f46d26ca5349965d1a04bcffb5e0974_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1164&#39; height=&#39;223&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1164\" data-rawheight=\"223\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1164\" data-original=\"https://pic1.zhimg.com/v2-5f46d26ca5349965d1a04bcffb5e0974_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-5f46d26ca5349965d1a04bcffb5e0974_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-a7b46de4f9458142581d901d569068f6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1022\" data-rawheight=\"214\" class=\"origin_image zh-lightbox-thumb\" width=\"1022\" data-original=\"https://pic3.zhimg.com/v2-a7b46de4f9458142581d901d569068f6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1022&#39; height=&#39;214&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1022\" data-rawheight=\"214\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1022\" data-original=\"https://pic3.zhimg.com/v2-a7b46de4f9458142581d901d569068f6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-a7b46de4f9458142581d901d569068f6_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.5 很有意思的一道题</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-446a3209340a30dab020855fd391075e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1353\" data-rawheight=\"412\" class=\"origin_image zh-lightbox-thumb\" width=\"1353\" data-original=\"https://pic3.zhimg.com/v2-446a3209340a30dab020855fd391075e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1353&#39; height=&#39;412&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1353\" data-rawheight=\"412\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1353\" data-original=\"https://pic3.zhimg.com/v2-446a3209340a30dab020855fd391075e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-446a3209340a30dab020855fd391075e_b.jpg\"/></figure><p><b>可以想想为什么（提示，RIP的距离矢量特性）</b></p>", 
            "topic": [
                {
                    "tag": "路由协议", 
                    "tagLink": "https://api.zhihu.com/topics/19702640"
                }, 
                {
                    "tag": "Cisco（思科）", 
                    "tagLink": "https://api.zhihu.com/topics/19568106"
                }
            ], 
            "comments": [
                {
                    "userName": "是是非非", 
                    "userLink": "https://www.zhihu.com/people/07f1c19528a50a7822b021af4ddc8f59", 
                    "content": "最后一问为什么啊", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/40890648", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "路由协议系列", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/40890160\" class=\"internal\">0x01：RIPv1的二三事</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/40921973\" class=\"internal\">0x02：RIPv2的二三事</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/41048085\" class=\"internal\">0x03：OSPF-邻居建立</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/41173338\" class=\"internal\">0x04：OSPF-构建LSDB</a></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "路由协议", 
                    "tagLink": "https://api.zhihu.com/topics/19702640"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/40890160", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 0, 
            "title": "RIPv1的二三事", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序</b>：从RIP中开始对动态路由协议的学习</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、基础回顾</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1.1.距离矢量名称的由来是因为路由以矢量（距离，方向）的方式被通告出去，其中距离是根据度量定义的，方向是根据下一跳路由器定义的</p><p>1.2.定期更新、广播更新、路由表更新；依照传闻的内容更新；距离矢量路由协议并不了解网络拓扑</p><p>1.3.定义一个最大值：定义跳数的最大值15跳，16跳为不可达，以避免路由选择环路<b>（防环）</b></p><p>1.4.通过水平分割消除路由选择环路<b>（防环）</b></p><p>------简单水平分割的规则是，从某接口发送的更新消息不包含从该接口收到的更新所包含的网络</p><p>1.5.路由中毒<b>（防环）</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-fd5f4ab0a2845998b173f66022508e09_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"792\" data-rawheight=\"118\" class=\"origin_image zh-lightbox-thumb\" width=\"792\" data-original=\"https://pic2.zhimg.com/v2-fd5f4ab0a2845998b173f66022508e09_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;792&#39; height=&#39;118&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"792\" data-rawheight=\"118\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"792\" data-original=\"https://pic2.zhimg.com/v2-fd5f4ab0a2845998b173f66022508e09_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-fd5f4ab0a2845998b173f66022508e09_b.jpg\"/></figure><p>------当10.4.0.0挂掉的时候，C会立刻发送一条路由中毒消息（10.4.0.0  ，16跳）然后通告出去；B收到这条中毒消息后，将10.4.0.0从路由表里抹去，但仍存在rip database里面，状态时possible down，垃圾收集时间到（garbage colletion 默认60s）后，路由被从B的database抹去</p><p>1.6<b>.毒性逆转</b>（同上图）<b>（防环）</b></p><p>------4.0网段刮掉后，C会发送中毒消息，理论上4.0的路由是C通告给B的，根据水平分割规则B不能向C通告4.0的消息，但是带毒性逆转的水平分割打破了这个原则，B会定期向C发送4.0的毒性逆转消息，以让C知道，他的邻居晓得了4.0刮掉的消息，并且在眼巴巴等着4.0满血复活，这样做的另一好处是避免环路，至少C不会从B再去访问4.0了</p><p>1.7.用触发更新<b>避免路由选择环路</b></p><p>------新的路由表一般是定期发送给邻居路由器的，而触发更新（triggered updata）则是立即发送以响应路由表的变化</p><p>1.8.用抑制定时器（hold-down）<b>防止环路</b></p><p>------当一个router从邻居router收到一条更新，指示以前的网络选择不可达了，或有一个跳数更大的路由，则这个router标识这个路由不可达并启动一个抑制定时器，如果在定时器满以前收到该路由又可达的更新，或者比之前的记录有更好的度量值，该router标识这个路由可达并删除定时器，否则接受收到的更新路由</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、RIPv1</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.1.小结：</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1.两种版本：</p><p>v1使用广播，默认30s发送一次，采用UDP520端口；</p><p>v2使用组播，224.0.0.9</p><p>2.RIP定义了请求消息和响应消息两种类型</p><p>①请求消息：</p><p>------请求整个路由表，请求消息含有一个地址族标识字段0，度量值16的单条路由，收到这个请求的设备将通过单播方式向发出请求的地址回送它整个路由表</p><p>------请求具体路由信息，请求消息将与特定地址的路由条目一起发送，接收到请求的设备根据请求消息逐个处理这些条目，并构成一个响应消息</p><p>②更新消息：包含了整张路由表，周期性更新</p><p>3.RIPv1支持最大6条，默认4条等价负载均衡。（不支持验证，v2支持）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.2四个重要的计时器</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-21f262193cea8c3b30e7c5d01415f645_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1555\" data-rawheight=\"725\" class=\"origin_image zh-lightbox-thumb\" width=\"1555\" data-original=\"https://pic2.zhimg.com/v2-21f262193cea8c3b30e7c5d01415f645_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1555&#39; height=&#39;725&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1555\" data-rawheight=\"725\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1555\" data-original=\"https://pic2.zhimg.com/v2-21f262193cea8c3b30e7c5d01415f645_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-21f262193cea8c3b30e7c5d01415f645_b.jpg\"/></figure><p>①更新计时器，周期更新保证路由信息的实时性，是所有计时器的基础</p><p>②其余，略</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.3 RIP database</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-28dde28a7740e55ab765e7ed841a3395_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1026\" data-rawheight=\"124\" class=\"origin_image zh-lightbox-thumb\" width=\"1026\" data-original=\"https://pic2.zhimg.com/v2-28dde28a7740e55ab765e7ed841a3395_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1026&#39; height=&#39;124&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1026\" data-rawheight=\"124\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1026\" data-original=\"https://pic2.zhimg.com/v2-28dde28a7740e55ab765e7ed841a3395_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-28dde28a7740e55ab765e7ed841a3395_b.jpg\"/></figure><p>RIP的路由数据库包括以下表项：</p><ol><li>目的地址：主机或网络的地址</li><li>下一跳地址：为到达目的地，需要经过的相邻路由器的接口IP地址</li><li>接口：转发报文的接口</li><li>Metric：本路由器到达目的地的开销，是一个0-15的整数</li><li>路由时间：从路由项最后一次被修改到现在的时间</li><li>路由标记：区分内部路由协议和外部路由协议的标记</li></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.4 RIP消息报文</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-bd4d5735bee142bdf90b0447b2af5273_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1472\" data-rawheight=\"494\" class=\"origin_image zh-lightbox-thumb\" width=\"1472\" data-original=\"https://pic4.zhimg.com/v2-bd4d5735bee142bdf90b0447b2af5273_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1472&#39; height=&#39;494&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1472\" data-rawheight=\"494\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1472\" data-original=\"https://pic4.zhimg.com/v2-bd4d5735bee142bdf90b0447b2af5273_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-bd4d5735bee142bdf90b0447b2af5273_b.jpg\"/></figure><p>*字段信息如下：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-37c8bb7cab1e0291c6d5b89673993ed4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1302\" data-rawheight=\"526\" class=\"origin_image zh-lightbox-thumb\" width=\"1302\" data-original=\"https://pic1.zhimg.com/v2-37c8bb7cab1e0291c6d5b89673993ed4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1302&#39; height=&#39;526&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1302\" data-rawheight=\"526\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1302\" data-original=\"https://pic1.zhimg.com/v2-37c8bb7cab1e0291c6d5b89673993ed4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-37c8bb7cab1e0291c6d5b89673993ed4_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.5 RIPv1的触发更新</b></p><ol><li>仅在点对点链路上有效</li><li>接口下配置，链路两端同时配置</li><li>因没有周期更新，所以路由条目永久有效，也减少了路由开销</li><li>接口下配置此命令即刻生效：ip rip triggered</li></ol><p class=\"ztext-empty-paragraph\"><br/></p><p><b>三、讨论RIPv1二三事</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.1 RIPv1路由操作\t</b></p><p><b>RIP更新行为（仅供参考）</b></p><ol><li>路由器1向路由器2广播的网络（或子网）是否与源接口在同一网络，如果不是，则在网络边界自动汇总并广播该网络</li><li>如果在同一网络，网络与源接口是否有相同的掩码，如果不是，丢弃该网络（除非是主机路由且路由器支持主机路由？）</li><li>如果掩码相同，则广播该网络</li></ol><p><b>RIP接收行为（仅供参考）</b></p><ol><li>从更新接收的子网与接收端口是否处于同一主网络，如果是，路由器2使用接收接口的掩码，（如果RIP更新的主机部分设置了主机位，接收路由器使用主机掩码？）</li><li>如果不是同一网络，该网络的任一子网是否在路由表中，如果是，忽略更新</li><li>如果不在，路由器2接收更新使用主掩码</li></ol><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-348188af371586fb365321e4410c2660_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1223\" data-rawheight=\"376\" class=\"origin_image zh-lightbox-thumb\" width=\"1223\" data-original=\"https://pic1.zhimg.com/v2-348188af371586fb365321e4410c2660_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1223&#39; height=&#39;376&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1223\" data-rawheight=\"376\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1223\" data-original=\"https://pic1.zhimg.com/v2-348188af371586fb365321e4410c2660_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-348188af371586fb365321e4410c2660_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ec64f07cb53798b1b0a5b0407261f4a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1283\" data-rawheight=\"268\" class=\"origin_image zh-lightbox-thumb\" width=\"1283\" data-original=\"https://pic4.zhimg.com/v2-ec64f07cb53798b1b0a5b0407261f4a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1283&#39; height=&#39;268&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1283\" data-rawheight=\"268\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1283\" data-original=\"https://pic4.zhimg.com/v2-ec64f07cb53798b1b0a5b0407261f4a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ec64f07cb53798b1b0a5b0407261f4a7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-cfecff85bef6a90c13ff06a6e270001b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1318\" data-rawheight=\"263\" class=\"origin_image zh-lightbox-thumb\" width=\"1318\" data-original=\"https://pic4.zhimg.com/v2-cfecff85bef6a90c13ff06a6e270001b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1318&#39; height=&#39;263&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1318\" data-rawheight=\"263\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1318\" data-original=\"https://pic4.zhimg.com/v2-cfecff85bef6a90c13ff06a6e270001b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-cfecff85bef6a90c13ff06a6e270001b_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-d3d9c2927acc4ff3c37d8b4d7222b8d5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1319\" data-rawheight=\"433\" class=\"origin_image zh-lightbox-thumb\" width=\"1319\" data-original=\"https://pic2.zhimg.com/v2-d3d9c2927acc4ff3c37d8b4d7222b8d5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1319&#39; height=&#39;433&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1319\" data-rawheight=\"433\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1319\" data-original=\"https://pic2.zhimg.com/v2-d3d9c2927acc4ff3c37d8b4d7222b8d5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-d3d9c2927acc4ff3c37d8b4d7222b8d5_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.2RIP中运用偏移列表进行路径控制</b></p><p>access-list 1 permit 3.3.3.0</p><p>router rip</p><p>offset-list 1 in 2 serial 0/0</p><p>最后一条命令的规则是&#34;先检查从S0/0接口接收进来的RIP通告，如果存在和访问列表1指定的地址相匹配的路由条目，那么就把该路由条目度量衡加2&#34;</p>", 
            "topic": [
                {
                    "tag": "路由协议", 
                    "tagLink": "https://api.zhihu.com/topics/19702640"
                }, 
                {
                    "tag": "Cisco（思科）", 
                    "tagLink": "https://api.zhihu.com/topics/19568106"
                }
            ], 
            "comments": [
                {
                    "userName": "KagamineRinSuki", 
                    "userLink": "https://www.zhihu.com/people/491d3e751bacae38d7c47312238bd46e", 
                    "content": "<p>带毒性逆转比不带毒性逆转的水平分割好在哪里？</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37836445", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "TCP基础特性*", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序：</b>为了通过IP数据包实现可靠性传输，需要考虑很多事情，例如数据的破坏、丢包、重复以及分片顺序混乱等问题。如不能解决这些问题，也无从谈起可靠传输</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、TCP的可靠传输</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>0.TCP通过检验和、序列号、确认应答（ACK）、重发控制、连接管理以及窗口控制等机制实现可靠传输</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.序列号与确认应答</b></p><p>------TCP通过肯定的ACK实现可靠的数据传输。当发送端将数据发出之后会等待对端的确认应答。如果有ACK，说明数据已经成果到达对端，反之，则数据丢失的可能性很大</p><p>------未收到ACK并不意味着数据一定丢失，也有可能是数据对方已经收到，只是返回的ACK在途中丢失。这种情况也会导致数据重传</p><p>------此外，因为一些其他原因导致ACK延迟到达，在源主机重发数据后才到达，此时，对于目标主机来说，会受到重复的数据包，为了实现对上层应用提供可靠的传输，必须得引入一种机制（<b>序列号</b>），它<b>能够识别是否已经收到数据，又能够判断是否需要接收</b></p><p><b>------序列号是按数据发送数据的每一个字节都标上号码的编号，（它有4个字节）。接收端查询接收数据TCP首部的序列号和数据长度，将自己下一步应该接收的需要作为确认应答返送回去。就这样，通过序列号和确认应答号，TCP可以实现可靠传输</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.重发超时的确定</b></p><p>------这个重发超时是指在重发数据之前，等待ACK到来的那个特定时间间隔。如果超过了那个时间仍未收到ACK，发送端将进行数据重发。那么我们就需要一个合理的间隔时间段</p><p>------最理想的是：它能保证“ACK一定能在这个时间段内返回”，在复杂的网络中显然不可能 </p><p>------TCP要求在任何网络中都要提供高性能通信，无论网络发生怎么变化，所以这个时间应该是动态确定的</p><p><b>------因此，它在每次发包时都会计算往返时间及其偏差。将这个往返时间和偏差相加，重发超时的时间就是比这个综合稍大一些的值</b></p><p>------在UNIX或Widows中，超时以0.5s为单位进行控制，时间为0.5s的整数倍，偏差最小值为0.5s，所以重传超时的最小时间为1s</p><p>------如果数据重发之后还是收不到ACK，则进行再次发送，不过等待时间将会以2倍、4倍的指数函数延长</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.连接管理</b></p><p>------TCP在数据通信之前，通过TCP首部发送一个SYN包作为建立连接的请求等待ACK，如果对端发来ACK，则认为可以通信<b>（三次握手如下）</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-667b461b5e328065922a0238c8ddf079_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1112\" data-rawheight=\"101\" class=\"origin_image zh-lightbox-thumb\" width=\"1112\" data-original=\"https://pic2.zhimg.com/v2-667b461b5e328065922a0238c8ddf079_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1112&#39; height=&#39;101&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1112\" data-rawheight=\"101\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1112\" data-original=\"https://pic2.zhimg.com/v2-667b461b5e328065922a0238c8ddf079_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-667b461b5e328065922a0238c8ddf079_b.jpg\"/></figure><p>------此外，在通信结束时会进行断开连接的处理（FIN包），（一个连接的建立与断开，正常过程至少需要来回7个包才能完成）<b>（四次挥手如下）</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-95339825e308c99afc0c14c9144c6ad3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1316\" data-rawheight=\"177\" class=\"origin_image zh-lightbox-thumb\" width=\"1316\" data-original=\"https://pic4.zhimg.com/v2-95339825e308c99afc0c14c9144c6ad3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1316&#39; height=&#39;177&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1316\" data-rawheight=\"177\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1316\" data-original=\"https://pic4.zhimg.com/v2-95339825e308c99afc0c14c9144c6ad3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-95339825e308c99afc0c14c9144c6ad3_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.最大消息长度（MSS）</b></p><p>------在建立TCP连接的同时，也可以确定发送数据包的单位，我们也可以称其为<b>最大消息长度（maximum segment size）</b>。最理想的是，MSS正好是IP中不会被分片处理的最大数据长度</p><p>------TCP在传送大量数据是，是以MSS的大小为单位将数据进行分割传送。进行重发超时也是以MSS为单位</p><p><b>------MSS是在三次握手的时候，两个终端在发出建立连接的请求时，会在TCP首部写入MSS选项（为附加MSS项，TCP将不再是20字节，而是24字节，含有填充项），告诉对方自己的接口能够适应的MSS的大小，然后选择较小的值投入使用</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.滑动窗口控制</b></p><p>------TCP以1个段为单位，每发一个段进行一次ACK的处理，但是这样有一个缺点，包的往返时间越长通信性能越低。为了解决这个问题，TCP引入了窗口的概念，具体来说，就是发送端在发送了一个段的数据后不必一直等待ACK，而是继续发送一定数量的段</p><p>------窗口大小是指无需等待ACK就可以继续发送数据的最大值</p><p><b>一道滑动窗口的题：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-82d24825fe70a74ab8614044ed8d87b4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"450\" data-rawheight=\"145\" class=\"origin_image zh-lightbox-thumb\" width=\"450\" data-original=\"https://pic1.zhimg.com/v2-82d24825fe70a74ab8614044ed8d87b4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;450&#39; height=&#39;145&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"450\" data-rawheight=\"145\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"450\" data-original=\"https://pic1.zhimg.com/v2-82d24825fe70a74ab8614044ed8d87b4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-82d24825fe70a74ab8614044ed8d87b4_b.jpg\"/></figure><p>①如图，刚开始窗口大小为4，那么1-400的4个包将会被发出等待4个ACK确认，理想状态下同时收到4个ACK滑到401-800继续发送数据</p><p>②但是收到了1-200的ACK报文时候，更新了窗口大小变成5，并且窗口迁移到201-700</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.窗口控制与重发控制</b></p><p><b>------首先，先考虑ACK未能发送到发送端主机的情况，在窗口一定程度较大时，即使有少部分的确认应答丢失也不会进行数据重发，因为可以通过下一个ACK进行确认</b></p><p>------比如说，你发送1-100，101-200,201-300三个数据段，但是接收端主机的3个对应ACK前两个丢失了，只有201-300的到达，这将会刷新接收端的序列号从而不影响数据传输</p><p>------其次，我们来考虑一下<b>发送端主机报文丢失的情况</b>。如果接收端接收到一个自己一个接收的序号以外的数据时，会针对当前为止收到的数据返回<b>ACK（三次，因为三次可以触发重发机制）</b>，而且几乎不会影响数据交互<b>（因为即使接收端主机收到的序列号并不连续，也不会将数据丢弃而是暂时保存至缓冲区）</b>，这种机制比之前提到的超时重发更加有效，因此也被称为<b>高速重发控制</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>7.流控制（流量控制）</b></p><p>------在TCP首部中，专门有一个字段用来通知窗口大小。接收主机将自己可以接收的缓冲区大小放入这个字段中通知给发送端，这个字段的值越大，说明网络的吞吐量越高</p><p>------不过，接收端的<b>缓冲区</b>一旦面临<b>数据溢出</b>时，<b>窗口大小</b>的值也会随之被设置为一个<b>更小的值</b>通知发送端，从来控制数据发送量</p><p>------如果，<b>数据溢出</b>，但是<b>过了</b>发送端的<b>重发超时时间</b>还未收到窗口更新的通知，发送端将会发送一个窗口探测的包（为了防止窗口更新在传输中<b>意外丢失</b>，发送端会时不时的发送窗口探测包）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>8.拥塞控制</b></p><p>------有了TCP的窗口控制，收发主机之间不再以一个数据段为单位发送ACK，也能连续发送大量数据包</p><p>------计算机网络都处于一个共享的环境。因此也有可能会因为其他主机之间的通信使网络变得拥堵，在网络出现拥堵的时候，如果发送一个较大量的数据，极有可能导致整个网络瘫痪</p><p>------因此，TCP在通信一开始的时候会通过一个叫做<b>慢启动</b>的算法得出的数值，对收发数据量进行控制</p><p>------首先，为了在发送端调节所要发送数据的量，定义了一个叫做“<b>拥塞窗口</b>”的概念。于是在慢启动的时候，将这个拥塞窗口的大小设置为1个数据段（1MSS），之后每收到,1次ACK，拥塞窗口的值就加1，在发送数据时，将拥塞窗口的大小与接收端主机通知的窗口大小进行比较，选择较小的值，并且发送比其还要小的数据量</p><p>------随着包的每次往返，拥塞窗口也会以1、2、4等指数函数的增长，拥堵状况剧烈还是可能导致网络拥塞的发生。为了防止这些，引入了<b>慢启动阀值</b>的概念，只要拥塞窗口的值超出了这个阀值，在每一次收到ACK时，只允许以一种相对缓慢的方式放大拥塞窗口<b>（MSS字节数*MSS字节数/拥塞窗口大小）</b></p><p>------TCP的通信开始时，并没有设置相应的<b>慢启动阀值</b>。而是在超时重发时，才会设置为当时拥塞窗口一半的大小</p><p>------当重复ACK而触发高速重发时，<b>慢启动阀值</b>会设置为当时<b>窗口大小（实际已发送但未收到ACK的数据量）</b>一半的大小<b>（而当时窗口大小会重置为慢启动阀值+3MSS）</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>9.提高网络利用与（TCP）</b></p><p><b>①Nagle算法</b></p><p>------如果发送端还有应该发送的数据但是这部分数据很少的话，则进行延迟发送的一种处理机制。具体来说必须满足以下一种条件才可以发送数据</p><p>one，已发送数据都收到ACK时</p><p>two，可以发送最大端长度（MSS）的数据时</p><p>------这种算法会提高网络利用率，但是在复杂的网络环境中会引发某种程度的延迟，大多系统往往会关闭对该算法的启用</p><p><b>②延迟确认应答（ACK）</b></p><p>------如果接收数据的主机每次都立刻回复ACK的话，可能会返回一个较小的窗口，因为刚接收完数据，缓冲区已满；当某个接收端收到这个小窗口的通知后，会以它为上限发送数据，从而又降低了网络利用率</p><p>-------为此，引入一个方法，那就是收到数据以后并不立即返回ACK，而是延迟一段时间的机制</p><p>one，在没有收到2MSS的数据为止，不做ACK（有的规定是两个包）</p><p>two，在其他情况下，最大延迟0.5s发送确认应答（很多系统0.2s）</p><p><b>③捎带应答</b></p><p>------根据应用层协议，发送出去的消息到达对端，对端进行处理以后，会返回一个回执<b>（例如telnet中针对输入字符进行回送校验也是对发送信息的一种回执）</b></p><p>------在此类通信中，TCP的ACK和回执数据可以通过一个包发送。这种方式叫做<b>捎带应答</b></p><p>------另外，接收数据以后如果立刻返回ACK，就无法实现捎带应答，必须启用延迟确认应答</p>", 
            "topic": [
                {
                    "tag": "Socket", 
                    "tagLink": "https://api.zhihu.com/topics/19604051"
                }, 
                {
                    "tag": "网络协议", 
                    "tagLink": "https://api.zhihu.com/topics/19779985"
                }, 
                {
                    "tag": "TCP", 
                    "tagLink": "https://api.zhihu.com/topics/19614026"
                }
            ], 
            "comments": [
                {
                    "userName": "ZING", 
                    "userLink": "https://www.zhihu.com/people/40c5205ad1ec6d8c7eb82328c4220019", 
                    "content": "序号字段长度是32位的吧", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "惊风落雨", 
                            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
                            "content": "说的对，鬼知道我当时在想什么?😂走神式码字，感谢纠正。", 
                            "likes": 0, 
                            "replyToAuthor": "ZING"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37772667", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 0, 
            "title": "IPv6之杂七杂八（5）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37338216\" class=\"internal\">IPv6之地址小结（1）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37358988\" class=\"internal\">IPv6之报头小结（2）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37562391\" class=\"internal\">IPv6之基础协议（3）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37707870\" class=\"internal\">IPv6之自动配置（4）</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序</b>：这章很粗错，内容也很少，但是不写出来，强迫症都要犯了</p><p><b>一、IPv6之PMTU</b></p><p>1.PMTU发现</p><p>①PMTU是路径上的最小接口MTU（&gt;=1280byte）</p><p>②利用ICMP差错报文</p><p>------当发到途中路由器上，凡是MTU大小不合适会触发差错报文（too   big）</p><p>------直到目的地的终端接收到</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-1e87748757a53ce87bcd06f9f9912ae2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1013\" data-rawheight=\"339\" class=\"origin_image zh-lightbox-thumb\" width=\"1013\" data-original=\"https://pic3.zhimg.com/v2-1e87748757a53ce87bcd06f9f9912ae2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1013&#39; height=&#39;339&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1013\" data-rawheight=\"339\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1013\" data-original=\"https://pic3.zhimg.com/v2-1e87748757a53ce87bcd06f9f9912ae2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-1e87748757a53ce87bcd06f9f9912ae2_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>2.PMUT优化</p><p>①运行PMTU之后，接口MTU会降到链路上最小的MTU值</p><p>②但是如果链路中的最小MTU变大后，源接口还是最小的MTU值也许存在不合理，应该动态检测</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、IPv6域名解析</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1.域名解析</p><p>①同IPv4的DNS作用相同</p><p>②改进部分</p><p>------一个新的用来储存IPv6地址的资源记录类型</p><p>------一个新的支持基于IPv6地址查询域</p><p>③这些扩展都是为了兼容现有的应用和DNS系统设计的</p><p class=\"ztext-empty-paragraph\"><br/></p><p>2.IPv6 and DNS </p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-468adf601053c551a9af39b60fd438c0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1301\" data-rawheight=\"545\" class=\"origin_image zh-lightbox-thumb\" width=\"1301\" data-original=\"https://pic1.zhimg.com/v2-468adf601053c551a9af39b60fd438c0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1301&#39; height=&#39;545&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1301\" data-rawheight=\"545\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1301\" data-original=\"https://pic1.zhimg.com/v2-468adf601053c551a9af39b60fd438c0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-468adf601053c551a9af39b60fd438c0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>三、两个关于安全的扩展报头</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1.AH报头（51）</p><p>①用于保证数据的完整性</p><p>②保证源的可靠性</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-f0611d6a41062bf1f85821b5a05ea221_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1158\" data-rawheight=\"197\" class=\"origin_image zh-lightbox-thumb\" width=\"1158\" data-original=\"https://pic2.zhimg.com/v2-f0611d6a41062bf1f85821b5a05ea221_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1158&#39; height=&#39;197&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1158\" data-rawheight=\"197\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1158\" data-original=\"https://pic2.zhimg.com/v2-f0611d6a41062bf1f85821b5a05ea221_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-f0611d6a41062bf1f85821b5a05ea221_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>2.ESP报头（50）</p><p>①保证数据私密性</p><p>②保证数据完整性</p><p>③也提供源的可靠性</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-d772ddf0b600036b3084ce0241277095_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1152\" data-rawheight=\"195\" class=\"origin_image zh-lightbox-thumb\" width=\"1152\" data-original=\"https://pic2.zhimg.com/v2-d772ddf0b600036b3084ce0241277095_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1152&#39; height=&#39;195&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1152\" data-rawheight=\"195\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1152\" data-original=\"https://pic2.zhimg.com/v2-d772ddf0b600036b3084ce0241277095_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-d772ddf0b600036b3084ce0241277095_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "路由器", 
                    "tagLink": "https://api.zhihu.com/topics/19561099"
                }, 
                {
                    "tag": "科技", 
                    "tagLink": "https://api.zhihu.com/topics/19556664"
                }, 
                {
                    "tag": "IPv6", 
                    "tagLink": "https://api.zhihu.com/topics/19556734"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37707870", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 2, 
            "title": "IPv6之自动配置（4）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37338216\" class=\"internal\">IPv6之地址小结（1）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37358988\" class=\"internal\">IPv6之报头小结（2）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37562391\" class=\"internal\">IPv6之基础协议（3）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37772667\" class=\"internal\">IPv6之杂七杂八（5）</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>零、地址配置基础</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.地址配置方法</b></p><p>①自动配置</p><p>------无状态自动配置（无DHCPv6）</p><p>------有状态自动配置（有DHCPv6）</p><p>②手工配置</p><p>------用于服务器和重要网络设备</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.自动配置技术</b></p><p>①功能：</p><p>------赋予主机自己的地址参数：地址前缀，接口ID</p><p>------赋予主机其他的相关参数：路由器地址、跳数、MTU</p><p>②过程</p><p>------接口初始化</p><p>------接口产生“tentative”的link-local地址</p><p>------对“tentative”地址进行地址重复检测（DAD）</p><p>------接口产生具有<b>IP连接能力</b>的link-local地址</p><p>------由RA报文决定何种自动配置技术</p><p>------获取到全局地址</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、无状态自动配置</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.技术特点</b></p><p>①即插即用</p><p>②减轻网络管理负担</p><p>------对主机、路由器均可以自动配置</p><p>------配置多个地址进行网络无缝迁移</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.报文小结</b></p><p><b>①Router Solicitation</b></p><p>------由主机主动发出（可以加快地址配置速度，因为RA缺省200s）</p><p>------回应报文为RA</p><p><b>报文结构如下：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-1fdccb79f0c96faf66cb8bd5e496a180_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1262\" data-rawheight=\"267\" class=\"origin_image zh-lightbox-thumb\" width=\"1262\" data-original=\"https://pic1.zhimg.com/v2-1fdccb79f0c96faf66cb8bd5e496a180_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1262&#39; height=&#39;267&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1262\" data-rawheight=\"267\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1262\" data-original=\"https://pic1.zhimg.com/v2-1fdccb79f0c96faf66cb8bd5e496a180_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-1fdccb79f0c96faf66cb8bd5e496a180_b.jpg\"/></figure><p>IP部分：</p><p>------源地址：发送者<b>link-local地址 或 主机地址</b>（微软系统/思科系统）</p><p>------目的地址：FF02：：2</p><p>------跳数：255</p><p>ICMP部分：</p><p>------Type=133</p><p>------Code=0</p><p>------选项部分包含了发送者的<b>link-layer</b>地址，如果源地址是link-local的话</p><p><b>②Router Advertisement</b></p><p>------由路由器发出</p><p>------收到RS后或者周期性发出（缺省200s）</p><p><b>报文结构如下：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-137277370d94f481836a3e786b44e7f5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1319\" data-rawheight=\"303\" class=\"origin_image zh-lightbox-thumb\" width=\"1319\" data-original=\"https://pic2.zhimg.com/v2-137277370d94f481836a3e786b44e7f5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1319&#39; height=&#39;303&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1319\" data-rawheight=\"303\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1319\" data-original=\"https://pic2.zhimg.com/v2-137277370d94f481836a3e786b44e7f5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-137277370d94f481836a3e786b44e7f5_b.jpg\"/></figure><p><b>PS：回复的RA可以直接单播给请求主机，也可以组播到所有节点</b></p><p>IP部分：</p><p>------源地址：发送者<b>link-local地址</b></p><p>------目的地址：<b>FF02：：1</b>或者<b>单播地址</b></p><p>------跳数：255</p><p>ICMP部分：</p><p>------Type=134</p><p>------Code=0</p><p>------cur hop limit = 主机发送包的跳数（缺省值）</p><p><b>------M（比特位）：标志为1时表示主机可以使用有状态地址自动配置参数</b></p><p><b>-------O（比特位）：标志为1时表示主机可以使用有状态地址自动配置技术产生除地址以外的参数</b></p><p>------选项部分包含了发送者的<b>link-layer</b>地址</p><p>------选项部分包含了MTU、地址前缀</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.无题</b></p><p>①当同一链路上有多台路由器时，使用其中一台作为网关，备份其他台路由器</p><p>②路由器也可以获取地址，会获得缺省路由</p><p>③主机可以获取地址，会获得缺省网关</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、重新编制技术</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1.地址生命周期（与自动配置息息相关）（详情参考前文）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-69de8a96f31cb314050d45a8966f5c86_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1270\" data-rawheight=\"300\" class=\"origin_image zh-lightbox-thumb\" width=\"1270\" data-original=\"https://pic3.zhimg.com/v2-69de8a96f31cb314050d45a8966f5c86_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1270&#39; height=&#39;300&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1270\" data-rawheight=\"300\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1270\" data-original=\"https://pic3.zhimg.com/v2-69de8a96f31cb314050d45a8966f5c86_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-69de8a96f31cb314050d45a8966f5c86_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>2.不间断流量的重新编制</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e3c3ca38037c21be48d48d91c199fdb3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"787\" data-rawheight=\"72\" class=\"origin_image zh-lightbox-thumb\" width=\"787\" data-original=\"https://pic4.zhimg.com/v2-e3c3ca38037c21be48d48d91c199fdb3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;787&#39; height=&#39;72&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"787\" data-rawheight=\"72\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"787\" data-original=\"https://pic4.zhimg.com/v2-e3c3ca38037c21be48d48d91c199fdb3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e3c3ca38037c21be48d48d91c199fdb3_b.jpg\"/></figure><p><b>PS：第一个43200是 Valid lifetime，第二个 0 是preferred时间</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>三、有状态自动配置</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>1.开启有状态自动配置</p><p>①M位-置1</p><p>②O位-置1</p><p class=\"ztext-empty-paragraph\"><br/></p><p>2.过程</p><p>①进行RS、RA交互，进入有状态自动配置</p><p>②开启DHCP请求，进行四次握手</p><p class=\"ztext-empty-paragraph\"><br/></p><p>PS：无状态、有状态最大的区别是<b>无状态只下发前缀地址信息</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>PS：有无状态技术混用</p><p>------M位-置0</p><p>------O位-置1</p><p class=\"ztext-empty-paragraph\"><br/></p><p>4.DHCP-PD（prefix delegation前缀代理）</p><p><b>如图：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-7dcf2863c12b9c4e9e90b56252e9b71c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1326\" data-rawheight=\"476\" class=\"origin_image zh-lightbox-thumb\" width=\"1326\" data-original=\"https://pic1.zhimg.com/v2-7dcf2863c12b9c4e9e90b56252e9b71c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1326&#39; height=&#39;476&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1326\" data-rawheight=\"476\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1326\" data-original=\"https://pic1.zhimg.com/v2-7dcf2863c12b9c4e9e90b56252e9b71c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7dcf2863c12b9c4e9e90b56252e9b71c_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>小结一波：IPv4与IPv6</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-9f57e5d9ffd9e0c56a00e74c5aca87dc_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1191\" data-rawheight=\"519\" class=\"origin_image zh-lightbox-thumb\" width=\"1191\" data-original=\"https://pic1.zhimg.com/v2-9f57e5d9ffd9e0c56a00e74c5aca87dc_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1191&#39; height=&#39;519&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1191\" data-rawheight=\"519\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1191\" data-original=\"https://pic1.zhimg.com/v2-9f57e5d9ffd9e0c56a00e74c5aca87dc_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-9f57e5d9ffd9e0c56a00e74c5aca87dc_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "路由器", 
                    "tagLink": "https://api.zhihu.com/topics/19561099"
                }, 
                {
                    "tag": "科技", 
                    "tagLink": "https://api.zhihu.com/topics/19556664"
                }, 
                {
                    "tag": "IPv6", 
                    "tagLink": "https://api.zhihu.com/topics/19556734"
                }
            ], 
            "comments": [
                {
                    "userName": "njiok", 
                    "userLink": "https://www.zhihu.com/people/e6223fc1e3e7ca2e85df4b9f097f7fc8", 
                    "content": "<p>PD和ND方式能不能多讲讲？</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "惊风落雨", 
                            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
                            "content": "因为写出来太费劲了，所以大多都是纲要式的概述", 
                            "likes": 0, 
                            "replyToAuthor": "njiok"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37562391", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 11, 
            "title": "IPv6之基础协议（3）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37338216\" class=\"internal\">IPv6之地址小结（1）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37358988\" class=\"internal\">IPv6之报头小结（2）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37707870\" class=\"internal\">IPv6之自动配置（4）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37772667\" class=\"internal\">IPv6之杂七杂八（5）</a></p><p><b>序</b>：孤掌难鸣，让我们看看支撑IPv6各种机制的周边协议</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、ICMPv6协议</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.ICMP协议概述</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-0f9767bf9dfa1eeab94b8067f575e7de_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1068\" data-rawheight=\"325\" class=\"origin_image zh-lightbox-thumb\" width=\"1068\" data-original=\"https://pic3.zhimg.com/v2-0f9767bf9dfa1eeab94b8067f575e7de_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1068&#39; height=&#39;325&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1068\" data-rawheight=\"325\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1068\" data-original=\"https://pic3.zhimg.com/v2-0f9767bf9dfa1eeab94b8067f575e7de_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-0f9767bf9dfa1eeab94b8067f575e7de_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.ICMPv6报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c115c3ba8b00a81b26a35391ee1e9e0d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1185\" data-rawheight=\"405\" class=\"origin_image zh-lightbox-thumb\" width=\"1185\" data-original=\"https://pic2.zhimg.com/v2-c115c3ba8b00a81b26a35391ee1e9e0d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1185&#39; height=&#39;405&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1185\" data-rawheight=\"405\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1185\" data-original=\"https://pic2.zhimg.com/v2-c115c3ba8b00a81b26a35391ee1e9e0d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c115c3ba8b00a81b26a35391ee1e9e0d_b.jpg\"/></figure><p>①ICMPv6 type</p><p>------错误类消息（error），也称差错报文，最高bit位为0，也就是ICMPv6 type【0，127】</p><p>Ⅰ，目的不可达（Destination Unreachable，type=1）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-20159f88ec11eba08c2414160ff04f51_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"886\" data-rawheight=\"160\" class=\"origin_image zh-lightbox-thumb\" width=\"886\" data-original=\"https://pic2.zhimg.com/v2-20159f88ec11eba08c2414160ff04f51_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;886&#39; height=&#39;160&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"886\" data-rawheight=\"160\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"886\" data-original=\"https://pic2.zhimg.com/v2-20159f88ec11eba08c2414160ff04f51_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-20159f88ec11eba08c2414160ff04f51_b.jpg\"/></figure><p>Ⅱ，数据包超长（packet too big，type=2）  code = 0</p><p>Ⅲ，超时（time exceeded，type=3）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-21c595a0eb927a8f935869083c63a4bd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"870\" data-rawheight=\"68\" class=\"origin_image zh-lightbox-thumb\" width=\"870\" data-original=\"https://pic2.zhimg.com/v2-21c595a0eb927a8f935869083c63a4bd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;870&#39; height=&#39;68&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"870\" data-rawheight=\"68\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"870\" data-original=\"https://pic2.zhimg.com/v2-21c595a0eb927a8f935869083c63a4bd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-21c595a0eb927a8f935869083c63a4bd_b.jpg\"/></figure><p>Ⅳ，参数问题（parameter problem，type=4）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4ab6458e3e018e5977c05b1154010b1c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"952\" data-rawheight=\"97\" class=\"origin_image zh-lightbox-thumb\" width=\"952\" data-original=\"https://pic1.zhimg.com/v2-4ab6458e3e018e5977c05b1154010b1c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;952&#39; height=&#39;97&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"952\" data-rawheight=\"97\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"952\" data-original=\"https://pic1.zhimg.com/v2-4ab6458e3e018e5977c05b1154010b1c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4ab6458e3e018e5977c05b1154010b1c_b.jpg\"/></figure><p>------信息类消息（information），也称信息报文，最高bit位为1，也就是ICMPv6 type【128，255】</p><p>Ⅰ，回送请求报文（echo request，type=128 ） code = 0</p><p>Ⅱ，回送应答报文（echo reply，type=129） code = 0</p><p class=\"ztext-empty-paragraph\"><br/></p><p>3.ICMPv6协议其他用途</p><p>①邻居发现协议</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-e5a0e195e6b9f11584e87c4d7bb6c7dd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1261\" data-rawheight=\"254\" class=\"origin_image zh-lightbox-thumb\" width=\"1261\" data-original=\"https://pic2.zhimg.com/v2-e5a0e195e6b9f11584e87c4d7bb6c7dd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1261&#39; height=&#39;254&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1261\" data-rawheight=\"254\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1261\" data-original=\"https://pic2.zhimg.com/v2-e5a0e195e6b9f11584e87c4d7bb6c7dd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-e5a0e195e6b9f11584e87c4d7bb6c7dd_b.jpg\"/></figure><p>②多播侦听发现协议</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-9662c0586c74f28b02fc9bb23ad60ee5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1136\" data-rawheight=\"162\" class=\"origin_image zh-lightbox-thumb\" width=\"1136\" data-original=\"https://pic2.zhimg.com/v2-9662c0586c74f28b02fc9bb23ad60ee5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1136&#39; height=&#39;162&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1136\" data-rawheight=\"162\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1136\" data-original=\"https://pic2.zhimg.com/v2-9662c0586c74f28b02fc9bb23ad60ee5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-9662c0586c74f28b02fc9bb23ad60ee5_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、NDP邻居发现协议</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.实现功能概述（通过ICMP报文实现）</b></p><p>①地址协议：相当于IPv4中的ARP</p><p>②重复地址检测（duplicate address detect，DAD）</p><p>③跟踪邻居状态</p><p>④重定向</p><p>⑤前缀重新编制</p><p>⑥无状态自动配置</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.五种ICMPv6消息</b></p><p>①路由器请求，RS</p><p>②路由器请求，RA</p><p>③邻居请求，NS</p><p>④邻居公告，NA</p><p>⑤重定向，R</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.不同NDP机制使用不同ICMPv6消息</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-d429b9df9b6019749fd590687346d205_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1286\" data-rawheight=\"422\" class=\"origin_image zh-lightbox-thumb\" width=\"1286\" data-original=\"https://pic2.zhimg.com/v2-d429b9df9b6019749fd590687346d205_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1286&#39; height=&#39;422&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1286\" data-rawheight=\"422\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1286\" data-original=\"https://pic2.zhimg.com/v2-d429b9df9b6019749fd590687346d205_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-d429b9df9b6019749fd590687346d205_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.地址解析</b></p><p>①使用两种ICMPv6报文</p><p>------邻居请求（NS，type=135，code=0）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-529a928b0a7f68e65b5f024f6fbce270_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1070\" data-rawheight=\"305\" class=\"origin_image zh-lightbox-thumb\" width=\"1070\" data-original=\"https://pic1.zhimg.com/v2-529a928b0a7f68e65b5f024f6fbce270_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1070&#39; height=&#39;305&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1070\" data-rawheight=\"305\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1070\" data-original=\"https://pic1.zhimg.com/v2-529a928b0a7f68e65b5f024f6fbce270_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-529a928b0a7f68e65b5f024f6fbce270_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-583b75c39901000384b1fd86dfeeeffe_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"919\" data-rawheight=\"247\" class=\"origin_image zh-lightbox-thumb\" width=\"919\" data-original=\"https://pic3.zhimg.com/v2-583b75c39901000384b1fd86dfeeeffe_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;919&#39; height=&#39;247&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"919\" data-rawheight=\"247\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"919\" data-original=\"https://pic3.zhimg.com/v2-583b75c39901000384b1fd86dfeeeffe_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-583b75c39901000384b1fd86dfeeeffe_b.jpg\"/></figure><p>------邻居通告（NA，type=136，code=0）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-7f97145c6866c364267a874e4c88de17_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"821\" data-rawheight=\"283\" class=\"origin_image zh-lightbox-thumb\" width=\"821\" data-original=\"https://pic4.zhimg.com/v2-7f97145c6866c364267a874e4c88de17_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;821&#39; height=&#39;283&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"821\" data-rawheight=\"283\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"821\" data-original=\"https://pic4.zhimg.com/v2-7f97145c6866c364267a874e4c88de17_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-7f97145c6866c364267a874e4c88de17_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-0475dc1c09fd898ea3db0c02e817f5f0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1091\" data-rawheight=\"138\" class=\"origin_image zh-lightbox-thumb\" width=\"1091\" data-original=\"https://pic1.zhimg.com/v2-0475dc1c09fd898ea3db0c02e817f5f0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1091&#39; height=&#39;138&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1091\" data-rawheight=\"138\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1091\" data-original=\"https://pic1.zhimg.com/v2-0475dc1c09fd898ea3db0c02e817f5f0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-0475dc1c09fd898ea3db0c02e817f5f0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-30148bb2b06cd65301d64b58bb3f8626_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1074\" data-rawheight=\"327\" class=\"origin_image zh-lightbox-thumb\" width=\"1074\" data-original=\"https://pic3.zhimg.com/v2-30148bb2b06cd65301d64b58bb3f8626_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1074&#39; height=&#39;327&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1074\" data-rawheight=\"327\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1074\" data-original=\"https://pic3.zhimg.com/v2-30148bb2b06cd65301d64b58bb3f8626_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-30148bb2b06cd65301d64b58bb3f8626_b.jpg\"/></figure><p>②图解地址解析</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-1fd606db8fa30f97c6f8a50a192f415e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1178\" data-rawheight=\"586\" class=\"origin_image zh-lightbox-thumb\" width=\"1178\" data-original=\"https://pic3.zhimg.com/v2-1fd606db8fa30f97c6f8a50a192f415e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1178&#39; height=&#39;586&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1178\" data-rawheight=\"586\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1178\" data-original=\"https://pic3.zhimg.com/v2-1fd606db8fa30f97c6f8a50a192f415e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-1fd606db8fa30f97c6f8a50a192f415e_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.重复地址检测</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>PS：IPv6地址周期</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-47379b738c48e74f9c5fd69a58b92ac3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1208\" data-rawheight=\"309\" class=\"origin_image zh-lightbox-thumb\" width=\"1208\" data-original=\"https://pic4.zhimg.com/v2-47379b738c48e74f9c5fd69a58b92ac3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1208&#39; height=&#39;309&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1208\" data-rawheight=\"309\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1208\" data-original=\"https://pic4.zhimg.com/v2-47379b738c48e74f9c5fd69a58b92ac3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-47379b738c48e74f9c5fd69a58b92ac3_b.jpg\"/></figure><p>在preferred time 和 valid lifetime之间的叫做deprecated（反对）状态，当地址达到这个时间段的时候，地址不能主动的发起连接只能是被动的接受连接，过了valid lifetime时间，地址就变为invalid，这时任何连接就会down掉</p><p class=\"ztext-empty-paragraph\"><br/></p><p>①DAD通过类似地址解析的方法，但是发送的<b>地址解析是本身的IP地址，源地址是：：</b></p><p>------ 如果存在重复地址，则地址冲突，失效</p><p>------ 如果不存在冲突地址，一秒后，主动发送NA报文（没有请求的NA报文）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.跟踪邻居状态（临节点可达性检测）</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>①邻居状态种类：</p><p>------ incomplete 未完成</p><p>------ reachable 可达</p><p>------stale 陈旧</p><p>------delay 延迟</p><p>------probe 探查</p><p>②跟踪邻居状态目的</p><p>------确认同一链路上节点的2层地址</p><p>------找到可以转发它们数据包的临近路由器</p><p>------随时跟踪那些路由器可达，那些不可达，并且检测有改变的链路层地址\t</p><p class=\"ztext-empty-paragraph\"><br/></p><p>③ 当节点A要访问节点B，A的缓存中无B的条目，状态机如下</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c27ae1baedd18494595bc088ce72b425_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1164\" data-rawheight=\"259\" class=\"origin_image zh-lightbox-thumb\" width=\"1164\" data-original=\"https://pic2.zhimg.com/v2-c27ae1baedd18494595bc088ce72b425_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1164&#39; height=&#39;259&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1164\" data-rawheight=\"259\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1164\" data-original=\"https://pic2.zhimg.com/v2-c27ae1baedd18494595bc088ce72b425_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c27ae1baedd18494595bc088ce72b425_b.jpg\"/></figure><p>------one，A先发送NS，并生成缓存条目，状态为Incomplete<b>（伴随地址解析过程）</b></p><p>------two，若B回复NA，则Incomplete变成Reachable；如果没有回应连发三次，每次间隔一秒，然后删除条目，Incomplete变为Empty</p><p>------three，经过ReachableTime（缺省30s），B的条目状态Reachable变为Stale</p><p>------four，或者在Reachable状态时，收到B的<b>非请求NA</b>，且链路层地址不同，则马上变为Stale（<b>通常是DAD地址重复检测，暗示着地址变更</b>）</p><p>------five，在Stale状态若A要向B发送数据，发送数据，并从Stale变为Delay，等待应用层的提示信息，表示邻居可达</p><p>------six，在Delay_First_Probe_Time（默认5s）内，若有NA应答或者应用层的提示信息，则Delay变为Reachable；若无应用层提示信息，Delay变为Probe</p><p>------seven，在Probe状态下，每个RetransTimer（默认1秒）发送单播NS，发送MAX_UNICAST_SOLICIT（缺省3个）后在等RestransTimer，有应答则变为Reachable，否则则删除表项</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>7.ICMPv6重定向</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>PS：路由器用重定向通知主机有更好的路由</b></p><p><b>PS：路由器可以产生重定向报文，但是不能处理收到的重定向报文</b></p><p>①ICMP重定向消息</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-a0077aa791555c67d510257138706a4e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1130\" data-rawheight=\"380\" class=\"origin_image zh-lightbox-thumb\" width=\"1130\" data-original=\"https://pic3.zhimg.com/v2-a0077aa791555c67d510257138706a4e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1130&#39; height=&#39;380&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1130\" data-rawheight=\"380\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1130\" data-original=\"https://pic3.zhimg.com/v2-a0077aa791555c67d510257138706a4e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-a0077aa791555c67d510257138706a4e_b.jpg\"/></figure><p>------<b>target address</b>：包含了路径中更优的下一跳接口的本地链路地址</p><p>------<b>destination address</b>：被重定向的目的地址</p><p>------option：包含了最佳下一跳路由器的链路层地址</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-48acadb39229543293f84f8b383886f1_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1919\" data-rawheight=\"329\" class=\"origin_image zh-lightbox-thumb\" width=\"1919\" data-original=\"https://pic2.zhimg.com/v2-48acadb39229543293f84f8b383886f1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1919&#39; height=&#39;329&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1919\" data-rawheight=\"329\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1919\" data-original=\"https://pic2.zhimg.com/v2-48acadb39229543293f84f8b383886f1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-48acadb39229543293f84f8b383886f1_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>8.路由器发现（略写，详情看下一章）</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p>①路由器周期发送RA报文</p><p>------链路上的路由器会定期（200s）RA（router advertisement）消息</p><p>------收到RA的主机将加入默认路由器列表</p><p><b>RA报文大致内容：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5a260b5bd612516abbdc7811bb8e34a7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"898\" data-rawheight=\"173\" class=\"origin_image zh-lightbox-thumb\" width=\"898\" data-original=\"https://pic4.zhimg.com/v2-5a260b5bd612516abbdc7811bb8e34a7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;898&#39; height=&#39;173&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"898\" data-rawheight=\"173\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"898\" data-original=\"https://pic4.zhimg.com/v2-5a260b5bd612516abbdc7811bb8e34a7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5a260b5bd612516abbdc7811bb8e34a7_b.jpg\"/></figure><p>②主机发送RS报文</p><p>------主机接口初始化的时候发送RS（router solicitation）消息，路由器回应RA</p><p>------回复RA可以直接单播给请求主机，也可以选择组播到所有节点</p><p><b>RS报文大致内容：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5c4f6c4912ccbe6bbfb532e87a530feb_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"968\" data-rawheight=\"109\" class=\"origin_image zh-lightbox-thumb\" width=\"968\" data-original=\"https://pic4.zhimg.com/v2-5c4f6c4912ccbe6bbfb532e87a530feb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;968&#39; height=&#39;109&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"968\" data-rawheight=\"109\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"968\" data-original=\"https://pic4.zhimg.com/v2-5c4f6c4912ccbe6bbfb532e87a530feb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5c4f6c4912ccbe6bbfb532e87a530feb_b.jpg\"/></figure><p></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "路由器", 
                    "tagLink": "https://api.zhihu.com/topics/19561099"
                }, 
                {
                    "tag": "IPv6", 
                    "tagLink": "https://api.zhihu.com/topics/19556734"
                }, 
                {
                    "tag": "科技", 
                    "tagLink": "https://api.zhihu.com/topics/19556664"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37358988", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "IPv6之报头小结（2）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37338216\" class=\"internal\">IPv6之地址小结（1）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37562391\" class=\"internal\">IPv6之基础协议（3）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37707870\" class=\"internal\">IPv6之自动配置（4）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37772667\" class=\"internal\">IPv6之杂七杂八（5）</a></p><p><b>序</b>：IPv6报文的世界你想了解下不？</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、IPv6报文格式</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.IPv6报文组成</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-a034981dff4dff03d8d1d248e181acdd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1226\" data-rawheight=\"236\" class=\"origin_image zh-lightbox-thumb\" width=\"1226\" data-original=\"https://pic2.zhimg.com/v2-a034981dff4dff03d8d1d248e181acdd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1226&#39; height=&#39;236&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1226\" data-rawheight=\"236\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1226\" data-original=\"https://pic2.zhimg.com/v2-a034981dff4dff03d8d1d248e181acdd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-a034981dff4dff03d8d1d248e181acdd_b.jpg\"/></figure><p>①基本报头：</p><p>------包括报文转发的基本信息，路由器通过基本报头解析就能完成绝大数的报文转发任务</p><p>②扩展报头：</p><p>------包括一些扩展的报文转发信息，该部分不是必需的，也不是每个路由器都需要处理，一般只有目的路由器或主机才处理</p><p>③上层协议数据单元</p><p>------一般由上层协议报头和它的有效载荷构成，该部分与IPv4没有区别</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.IPv4与IPv6基本报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8c11a394cfeb219ed1a5f8e4a1b5d90f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"728\" data-rawheight=\"352\" class=\"origin_image zh-lightbox-thumb\" width=\"728\" data-original=\"https://pic4.zhimg.com/v2-8c11a394cfeb219ed1a5f8e4a1b5d90f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;728&#39; height=&#39;352&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"728\" data-rawheight=\"352\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"728\" data-original=\"https://pic4.zhimg.com/v2-8c11a394cfeb219ed1a5f8e4a1b5d90f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8c11a394cfeb219ed1a5f8e4a1b5d90f_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-3851c817694c75b717e3986b584b8a69_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"725\" data-rawheight=\"248\" class=\"origin_image zh-lightbox-thumb\" width=\"725\" data-original=\"https://pic2.zhimg.com/v2-3851c817694c75b717e3986b584b8a69_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;725&#39; height=&#39;248&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"725\" data-rawheight=\"248\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"725\" data-original=\"https://pic2.zhimg.com/v2-3851c817694c75b717e3986b584b8a69_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-3851c817694c75b717e3986b584b8a69_b.jpg\"/></figure><p><b>PS：</b></p><p>------version=6</p><p>------traffic class：对应于IPv4中的TOS</p><p>------flow label ：用于指示流，与“QOS”联用，在IPv4中常用五元组确定一个报文流，现在IP+flow直接可以确定流</p><p>------payload length ：IPv6数据包上层负载长度</p><p>------next header ：下一个报头</p><p>------hop limit： 等于IPv4中的TTL</p><p>------source address：略</p><p>------destination address：略</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>①</b>IPv6数据包与IPv4数据包的区别</p><p>------IPv6数据包定长为40字节，IPv4不定长</p><p>------IPv6报头字段64位对齐，能够直接对内存存取，（IPv4报头32位对齐）</p><p><b>②</b>IPv6数据包去掉的部分</p><p>------报头长度</p><p>------标识、标志、和偏移字段\t</p><p>------报头检验和</p><p>------选项和填充</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-462a4a2e2af9d6fd024ee76bad80ea12_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"838\" data-rawheight=\"215\" class=\"origin_image zh-lightbox-thumb\" width=\"838\" data-original=\"https://pic3.zhimg.com/v2-462a4a2e2af9d6fd024ee76bad80ea12_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;838&#39; height=&#39;215&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"838\" data-rawheight=\"215\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"838\" data-original=\"https://pic3.zhimg.com/v2-462a4a2e2af9d6fd024ee76bad80ea12_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-462a4a2e2af9d6fd024ee76bad80ea12_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.IPv6扩展报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-f3347e69d393f6b975bdf1b30976223e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1346\" data-rawheight=\"561\" class=\"origin_image zh-lightbox-thumb\" width=\"1346\" data-original=\"https://pic3.zhimg.com/v2-f3347e69d393f6b975bdf1b30976223e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1346&#39; height=&#39;561&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1346\" data-rawheight=\"561\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1346\" data-original=\"https://pic3.zhimg.com/v2-f3347e69d393f6b975bdf1b30976223e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-f3347e69d393f6b975bdf1b30976223e_b.jpg\"/></figure><p>①四种基本扩展报头</p><p>------逐条选项报头：该扩展报头被每一条处理，可以包含多种选项，如路由器警告</p><p>------目的选项报头：目的地处理，可以包含多种选项，如Mobile，IPv6的家乡地址</p><p>------路由报头：制定源路由，类似于IPv4中的源路由选项，IPv6源节点指定到达目的地必须经过的中间节点。<b>IPv6基本报头的目的地址不是分组的最终目的地址，而是路由扩展报头所列的第一个地址</b></p><p>------分段报头：IP报文分片信息，只由目的地处理</p><p>②IPsec定义</p><p>------认证报头：IPSec用扩展报头，只有目的地处理</p><p>------封装安全净载报头：IPSec用扩展报头，只有目的地处理</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.IPv6扩展报头规约</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-bd41d9afa7fddaf0d2aa277be9b1c380_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"774\" data-rawheight=\"143\" class=\"origin_image zh-lightbox-thumb\" width=\"774\" data-original=\"https://pic1.zhimg.com/v2-bd41d9afa7fddaf0d2aa277be9b1c380_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;774&#39; height=&#39;143&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"774\" data-rawheight=\"143\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"774\" data-original=\"https://pic1.zhimg.com/v2-bd41d9afa7fddaf0d2aa277be9b1c380_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-bd41d9afa7fddaf0d2aa277be9b1c380_b.jpg\"/></figure><p>①逐跳选项报头</p><p>②目的选项报头</p><p>③路由报头</p><p>④分段报头</p><p>⑤认证报头</p><p>⑥安全封装净载报头</p><p>⑦目的选项报头</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-9254edd3fd27b650d8f773178a8fb293_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"901\" data-rawheight=\"254\" class=\"origin_image zh-lightbox-thumb\" width=\"901\" data-original=\"https://pic4.zhimg.com/v2-9254edd3fd27b650d8f773178a8fb293_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;901&#39; height=&#39;254&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"901\" data-rawheight=\"254\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"901\" data-original=\"https://pic4.zhimg.com/v2-9254edd3fd27b650d8f773178a8fb293_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-9254edd3fd27b650d8f773178a8fb293_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.逐跳选项报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-9afb4de446a94593ddbe36ecf87f7436_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1304\" data-rawheight=\"189\" class=\"origin_image zh-lightbox-thumb\" width=\"1304\" data-original=\"https://pic3.zhimg.com/v2-9afb4de446a94593ddbe36ecf87f7436_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1304&#39; height=&#39;189&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1304\" data-rawheight=\"189\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1304\" data-original=\"https://pic3.zhimg.com/v2-9afb4de446a94593ddbe36ecf87f7436_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-9afb4de446a94593ddbe36ecf87f7436_b.jpg\"/></figure><p>①next header：代表下一个报头协议类型</p><p>②hdr ext len：标识选项报头的长度（不包括next header）</p><p>③options：是一些列的选项字段和填充字段组合</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-2084ff8437ae7fa540064723207cd106_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"717\" data-rawheight=\"140\" class=\"origin_image zh-lightbox-thumb\" width=\"717\" data-original=\"https://pic3.zhimg.com/v2-2084ff8437ae7fa540064723207cd106_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;717&#39; height=&#39;140&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"717\" data-rawheight=\"140\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"717\" data-original=\"https://pic3.zhimg.com/v2-2084ff8437ae7fa540064723207cd106_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-2084ff8437ae7fa540064723207cd106_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>------选项段采用TLC编码格式（类型-长度-值）</p><p>------64位对齐的填充有两种</p><p>------单字节填充 0 </p><p>------多字节填充填充<b> 1 ，长度，数据</b></p><p><b>④作用：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-d606d75c3bbdb4ddcb01d1cc8ce01aba_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1261\" data-rawheight=\"520\" class=\"origin_image zh-lightbox-thumb\" width=\"1261\" data-original=\"https://pic3.zhimg.com/v2-d606d75c3bbdb4ddcb01d1cc8ce01aba_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1261&#39; height=&#39;520&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1261\" data-rawheight=\"520\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1261\" data-original=\"https://pic3.zhimg.com/v2-d606d75c3bbdb4ddcb01d1cc8ce01aba_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-d606d75c3bbdb4ddcb01d1cc8ce01aba_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-c5e7425fa6d7d03cfc9aedba58f5f9a8_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1156\" data-rawheight=\"399\" class=\"origin_image zh-lightbox-thumb\" width=\"1156\" data-original=\"https://pic1.zhimg.com/v2-c5e7425fa6d7d03cfc9aedba58f5f9a8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1156&#39; height=&#39;399&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1156\" data-rawheight=\"399\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1156\" data-original=\"https://pic1.zhimg.com/v2-c5e7425fa6d7d03cfc9aedba58f5f9a8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-c5e7425fa6d7d03cfc9aedba58f5f9a8_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.路由报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-b8c118da422f3aa77f0bf1d616016d09_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1355\" data-rawheight=\"577\" class=\"origin_image zh-lightbox-thumb\" width=\"1355\" data-original=\"https://pic2.zhimg.com/v2-b8c118da422f3aa77f0bf1d616016d09_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1355&#39; height=&#39;577&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1355\" data-rawheight=\"577\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1355\" data-original=\"https://pic2.zhimg.com/v2-b8c118da422f3aa77f0bf1d616016d09_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-b8c118da422f3aa77f0bf1d616016d09_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.分段报头   </b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-a26968ebfaf7bdaab2087ed96f7bbd84_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1354\" data-rawheight=\"503\" class=\"origin_image zh-lightbox-thumb\" width=\"1354\" data-original=\"https://pic1.zhimg.com/v2-a26968ebfaf7bdaab2087ed96f7bbd84_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1354&#39; height=&#39;503&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1354\" data-rawheight=\"503\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1354\" data-original=\"https://pic1.zhimg.com/v2-a26968ebfaf7bdaab2087ed96f7bbd84_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-a26968ebfaf7bdaab2087ed96f7bbd84_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>7.目的选项报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-09747625d0edc50ae13d1a6978582d75_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1363\" data-rawheight=\"425\" class=\"origin_image zh-lightbox-thumb\" width=\"1363\" data-original=\"https://pic2.zhimg.com/v2-09747625d0edc50ae13d1a6978582d75_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1363&#39; height=&#39;425&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1363\" data-rawheight=\"425\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1363\" data-original=\"https://pic2.zhimg.com/v2-09747625d0edc50ae13d1a6978582d75_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-09747625d0edc50ae13d1a6978582d75_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>8.认证报头、封装安全净载报头（AH\\ESP\\IKE ）</b></p><p><b>------略过</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>最后，IPv6基础中莫名奇妙的小结：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-17e12d29b47db6b006995d7aff952471_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1245\" data-rawheight=\"606\" class=\"origin_image zh-lightbox-thumb\" width=\"1245\" data-original=\"https://pic2.zhimg.com/v2-17e12d29b47db6b006995d7aff952471_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1245&#39; height=&#39;606&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1245\" data-rawheight=\"606\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1245\" data-original=\"https://pic2.zhimg.com/v2-17e12d29b47db6b006995d7aff952471_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-17e12d29b47db6b006995d7aff952471_b.jpg\"/></figure><p></p><p></p>", 
            "topic": [
                {
                    "tag": "路由器", 
                    "tagLink": "https://api.zhihu.com/topics/19561099"
                }, 
                {
                    "tag": "IPv6", 
                    "tagLink": "https://api.zhihu.com/topics/19556734"
                }, 
                {
                    "tag": "科技", 
                    "tagLink": "https://api.zhihu.com/topics/19556664"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37345487", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 3, 
            "title": "新目录", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/35203334\" class=\"internal\">&amp;番外篇之安全技术&amp;</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/35888725\" class=\"internal\">&amp;报文头部库&amp;</a></p><p>一、技术类</p><p>1.基础入门系列</p><p><a href=\"https://zhuanlan.zhihu.com/p/31634107\" class=\"internal\">0x01：计算机网络简史</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/31803901\" class=\"internal\">0x02：OSI参考模型</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32013844\" class=\"internal\">0x03：IP地址基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32165604\" class=\"internal\">0x04：DNS基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32167585\" class=\"internal\">0x05：ARP基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/34286917\" class=\"internal\">0x06：传输层基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/35206800\" class=\"internal\">0x07：PPP协议</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37836445\" class=\"internal\">0x08：TCP基础特性*</a></p><p>2.中级修炼系列</p><p><a href=\"https://zhuanlan.zhihu.com/p/32247450\" class=\"internal\">0x01:TCP/IP简述</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37338216\" class=\"internal\">0x02：IPv6从零到基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/40890648\" class=\"internal\">0x03：路由协议系列</a></p><p>二、非技术类</p><p>1.网络解读</p><p><a href=\"https://zhuanlan.zhihu.com/p/31855367\" class=\"internal\">0x01：网络工程认知</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/31855681\" class=\"internal\">0x02：网络工程师认知</a></p><p>2.技能规划</p><p><a href=\"https://zhuanlan.zhihu.com/p/31650014\" class=\"internal\">0x01：网络技术攻略</a></p>", 
            "topic": [
                {
                    "tag": "目录", 
                    "tagLink": "https://api.zhihu.com/topics/19790894"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37338216", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 7, 
            "title": "IPv6之地址小结（1）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37358988\" class=\"internal\">IPv6之报头小结（2）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37562391\" class=\"internal\">IPv6之基础协议（3）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37707870\" class=\"internal\">IPv6之自动配置（4）</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/37772667\" class=\"internal\">IPv6之杂七杂八（5）</a></p><p><b>序：当IPv4的地址耗尽时，IPv6的普及就在眼前。誓要让世界每一粒沙子都有IP地址。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、IPv6地址基础</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.IPv6地址分配机构</b></p><p>①IANA\t(最高级组织)</p><p>②RIP、APNIC (区域级别组织)</p><p>③NIR (国家级组织)</p><p>④LIR （运行商级别）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.IPv6地址特点</b></p><p>①更大的地址数量<b>（最*最重要的特点）</b></p><p>②层次化（相比IPv4的扁平化）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-14699f5c72159e111652c246ac55891d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"986\" data-rawheight=\"280\" class=\"origin_image zh-lightbox-thumb\" width=\"986\" data-original=\"https://pic2.zhimg.com/v2-14699f5c72159e111652c246ac55891d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;986&#39; height=&#39;280&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"986\" data-rawheight=\"280\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"986\" data-original=\"https://pic2.zhimg.com/v2-14699f5c72159e111652c246ac55891d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-14699f5c72159e111652c246ac55891d_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>------聚合地址按着公共、站点和\t接口三个层次来进行组织</p><p>------公共：包括服务提供商和交换中心</p><p>------站点：本地站点或者组织机构</p><p>------接口：标识网络上的接口</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.IPv6地址表示方法</b></p><p>①冒号分16进制表示法  0000：1001：0001：0000：0000：0000：0000：0000</p><p>②压缩表示： 每一组的开始，为0的比特新型压缩或者用：：表示连续多组的0（：：只能出现一次）</p><p>------0000：1001：0001：0000：0000：0000：0000：0000（压缩前）</p><p>------0：1001：1：：（压缩后）</p><p>③IPv4嵌套在IPv6上，例如：0：0：0：0：0：0：166.168.1.2 /64（用于自动隧道和NAT-PT中）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.IPv6地址组成</b></p><p>IPv6地址 = 前缀 + 接口标识</p><p>------前缀：相当于v4地址中的网络ID</p><p>------接口标识：相当于v4地址中的主机ID</p><p>------默认用于标识子网的IPv6地址前缀为64位</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c46711ed0d586481841bd9a5b7c3f231_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1098\" data-rawheight=\"136\" class=\"origin_image zh-lightbox-thumb\" width=\"1098\" data-original=\"https://pic2.zhimg.com/v2-c46711ed0d586481841bd9a5b7c3f231_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1098&#39; height=&#39;136&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1098\" data-rawheight=\"136\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1098\" data-original=\"https://pic2.zhimg.com/v2-c46711ed0d586481841bd9a5b7c3f231_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c46711ed0d586481841bd9a5b7c3f231_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.IPv6地址接口ID自动生成规则</b></p><p>①由IEEE EUI-64规范自动生成</p><p><b>（没有MAC地址的接口会借用接口小的以太网口的MAC地址）</b></p><p><b>（纯串口路由器会借用路由器本身烧录的MAC）</b></p><p>------将48比特的MAC地址转化为64比特的接口ID</p><p>------在48位的MAC地址中，0（U/L位）标识MAC是全球唯一<b>（1标识本地）</b>的<b>；</b>g（I/G位）标识MAC是单播还是组播（<b>0标识单播，1标识组播</b>）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-3d11d958b1f2d0ca2959601d9ad9d4da_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1147\" data-rawheight=\"112\" class=\"origin_image zh-lightbox-thumb\" width=\"1147\" data-original=\"https://pic3.zhimg.com/v2-3d11d958b1f2d0ca2959601d9ad9d4da_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1147&#39; height=&#39;112&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1147\" data-rawheight=\"112\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1147\" data-original=\"https://pic3.zhimg.com/v2-3d11d958b1f2d0ca2959601d9ad9d4da_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-3d11d958b1f2d0ca2959601d9ad9d4da_b.jpg\"/></figure><p>------将U/L位反转成1，然后在MAC地址的24位之后插入FFFE，结果如下</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-c3c2d9d62e93f516375a4128f08ddcbb_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1213\" data-rawheight=\"107\" class=\"origin_image zh-lightbox-thumb\" width=\"1213\" data-original=\"https://pic4.zhimg.com/v2-c3c2d9d62e93f516375a4128f08ddcbb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1213&#39; height=&#39;107&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1213\" data-rawheight=\"107\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1213\" data-original=\"https://pic4.zhimg.com/v2-c3c2d9d62e93f516375a4128f08ddcbb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-c3c2d9d62e93f516375a4128f08ddcbb_b.jpg\"/></figure><p>②设备随机生成</p><p>③手工配置</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.IPv6编址</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-444a6ee1f171c9f8e1398169674afc6f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1356\" data-rawheight=\"568\" class=\"origin_image zh-lightbox-thumb\" width=\"1356\" data-original=\"https://pic4.zhimg.com/v2-444a6ee1f171c9f8e1398169674afc6f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1356&#39; height=&#39;568&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1356\" data-rawheight=\"568\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1356\" data-original=\"https://pic4.zhimg.com/v2-444a6ee1f171c9f8e1398169674afc6f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-444a6ee1f171c9f8e1398169674afc6f_b.jpg\"/></figure><p>①多播</p><p>------分配的地址：\tFF00：： /8</p><p>------被请求节点组播地址：\tFF02：1：FF00：0000 /104</p><p>②单播</p><p>------特殊地址</p><p>------未指定地址：\t：：/128</p><p>------环回地址：\t：：1 /128</p><p>------本地链路地址：\tFE80：：/10（ 参考IPv4中的168.254.0.0/16，<b>不能用于路由</b>）</p><p>------可聚合全球单播地址：\t2000：： /3 </p><p>------唯一站点地址：\tFC：： /7</p><p>------兼容地址\t</p><p>③任意播（类似于单播地址，多个端口配置成同一个地址时使用）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>PS：兼容地址用于过渡于V4V6</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-14d69694a324d9fda7bd39ab996d2415_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1463\" data-rawheight=\"608\" class=\"origin_image zh-lightbox-thumb\" width=\"1463\" data-original=\"https://pic2.zhimg.com/v2-14d69694a324d9fda7bd39ab996d2415_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1463&#39; height=&#39;608&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1463\" data-rawheight=\"608\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1463\" data-original=\"https://pic2.zhimg.com/v2-14d69694a324d9fda7bd39ab996d2415_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-14d69694a324d9fda7bd39ab996d2415_b.jpg\"/></figure><p><b>二、IPv6组播地址</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.组播地址格式</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-2aca164355ffc1f5a58e73926bb6e6ab_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1354\" data-rawheight=\"204\" class=\"origin_image zh-lightbox-thumb\" width=\"1354\" data-original=\"https://pic4.zhimg.com/v2-2aca164355ffc1f5a58e73926bb6e6ab_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1354&#39; height=&#39;204&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1354\" data-rawheight=\"204\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1354\" data-original=\"https://pic4.zhimg.com/v2-2aca164355ffc1f5a58e73926bb6e6ab_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-2aca164355ffc1f5a58e73926bb6e6ab_b.jpg\"/></figure><p>①FF开头的地址为组播</p><p>②Flags</p><p>------前3位设为0（固定）</p><p>------最后一位定义地址类型</p><p>------0=固定或众所周知（由IANA分配）</p><p>------1=本地分配或短期（本地，临时）</p><p>③Scope，标识组播组的范围   </p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-9eb10f1105d28233d2930bc40b4038d6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"408\" class=\"origin_image zh-lightbox-thumb\" width=\"802\" data-original=\"https://pic3.zhimg.com/v2-9eb10f1105d28233d2930bc40b4038d6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;802&#39; height=&#39;408&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"802\" data-rawheight=\"408\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"802\" data-original=\"https://pic3.zhimg.com/v2-9eb10f1105d28233d2930bc40b4038d6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-9eb10f1105d28233d2930bc40b4038d6_b.jpg\"/></figure><p>③Group ID，组播组ID</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.Scope之Link-local</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-12c4f079cfc0c957f410f22df9eea01b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1274\" data-rawheight=\"452\" class=\"origin_image zh-lightbox-thumb\" width=\"1274\" data-original=\"https://pic4.zhimg.com/v2-12c4f079cfc0c957f410f22df9eea01b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1274&#39; height=&#39;452&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1274\" data-rawheight=\"452\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1274\" data-original=\"https://pic4.zhimg.com/v2-12c4f079cfc0c957f410f22df9eea01b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-12c4f079cfc0c957f410f22df9eea01b_b.jpg\"/></figure><p>①请求节点组播组</p><p>------IPv6特有的组播地址：</p><p>------每个节点必须为分配给它的每个单播和任播地址加入的一个组播地址，用于<b>DAD地址重复检测和地址解析</b></p><p>------solicited-node组播地址生成过程</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-be02ec29dd421c1f9df22d82e5c273e9_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"959\" data-rawheight=\"181\" class=\"origin_image zh-lightbox-thumb\" width=\"959\" data-original=\"https://pic2.zhimg.com/v2-be02ec29dd421c1f9df22d82e5c273e9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;959&#39; height=&#39;181&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"959\" data-rawheight=\"181\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"959\" data-original=\"https://pic2.zhimg.com/v2-be02ec29dd421c1f9df22d82e5c273e9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-be02ec29dd421c1f9df22d82e5c273e9_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.组播地址的MAC映射</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-70e484dc43907e42e9eb2af163f28801_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1634\" data-rawheight=\"206\" class=\"origin_image zh-lightbox-thumb\" width=\"1634\" data-original=\"https://pic2.zhimg.com/v2-70e484dc43907e42e9eb2af163f28801_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1634&#39; height=&#39;206&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1634\" data-rawheight=\"206\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1634\" data-original=\"https://pic2.zhimg.com/v2-70e484dc43907e42e9eb2af163f28801_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-70e484dc43907e42e9eb2af163f28801_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>小结一下：</b></p><p><b>1.主机节点需要如下地址标识自己</b></p><p><b>------Link-local地址</b></p><p><b>------单播地址</b></p><p><b>------环回地址</b></p><p><b>------all-node和solicited-node组播组</b></p><p><b>2.路由器节点除了以上还有</b></p><p><b>------路由器上的任播地址</b></p><p><b>------独有的组播组</b></p><p><b>3.IPv4v6对比</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4765287e57cfda1040f9aadfcd86152c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1649\" data-rawheight=\"604\" class=\"origin_image zh-lightbox-thumb\" width=\"1649\" data-original=\"https://pic1.zhimg.com/v2-4765287e57cfda1040f9aadfcd86152c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1649&#39; height=&#39;604&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1649\" data-rawheight=\"604\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1649\" data-original=\"https://pic1.zhimg.com/v2-4765287e57cfda1040f9aadfcd86152c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4765287e57cfda1040f9aadfcd86152c_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "IPv6", 
                    "tagLink": "https://api.zhihu.com/topics/19556734"
                }, 
                {
                    "tag": "IP 地址", 
                    "tagLink": "https://api.zhihu.com/topics/19592543"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35888725", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 2, 
            "title": "协议报头汇总", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>报头表：</b></p><p><b>1.IPv4报头</b></p><p><b>2.ARP报头</b></p><p><b>3.ICMP报头</b></p><p>#################---#################</p><p><b>1.IPv4报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-84075206460fc33e280f8889070c5e3d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"245\" class=\"origin_image zh-lightbox-thumb\" width=\"621\" data-original=\"https://pic2.zhimg.com/v2-84075206460fc33e280f8889070c5e3d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;621&#39; height=&#39;245&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"245\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"621\" data-original=\"https://pic2.zhimg.com/v2-84075206460fc33e280f8889070c5e3d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-84075206460fc33e280f8889070c5e3d_b.jpg\"/></figure><p>#版本：0保留--123未分配--4=ipv4--6=ipv6，长度4个字段</p><p>#报头长度：长度4个字段，表示32位字段的ip报头长度；ip报头最小20个八位组最大60个八位组</p><p>#服务类型：用来指定特殊的数据包处理方式，详情参考QOS专题</p><p>#总长度：数据包总长度的长度为16位；用ip数据包的长度减去ip报头长度，就可以确定数据包数据有效的大小；ip数据包最大长度为65535</p><p>#标识符：字段16位；通常与标记字段和分段字段一起用于数据包的分段。标识同一报文</p><p>#标记字段：字段3位，第1位不使用，第2位不分段位（DF），第3位表示更多分段位（MF）</p><p>DF：被设置为1时，不能分段，此时若因不分段不被转发，路由器将向源点发送错误消息，可用于计算MTU值</p><p>MF：除最后一个MF为设置为0，其余都为1。</p><p>MTU：数据帧最多大容纳字节数</p><p>#分段偏移：字段13位，用于指明分段起始点相对于报头起始点的偏移量，用于重组数据包</p><p>若有分段在传输中丢失，会触发重传整组分段，拥塞网络</p><p>#TTL：字段8位，现在用来标记跳数，防止三层环路</p><p>#协议：字段8位，表示传输层协议的协议号</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-c498a1ae394ffc366834b5f88e24ea77_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"630\" data-rawheight=\"208\" class=\"origin_image zh-lightbox-thumb\" width=\"630\" data-original=\"https://pic4.zhimg.com/v2-c498a1ae394ffc366834b5f88e24ea77_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;630&#39; height=&#39;208&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"630\" data-rawheight=\"208\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"630\" data-original=\"https://pic4.zhimg.com/v2-c498a1ae394ffc366834b5f88e24ea77_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-c498a1ae394ffc366834b5f88e24ea77_b.jpg\"/></figure><p>#报头校验和：是针对IP报头的纠错字段。校验和不计算被封装的数据，UDP\\TCP\\ICMP都有各</p><p>自的校验和。当传输中没有发生错误时，16位字段应全是1</p><p>#源地址\\目的地址：字段32位</p><p>#可选项：（日后再做研究）</p><p>①松散源路由选择（loose source routing）</p><p>②严格源路由选择（stric source routing）</p><p>③记录路由（record route）</p><p>④时间戳（timestamp ）</p><p>#填充（padding）：通过在可选项字段后面添加0来补足32位，保证报头长度为32位的倍数</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-31998f6e05764cd496e620d76f9b51e2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"330\" class=\"origin_image zh-lightbox-thumb\" width=\"624\" data-original=\"https://pic3.zhimg.com/v2-31998f6e05764cd496e620d76f9b51e2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;624&#39; height=&#39;330&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"330\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"624\" data-original=\"https://pic3.zhimg.com/v2-31998f6e05764cd496e620d76f9b51e2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-31998f6e05764cd496e620d76f9b51e2_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.ARP报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4e1fb440542cd6ee723d0569d0545bf2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"287\" class=\"origin_image zh-lightbox-thumb\" width=\"622\" data-original=\"https://pic3.zhimg.com/v2-4e1fb440542cd6ee723d0569d0545bf2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;622&#39; height=&#39;287&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"287\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"622\" data-original=\"https://pic3.zhimg.com/v2-4e1fb440542cd6ee723d0569d0545bf2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-4e1fb440542cd6ee723d0569d0545bf2_b.jpg\"/></figure><p>#操作（operation）：指明了一个数据包是<b>ARP请求（1）还是ARP响应（2）</b>。这里还可以发现有其他的值表明ARP的其他用途。如反向ARP请求（3）、反响ARP响应（4）、反转ARP请求（8）、反转ARP响应（9）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-8cfb4fb7c743483f17bab6807dda8752_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"625\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb\" width=\"625\" data-original=\"https://pic3.zhimg.com/v2-8cfb4fb7c743483f17bab6807dda8752_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;625&#39; height=&#39;144&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"625\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"625\" data-original=\"https://pic3.zhimg.com/v2-8cfb4fb7c743483f17bab6807dda8752_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-8cfb4fb7c743483f17bab6807dda8752_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ed9e0acbed85fdeb68050d1aa64fdcd3_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb\" width=\"621\" data-original=\"https://pic4.zhimg.com/v2-ed9e0acbed85fdeb68050d1aa64fdcd3_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;621&#39; height=&#39;144&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"621\" data-original=\"https://pic4.zhimg.com/v2-ed9e0acbed85fdeb68050d1aa64fdcd3_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ed9e0acbed85fdeb68050d1aa64fdcd3_b.jpg\"/></figure><p><b>3.ICMP报头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-0adec18368b313cb1ad43696546691ba_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"85\" class=\"origin_image zh-lightbox-thumb\" width=\"624\" data-original=\"https://pic3.zhimg.com/v2-0adec18368b313cb1ad43696546691ba_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;624&#39; height=&#39;85&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"85\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"624\" data-original=\"https://pic3.zhimg.com/v2-0adec18368b313cb1ad43696546691ba_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-0adec18368b313cb1ad43696546691ba_b.jpg\"/></figure><p>#类型：</p><p>路由器通告（advertisement）和路由器选择（selection）：分别是类型9和类型10，用于ICMP路由器发现协议（IRDP）.IRDP用于某些操作系统发现本地路由器</p><p>重定向（redirection）：是ICMP的类型5，被路由器用于通知主机去往指定目标的网关。</p><p>发生ICMP重定向通常有两种情况：</p><p>1)当路由器从某个接口收到数据还需要从相同接口转发该数据时；</p><p>2)当路由器从某个接口到发往远程网络的数据时发现源ip地址与下一跳属于同一网段时。</p><p>在IOS系统中，缺省状态下重定向功能是打开的。在接口上使用命令：no ip redirects关闭</p><p><b>PING的请求包：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-82883afc3296e0a9a34fa6934d4e9234_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"884\" data-rawheight=\"191\" class=\"origin_image zh-lightbox-thumb\" width=\"884\" data-original=\"https://pic1.zhimg.com/v2-82883afc3296e0a9a34fa6934d4e9234_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;884&#39; height=&#39;191&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"884\" data-rawheight=\"191\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"884\" data-original=\"https://pic1.zhimg.com/v2-82883afc3296e0a9a34fa6934d4e9234_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-82883afc3296e0a9a34fa6934d4e9234_b.jpg\"/></figure><p><b>PING的回复包：</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-f3b81148e421f3385654bca45b8981bc_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"900\" data-rawheight=\"246\" class=\"origin_image zh-lightbox-thumb\" width=\"900\" data-original=\"https://pic1.zhimg.com/v2-f3b81148e421f3385654bca45b8981bc_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;900&#39; height=&#39;246&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"900\" data-rawheight=\"246\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"900\" data-original=\"https://pic1.zhimg.com/v2-f3b81148e421f3385654bca45b8981bc_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-f3b81148e421f3385654bca45b8981bc_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "网络协议", 
                    "tagLink": "https://api.zhihu.com/topics/19779985"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35206800", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 5, 
            "title": "PPP协议基础", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序</b>：当企业增长到超过单一的地理位置的时候，就需要互连各个地区的LAN（局域网），形成企业WAN（广域网），本文将讨论一下主流的广域网协议PPP和HDLC</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、概述</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.HDLC协议</b></p><p>高级数据链路控制（High-Level Data Link Control或简称HDLC），它是思科路由器串行接口的默认封装协议。标准的HDLC只能封装IP协议，思科对标准的HDLC进行了改进，增加了协议字段，并且允许其他网络设备制造厂商使用改进的HDLC协议。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.同步和异步的串行通信</b></p><p><b>异步传输</b>，通常以字符为传输单位，每个字符都要附加一个起始位和停止位，以标记一个字符的开始和结束，并以此实现数据传输同步。所谓异步传输，是指（传输中）字符与字符之间的时间间隔是可以变化的。优点是简单、可靠，适用于面型字符的、对速度要求不严格的通信场合，缺点是通信开销大，每传输一个字符就要附加2~3位，通信效率低下；</p><p><b>同步传输</b>，是以数据块为传输单位。在每个数据块的头部附加一个特殊的字符或比特序列，标记数据块，再在末尾附加一个校验序列，用于对数据传输进行差错控制；所谓同步，就是说发送方发出数据后，等待接收方回应以后才发下一个数据包的通信方式。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.PPP概述</b></p><p>PPP解决了SLIP和HDLC的种种问题，是如今的最主流的广域网协议。PPP还被广泛应用在ATM和以太网上，称为PPPOA和PPPOE。</p><p>PPP有三个重要组成组件：</p><p>①在点对点链路上使用HDLC封装数据。PPP帧格式以HDLC帧格式为基础，做了很少的改动；</p><p>②使用LCP（link control protocol）来建立、设定和测试数据链路层连接；</p><p>③使用NCP（network control protocols）建立和设定不同的网络层协议。PPP的设计是为了同时使用多种网络层协议。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、PPP结构</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.PPP分层体系结构</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-44e8bb32bd3e38de75e19ec7837cd16f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"643\" data-rawheight=\"269\" class=\"origin_image zh-lightbox-thumb\" width=\"643\" data-original=\"https://pic4.zhimg.com/v2-44e8bb32bd3e38de75e19ec7837cd16f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;643&#39; height=&#39;269&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"643\" data-rawheight=\"269\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"643\" data-original=\"https://pic4.zhimg.com/v2-44e8bb32bd3e38de75e19ec7837cd16f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-44e8bb32bd3e38de75e19ec7837cd16f_b.jpg\"/></figure><p>分层体系架构是一个逻辑模型，与OSI参考模型类似。PPP分为LCP和NCP功能子层，LCP主要作用于数据链路层中，而NCP介于网络层和数据链路层之间起作用。</p><p><b>LCP子层，位于物理层之上，主要用来建立、配置和测试数据链路连接外，还有如下功能：</b></p><p><b>①身份验证：</b>路由之间互相验证身份，验证方法有PAP和CHAP。</p><p><b>②压缩：</b>PPP通常运行在速率相对有限的串行链路上，为了提高数据发送效率，采用对数据压缩后再传送的方法。</p><p><b>③错误监测</b></p><p><b>④多链路：</b>PPP具有多链路捆绑的功能（链路聚合，负载均衡）</p><p><b>⑤PPP回拨</b></p><p><b>NCP子层，当LCP将链路建立好了之后，PPP根据不同用户的需要，配置不同上层协议。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.PPP会话建立过程</b></p><p>①链路的建立和配置协商：LCP</p><p>②链路质量检测：LCP（可选功能）</p><p>③网络层协议配置阶段：NCP</p><p>④链路终止：NCP--&gt;LCP</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.PAP和CHAP链路认证</b></p><p><b>PAP</b>（密码验证协议），是一种两次握手验证协议，在网络上采用明文方式传输用户名和口令。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-ca78caec5e050ab44954e71fdf996b7a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"566\" data-rawheight=\"250\" class=\"origin_image zh-lightbox-thumb\" width=\"566\" data-original=\"https://pic3.zhimg.com/v2-ca78caec5e050ab44954e71fdf996b7a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;566&#39; height=&#39;250&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"566\" data-rawheight=\"250\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"566\" data-original=\"https://pic3.zhimg.com/v2-ca78caec5e050ab44954e71fdf996b7a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-ca78caec5e050ab44954e71fdf996b7a_b.jpg\"/></figure><p>①被验证方主动发起验证请求，将本端的用户名和口令发送给验证方；</p><p>②验证方通过查看被验证方用户名和口令是否存在、匹配，来发送接收报文或者拒绝报文；</p><p><b>CHAP</b>（挑战握手验证协议），是一种三次握手验证协议，只在网络上传输用户名，而用户口令不再网络上传播。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-b78db75ac7a3884bfe5cbaf05f4f4843_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"478\" data-rawheight=\"189\" class=\"origin_image zh-lightbox-thumb\" width=\"478\" data-original=\"https://pic4.zhimg.com/v2-b78db75ac7a3884bfe5cbaf05f4f4843_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;478&#39; height=&#39;189&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"478\" data-rawheight=\"189\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"478\" data-original=\"https://pic4.zhimg.com/v2-b78db75ac7a3884bfe5cbaf05f4f4843_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-b78db75ac7a3884bfe5cbaf05f4f4843_b.jpg\"/></figure><p>①验证方主动发起挑战，发送内容是被验证方的用户名；</p><p>②被验证方如果匹配到该用户名，就会将该用户名与口令用MD5算法生成一个Hash值，发送给验证方；</p><p>③验证方用本地数据库中的该用户名和口令用MD5算法生成Hash值，来匹配被验证方发送的Hash值，如果匹配成功，则认证成功；如果匹配失败，则认证失败；</p><p></p>", 
            "topic": [
                {
                    "tag": "PPP（点对点协议）", 
                    "tagLink": "https://api.zhihu.com/topics/19653918"
                }
            ], 
            "comments": [
                {
                    "userName": "klwf", 
                    "userLink": "https://www.zhihu.com/people/f889e174fc72ba73a7801d6caf4206a5", 
                    "content": "请问ppp协议是否有mac层，谢谢", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "惊风落雨", 
                            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
                            "content": "<p>不太清楚MAC层指的哪方面？如果是MAC地址的话，PPP协议不需要MAC地址</p>", 
                            "likes": 0, 
                            "replyToAuthor": "klwf"
                        }
                    ]
                }, 
                {
                    "userName": "小ZCAWDY", 
                    "userLink": "https://www.zhihu.com/people/a17f741a32c7081addb2a0dcf9e01ad0", 
                    "content": "请问在chap认证的时候，认证方如何知道被认证方的用户名的呢", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35203334", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 0, 
            "title": "番外篇之安全目录", 
            "content": "<p></p><p><a href=\"https://zhuanlan.zhihu.com/p/35202989\" class=\"internal\">0x001：密码学基础技术</a></p>", 
            "topic": [
                {
                    "tag": "目录", 
                    "tagLink": "https://api.zhihu.com/topics/19790894"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/35202989", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 5, 
            "title": "密码学基础技术", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><b>序：</b></p><p>密码学是安全通信的基础，因而理解三种基本的加密函数（对称加密、非对称加密和单哈希函数）就显得尤其重要。大多是现有的认证、完整性和机密性技术都源自于三种加密函数</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、基础加密技术</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.对称密钥加密</b></p><p>对称加密，通常指秘密密钥加密，使用一个公共密钥和同一个加密算法来加密和解密报文。如图，A和B约定使用一个相同的加密算法对数据进行加密和解密，同时还应该使用一个公共密钥以用于所选择的加密和解密算法。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-e08e09cec05eb54bc8afa8981814f6ae_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1083\" data-rawheight=\"466\" class=\"origin_image zh-lightbox-thumb\" width=\"1083\" data-original=\"https://pic3.zhimg.com/v2-e08e09cec05eb54bc8afa8981814f6ae_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1083&#39; height=&#39;466&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1083\" data-rawheight=\"466\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1083\" data-original=\"https://pic3.zhimg.com/v2-e08e09cec05eb54bc8afa8981814f6ae_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-e08e09cec05eb54bc8afa8981814f6ae_b.jpg\"/></figure><p>凯撒密码是一种很古老的密钥算法。它用字母表中距离该字母n个字母长度的字母代替原始报文中的每个字母。这种算法就是把字母向右或者向左移位（一般n的值为3）。</p><p><b>以凯撒密码为例，简介公钥加密技术：</b></p><ol><ol><li>A和B约定使用凯撒密码通信，并选取n=3作为密钥；</li><li>A使用凯撒密码加密一条消息发送给B；</li><li>B接收到A的消息后，解密该消息，并阅读其中的机密信息；</li></ol></ol><p>任何不知道密钥的人即使截获了报文也不能解读，但是，如果任何知道算法的人截获了报文，就很容易实施暴力破解。</p><ul><li><b>DES（数据加密标准）</b></li></ul><p>DES前身是被修改卢瑟福算法，1976年呗NIST作为联邦标准采纳。DES对64位的报文块进行操作。该算法使用一系列步骤把64位输入变换成64位输出。标准方式使用64位密钥，其中56是随机选取的。其余8位是奇偶位（每一位对应56位随机值中每个7位）。</p><ul><li><b>3DES（3数据加密标准）</b></li></ul><p>3DES是DES的代替方案，被NIST临时使用，直到被AES代替</p><ul><li><b>AES（高级加密算法）</b></li></ul><p>它能够处理128位的数据块，使用128位、192位和256位三种不同的密钥长度。</p><p><b>密钥加密常用于保证数据的机密性，但是对称密钥面临如下挑战：</b></p><ul><li>经常改变密钥以避免泄露密钥的危险；</li><li>安全地生成密钥；</li><li>安全地分配密钥；</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.非对称加密</b></p><p>非对称加密通常指公钥加密，私钥解密。非对称加密需要两个不相同但却相关的密钥值：一个公钥和一个私钥。如果A和B要使用非对称加密进行通信时，A和B都需要创建他们自己的公/私钥对，并且互相交换公钥。当双方进行安全通信时，A和B使用对方的公钥来对发送的数据进行加密，用自己的私钥对收到的数据进行解密。<b>(保证私钥不泄露是非堆成加密安全的必要条件)</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-2ea2cf8c258bcc62dcd4e19c98a889e6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1395\" data-rawheight=\"678\" class=\"origin_image zh-lightbox-thumb\" width=\"1395\" data-original=\"https://pic3.zhimg.com/v2-2ea2cf8c258bcc62dcd4e19c98a889e6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1395&#39; height=&#39;678&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1395\" data-rawheight=\"678\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1395\" data-original=\"https://pic3.zhimg.com/v2-2ea2cf8c258bcc62dcd4e19c98a889e6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-2ea2cf8c258bcc62dcd4e19c98a889e6_b.jpg\"/></figure><p><b>公钥算法有以下用途：</b></p><ul><li>数据完整性；</li><li>数据机密性；</li><li>发送方不可抵赖；</li><li>发送方认证；</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.哈希函数</b></p><p>哈希函数接收到一条任意长度的输入报文，输出定长代码。该定长代码就叫做原始输入报文的哈希或报文摘要。如果一个算法被认为适合于哈希爱好女书的加密，它必须具有如下特征：</p><ul><li>函数必须是一致的，相同的输入产生相同的输出；</li><li>函数必须是单向的（不可逆的）；</li><li>函数的输出必须是随机的；</li><li>函数的输出必须是唯一的；</li></ul><p><b>单向哈希函数通常提供报文的完整性和可靠性。</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-071e88e72ab0b6c7b06a79ed2a775da5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1466\" data-rawheight=\"604\" class=\"origin_image zh-lightbox-thumb\" width=\"1466\" data-original=\"https://pic2.zhimg.com/v2-071e88e72ab0b6c7b06a79ed2a775da5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1466&#39; height=&#39;604&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1466\" data-rawheight=\"604\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1466\" data-original=\"https://pic2.zhimg.com/v2-071e88e72ab0b6c7b06a79ed2a775da5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-071e88e72ab0b6c7b06a79ed2a775da5_b.jpg\"/></figure><ol><li><b>A写了一个报文，并把报文作为一个哈希函数的输入；</b></li><li><b>哈希函数的输出结构作为指纹添加到发送给B的报文后面；</b></li><li><b>B分离出报文和附加的指纹，并使用该报文作为A使用的同一个哈希函数的输入；</b></li><li><b>然后B匹配哈希值，如果相同，就可以确认报文没有被篡改；</b></li></ol><p>通过哈希函数生成等长的报文摘要，就像人的指纹一样具有唯一性，加在文章之中，用来保证数据的完整性。不过，最大的问题是指纹本身可能被篡改并容易受到中间人攻击。为了更有效的把哈希函数作为指纹使用，可以将它们与公钥技术一起使用来提供<b>数字签名</b>；</p><p><b>常见的哈希函数有以下几种：</b></p><p>MD4（报文摘要4）</p><p>MD5（报文摘要5）</p><p><b>SHA</b>（安全哈希算法）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.数字签名</b></p><p>数字签名是附加到文档后的加密的报文摘要。<b>数字签名确定了发送方身份和文档的完整性</b>，它以公钥加密和单向安全哈希函数算法的结合为基础。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-86682e4d85958ee5ea340b10f53b3109_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1290\" data-rawheight=\"501\" class=\"origin_image zh-lightbox-thumb\" width=\"1290\" data-original=\"https://pic2.zhimg.com/v2-86682e4d85958ee5ea340b10f53b3109_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1290&#39; height=&#39;501&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1290\" data-rawheight=\"501\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1290\" data-original=\"https://pic2.zhimg.com/v2-86682e4d85958ee5ea340b10f53b3109_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-86682e4d85958ee5ea340b10f53b3109_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c2d0ef0f18a02597bdd8b94b607ef419_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1522\" data-rawheight=\"740\" class=\"origin_image zh-lightbox-thumb\" width=\"1522\" data-original=\"https://pic2.zhimg.com/v2-c2d0ef0f18a02597bdd8b94b607ef419_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1522&#39; height=&#39;740&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1522\" data-rawheight=\"740\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1522\" data-original=\"https://pic2.zhimg.com/v2-c2d0ef0f18a02597bdd8b94b607ef419_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c2d0ef0f18a02597bdd8b94b607ef419_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-a32b93c60eab8b3cbeeaf52fcb58abe6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1467\" data-rawheight=\"671\" class=\"origin_image zh-lightbox-thumb\" width=\"1467\" data-original=\"https://pic3.zhimg.com/v2-a32b93c60eab8b3cbeeaf52fcb58abe6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1467&#39; height=&#39;671&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1467\" data-rawheight=\"671\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1467\" data-original=\"https://pic3.zhimg.com/v2-a32b93c60eab8b3cbeeaf52fcb58abe6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-a32b93c60eab8b3cbeeaf52fcb58abe6_b.jpg\"/></figure><p><b>如图是一个如何创建数字签名的例子：</b></p><ol><li>B创建一个公/私钥对；</li><li>B把自己的公钥给A；</li><li>B写一个A的报文，并使用该文档作为哈希函数的输入；</li><li>B用自己的私钥加密哈希算法输出的报文摘要，生成了数字签名；</li></ol><p><b>B发送给A的报文是文档和数字签名的组合，接下来是对数字签名的验证：</b></p><ol><li>A把接收到的报文分离成原始文档和数字签名；</li><li>A用B的公钥解密数字签名，生成原始的报文摘要；</li><li>A把原始文档作为B使用的同一哈希函数的输入，生成一个报文摘要；</li><li>A比较两个报文摘要的一致性；</li></ol><p></p>", 
            "topic": [
                {
                    "tag": "密码学", 
                    "tagLink": "https://api.zhihu.com/topics/19621679"
                }, 
                {
                    "tag": "网络安全", 
                    "tagLink": "https://api.zhihu.com/topics/19554927"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/34286917", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "传输层基础（1）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><b>序：</b>在TCP/IP中有两个代表性的传输层协议，一个是TCP、一个是UDP。TCP提供可靠的通信传输，而UDP通常被用于让广播和细节控制交给应用的通信传输。总之，根据通信的具体特征，选择合适的传输层协议是非常重要的。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、传输层基础</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.传输层定义</b></p><p>在IP首部中有一个协议字段，用来标识网络层的上一层采用哪一种传输层协议。根据这个字段的协议号，就可以识别IP传输的数据部分究竟是TCP的内容，还是UDP的内容。</p><p>同样，传输层的TCP和UDP，为了识别自己传输的数据部分究竟应该发给那个应用，也设定了一个这样的编号字段（<b>叫端口号</b>）。</p><p><b>举个例子：</b>你应该经常听到，网络层（IP）的作用就是寻址、选路，而传输层的作用是<b>端到端</b>（end to end）的信息传输。什么是端到端？比如有两个家庭，一个是梁家、一个是宋家，每个家里都有十口人，一个名叫梁小明的想给名叫宋小丽的送情书。把情书从梁府送到宋府这一过程就好似与网络层和数据链路层共同作用，将数据从一台主机传输到另一台主机。情书顺利地到达了宋府，可是宋府有十口人，所以需要特地注明宋小丽收，这一过程就好似一台主机接收到信息<b>查看端口号</b>，知道该交给那个应用程序处理。这也是所谓的<b>端到端</b>的一种体现。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.通信处理</b></p><p>TCP/IP的众多应用大多以客户端/服务端的形式进行，而且作为服务端的程序必须提前启动，准备接收客户端的请求，否则即使客户端的请求发送过来，也无法做到相应的处理。</p><p>确认一个请求就请发给的是哪个服务端，可以通过接收到的数据包的目标端口号轻松识别。当收到TCP的建立连接请求时，如果目标端口为22，则转发给SSH，如果是80端口则转给HTTP。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.传输层协议</b></p><p>在TCP/IP中能够实现传输层功能的、具有代表性的协议是TCP和UDP。</p><p><b>TCP</b>，是面向连接的、可靠的流协议。流指不间断的数据结构，你可以把它想象成排水管道中的水流。当应用程序采用TCP发送消息时，虽然可以保证发送的顺序，但还是犹如没有任何间隔的数据流发送给接收端。</p><p><b>UDP</b>，是不具有可靠性的数据报协议。细微的处理它会交给上层的应用去完成。在UDP的情况下，虽然可以保证发送消息的大小，但不能保证消息一定会到达。（因此，应用有时会根据自己的需求进行重发处理。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.传输层协议比较</b></p><p>TCP用于在传输层<b>有必要实现可靠传输</b>的情况，由于它是面向有连接并具备顺序控制、重发控制等机制的，所以它可以为应用提供可靠传输。（但是比UDP传输速度慢）</p><p>UDP主要用于那些对高速传输和实时性有较高要求的通信过广播通信。（如视频会议、语音回音、直播等等）</p><p>因此，TCP和UDP应该根据应用的目的按需求使用。</p><p></p><p></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "传输层协议", 
                    "tagLink": "https://api.zhihu.com/topics/19709206"
                }, 
                {
                    "tag": "TCP", 
                    "tagLink": "https://api.zhihu.com/topics/19614026"
                }, 
                {
                    "tag": "UDP", 
                    "tagLink": "https://api.zhihu.com/topics/19567494"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/32247450", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "TCP/IP简述", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p>序：</p><p>本文阅读需要一点点基础</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.tcp/ip协议层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-cc6318fefc78e7ab506300f5d3a0c906_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"37\" class=\"origin_image zh-lightbox-thumb\" width=\"622\" data-original=\"https://pic3.zhimg.com/v2-cc6318fefc78e7ab506300f5d3a0c906_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;622&#39; height=&#39;37&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"37\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"622\" data-original=\"https://pic3.zhimg.com/v2-cc6318fefc78e7ab506300f5d3a0c906_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-cc6318fefc78e7ab506300f5d3a0c906_b.jpg\"/></figure><p>①物理层包含了多种与物理介质相关的协议，这些物理介质用以支撑tcp/ip通信</p><p>#电子/光学协议--描述了信号的各种特性。例如：电压或光强度</p><p>#机械协议--规定了连接器的尺寸或导线的金属成分</p><p>#功能性协议--描述了做什么。例如：EIA-232-D某针脚的作用</p><p>#程序性协议--描述了如何做。例如：EIA-232-D导线上，二进制1表示电压小于-3v</p><p>②数据链路层包含了控制物理层的协议：</p><p>#如何访问和共享介质、怎样识别介质上的设备</p><p>③internet层主要负责定义数据包格式和地址格式，为经过逻辑网络路径的数据进行路由选择</p><p>④主机到主机层指定了控制internet层的协议，相似于数据链路层控制物理层</p><p>#主机到主机层和数据链路层都定义了流控和差错控制机制</p><p>#数据链路层强调控制数据链路（物理介质）上的流量</p><p>#传输层控制逻辑链路上的流量</p><p>⑤应用层最常用的服务是向用户应用提供访问网络的接口</p><p class=\"ztext-empty-paragraph\"><br/></p><hr/><p><b>2.IP包头</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-f07b6533ae4a7b19013812ac9959c0c1_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"245\" class=\"origin_image zh-lightbox-thumb\" width=\"621\" data-original=\"https://pic2.zhimg.com/v2-f07b6533ae4a7b19013812ac9959c0c1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;621&#39; height=&#39;245&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"245\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"621\" data-original=\"https://pic2.zhimg.com/v2-f07b6533ae4a7b19013812ac9959c0c1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-f07b6533ae4a7b19013812ac9959c0c1_b.jpg\"/></figure><p>#版本：0保留--123未分配--4=ipv4--6=ipv6，长度4个字段</p><p>#报头长度：长度4个字段，表示32位字段的ip报头长度；ip报头最小20个八位组最大60个八位组</p><p>#服务类型：用来指定特殊的数据包处理方式，详情参考QOS专题</p><p>#总长度：数据包总长度的长度为16位；用ip数据包的长度减去ip报头长度，就可以确定数据包数据有效的大小；ip数据包最大长度为65535</p><p>#标识符：字段16位；通常与标记字段和分段字段一起用于数据包的分段。标识同一报文</p><p>#标记字段：字段3位，第1位不使用，第2位不分段位（DF），第3位表示更多分段位（MF）</p><p>DF：被设置为1时，不能分段，此时若因不分段不被转发，路由器将向源点发送错误消息，可用于计算MTU值</p><p>MF：除最后一个MF为设置为0，其余都为1。</p><p>MTU：数据帧最多大容纳字节数</p><p>#分段偏移：字段13位，用于指明分段起始点相对于报头起始点的偏移量，用于重组数据包</p><p>若有分段在传输中丢失，会触发重传整组分段，拥塞网络</p><p>#TTL：字段8位，现在用来标记跳数，防止三层环路</p><p>#协议：字段8位，表示传输层协议的协议号</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-cc479a12dc6d35a1ea7d4eb94ed3fe67_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"630\" data-rawheight=\"208\" class=\"origin_image zh-lightbox-thumb\" width=\"630\" data-original=\"https://pic4.zhimg.com/v2-cc479a12dc6d35a1ea7d4eb94ed3fe67_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;630&#39; height=&#39;208&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"630\" data-rawheight=\"208\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"630\" data-original=\"https://pic4.zhimg.com/v2-cc479a12dc6d35a1ea7d4eb94ed3fe67_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-cc479a12dc6d35a1ea7d4eb94ed3fe67_b.jpg\"/></figure><p>#报头校验和：是针对IP报头的纠错字段。校验和不计算被封装的数据，UDP\\TCP\\ICMP都有各</p><p>自的校验和。当传输中没有发生错误时，16位字段应全是1</p><p>#源地址\\目的地址：字段32位</p><p>#可选项：（日后再做研究）</p><p>①松散源路由选择（loose source routing）</p><p>②严格源路由选择（stric source routing）</p><p>③记录路由（record route）</p><p>④时间戳（timestamp ）</p><p>#填充（padding）：通过在可选项字段后面添加0来补足32位，保证报头长度为32位的倍数</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-a3fdf114612afa11d32e25a33064abec_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"330\" class=\"origin_image zh-lightbox-thumb\" width=\"624\" data-original=\"https://pic1.zhimg.com/v2-a3fdf114612afa11d32e25a33064abec_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;624&#39; height=&#39;330&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"330\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"624\" data-original=\"https://pic1.zhimg.com/v2-a3fdf114612afa11d32e25a33064abec_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-a3fdf114612afa11d32e25a33064abec_b.jpg\"/></figure><hr/><p><b>3.ipv4地址</b></p><p>3.1概述：长度为32位，由网络号和主机号两部分组成，网络号部分唯一地标示了一条物理链路或者逻辑链路，主机号标识了该链路上所连接的具体设备</p><p>3.2地址类型</p><p>A类地址：用于大型网络，第1个八位表示网络号，</p><p>B类地址：用于中性网络，前2个八位表示网络号</p><p>C类地址：用于小型网络，前3个八位表示网络号</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-9f5cf99232681457fbe0b0fa84f9319d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"115\" class=\"origin_image zh-lightbox-thumb\" width=\"623\" data-original=\"https://pic2.zhimg.com/v2-9f5cf99232681457fbe0b0fa84f9319d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;623&#39; height=&#39;115&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"623\" data-rawheight=\"115\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"623\" data-original=\"https://pic2.zhimg.com/v2-9f5cf99232681457fbe0b0fa84f9319d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-9f5cf99232681457fbe0b0fa84f9319d_b.jpg\"/></figure><p>3.3子网掩码（address mask）</p><p>通过ip地址和子网掩码的与操作可以确定无类子网网段</p><p class=\"ztext-empty-paragraph\"><br/></p><hr/><p><b>4.地址解析协议ARP</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-e622c31cf18e85ba70aa7e56772f9bc5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"626\" data-rawheight=\"176\" class=\"origin_image zh-lightbox-thumb\" width=\"626\" data-original=\"https://pic2.zhimg.com/v2-e622c31cf18e85ba70aa7e56772f9bc5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;626&#39; height=&#39;176&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"626\" data-rawheight=\"176\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"626\" data-original=\"https://pic2.zhimg.com/v2-e622c31cf18e85ba70aa7e56772f9bc5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-e622c31cf18e85ba70aa7e56772f9bc5_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-005828e58d33d190527f908a2b93bff2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"625\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb\" width=\"625\" data-original=\"https://pic3.zhimg.com/v2-005828e58d33d190527f908a2b93bff2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;625&#39; height=&#39;144&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"625\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"625\" data-original=\"https://pic3.zhimg.com/v2-005828e58d33d190527f908a2b93bff2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-005828e58d33d190527f908a2b93bff2_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4c8e9cb624f3f482467caa9ad0b89f80_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb\" width=\"621\" data-original=\"https://pic1.zhimg.com/v2-4c8e9cb624f3f482467caa9ad0b89f80_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;621&#39; height=&#39;144&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"621\" data-rawheight=\"144\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"621\" data-original=\"https://pic1.zhimg.com/v2-4c8e9cb624f3f482467caa9ad0b89f80_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4c8e9cb624f3f482467caa9ad0b89f80_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-63e5e8bc7fe5686798f9cdfd710dd7ab_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"287\" class=\"origin_image zh-lightbox-thumb\" width=\"622\" data-original=\"https://pic4.zhimg.com/v2-63e5e8bc7fe5686798f9cdfd710dd7ab_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;622&#39; height=&#39;287&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"622\" data-rawheight=\"287\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"622\" data-original=\"https://pic4.zhimg.com/v2-63e5e8bc7fe5686798f9cdfd710dd7ab_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-63e5e8bc7fe5686798f9cdfd710dd7ab_b.jpg\"/></figure><p>#操作（operation）：指明了一个数据包是ARP请求（1）还是ARP响应（2）。这里还可以发现有其他的值表明ARP的其他用途。如反向ARP请求（3）、反响ARP响应（4）、反转ARP请求（8）、反转ARP响应（9）</p><p>4.1代理ARP：</p><p>①当主机192.168.1.1/24跨网段向192.168.2.1/24发送数据包时，若没有缺省网关信息，将无法到达路由器。主机将向192.168.2.1发送一个ARP请求，当三层设备接收到这一请求，若三层设备知道如何到达192.168.2.1网络，三层设备将回复以上请求，把自己的数据链路标识作为ARP回复数据包的硬件地址</p><p>②代理ARP可使子网化网络拓扑对主机来说是透明的</p><p>③多个IP地址映射到单一的MAC标识符时，暗示着代理ARP的使用</p><p>4.2无故ARP：主机偶尔会使用自己的ipv4地址作为目标地址发送ARP请求。这种ARP请求被称为无故ARP</p><p>①用于检查重复地址</p><p>②通告更新一个新的数据链路标识符（MAC）</p><p>③某个子网内运行热备份路由器协议的路由器如果从其他路由器变成了主路由器，它就会发出一个无故ARP来更新该子网上主机的ARP缓存</p><p>PS：IOS系统中缺省关闭，可用ip gratuitous-arps 激活它</p><p>4.3反向ARP：基本上被DHCP（或BOOTP的扩展协议）替代</p><p class=\"ztext-empty-paragraph\"><br/></p><hr/><p><b>5.ICMP（internet消息控制协议）</b></p><p>5.1ICMP概述：主要是为了管理网络。ICMP的消息可以分为错误消息、请求消息和响应消息</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-647a0f9df09a26e4f7f4be711c397ca0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"85\" class=\"origin_image zh-lightbox-thumb\" width=\"624\" data-original=\"https://pic1.zhimg.com/v2-647a0f9df09a26e4f7f4be711c397ca0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;624&#39; height=&#39;85&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"624\" data-rawheight=\"85\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"624\" data-original=\"https://pic1.zhimg.com/v2-647a0f9df09a26e4f7f4be711c397ca0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-647a0f9df09a26e4f7f4be711c397ca0_b.jpg\"/></figure><p>#路由器通告（advertisement）和路由器选择（selection）：分别是类型9和类型10，用于ICMP路由器发现协议（IRDP）.IRDP用于某些操作系统发现本地路由器</p><p>#重定向（redirection）：是ICMP的类型5，被路由器用于通知主机去往指定目标的网关。</p><p>发生ICMP重定向通常有两种情况：</p><p>1)当路由器从某个接口收到数据还需要从相同接口转发该数据时；</p><p>2)当路由器从某个接口到发往远程网络的数据时发现源ip地址与下一跳属于同一网段时。</p><p>在IOS系统中，缺省状态下重定向功能是打开的。在接口上使用命令：no ip redirects关闭</p><p class=\"ztext-empty-paragraph\"><br/></p><hr/><p><b>6.传输层</b></p><p>6.1概念：网络层负责网络之间的逻辑路径，而传输层是负责两个在完全不同网络上的主机之间的全程逻辑路径。从另一个角度看，传输层向应用提供了一个到协议簇下一层的接口，隐藏传输细节。</p><p>6.2 TCP</p><p>①传输控制协议（TCP），向应用提供了可靠的、面向连接的服务</p><p>#仅存在一条到达目的地的路径。</p><p>#数据包到达的顺序与发送顺序相同</p><p>②在基于ip无连接的服务上，TCP使用了3种基础的机制实现面向连接的服务</p><p>#使用序列号对数据包进行标记，以便TCP的接收服务在向应用传递数据之前修正错序\t\t\t 的数据包排序</p><p>#TCP使用确认、校验和定时系统提供可靠性（重传机制）</p><p>当接收者通知发送者错误时</p><p>当接收者在一定时间没有发送确认消息时</p><p>#TCP使用窗口机制调整数据包的流量，减少因接收方缓冲区满造成数据包丢失的可能</p><p>6.3 TCP报文</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-66026450d8bbf4b066eac05dce92c4ba_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"619\" data-rawheight=\"240\" class=\"origin_image zh-lightbox-thumb\" width=\"619\" data-original=\"https://pic3.zhimg.com/v2-66026450d8bbf4b066eac05dce92c4ba_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;619&#39; height=&#39;240&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"619\" data-rawheight=\"240\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"619\" data-original=\"https://pic3.zhimg.com/v2-66026450d8bbf4b066eac05dce92c4ba_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-66026450d8bbf4b066eac05dce92c4ba_b.jpg\"/></figure><p>#源端口和目的端口：字段长度各为16位，为封装的数据指定了源和目的应用程序。应用程序的端口号加上IP地址统称为套接字（socket），套接字唯一地标识了每一个程序</p><p>#序列号：确定了发送方发送的数据流中被封装的数据所在位置。例如，本段数据343，且数据段长512个八位组，那么下一数据段的序列号应该为343+512+1=1856</p><p>#确认号：确认号确定了源点下一次希望从目标接收的序列号。如果主机收到的确认号与它下一次打算发送（或已发送）的序列号不符，那么将获悉丢失的数据包</p><p>#报头长度：数据偏移量，指定了32位为单位的报头长度，由于可选项字段长度可变，所以可用该字段标识出数据的起点</p><p>#保留：6位，全为0</p><p>#标记：8位，从左到右分别是CWR\\ECE\\URG\\ACK\\PSH\\RST\\SYN\\FIN</p><p>#窗口大小：略，日后讨论</p><p>#校验和：略，日后讨论</p><p>#紧急指针：仅当URG标记置位才使用，通常表示结束，略</p><p>#可选项：略，日后讨论</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-c30a57bedc90cbd1cd48214b0709fb21_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"613\" data-rawheight=\"249\" class=\"origin_image zh-lightbox-thumb\" width=\"613\" data-original=\"https://pic2.zhimg.com/v2-c30a57bedc90cbd1cd48214b0709fb21_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;613&#39; height=&#39;249&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"613\" data-rawheight=\"249\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"613\" data-original=\"https://pic2.zhimg.com/v2-c30a57bedc90cbd1cd48214b0709fb21_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-c30a57bedc90cbd1cd48214b0709fb21_b.jpg\"/></figure><p>6.4 UDP</p><p>①提供了一种无连接、尽力而为传送数据包转发服务</p><p>②速度快，体积小，不稳定</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-e4f66a38f48e5ef2227c5727342fce63_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"616\" data-rawheight=\"240\" class=\"origin_image zh-lightbox-thumb\" width=\"616\" data-original=\"https://pic4.zhimg.com/v2-e4f66a38f48e5ef2227c5727342fce63_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;616&#39; height=&#39;240&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"616\" data-rawheight=\"240\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"616\" data-original=\"https://pic4.zhimg.com/v2-e4f66a38f48e5ef2227c5727342fce63_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e4f66a38f48e5ef2227c5727342fce63_b.jpg\"/></figure><p></p>", 
            "topic": [
                {
                    "tag": "TCP/IP", 
                    "tagLink": "https://api.zhihu.com/topics/19614019"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/32228607", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "ARP-2（ARP相关）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32167585\" class=\"internal\">ARP-1（初识ARP）</a></p><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>二、ARP相关机制</b></h2><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.ARP高速缓存</b></p><p>ARP高速运行的关键是由于每个主机上都有一个ARP高速缓存表。这个高速缓存表存放了最近internet地址到硬件地址之间的映射记录。高速缓存中每一项的生成时间一般为20分钟，起始时间从被创建时开始算起。查看命令？</p><p>arp  - a，大概可能是吧，emmm，我也记不清了。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-131be7a63b01652de1656e96acc7490f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"993\" data-rawheight=\"519\" class=\"origin_image zh-lightbox-thumb\" width=\"993\" data-original=\"https://pic4.zhimg.com/v2-131be7a63b01652de1656e96acc7490f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;993&#39; height=&#39;519&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"993\" data-rawheight=\"519\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"993\" data-original=\"https://pic4.zhimg.com/v2-131be7a63b01652de1656e96acc7490f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-131be7a63b01652de1656e96acc7490f_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.ARP报文字段</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4f07552feb1e7843d8f2fff60318e936_b.jpg\" data-size=\"normal\" data-rawwidth=\"477\" data-rawheight=\"184\" class=\"origin_image zh-lightbox-thumb\" width=\"477\" data-original=\"https://pic3.zhimg.com/v2-4f07552feb1e7843d8f2fff60318e936_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;477&#39; height=&#39;184&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"477\" data-rawheight=\"184\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"477\" data-original=\"https://pic3.zhimg.com/v2-4f07552feb1e7843d8f2fff60318e936_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-4f07552feb1e7843d8f2fff60318e936_b.jpg\"/><figcaption>百度出品，请无视水印</figcaption></figure><p>（以下字段是按顺序排好的）</p><ul><li>Hardware type ：硬件类型，标识链路层协议（16bti）</li><li>Protocol type： 协议类型，标识网络层协议（16bti）</li><li>Hardware size ：硬件地址大小，标识MAC地址长度，这里通常大小为6，单位是字节（8bti）</li><li>Protocol size： 协议地址大小，标识IP地址长度，这里通常大小为4，单位是字节（8bti）</li><li>Opcode： 操作代码，标识ARP数据包类型，1表示请求，2表示回应（还有3，4，先忽略不谈）</li><li>Sender MAC address ：发送者MAC（48bti）</li><li>Sender IP address ：发送者IP（32bti）</li><li>Target MAC address ：目标MAC（48bti）</li><li>Target IP address： 目标IP（32bti）</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.对于不存在的ARP请求</b></p><p>如果对于查询的主机已经关机，或者不存在会发生什么情况呢？</p><p>如果你模拟了一个实验，你可能会发现，主机进行了多次ARP请求：第一次请求发生（请求无果后）在5~6秒后，进行第二次请求，在24秒后进行第三次请求，······在达到TCP连接请求的时间限制后放弃。</p><p>（至于你要问，ARP请求和TCP的关系，我只能说，ARP请求对应于TCP试图发送的初识SYN（同步）段。）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.免费ARP</b></p><p>ARP的另一个特性被叫做免费ARP（gratuitous）。它是将主机发送ARP查找自己的IP地址。</p><p>免费ARP主要有两个方面作用：</p><p>one，一个主机可以通过它确定另一个主机是否设置了相同的IP地址。发送方主机通常不希望自己发送的该请求有一个回答，哈哈哈。</p><p>two，如果发送免费ARP的主机正好改变了硬件地址（如换了一个网卡，重新启动），可以更新其他主机的高速缓存表（ARP表）中存的旧的硬件地址进行相应的更新。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.为什么IP地址和MAC缺一不可？</b></p><p>在数据链路层上，只要知道接收端的MAC地址不就可以将数据发给接收端了吗，那还要它的IP地址做什么？还有人问，知道了IP地址，即使不做ARP只要在数据链路层做一个广播不就能发给接收端了吗？</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-59d2e4272fe7043469d02d06039346ee_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"899\" data-rawheight=\"262\" class=\"origin_image zh-lightbox-thumb\" width=\"899\" data-original=\"https://pic3.zhimg.com/v2-59d2e4272fe7043469d02d06039346ee_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;899&#39; height=&#39;262&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"899\" data-rawheight=\"262\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"899\" data-original=\"https://pic3.zhimg.com/v2-59d2e4272fe7043469d02d06039346ee_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-59d2e4272fe7043469d02d06039346ee_b.jpg\"/></figure><p>我们来考虑一下，在以太网中，假如主机A想要发送IP数据包给主机B是必须得经过路由器C，即使知道了主机B的IP地址，由于路由器C会隔绝两个网络，还是无法实现直接从主机A发送数据包给主机B，此时，主机A必须得先将数据包发送给<b>路由器C</b>所连主机A<b>的接口</b>上的<b>MAC地址</b> C1。</p><p>在以太网中发送IP数据包时，要经过哪个路由器发送数据包，这个信息非常重要，而哪个路由器，就是指的相应的<b>MAC地址。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>最后，我们在试想一下，假如世界不用IP地址，全用MAC地址连接世界上所有的主机，那么，如果主机想要通讯时，就需要想全世界发送广播包，那得网络流量啊！而且由于没有任何机制，交换机还需要维护一张巨大的表格来维护所学到的所有MAC地址，想想都恐怖。</b></p>", 
            "topic": [
                {
                    "tag": "数据链路层", 
                    "tagLink": "https://api.zhihu.com/topics/19662745"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/32167585", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 3, 
            "title": "ARP -1（初识ARP）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32228607\" class=\"internal\">ARP-2（ARP相关）</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序：</b></p><p>ARP是一种地址解析协议。IP地址终究是一种虚拟地址，在底层的数据链路层，进行实际通信时就很有必要了解每个IP地址对应的MAC地址，而ARP地址就是一种将目标IP转化成目标MAC的协议技术。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、ARP基础知识</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.ARP摘要</b></p><p>ARP一种地址解析协议，以目标IP为线索，用来定位下一个应该接收到数据包的网络设备的MAC地址。如果目标不再同一链路上（网络上），可以通过ARP查找下一跳路由器的MAC地址。不过ARP仅适用于IPv4，在IPv6中可以用ICMPv6来代替ARP发送邻居探索消息。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.ARP图解</b></p><p>下面划重点了，ARP在应用上的核心机制就是：</p><p><b>①将IPv4地址解析为MAC地址</b></p><p><b>②维护映射表（IP-MAC）的缓存</b></p><p>下面用五张图来解释一下ARP协议工作机制：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-2a4abdf9fe5badb6256be0bad6a242f8_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1092\" data-rawheight=\"592\" class=\"origin_image zh-lightbox-thumb\" width=\"1092\" data-original=\"https://pic1.zhimg.com/v2-2a4abdf9fe5badb6256be0bad6a242f8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1092&#39; height=&#39;592&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1092\" data-rawheight=\"592\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1092\" data-original=\"https://pic1.zhimg.com/v2-2a4abdf9fe5badb6256be0bad6a242f8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-2a4abdf9fe5badb6256be0bad6a242f8_b.jpg\"/></figure><p>图一中，主机A想要与IP地址为10.10.0.3的主机C通信，由于主机A本身不知道10.10.0.3所对应的MAC地址，因此主机A将发送<b>ARP查询。</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-19777177db05fbac4a5146facd26e530_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1101\" data-rawheight=\"627\" class=\"origin_image zh-lightbox-thumb\" width=\"1101\" data-original=\"https://pic1.zhimg.com/v2-19777177db05fbac4a5146facd26e530_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1101&#39; height=&#39;627&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1101\" data-rawheight=\"627\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1101\" data-original=\"https://pic1.zhimg.com/v2-19777177db05fbac4a5146facd26e530_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-19777177db05fbac4a5146facd26e530_b.jpg\"/></figure><p>图二中，主机A将自己的<b>IP地址和MAC</b>（自己肯定知道自己的MAC，烧录在网卡中的）封装成数据包包通过广播发送给自己所在链路（网络），以期待目标主机的回应。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-122d9065714bdc5ca47e30fe7a8b98d5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1117\" data-rawheight=\"597\" class=\"origin_image zh-lightbox-thumb\" width=\"1117\" data-original=\"https://pic2.zhimg.com/v2-122d9065714bdc5ca47e30fe7a8b98d5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1117&#39; height=&#39;597&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1117\" data-rawheight=\"597\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1117\" data-original=\"https://pic2.zhimg.com/v2-122d9065714bdc5ca47e30fe7a8b98d5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-122d9065714bdc5ca47e30fe7a8b98d5_b.jpg\"/></figure><p>图三中，主机C收到广播数据包，解封装查看，发现目标IP就是自身，于是自己单独对主机A发送单播回复，附带上自己的<b>MAC地址</b>，自此双方都有了对方的MAC地址。而在同一链路（网络）上的其他主机解封装查看数据包，发现目标IP不是自身，纷纷丢弃。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-1a447f6afb05709670a7a0900de515d2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1075\" data-rawheight=\"606\" class=\"origin_image zh-lightbox-thumb\" width=\"1075\" data-original=\"https://pic3.zhimg.com/v2-1a447f6afb05709670a7a0900de515d2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1075&#39; height=&#39;606&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1075\" data-rawheight=\"606\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1075\" data-original=\"https://pic3.zhimg.com/v2-1a447f6afb05709670a7a0900de515d2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-1a447f6afb05709670a7a0900de515d2_b.jpg\"/></figure><p>图四中，当网关（路由器）收到ARP查询报文之后，会把自己的MAC为主机A的查询做出响应。（假如，主机C没有对主机A进行回应的情况下，主机A会把所有发往10.10.0.3的报文都发送给网关，由网关出口，<b>进入互联网</b>，寻找目标IP为10.10.0.3的主机）</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-88b6bc36b4b51aebec9aa16e2805ce3c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1060\" data-rawheight=\"599\" class=\"origin_image zh-lightbox-thumb\" width=\"1060\" data-original=\"https://pic1.zhimg.com/v2-88b6bc36b4b51aebec9aa16e2805ce3c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1060&#39; height=&#39;599&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1060\" data-rawheight=\"599\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1060\" data-original=\"https://pic1.zhimg.com/v2-88b6bc36b4b51aebec9aa16e2805ce3c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-88b6bc36b4b51aebec9aa16e2805ce3c_b.jpg\"/></figure><p>图五中，由于主机C对主机A进行了回复，双发都会缓存对应的<b>IP-MAC地址缓存表</b>，在一定时间内，下次通信，将不用查询。（总结来说就是，一次查询，多次转发）</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.ARP的一句话作用</b></p><p>三层的转发依赖于IP地址，二层的数据传输依赖于MAC地址，而ARP就是一种将着两个地址相关联的ARP协议。</p><p>ARP协议通过&#34;一问一答&#34;实现交互，但是&#34;问&#34;和&#34;答&#34;都有讲究，&#34;问&#34;是通过广播形式实现，&#34;答&#34;是通过单播形式。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.RARP</b></p><p>如果你真正理解了ARP协议的工作原理、作用，那么来理解RARP就非常简单了。</p><p>RARP就是一种将ARP反过来，从MAC地址定位IP地址的一种协议。例如将打印机服务器等小型嵌入式设备接入到网络时就经常会用到。</p><p>平常我们通过个人电脑手动设置IP地址，也可以通过DHCP自动分配获取IP地址。然而，对于使用嵌入式设备时，会遇到没有任何输入接口或无法通过DHCP动态获取IP地址的情况。</p><p>在类似情况下，我们就可以使用RARP。为此，我们可以架设一台RARP服务器，从而在这个服务器上注册设备的MAC地址及其IP地址。然后再将这个设备接入到网络，一经过通电启动，该设备就会发送一条“我的MAC时***，请告诉我，我的IP地址时什么”的请求消息。RARP服务器接收到这个消息后返回类似于“MAC地址为***的设备，IP地址为***”的信息给该设备。从而该设备获取到自己的IP地址。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.代理ARP</b></p><p>通常ARP报文时广播报文，如ARP请求包。路由器天然隔绝广播。但是采用代理ARP的路由其可以将ARP请求转发给邻近的网段。由此，两个以上网段的结点之间就可以像同一个网段中一样进行通信。</p><p>代理ARP的用处很多，但是对于新手来说很难理解它的实际意义。比如说，一般情况下，用路由器连接多个网络时，会在每个接口（网段）上定义各自的子网，从而进行相关的路由控制。然而，对于那些不支持子网掩码的老设备来说，不使用代理ARP，有时就无法更好的使用网络。</p><p></p>", 
            "topic": [
                {
                    "tag": "数据链路层", 
                    "tagLink": "https://api.zhihu.com/topics/19662745"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/32165604", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 0, 
            "title": "DNS基础", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p>序：</p><p>仅凭IP是没有办法完成通信的，很明显，人们在上网的时候其实很少直接输入某个具体的IP地址的。在访问Web站点、发送电子邮件的时候，我们通常会直接输入一些特定的且容易记忆的地址，而不会使用由十进制组成的IP地址。因此，为了能让网络正常通信，就有必要实现一种功能---将应用中使用的地址映射为IP地址。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.IP地址不便记忆</b></p><p>TCP/IP网络中要求每一个互联的计算机都具有其唯一的IP地址，并基于这个地址进行通信。但因为IP地址由一串数据序列组成，并不好记。</p><p>为此TCP/IP世界中从一开始就出现了叫做<b>主机名</b>的东西，这种识别方式是指为每台计算机赋以唯一的的主机名，在网络通信的时候可以直接使用主机名而不用输入长串的IP地址。</p><p>而这种IP地址和主机名的映射表，最开始由互联网起源的ARPANET统一整理一份host文件，随时添加、更换，但随着计算机的普及、和网络规模的不断扩大，使得这种集中管理主机名和IP地址的登陆、变更处理的可行性逐渐降低。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.DNS的产生</b></p><p>由此，我们就需要一个可以有效管理主机名和IP地址之间对应关系的系统，那就是DNS系统。通俗的讲，它是可以用来表示组织内部主机名和IP地址之间对应关系的数据库。</p><p>在应用中，当用户输入主机名（域名）时，DNS会自动检索那个注册了主机名和IP地址的数据库，并迅速定位对应的IP地址。而且，如果主机名和IP地址需要进行变更时，也只需要在组织内部进行处理即可，没有必要再向其他机构申请或者报告。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.域名的构成</b></p><p>域名由几个英文字母用点号连接构成，如果 baidu.con ，<a href=\"https://link.zhihu.com/?target=http%3A//kusa.ac.jp\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">http://</span><span class=\"visible\">kusa.ac.jp</span><span class=\"invisible\"></span></a>  。就是说在使用域名的时候，可以在每个主机名后面追加上组织机构的域名。 </p><p>DNS具有分层结构，由于看起来像一颗倒挂的树，人们也把这种分成结构叫做树形结构。如果说顶点是树的根，那么底下是这棵树的各层枝叶。顶点的下一层叫做第一层域名（顶级域名） ， 如中国.cn ，日本.jp ，英国.uk等代表国家的域名，还有包括美国教育机构.edu ，美国企业 .com等特定领域的域名 。如下图所示：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-75a7b721044775f6546bdf6f4cc0cc81_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"649\" data-rawheight=\"293\" class=\"origin_image zh-lightbox-thumb\" width=\"649\" data-original=\"https://pic2.zhimg.com/v2-75a7b721044775f6546bdf6f4cc0cc81_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;649&#39; height=&#39;293&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"649\" data-rawheight=\"293\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"649\" data-original=\"https://pic2.zhimg.com/v2-75a7b721044775f6546bdf6f4cc0cc81_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-75a7b721044775f6546bdf6f4cc0cc81_b.jpg\"/></figure><p>谈起域名不得不介绍一下管理域名的主机和响应的软件，<b>域名服务器</b>。它可以管理所在分层的域中相关信息。其所管理的分层叫做ZONE。域名服务器的分层与域名的分层类似，一种域名服务器对应着一种域名。</p><p>进行DNS查询的主机和软件叫做<b>DNS解析器</b>。用户所使用的工作站或个人电脑都属于解析器。一个解析器至少要注册一个域名服务器的IP地址。（通过任意一个域名服务器都可以遍历到全部的域名系统）。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.DNS查询</b></p><p>如果你想访问一个网址，从DNS的角度来讲。</p><p>①向DNS服务器咨询IP地址。</p><p>②如果区域的DNS服务器知道该网址的IP地址，则返回给客户端，进行通信。</p><p>③如果区域的DNS服务器不知道该网址的IP地址。</p><p>④向根服务器发送请求，进行查询，返回其IP地址。</p><p>⑤向目标区域的DNS服务器发送请求，进行查询，返回其IP地址。</p><p>⑥将查到的IP地址返回给客户端。</p><p>⑦主机与服务器（该网址）进行通信</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.DNS如同互联网中的分布式数据库</b></p><p>前面提到DNS是一种通过主机名检索IP地址的系统。然而，你如果仅仅认为它仅仅是这样的话，就很傻很天真了。它所管理的信息不仅仅是这些主机名跟IP地址之间的映射关系。它还要管理众多信息。（感兴趣的自己去查一下，这篇文章仅仅介绍点基础内容）</p><p>例如，主机名与IP地址的对应信息叫做<b>A记录</b>（就是我们熟知DNS功能）。反之，从IP地址检索主机名称的信息叫做 PTR  。此外，上层或下层域名服务器IP地址的映射叫做NS记录。</p><p>在此特别需要指出的是MX记录。这类记录注册了邮件地址与邮件接收服务器的主机名。（邮件系统在我们日常应用中比我们想象中的应用广泛的多了，很多应用都是多多少少跟邮件技术有所关联）</p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "DNS", 
                    "tagLink": "https://api.zhihu.com/topics/19581904"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/32102156", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "IP地址2（特殊的IP地址）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32013844\" class=\"internal\">IP地址1</a></p><p><b>二、特殊的IP地址</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.广播地址</b></p><p>广播地址用于在同一个链路中互相连接的主机之间发送数据包。将IP地址中的主机地址（bit）全部设置为1，就成了<b>广播地址</b>。例如172.20.0.0/16用二进制表示。</p><p><b>10101100.00010100.00000000.00000000</b></p><p>把主机地址改为全1，则形成广播地址：</p><p><b>10101100.00010100.11111111.11111111</b></p><p>如果将其换算成十进制表示，则为172.20.255.255.由此可知，在分配IP地址的主机地址的时候，（bit）不能是全1或全0，因为全1的被分给了广播地址，而全0的只有在通信其它主机的IP地址不可获知的情况下才能使用。因此172.20.0.0/16的可以分配IP地址的主机数为2^16-2个。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.组播地址</b></p><p>组播用于把包发给特定组内的所有主机。人们在使用组播之前，一直采用广播的方式。那时广播把数据发送给所有终端，再由主机IP之上的一层去判断是否接收。是则接收，否则丢弃。</p><p>然而这种方式会给那些毫无关系的网络或主机带来影响，造成网络上很多不必要的流量。况且由于广播无法穿越路由，若想给其他网段发送同样的包，就会非常麻烦。因此，组播这种可以穿越路由器，又可以只给那些需要的组发送数据包的技术就应运而生。组播同广播的优势就是提高了发送<b>效率</b>。</p><p><b>组播地址，就是D类地址。</b>范围是224.0.0.0/8到239.255.255.255/8.</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.私有地址</b></p><p>私有地址在最早没有计划连入互联网，而只用于互联网之外的独立网络。后来NAT（为一定数量的设备分配少量IP地址）技术出现后，私有地址可以与公有地址（私有地址以外）相互转换。使得分配私有地址的设备也可以连入互联网。</p><p>当然，私有地址也为NAT补足了自身的短板（思考一下，假如没有私有地址的NAT技术有什么弊端？）。私有地址范围如下：</p><p>10.0.0.0-10.255.255.255 /8（A类）</p><p>172.16.0.0-172.31.255.255.255 /12 （B类）</p><p>192.168.0.0-192.168.255.255  /16（C类）</p><p>如今，私有IP地址和NAT技术的结合，已经成为了解决IP地址紧缺的主流方案。但是它与使用全局地址有着各种缺陷。由此IPv6（让世界每一粒沙子都有一个地址）普及的呼声越来越盛。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.环回地址</b></p><p>环回地址是在同一台计算机上的程序之间进行网络通信时所使用的一个默认地址。计算机使用一个特殊的IP地址127.0.0.1作为环回地址。与改地址具有相同意义的是一个叫做localhost的主机名。使用这个IP或主机名时，数据包不会流向网络。可以用来检查主机TCP/IP协议栈是否正常。</p>", 
            "topic": [
                {
                    "tag": "IP 地址", 
                    "tagLink": "https://api.zhihu.com/topics/19592543"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/32013844", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 18, 
            "title": "IP地址1（初识IP地址）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32102156\" class=\"internal\">IP地址2（特殊的IP地址）</a></p><p><b>序：</b></p><p>IPv4的地址主要用于给一个物理设备分配一个逻辑地址。听起来很复杂，但实际上很简单。它就像大航海时代的的指南针一样，有着神奇的能力！！！</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、IP地址基础</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.IP地址的作用</b></p><p>在一个以太网上的两个设备之所以能够交换信息就是因为在物理以太网上，每个设备都有一块网卡，并拥有唯一的以太网地址。如果设备 A向设备 B传送信息，设备 A需要知道设备 B的 以太网地址。而IP协议I使用的这个过程叫做地址解析协议。不论是哪种情况，地址应为硬件地址，并且在本地物理网上。它要求每个设备广播它的地址，这样其他设备才能知道它的存在。</p><p>它允许给一个物理设备分配一个逻辑地址。不论使用哪种通信方法，都可以通过一个唯一的逻辑地址来识别这个设备。在实际通信中，逻辑地址最终还要转换成物理地址。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.地址的分类</b></p><p>IPv4的设计者目前面临着一个地址管理困境。在 Internet发展早期，网络很小，但互连设备却很多，问题是未来的发展。在 2 0世纪7 0年代初期，建立 Internet的工程师们并未意识到计算机和通信在未来的迅猛发展。局域网和个人电脑的发明对未来的网络产生了巨大的冲击。开发者们依据他们当时的环境，并根据那时对网络的理解建立了逻辑地址分配策略。</p><p>他们知道要有一个逻辑地址管理策略，并认为 3 2位的地址已足够使用。从当时的情况来看，3 2位的地址空间确实足够大，能够提供 4 294 967 296个独立的地址。针对网络的大小不同，为有效地管理，地址以分组方式来分配。有的分组较大，有的分组中等，而有的分组较小。这种管理上的分组也叫地址类</p><p>A类范围：1.0.0.0 - 126.255.255.255</p><p>B类范围：128.0.0.0 - 191.255.255.255</p><p>C类范围：192.0.0.0 - 223.255.255.255</p><p>D类范围：224.0.0.0 - 239.255.255.255</p><p>E类范围：240.0.0.0 - 255.255.255.255</p><p>这五类地址加起来总共有40多亿地址，但实际上没有那么多，因为其中的D、E类地址被分别被用作<b>组播地址、实验地址</b>，其中如果细心的朋友会发现，在以上点分十进制的IP地址段中没有发现127.0.0.0/8这个网段，因为该网段被用作<b>环回地址</b>。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.子网掩码</b></p><p><b>（IP地址=网络地址+主机地址）</b></p><p>IP地址由“网络地址”和“主机地址”两部分组成。在每段数据链路上，网络地址相同，主机地址不能重复出现，这就是一个网段。由此，可以通过设置网络地址和主机地址，在互相连接的整个网络中保证每台主机的IP地址不会互相重叠。即IP地址具有了唯一性。</p><p>当IP包被转发到某个路由器时，正是利用目标IP地址的网络地址进行路由。因为即使不看主机地址部分，只要一见到网络地址就能判断出是否为该网段的主机。</p><p>如何在划分网络地址和主机地址呢?最开始，两者是以分类来进行区别的，就是<b>A类、B类、C类</b>地址，分别是前8比特、前16比特、前24比特。RIPv1就有其中典型的体现。而现在基本上以<b>子网掩码（网络前缀）</b>区分，如ABC类的默认掩码分别是/8,/16/24。</p><p>一个IP地址只要确认了分类，也就确认了它的网络地址和主机地址。而网络地址相同的计算机必须属于同一网络。例如，架构一个B类网络，理论上链路上允许6万多台计算机连接，然而，在实际网络架构中，一般不会在同一个链路上连接6万多台计算机的情况，由此<b>地址的浪费</b>问题就产生了。</p><p>现在，一个IP地址的网络地址和主机地址已不再受限于该地址的类别，而是由一个叫做<b>“子网掩码”</b>的标识码通过子网划分来细分出比A、B、C类更小粒度的网络。这种方法实质上就是将原网络分割成多个物理网络的机制。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.地址利用（CIDR\\VLSM）</b></p><p>由于A\\B\\C类地址产生的地址浪费问题，于是，人们开始放弃IP地址的分类，采用任意长度分割IP地址的网络地址和主机地址。这种方式叫做CIDR，译为“无类域间路由”。根据CIDR，连续多个C类地址就可以划分到一个较大的网络内。CIDR更有效的利用了IP地址，同时通过路由汇总降低了路由器的负担。</p><p>在CIDR被应用到互联网的初期，网络内部采用固定长度的子网掩码机制。也就是说，当子网掩码的长度被设置为/25之后，域内所有的子网掩码都得使用同样的长度。然而，有些部门可能有500台主机、有些部门只有50台，这样同一划分是不合理、不高效的。</p><p>于是产生了一种可以随意修改组织内各部门的子网掩码长度的机制--VLSM（可变长子网掩码）。根据VLSM可以将网络地址分为主机数为500个时子网掩码长度为/23，主机数为50个时子网掩码长度/26.</p><p></p>", 
            "topic": [
                {
                    "tag": "IP 地址", 
                    "tagLink": "https://api.zhihu.com/topics/19592543"
                }, 
                {
                    "tag": "计算机网络", 
                    "tagLink": "https://api.zhihu.com/topics/19572894"
                }, 
                {
                    "tag": "CCNA", 
                    "tagLink": "https://api.zhihu.com/topics/19598308"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/31855681", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 3, 
            "title": "网络工程师认知", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p>本文出自朱SIR</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1 前言</b></p><p>从网络工程认知，我们了解到网络、 网络工程的概念，那么是网络工程师呢？他们是做什么的？希望大家能在此篇文档中了解到些许，感悟到些许。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2 关于网络工程师</b></p><p>随着网络概念的不断延伸、 网络技术的不断发展，网络工程师的这个称呼也越发的广泛，就我们所见到的，搞通讯的，做数据的，搞平台的，做网站的，综合布线的……许多岗位都似乎能套上这个称呼。</p><p>那么，我们这里所讨论的网络工程师，是在网络工程领域，具有一定的网络技术功底，具备一定的职业技能（沟通技巧、 事物推进及问题解决、 项目管理、 文档及演讲能力等）以及职业素养（客户服务意识、 商务礼仪等），具有一定项目实施经验，能够在项目现场与客户或者其他项目干系人充分沟通，根据客户的需求及环境因素制定实施方案及项目计划（得到项目干系人认可），并充分调动各方资源保证项目按时、 保质保量落地，以及在项目实施后对干系人进行培训及工程文档交付的，并在项目实施完毕后完成系列维护、 排错工作的，这么一种职业。</p><p>不得不说，这个长句写的我很辛苦，我相信大家看的也挺辛苦，我会逐项拆解和大家来讨论讨论。</p><p>再者，请大家牢记我们所讨论的网络工程师的定义和范畴，以做区分（与其他类型的网络工程师，例如网站开发或者综合布线工程师），本文的目标就是为了与大家共同让自己实现上述要求而设。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3 网络工程师工作内容拆解</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-98ee5cbe7a3e448fd48a771252760e07_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1421\" data-rawheight=\"496\" class=\"origin_image zh-lightbox-thumb\" width=\"1421\" data-original=\"https://pic4.zhimg.com/v2-98ee5cbe7a3e448fd48a771252760e07_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1421&#39; height=&#39;496&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1421\" data-rawheight=\"496\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1421\" data-original=\"https://pic4.zhimg.com/v2-98ee5cbe7a3e448fd48a771252760e07_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-98ee5cbe7a3e448fd48a771252760e07_b.jpg\"/></figure><p>上图是一个典型的网络项目实施流程图，当然这是一个简化版，纸面上的东西，与实际的环境必然是存在一定的差异的：） 真实的项目可能要复杂得多，当然，也可能要更简单，视项目类型及规模大小而定。 有些 CASE，半天就能搞定（例如简单的故障处理、 网络维护或其他单次技术服务业务），有些项目，则需数月甚至上年头。</p><p>从这个实施流程我们可以看出来，网络工程师在项目中的参与还是非常有深度的，从某种层面上说，当商务上下单之后起，网络工程师就开始参与进来了，一直到项目实施完成，工作还不算完，毕竟还有一定时间的维护期，当然网络也有可能出错，因此维护、 排错也是需要的，再者，对客户的培训也是工作范畴之一，这也是在许多场合，网络工程师被称为“售后工程师”的道理。 需要注意的是，网络工程领域的售后和传统行业，是存在巨大差别的。</p><p>从上述完整的项目流程我们能看出，其实在某种程度上，网络工程师的工作内容感觉上还包含了点项目协调和管理的味道对吧？没错，大家一定要有个意识，在现如今的网络工程行业，光有技术绝对混不开，单单拿与客户沟通来说，面对银行系统的人、 面对政府信息科、 面对企业 IT 部门主管、 面对高校信息部的网管老师，这些个不同的客户不同的人群，你要如何沟通？如何充分理解需求？如果在规避问题？这就不是技术能解决的问题了。再者，在项目进展过程中，如何把控项目进度？如何协调如集成商、 客户等项目干系人？如何利用公司平台的资源？遇到技术问题的时候如何寻求帮助如何寻找答案？公司内部有没有 BUG 处理机制？有没有紧急故障处理程序？等等。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4 网络工程师综合能力模型</b></p><p>现如今的网络工程行业，一直在悄然发生着变化，服务、解决方案，无疑是目前网络工程行业的两大主题。</p><p>在过去，我们讨论的更多的，是产品，不管三七二十一，先把产品卖出去再说，起步阶段或许产品质量并没有过硬，因此需要大量的现场工程师为产品的性能或质量缺陷埋单（解决故障、搜集数据、反馈需求等），所以过去的网络工程师往往给人一种坑爹的形象。然而随着行业不断发展，网络设备质量及性能得到大大的改善和提升，同时厂商之间的竞争日益激烈更加快速地推动着整个行业的转型和发展。</p><p>当今的网络工程行业，单一的产品已经力量单薄，厂商或者提供商更多是思考和研发面向客户或行业的整体解决方案，例如数据中心解决方案，例如政府行业综合 IT 解决方案（包括网络基建、 IT 系统、 ITSM 等等），日益加剧的竞争推动了产品和解决方案的完善，产品的价格随着竞争逐渐拉低，单单从硬件上，厂商能拿到的利润已经不多了，因此更多的是考虑整体性解决方案，以及服务产品和服务销售。</p><p>服务，是一个软性的东西，与设备不一样，看不见摸不着，但是，服务却也和设备一样，可以包装成一个产品，例如网络巡检服务、网络备件服务、工程师现场技术保障服务等等，而这，恰恰是目前行业较为火热的一个模块。在很早之前，厂商就开始将服务打包成产品进行销售。</p><p>网络工程师，或者工作在客户现场、 直接与客户完成服务交付的工程师，我们也叫一线工程师，现在已经是产品或品牌服务的载体，由于其工作性质使然，工程师有大量的时间在客户现场为客户进行服务交付并且大量的机会接触客户，因此客户服务满意度除了与设备本身的质量、性能问题及针性有关外，还与现场工程师的行为规范、项目管理、项目质量、时间管理、成本管理、沟通及礼仪等等息息相关。</p><p>一个项目完成下来，客户服务满意度的影响因素实在有太多，如何能够准确把握住客户的期望值，并且在合理时间以合理的成本用合理的方式满足需求，甚至超期望，这是一个技术活，当然，也并不是客户要什么就全盘满足，这里还涉及到一个客户期望值管理的问题，容后再议。</p><p>因此，当前的网络工程行业，对于一线技术服务工程师的要求变得更加的全面。技术水平，仅仅是一个基本要素而已，除此之外，还有许多，例如上图中所描述。</p><p>当然，不要被密密麻麻的文字吓到，我知道你们都是吓大的，其实许多东西都是水到渠成，你到了那个环境，到了哪个位置，自然而然的就就会感受到哪个氛围，随之逼迫自己去学习去锻炼去沉淀去成长，人不都是被逼出的么？如果你真的被吓住了，那么我想说的是，别听我扯淡了，我说的这些个冠冕堂皇也只是纸面上的东西，其中的乐趣和条条框框更多的是要靠自己去体会去领悟，我只是做个总结和提供个思路而已，有些人压根不知道这个模型，照样混的比咱好千倍百倍，但是人总得有个目标和念想，是吧？</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5 不是最后的最后</b></p><p>事实上关于网络工程师，我们有一个顺口溜：读万卷书、行万里路、阅人无数、名师指路、自己要悟、善用GOOGLE 和百度。</p><p>从字面上看，网络工程师的修炼，应该是自内而外，再回到内的。简单的说，首先应该要“读万卷书”，这里当然指的是技术水平，通过研读技术书籍和文档，同时加以实践，而积累一定更多技术水平；在此之上“行万里路”，这为的是知行合一，将理论付诸实践。作为网络工程师而言，我们的客户在哪儿，我们的工作现场就在哪儿，因此有机会去到全国，甚至全球不同的地方，自然而然的眼界及视野也会大大的开阔,当然，行万里路不是为了去玩儿，而是为了“阅人无数”，这个自然也不是为了看妞儿；客户类型不同，我们有可能遇到的人也不尽相同，做政府的项目，遇到公务员，做教育的项目，遇到大学老师，做金融的项目，遇到银行系统的科长，通过与他们的</p><p>沟通、交流，你获取到的信息面和知识面将会得到很大程度的扩大。一个面对各种类型项目、各种类型客户都能做到游刃有余的网络工程师，绝对是个顶尖人才，而不是单纯的技术人才 ：）；剩下的，“名师指路”指的是入行跟对人，或者也可理解为，选对企业，选对平台或者行业。最后，这些所有的一切，没有自己的思考、沉淀和领悟，自然也是无意义的，鬼谷子有个很好的思想，叫“捭阖”，说的就是这个。因此，做一个职业的网络工程师，实质上是个人的人生修炼。</p>", 
            "topic": [
                {
                    "tag": "网络工程", 
                    "tagLink": "https://api.zhihu.com/topics/19658134"
                }, 
                {
                    "tag": "网络工程师", 
                    "tagLink": "https://api.zhihu.com/topics/20008759"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/31855367", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 13, 
            "title": "网络工程认知", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p><b>0.序</b></p><p>本文出自朱Sir</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1 前言</b></p><p>什么是网络？什么是网络工程？网络工程师是做什么？这个问题，我相信一直困扰着许多人，无论是在校大学生、 对网络技术感兴趣的朋友，甚至是行业从业人员，或者，我们的长辈。 当你真正的投身网络工程这个行业，当别人问起的时候，你会如何回答？你是做什么的？</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2 网络的概念（什么是网络）</b></p><p>仔细观察我们这几年的生活以及工作上发生的改变，其实不难发现，网络工程行业为整个社会带来的巨大变化。一直以来，我都深信这个行业是一个改变人的生活、工作方式的行业，是一个充满激情、充满奋斗热情、充满变革、充满竞争、充满成长欢乐的行业，它绝对不像许多外行人看上去的“寒碜”，更不像大家调侃的那样“IT民工”，相反，它蕴含着大量的人类智慧也回馈给人类大量的利好。</p><p>网络（Network）这个词由来以久，这其实是一个解释多种多样的词汇，简单的将东西连接 link 起来，这就是一个网络，例如家用小型无线局域网、例如餐厅的无线叫号系统、例如银行的省级甚至国家级办公生产网络、例如企业内部办公用的网络、 例如联通移动运营商所搭建的通信网络……。当然，我这里主要聚焦的是计算机网络。</p><p>我们来尝试给网络下个定义：网络：这是一个由各种电子设备构成的平台，包括但不限于路由器、交换机、防火墙、网络访问控制设备、网络管理设备、服务器、电脑、移动终端（包括但不限于手机、平板电脑等手持终端）等等，这个平台由网络工程师根据客户的实际应用需求规划、设计、组建、调试完成，使得客户或使用者的业务（business）能够被承载且稳定运行。 我想说的是，这个定义有一定的时空局限性，毕竟我说过，网络时代，瞬息万变。</p><p>所以，网络，不只是简单的什么网吧、什么咖啡厅情调小无线、不是家用宽带小路由器，这都是外行人看到的严重误解 --“屌丝”形象，弱爆了。 我这里讨论的是工业级别的网络，真正的工业级别的网络是大型到让你咋舌的，是一个要求特别严苛和规范的通信平台，所以，简单的说，网络，就是一个平台。 在这个平台之上，我们各种电子流化的应用和业务得以顺利的执行。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3 各行业对于计算机网络的依赖</b></p><p>现如今，各行各业都无法离开网络这个平台的支撑：企业需要网络的承载办公产生的各类 IT 系统，以及承载日常的业务流程，某些大型企业甚至需要覆盖全国甚至全球的网络来支撑业务的运转。 银行系统需要网络平台来支撑电子化的金融数据和业务流，银行的网络要求是极其严格的，你可以想象上海徐家汇的招行在办公时间断网30 分钟会是什么情景，因此金融类的网络对稳定性、安全性、可扩展性要求相当高，当然规模也是相当庞大的，它往往覆盖到全国甚至全球，毕竟，只要有网点的地方，都要被覆盖（见下图）。 再看政府类网络，它的覆盖面往往也是非常大的，同时对安全性要求异常高，业务类型也较为敏感。 各省市都在加强政务网络的建设，都在推进政务电子化。</p><p>金融和政府这两种类型的网络，对于网络工程师也提出了相当高的要求，不仅仅是技术上的，还包括服务意识、沟通技巧、事务推进及问题解决等能力。</p><p>不夸张的说，现如今各行各业都需要网络平台来承载其业务，甚至都无法离开网络。</p><p>数据中心、虚拟化概念席卷全球，相关的技术更是大大推动了各大传统行业的发展。 现如今对于大型企业、金融机构、 政府、教育机构等等，越来越关注自己数据中心的网络建设和运维，随着信息技术的发展，网络工程必定会愈发的重要，成为各行业基础架构非常关键的一环。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4 网络工程的概念（什么是网络工程）</b></p><p>那么什么是网络工程呢？网络的概念我们已经知晓了，网络工程就是围绕着网络进行的一系列的生产、商务活动。</p><p>我想再次强调，我们这里讨论的网络工程，绝不仅仅局限在“网吧”这样的小型网络，而是工业级别的大型网络平台。 很多时候，网络、网管这样的经典词汇，随着时间的推移，由于种种因素被广大的群众误解，认为是一种类似屌丝的行业和职业，他们被贴上了“民工”、“辛苦”、“没技术含量” 等标签，在某些场合，网络工程师还会被认为是搞网站的、搞电话的、 搞电话线网线布线的等等，这都是对网络、网络工程及网络工程师的无知所造成的片面认识甚至误解。</p><p>网络工程，是需要工程师在有一定的技术知识积累以及项目经验后，在具备一定的服务意识、客户服务知识、沟通及协调技能、项目管理及事物推进、问题解决及规避、文档呈现等等相关技能技巧之后，在与客户和各项目干系人充分沟通后，灵活运用自己掌握的知识，根据客户需求及环境因素，为客户的网络进行规划、设计、实施、调试、 排错、 培训等进行的一系列工作。</p><p>一个大型的网络项目的实施过程中，是蕴含着许许多多智慧的。 因此，任何从事网络工程相关工作的朋友，任何希望进入这个行业的朋友，任何正在学习相关专业的朋友，我们应该以身处这个行业感到自豪，任何一个行业，只要你足够努力，足够专注，足够忍耐，足够懂得利用资源，都是能够创造成绩的。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5 网络工程涵盖的技术模块</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ff705194db971ba46c35a58733c21dc7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1261\" data-rawheight=\"545\" class=\"origin_image zh-lightbox-thumb\" width=\"1261\" data-original=\"https://pic4.zhimg.com/v2-ff705194db971ba46c35a58733c21dc7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1261&#39; height=&#39;545&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1261\" data-rawheight=\"545\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1261\" data-original=\"https://pic4.zhimg.com/v2-ff705194db971ba46c35a58733c21dc7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ff705194db971ba46c35a58733c21dc7_b.jpg\"/></figure><p>网络工程涉及的知识领域实在是相当的宽广，上图所列举的几个方向，大家可以做个认知。 可能受限于本人的视野，有些领域是没有涵盖的到。 从中可以看出，其实网络工程是一个需要大量知识沉淀的行业，从踏进这个行业的第一步开始，我们就需要不停的学习、沉淀、成长，因为要学的东西实在是太多太多了。路由、交换，是计算机网络的基本，从事这个行业，这方面知识多多少少都要知道点，毕竟没有路由交换技术，互联网连影都看不到。 包括安全在内，无线、视频语音等等，都是网络工程的另一个方向，更加注重应用，目前思科（CISCO）认证体系中，都已经基本涵盖了上述的几个方向，大家可以根据自己的职业发展方向进行选择。</p><p>这里顺便插一句，正是因为网络工程领域的知识范畴如此宽广，因此我们更需要锻炼自己的自学能力、知识管理能力，这些内容，我将会单独讨论。 敏捷的网络工程师、敏捷的知识管理，是一个伟大的命题，希望你我共同来实践和沉淀。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6 总结</b></p><p>本文粗略的介绍了网络、网络工程的概念，本人不是国家承认的专业院校的教师，只是个小小的从业者，从自己的角度和视野探讨了这几个问题，希望能给大家一丁点的启发，那么我就心满意足了，仅供交流：）本文的视野可能会受限于笔者的知识程度和社会阅历，因此仅供各位参考交流，这实非谦恭的辞令，而是信息时代，瞬息万变，如若不是身处技术革新浪潮的前沿，否则很难给这个词下定论，因此若有疏漏，还望各位多多给予指正，感激不尽。</p>", 
            "topic": [
                {
                    "tag": "网络工程", 
                    "tagLink": "https://api.zhihu.com/topics/19658134"
                }, 
                {
                    "tag": "计算机网络", 
                    "tagLink": "https://api.zhihu.com/topics/19572894"
                }, 
                {
                    "tag": "思科认证", 
                    "tagLink": "https://api.zhihu.com/topics/19567456"
                }
            ], 
            "comments": [
                {
                    "userName": "Lightman", 
                    "userLink": "https://www.zhihu.com/people/eb0d8745e9c533d41ce09f432724a479", 
                    "content": "我是一名中职生，专业是计算机网络技术，主要学习一些web开发，静态，ASP，或者是网络组建，路由器交换机这类的企业网组建，不知道您对这个专业是否有了解。<br><br>然后的话我听网络工程师的前辈们讲，现在网工待遇大不如前，因为设备的配置越来越多的不用人工去配置了。所以我明年考大专，我想选一个专业，不知道选什么好，不知道大侠们能否给个建议<br>我对任何领域都比较感兴趣吧，主要我是想找一个待遇好的方向，具体肯定是薪资高一点的。我还自学过Python，感觉语法并不难。所以我有些犹豫，不知道转开发领域好，还是说继续读老本行——网络工程<br><br>我现在有云计算，大数据，web开发，网络安全，计算机网络技术，软件开发这几个专业可选。很迷茫。<br><br>不知道其他已经在江湖混成老油条，油腻大叔们能否给个建议。", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/31855127", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 5, 
            "title": "目录", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/35203334\" class=\"internal\">&amp;番外篇之安全技术&amp;</a></p><p class=\"ztext-empty-paragraph\"><br/></p><p>一、技术类</p><p>1.基础入门系列</p><p><a href=\"https://zhuanlan.zhihu.com/p/31634107\" class=\"internal\">0x01：计算机网络简史</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/31803901\" class=\"internal\">0x02：OSI参考模型</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32013844\" class=\"internal\">0x03：IP地址基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32165604\" class=\"internal\">0x04：DNS基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/32167585\" class=\"internal\">0x05：ARP基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/34286917\" class=\"internal\">0x06：传输层基础</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/35206800\" class=\"internal\">0x07：PPP协议</a></p><p>2.中级修炼系列</p><p><a href=\"https://zhuanlan.zhihu.com/p/32247450\" class=\"internal\">0x01:TCP/IP简述</a></p><p>二、非技术类</p><p>1.网络解读</p><p><a href=\"https://zhuanlan.zhihu.com/p/31855367\" class=\"internal\">0x01：网络工程认知</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/31855681\" class=\"internal\">0x02：网络工程师认知</a></p><p>2.技能规划</p><p><a href=\"https://zhuanlan.zhihu.com/p/31650014\" class=\"internal\">0x01：网络技术攻略</a></p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "计算机网络", 
                    "tagLink": "https://api.zhihu.com/topics/19572894"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/31803901", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 11, 
            "title": "OSI参考模型（网络学习的第一步）", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p>序：</p><p>OSI参考模型对通信中必要的功能做了很好的归纳。网络工程师在讨论相关问题时也经常以OSI参考模型的分层为原型。对于计算机网络的初学者，学习OSI参考模型可以说是通往成功的第一步。</p><p>许多通信协议，都对应了OSI参考模型7个分层中的某层。通过这一点，可以大致了解该协议在整个通信功能中的位置和地位。</p><p>不过，OSI参考模型终究是个“模型”，它也只是对各层的作用做了一系列粗略的界定，并没有对协议和接口进行详细的定义。它对学习和设计协议只能起到一个引导的作用。</p><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>一、OSI七层参考模型</b></h2><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-62ebb5893761668c8953599ca261ed38_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1074\" data-rawheight=\"477\" class=\"origin_image zh-lightbox-thumb\" width=\"1074\" data-original=\"https://pic1.zhimg.com/v2-62ebb5893761668c8953599ca261ed38_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1074&#39; height=&#39;477&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1074\" data-rawheight=\"477\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1074\" data-original=\"https://pic1.zhimg.com/v2-62ebb5893761668c8953599ca261ed38_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-62ebb5893761668c8953599ca261ed38_b.jpg\"/></figure><p><b>0.特点</b></p><ul><li>OSI模型每层都有自己的功能集；</li><li>层与层之间相互独立又相互依靠；</li><li>上层依赖于下层，下层为上层提供服务。</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.应用层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-667ca720e0832ddcd7d46288b76a2916_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"965\" data-rawheight=\"378\" class=\"origin_image zh-lightbox-thumb\" width=\"965\" data-original=\"https://pic3.zhimg.com/v2-667ca720e0832ddcd7d46288b76a2916_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;965&#39; height=&#39;378&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"965\" data-rawheight=\"378\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"965\" data-original=\"https://pic3.zhimg.com/v2-667ca720e0832ddcd7d46288b76a2916_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-667ca720e0832ddcd7d46288b76a2916_b.jpg\"/></figure><p><b>1.1功能：</b>应用层是为应用程序提供服务并规定应用程序中通信相关的细节。如：文件传输（ftp）、电子邮件（pop3）、远程登陆（telnet）等协议</p><p><b>1.2常见协议：</b>http(80)、ftp(20/21)、smtp(25)、pop3(110)、telnet(23)、dns(53)【数字为协议的端口号】</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.表示层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-f0f64ebfe539a76ac61a93ba22f90f75_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1001\" data-rawheight=\"353\" class=\"origin_image zh-lightbox-thumb\" width=\"1001\" data-original=\"https://pic2.zhimg.com/v2-f0f64ebfe539a76ac61a93ba22f90f75_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1001&#39; height=&#39;353&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1001\" data-rawheight=\"353\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1001\" data-original=\"https://pic2.zhimg.com/v2-f0f64ebfe539a76ac61a93ba22f90f75_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-f0f64ebfe539a76ac61a93ba22f90f75_b.jpg\"/></figure><p><b>2.1作用：</b>将应用处理的信息转换为合适网络传输的格式，或将下一层的数据转换为上层能处理的格式。因此它主要负责数据格式的转换。具体来说，就是将设备固有的数据格式转换为网络标准传输格式，因为不同设备对同一比特流解读的结果可能会不同。</p><p><b>2.2比如：</b></p><ul><li>数据的解码和编码，</li><li>数据的加密和解密，</li><li>数据的压缩和解压缩。</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.会话层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-c6696e464363540ba26d1a0708162f93_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1025\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"1025\" data-original=\"https://pic4.zhimg.com/v2-c6696e464363540ba26d1a0708162f93_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1025&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1025\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1025\" data-original=\"https://pic4.zhimg.com/v2-c6696e464363540ba26d1a0708162f93_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-c6696e464363540ba26d1a0708162f93_b.jpg\"/></figure><p><b>3.1作用：</b>负责建立和断开连接（数据流动的逻辑链路），以及数据的分割等数据传输相关的管理。</p><p><b>3.2功能：</b>对话控制，同步。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.传输层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-6f8dcfa3164494746aaeadb8df3e187a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1082\" data-rawheight=\"390\" class=\"origin_image zh-lightbox-thumb\" width=\"1082\" data-original=\"https://pic3.zhimg.com/v2-6f8dcfa3164494746aaeadb8df3e187a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1082&#39; height=&#39;390&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1082\" data-rawheight=\"390\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1082\" data-original=\"https://pic3.zhimg.com/v2-6f8dcfa3164494746aaeadb8df3e187a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-6f8dcfa3164494746aaeadb8df3e187a_b.jpg\"/></figure><p><b>4.1作用：</b>起着可靠传输的作用。只能在通信双方节点上进行处理，而无需在路由器上处理。</p><p><b>4.2功能：</b></p><ul><li>服务点编址、</li><li>分段与重组、</li><li>连接控制、</li><li>流量控制、</li><li>差错控制。</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.网络层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-5a1f0b2c110f2ee7a5854a8b7990d851_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1067\" data-rawheight=\"342\" class=\"origin_image zh-lightbox-thumb\" width=\"1067\" data-original=\"https://pic2.zhimg.com/v2-5a1f0b2c110f2ee7a5854a8b7990d851_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1067&#39; height=&#39;342&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1067\" data-rawheight=\"342\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1067\" data-original=\"https://pic2.zhimg.com/v2-5a1f0b2c110f2ee7a5854a8b7990d851_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-5a1f0b2c110f2ee7a5854a8b7990d851_b.jpg\"/></figure><p><b>5.1作用：</b>将数据传输到目标地址。目标地址可以是多个网络通过路由器连接而成的某个地址。</p><p><b>5.2功能：</b>–为网络设备提供逻辑地址，–进行路由选择、分组转发</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.数据链路层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-14e5c336a41199688021bf4be2678761_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1052\" data-rawheight=\"338\" class=\"origin_image zh-lightbox-thumb\" width=\"1052\" data-original=\"https://pic2.zhimg.com/v2-14e5c336a41199688021bf4be2678761_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1052&#39; height=&#39;338&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1052\" data-rawheight=\"338\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1052\" data-original=\"https://pic2.zhimg.com/v2-14e5c336a41199688021bf4be2678761_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-14e5c336a41199688021bf4be2678761_b.jpg\"/></figure><p><b>6.1作用：</b>负责物理层面上互连的节点之间的通信传输。将0、1序列划分成具有意义的数据帧传输给对端。</p><p><b>6.2功能：</b></p><ul><li>组帧、</li><li>物理编址、</li><li>流量控制、</li><li>差错控制、</li><li>接入控制。</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><p><b>7.物理层</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-6b6fd13a166762ec254ed5a991cc78ac_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"963\" data-rawheight=\"295\" class=\"origin_image zh-lightbox-thumb\" width=\"963\" data-original=\"https://pic1.zhimg.com/v2-6b6fd13a166762ec254ed5a991cc78ac_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;963&#39; height=&#39;295&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"963\" data-rawheight=\"295\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"963\" data-original=\"https://pic1.zhimg.com/v2-6b6fd13a166762ec254ed5a991cc78ac_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-6b6fd13a166762ec254ed5a991cc78ac_b.jpg\"/></figure><p><b>7.1作用：</b>负责0、1比特流与电压高低、光的灭闪之间的转换。</p><p><b>7.2功能:</b></p><ul><li>定义接口和媒体的物理特性,</li><li>定义比特的表示、数据传输速率、</li><li>信号的传输模（单工、半双 工、全双工）,</li><li>定义网络物理拓扑（网状、星型、环型、总线型等拓扑）</li></ul><p class=\"ztext-empty-paragraph\"><br/></p><h2><b>二、七层通信</b></h2><p class=\"ztext-empty-paragraph\"><br/></p><p><b>0.各层之间的联系</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-5cc30c96fd5aac1370ba3f31aa29546d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1172\" data-rawheight=\"603\" class=\"origin_image zh-lightbox-thumb\" width=\"1172\" data-original=\"https://pic2.zhimg.com/v2-5cc30c96fd5aac1370ba3f31aa29546d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1172&#39; height=&#39;603&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1172\" data-rawheight=\"603\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1172\" data-original=\"https://pic2.zhimg.com/v2-5cc30c96fd5aac1370ba3f31aa29546d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-5cc30c96fd5aac1370ba3f31aa29546d_b.jpg\"/></figure><p>从大体上将，OST可以分成两个部分，一个是以上三层为主体的面向用户应用的模块（在TCP/IP五层中被统一成应用层）；一个是以下四层为主题的面向数据传输的模块。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.七层通信</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-cf9b427bf4421b9e6a2d8bb92d772dac_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1164\" data-rawheight=\"614\" class=\"origin_image zh-lightbox-thumb\" width=\"1164\" data-original=\"https://pic1.zhimg.com/v2-cf9b427bf4421b9e6a2d8bb92d772dac_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1164&#39; height=&#39;614&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1164\" data-rawheight=\"614\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1164\" data-original=\"https://pic1.zhimg.com/v2-cf9b427bf4421b9e6a2d8bb92d772dac_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-cf9b427bf4421b9e6a2d8bb92d772dac_b.jpg\"/></figure><p>如图所示，数据的传输过程主要依靠下四层的模块进行，依靠网络层对数据在漫长距离的传输中（经过很多个路由器、交换机）的寻址和选路，也在依靠传输层和数据链路层来实现对需要传输的数据准确无误地传输到对端。</p><p>就以下四层实现的功能来讲，就相当于你把U盘插入并拷贝读取电脑A上的数据，然后你手工地把U盘拔出，并插入电脑B中，读取U盘中数据。核心就是安全、准确的传输数据。</p><p>上三层主要的作用就是处理数据，将数据处理成你能理解的东西。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.数据传输（封装）</b></p><p>封装——每一层都把上层的协议包当成数据部分，加上自己的协议头部，组成自己的协议包</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-54a209f5fc0d72c9e737343e29ebc080_b.jpg\" data-size=\"normal\" data-rawwidth=\"1172\" data-rawheight=\"538\" class=\"origin_image zh-lightbox-thumb\" width=\"1172\" data-original=\"https://pic1.zhimg.com/v2-54a209f5fc0d72c9e737343e29ebc080_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1172&#39; height=&#39;538&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1172\" data-rawheight=\"538\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1172\" data-original=\"https://pic1.zhimg.com/v2-54a209f5fc0d72c9e737343e29ebc080_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-54a209f5fc0d72c9e737343e29ebc080_b.jpg\"/><figcaption>封装问题对于基础弱的同学有点难，这次这篇文章暂时略过</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-9dfd0ac3afafa511bc704c25aaaf6af6_b.jpg\" data-size=\"normal\" data-rawwidth=\"1091\" data-rawheight=\"628\" class=\"origin_image zh-lightbox-thumb\" width=\"1091\" data-original=\"https://pic3.zhimg.com/v2-9dfd0ac3afafa511bc704c25aaaf6af6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1091&#39; height=&#39;628&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1091\" data-rawheight=\"628\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1091\" data-original=\"https://pic3.zhimg.com/v2-9dfd0ac3afafa511bc704c25aaaf6af6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-9dfd0ac3afafa511bc704c25aaaf6af6_b.jpg\"/><figcaption>同上、略过</figcaption></figure><p><a href=\"https://zhuanlan.zhihu.com/p/31855127?refer=annual\" class=\"internal\">目录传送门</a></p>", 
            "topic": [
                {
                    "tag": "CCNA", 
                    "tagLink": "https://api.zhihu.com/topics/19598308"
                }, 
                {
                    "tag": "网络协议", 
                    "tagLink": "https://api.zhihu.com/topics/19779985"
                }, 
                {
                    "tag": "计算机网络", 
                    "tagLink": "https://api.zhihu.com/topics/19572894"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/31652173", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 1, 
            "title": "网络软件攻略", 
            "content": "<p>序：</p><p>有助于学习的各种软件分析、软件分析，持续更新！！！也欢迎大家推荐！！！学无止境，但有一些好工具可以帮助我们节省很多时间！！！</p><p>并附上分享软件的资源，以及使用教程！！！</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、实验软件</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.GNS3</b></p><p>GNS3是一款具有图形化界面可以运行在多平台（包括Windows, Linux, and MacOS等）的网络<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E8%2599%259A%25E6%258B%259F%25E8%25BD%25AF%25E4%25BB%25B6\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">虚拟软件</a>。Cisco网络设备管理员或是想要通过<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/CCNA\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">CCNA</a>,<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/CCNP\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">CCNP</a>,<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/CCIE\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">CCIE</a>等Cisco认证考试的相关人士可以通过它来完成相关的实验模拟操作。同时它也可以用于虚拟体验Cisco网际操作系统IOS或者是检验将要在真实的<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">路由器</a>上部署实施的相关配置。</p><p>缺点：对二层交换支持极差</p><p>改进：使用GNS3+IOU的组合可以应付从ccna到ccie的大部分实验！<b>（看下文）</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.VMware Workstation</b></p><p>VMware Workstation是一款功能强大的桌面<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E8%2599%259A%25E6%258B%259F%25E8%25AE%25A1%25E7%25AE%2597%25E6%259C%25BA\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">虚拟计算机</a>软件，提供用户可在单一的桌面上同时运行不同的操作系统，和进行开发、测试 、部署新的应用程序的最佳解决方案。VMware Workstation可在一部实体机器上模拟完整的网络环境，以及可便于携带的<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E8%2599%259A%25E6%258B%259F%25E6%259C%25BA\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">虚拟机</a>器，其更好的灵活性与先进的技术胜过了市面上其他的虚拟计算机软件。</p><p>注：你值得拥有，不解释</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.Wireshark</b></p><p>Wireshark（前称Ethereal）是一个<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E7%25BD%2591%25E7%25BB%259C%25E5%25B0%2581%25E5%258C%2585\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">网络封包</a>分析软件。网络封包分析软件的功能是撷取网络封包，并尽可能显示出最为详细的网络封包资料。Wireshark使用WinPCAP作为接口，直接与网卡进行数据报文交换。</p><p>强推：无论前期对于网络包分析学习，还是后期对于网络环境的分析、排错，都是神器！</p><p>建议：建立自己的报文库。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.secureCRT</b></p><p>SecureCRT是一款支持<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/SSH\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">SSH</a>（SSH1和SSH2）的<a href=\"https://link.zhihu.com/?target=https%3A//baike.baidu.com/item/%25E7%25BB%2588%25E7%25AB%25AF%25E4%25BB%25BF%25E7%259C%259F\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">终端仿真</a>程序，简单地说是Windows下登录UNIX或Linux服务器主机的软件。</p><p>注：网工常用软件，其中的透明功能深受我的喜欢，同类产品很多，如xshell  等等</p><p class=\"ztext-empty-paragraph\"><br/></p><p>5. 前4个软件教程及资源</p><p>视频：运用GNS3+IOU的安装使用，并附带大型三层交换综合实验；\t</p><p><u><a href=\"https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1nvbybeL\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">pan.baidu.com/s/1nvbybe</span><span class=\"invisible\">L</span><span class=\"ellipsis\"></span></a></u>，密码，na2r；</p><p class=\"ztext-empty-paragraph\"><br/></p><p>软件包：<u><a href=\"https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1eRT4Jei\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">pan.baidu.com/s/1eRT4Je</span><span class=\"invisible\">i</span><span class=\"ellipsis\"></span></a></u>，密码，jtfv</p><p>secureCRT：<u><a href=\"https://link.zhihu.com/?target=https%3A//pan.baidu.com/s/1kVMPlEB\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">pan.baidu.com/s/1kVMPlE</span><span class=\"invisible\">B</span><span class=\"ellipsis\"></span></a></u>，密码，pwfe</p><p class=\"ztext-empty-paragraph\"><br/></p><p>未完，待续！！！</p>", 
            "topic": [
                {
                    "tag": "思科认证", 
                    "tagLink": "https://api.zhihu.com/topics/19567456"
                }, 
                {
                    "tag": "计算机", 
                    "tagLink": "https://api.zhihu.com/topics/19555547"
                }, 
                {
                    "tag": "网络工程师", 
                    "tagLink": "https://api.zhihu.com/topics/20008759"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/31650014", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 0, 
            "title": "网络技术攻略", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p>序：</p><p>无它，此文主要参照车总第一场live，为自身知识体系的一次小梳理的预先文章，后续会陆陆续续的更新。内容可能很多都出自于或参考与livePPT，若有不周，请私信！</p><p>习惯用词：计算机网络=网络</p><p><a href=\"https://zhuanlan.zhihu.com/p/31634107\" class=\"internal\">计算机网络简史</a>，对网络起源与发展的小总结</p><p><a href=\"https://zhuanlan.zhihu.com/p/31652173\" class=\"internal\">网络软件攻略</a>，分享一些网络软件</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、网络初识</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.网络技术有何作用？</b></p><p>生活离不开计算机网络，网络技术更是信息社会的中流砥柱，网络向上对软件提供服务，向下需要指挥硬件工作，起到了一个承上启下的作用。计算机网络对终端用户透明，让不懂网络的用户也可以毫无障碍的上网。</p><p>也仅仅是在网络拥堵、断开等出现各种状况时，用户才能感受到网络时多么的重要，从事与网络的技术人员为信息社会起到了多大的作用。</p><p>如今网络领域和通信领域在技术已经密不可分了，君不见，昔日的纵横全球电话网已经几乎被IP网络所替代。通过IP网络，人们可以实现电话通信、电视播放等等通信能力。而且，随着科技的发展，能联网的设备也不局限于计算机，而是扩展到了手机、家用电器、游戏机等多种产品。后互联网时代的万物互联将登上舞台，为人类的生活带来翻天覆地的变化。</p><p>虽然网络在随不吭不响的为用户提供着服务，但在当今社会已经如同水电煤气一般，至关重要，不可缺少，关乎民生！</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.适合学习网络技术？</b></p><p>如果你是业余爱好这，自己家里搭建小型网络不求人，即使遇到问题，自己动动手去解决，也是蛮有成就感的。给亲朋好友搞定网络问题，有面子、有水准。（业余水准，哈哈）</p><p>如果你是软件工程师，去深入研究TCP/IP协议的内部代码，有助于更加深入理解socket，对于网络理解的越深入，越能知道如何提升软件的性能。</p><p>如果你是测试工程师，广泛学习真实网络部署场景，将有助于QA工程师搭建接近真实的测试平台 ，对网络技术癿理解癿越深入，越能发现隐藏很深的bug</p><p>如果你是网络工程师，咳咳，跳过！！！</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.网络技术难吗？</b></p><p>首先，客观说，如果仅仅时想要去达到了解的程度，看一本TCP/IP的入门级书籍&lt;图解TCP/IP&gt;或者找一本CCNA已经相关视频，就能了解基本网络之知识。如果想要深入，那么，网络的水深的让你发狂，一入网络深似海，学到白头方入门！！！</p><p>少年，努力学好英语吧！网络技术的协议标准、文献、白皮书，大把大把的英文资料等着你来临幸，她们大喊，皇上来啊，良辰美景！！！不要因为语言障碍说不行！！！男人不要说不行！！！</p><p>再者网络技术是一门集数学、逻辑、实践详解和的工程应用学科。当处理网络故障时，需要一个清晰的逻辑推理能力，排除不可遏能，缩小排查范围，减少工作量并提高效率！</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.你走向人生巅峰的三个阶段</b></p><p>基础入门阶段，你需要熟练掌握TCP/IP协议中的主流协议，协议的字段，协议完成的功能，也是一个知识积累的阶段，熟练运用<b>协议分析软件</b>可以帮助你很好的且特别扎实的度过这个阶段。</p><p>修行小成阶段，在你眼中各个协议各司其职，发挥各自应有的作用，仿佛有条不紊，在你眼里网络就是一个整体。此阶段最为苦逼，不解释。</p><p>神功大成阶段，具有宏观、前瞻性意识，能敏锐发现网络隐藏的缺陷、不足，具有逆向思维，更够根据黑盒子的外在表现推测内部实现。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.初级学习内容</b></p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8f80644ef25f4941b233ff212b30c60b_b.jpg\" data-size=\"normal\" data-rawwidth=\"1092\" data-rawheight=\"532\" class=\"origin_image zh-lightbox-thumb\" width=\"1092\" data-original=\"https://pic4.zhimg.com/v2-8f80644ef25f4941b233ff212b30c60b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1092&#39; height=&#39;532&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1092\" data-rawheight=\"532\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1092\" data-original=\"https://pic4.zhimg.com/v2-8f80644ef25f4941b233ff212b30c60b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-8f80644ef25f4941b233ff212b30c60b_b.jpg\"/><figcaption>车总的规划的超神路线，我会走一遍的，望共勉！一起加油</figcaption></figure><p>此部分内容大抵都出自厂商初级认证部分，为CC(\\HC)NA的核心知识点，只要踏踏实实学好此部分内容，网络通信行业大门就向你敞开，不要急躁，可以通过一些网上流传的视频进行学习。加油！推荐cisco认证教程！</p><p><b>车总的规划的超神路线，我会走一遍的，望共勉！一起加油</b>！</p><p class=\"ztext-empty-paragraph\"><br/></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.中级学习内容</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-a58275780c8ba1d45559e6994ff75dab_b.jpg\" data-size=\"normal\" data-rawwidth=\"1280\" data-rawheight=\"769\" class=\"origin_image zh-lightbox-thumb\" width=\"1280\" data-original=\"https://pic4.zhimg.com/v2-a58275780c8ba1d45559e6994ff75dab_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1280&#39; height=&#39;769&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1280\" data-rawheight=\"769\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1280\" data-original=\"https://pic4.zhimg.com/v2-a58275780c8ba1d45559e6994ff75dab_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a58275780c8ba1d45559e6994ff75dab_b.jpg\"/><figcaption>加油！</figcaption></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-491e33872d4d0bfb9c61421acf0fc73b_b.jpg\" data-size=\"normal\" data-rawwidth=\"1276\" data-rawheight=\"850\" class=\"origin_image zh-lightbox-thumb\" width=\"1276\" data-original=\"https://pic4.zhimg.com/v2-491e33872d4d0bfb9c61421acf0fc73b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1276&#39; height=&#39;850&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1276\" data-rawheight=\"850\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1276\" data-original=\"https://pic4.zhimg.com/v2-491e33872d4d0bfb9c61421acf0fc73b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-491e33872d4d0bfb9c61421acf0fc73b_b.jpg\"/><figcaption>加油！</figcaption></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.高级学习内容</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-dc1411c19f442db7e240c0946897170b_b.jpg\" data-size=\"normal\" data-rawwidth=\"1393\" data-rawheight=\"559\" class=\"origin_image zh-lightbox-thumb\" width=\"1393\" data-original=\"https://pic4.zhimg.com/v2-dc1411c19f442db7e240c0946897170b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1393&#39; height=&#39;559&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"1393\" data-rawheight=\"559\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1393\" data-original=\"https://pic4.zhimg.com/v2-dc1411c19f442db7e240c0946897170b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-dc1411c19f442db7e240c0946897170b_b.jpg\"/><figcaption>一个人的精力、经历是有限的，而网络场景是无限的，一个人不可能熟悉所有的设备、协议，但是凭借清晰而正确的概念，可以快速地学习、掌握、并精通它!</figcaption></figure><p class=\"ztext-empty-paragraph\"><br/></p><p><a href=\"https://zhuanlan.zhihu.com/p/31855127?refer=annual\" class=\"internal\">目录传送门</a></p>", 
            "topic": [
                {
                    "tag": "计算机网络", 
                    "tagLink": "https://api.zhihu.com/topics/19572894"
                }, 
                {
                    "tag": "大学生", 
                    "tagLink": "https://api.zhihu.com/topics/19555480"
                }, 
                {
                    "tag": "Cisco（思科）", 
                    "tagLink": "https://api.zhihu.com/topics/19568106"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/31634107", 
            "userName": "惊风落雨", 
            "userLink": "https://www.zhihu.com/people/07254bbc0bdbc552f30f96848b0fc513", 
            "upvote": 15, 
            "title": "计算机网络简史", 
            "content": "<p><a href=\"https://zhuanlan.zhihu.com/p/37345487\" class=\"internal\">目录传送门</a></p><p>序：</p><p>自计算机诞生伊始，经历了一系列演变和发展。大型通用计算机、超级计算机、小型机、个人电脑、工作站、便携电脑以及如今的智能手机移动终端等都是这一过程的产物。</p><p class=\"ztext-empty-paragraph\"><br/></p><p>信息网络如同我们身边的空气，触手可及。然而，就在几十年前，岂止是网络，对于一般人来说就是使用一台计算机都不是那么容易的事情!</p><p class=\"ztext-empty-paragraph\"><br/></p><p>网络的诞生从计算机开始，网络的未来无法预测，网络的价值无法估量!</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>一、计算机网络发展的七个阶段</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.批处理</b></p><p>最初的计算机是一个庞然大物，其体量不是我们现在一两个教室大小就能装下的，通常放置于专门进行计算机管理与运维的计算机中心（现在叫数据中心，DC），仅仅能提供计算力，一般人想用使用计算机，需要使用 <b>批处理</b> 系统（就是事先将用户程序和数据写入存储设备，使用时由计算机读取并处理数据），当时的计算机操作起来相当负责，不是所有人都能轻松自如的使用的，需要专门的操作员去处理。有时程序处理时间较长、用户较多的情况了，受限于当时的计算力，甚至当天都出不了结果。</p><p>批处理时代的计算机主要用于大规模计算或处理，因此那时计算机尚不是一个便于普通人使用的工具。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.分时系统</b></p><p>继批处理系统之后，20世纪60年代，出现了<b>分时系统</b>。它是指多个终端与同一个计算机连接，允许多个用户同时使用一台计算机的系统，达到了一种“一人一机”的目的。不过受限于当时的计算机造价相当昂贵，仍然不是一般团体能使用的起的。多出现于国家机构使用。</p><p>不过，<b>分时系统</b>中每个终端和计算机之间里的通信线路连接形成的线路结构，<b>网络的概念</b>就慢慢付出了水面。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.计算机通信技术</b></p><p>在分时系统中，我们看到了终端和计算机的连接，但这并不意味着计算机与计算机之间也已互联连接。</p><p>到了20世纪70年代，计算机性能有了飞速发展、体积也趋于小型化，同时价格急剧下降。于是计算机不在仅仅局限于研究机关使用。一般的企业也逐渐开始使用计算机这个“神兵利器”。</p><p>随着计算机的数量普及，计算机之间的数据交互的便捷性越来越受到重视，最开始两个主机之间交互数据过程相当繁琐，因此<b>计算机通信技术</b>（计算机与计算机之间由通信线路连接）应运而生。人们可以很轻松的即时读取另一台计算机中的数据，从而极大地缩短了传输数据的时间。</p><p>计算机之间的通信显著地提高了计算机的可用性。人们不再局限于使用一台计算机处理数据。比如，一家公司能够以部门为单位引入计算机，来处理部门内部数据，再由通信线路传送给总部计算机，再由总部计算机处理并得出结果。这就是一种多台计算机的<b>分布式处理</b>。</p><p>从此，计算机的发展进入了一个崭新的历史阶段。这一阶段，计算机更侧重满足使用者的需求、架构更灵活的系统，操作越来越人性化。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.计算机网络的产生</b></p><p>20世纪70年代，人们开始实验基于<b>分组交换技术</b>的计算机网络，并着手研究不同厂商的计算机之间相互通信的技术。到了80年代，一种能够<b>互联多种计算机的网络</b>应运而生。网络通信技术进入了发展的高速公路。</p><p>而计算机技术的发展和普及让人们对网络不再陌生。随着操作计算机难度不断下降，更是拉近了人们与网络之间的距离。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.互联网的普及</b></p><p>进入20世纪90年代，随着计算机的价格降低、性能增强、各类应用纷纷冒头，计算机普及程度越来越高。</p><p>于此同时，电子邮件、万维网等信息传播方式如雨后春笋般迎来了前所未有的发展，使得互联网从大到整个公司范围小道每个家庭内部，都得以广泛普及。</p><p>面对这一趋势，各家厂商不仅要保证生产产品的自身互联性，还着力于让自己的网络技术不断与<b>互联网技术（</b>TCP/IP<b>）</b>兼容。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.互联网时代</b></p><p>互联网的普及和发展对通信领域产生了翻天覆地的影响。</p><p>例如：曾经一直在通信领域具有霸主地位、支撑通信网络的电话网，也渐渐被<b>IP网络</b>所替代。通过IP网络，人们可以实现电话通信、电视播放等等通信能力。而且，随着科技的发展，能联网的设备也不局限于计算机，而是扩展到了手机、家用电器、游戏机等多种产品。后互联网时代的万物互联将登上舞台，为人类的生活带来翻天覆地的变化。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>7.网络安全</b></p><p>互联网给世界带来了颠覆性的改变，给人们日常生活带来了极大的便利，互联网呈现给现代人一个高度便捷的信息网络环境，在国家面前，犹如水电煤气一样，成为了国家必不可少的重要资源，随着万物互联，网络安全必定是<b>国家安全</b>最重要的一环。</p><p>在互联网普及的初期，人们更关注单纯的连接性，注重不受任何限制的建立连接。但现在，人们不再满足与“单纯的连接”而是更为追求“安全的连接”。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>注：这是一个一切皆TCP\\IP的网络时代！</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>二、TCP/IP简史</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>1.军用技术</b></p><p>早在20世纪60年代，美国军方就认识到新的通讯技术对国防有着举足轻重的作用。一开始，通信线路都是<b>星型拓扑</b>，这种拓扑对于天灾人祸的抵抗力极低，有着致命的问题，<b>单点故障</b>。为了实现一种可以多备份、多路径的冗余网络拓扑，以至于不会因为天灾人祸（如核弹攻击）导致通信网络中断。为了实现这种网络，分组交换技术便应运而生。</p><p>由于分组交换技术本身的优越性，到了20世纪60年代后半叶，已经由大量的研究人员投身于分组交换技术和分组通信的研究。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>2.ARPANET（阿帕网）</b></p><p>为了验证分组交换技术的实用性，研究人员搭建了一个实验网络。随着美国国防部的科研力量的倾斜和相关技术的发展，规模不断扩大，普通用户也逐渐加入，后来发展成了巨大规模的网络。</p><p>该网络被称作ARPANET，也是全球互联网的鼻祖。短短三年，在国家力量和利益驱动下，ARPANET从曾经的4个节点迅速发展成为34个节点的超大规模网络。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>3.TCP/IP的出世</b></p><p>ARPENET不仅仅是利用几所大学与研究机构组成的主干网络进行分组交换实验，还会进行在计算机之间互联提供可靠传输的<b>综合性通信协议</b>的实验。</p><p>在20世纪70年代前期，ARPENET的一个研究机构研发出了TCP/IP。虽然TCP/IP只是ARPENET的一个副产物，但是没有人会想到，TCP/IP在后来对世界网络产生的巨大影响！</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>4.UNIX系统的助攻</b></p><p>TCP/IP对ARPENET起到举重若轻的作用，但由于ARPENET自身规模的原因，TCP/IP的对网络世界的应用范围有限、影响有限。</p><p>但在1980年，一款里程碑式的操作系统出世，BSD UNIX操作系统。由于UNIX实现了TCP/IP协议，所以ARPENET正式采用了TCP/IP协议（1983）。从此TCP/IP协议得到了发展的土壤！</p><p>20世纪的80年代，随着计算机技术的发展和计算机的普及，也成为了局域网快速发展的时代，还是UNIX工作站迅速普及的时代，也是通过TCP/IP构建网络最为盛行的时代。作为计算机网络主流协议TCP/IP，它的发展也是与UNIX密不可分。</p><p>在<b>基于TCP/IP</b>而形成的世界性范围的网络--<b>互联网</b>的影响下，那些”各自为政“开发自己通信协议的网络设备供应商也陆续遵循TCP/IP协议规范，以便制造兼容性更好的产品。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>5.互联网商业化</b></p><p>有人的地方就有江湖！咳咳，就有商业！</p><p>研发互联网最初的目的适用于实验和研究，到了90年代，随着计算机普及的高潮，互联网的发展也迎来前所未有巅峰。届时，基于互联网技术的新型应用，如在线游戏、SNS、视频通信等商用服务也如雨后春笋不断的涌现出来。</p><p>于是，人们对拨号上网的要求越来越高，希望每两个人之间也能够通过计算机实现通信计算机实现通信。</p><p>于是，面向公司企业和一般家庭提供专门互联网接入服务的具有商用许可的提供商（ISP）出现了。连接到互联网，人们可以从WWW获取世界各处的信息，通过电子邮件进行交流，向世界各地发布自己的消息。互联网使人们的生活变得多姿多彩，人们不禁可以享受多姿多彩的服务，还可以通过互联网自己开创新服务！</p><p>至此，互联网得以盛行，不过互联网的辉煌才刚刚开始!</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>6.TCP/IP五层与OSI七层</b></p><p>20世纪90年代，ISO开展了OSI这一国际标准协议的标准化进程。然而，OSI协议并没有得到普及，真正被广泛应用的是TCP/IP协议。TCP/IP凭借自己的<b>开放性、和注重实用性</b>（即协议能否被广泛实际应用）两大特点，成为了主流协议簇。</p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "计算机网络", 
                    "tagLink": "https://api.zhihu.com/topics/19572894"
                }, 
                {
                    "tag": "Cisco（思科）", 
                    "tagLink": "https://api.zhihu.com/topics/19568106"
                }, 
                {
                    "tag": "网络工程", 
                    "tagLink": "https://api.zhihu.com/topics/19658134"
                }
            ], 
            "comments": [
                {
                    "userName": "不甘", 
                    "userLink": "https://www.zhihu.com/people/3c1720934dc45a2e12dd90b57a981700", 
                    "content": "<p>tcp/ip模型不是只有4层吗，作者最后一个地方写错了，写成五层了。</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }
    ], 
    "url": "https://zhuanlan.zhihu.com/annual"
}
