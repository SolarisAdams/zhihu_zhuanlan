{
    "title": "Mandal-Art", 
    "description": "用一种思想，创新的思想，达到创新的手段，打破定势的线性思维方式，重用联想，达到利用潜在实力的目的，把人的能力发挥至极致。", 
    "followers": [
        "https://www.zhihu.com/people/liu-zheng-guang-93-13", 
        "https://www.zhihu.com/people/tim-adams", 
        "https://www.zhihu.com/people/da-ming-xiang-shui", 
        "https://www.zhihu.com/people/yang-liu-85", 
        "https://www.zhihu.com/people/ffp2010", 
        "https://www.zhihu.com/people/peter-hu-8", 
        "https://www.zhihu.com/people/yang-bo-yu-15-72", 
        "https://www.zhihu.com/people/hebxiaogao", 
        "https://www.zhihu.com/people/li-yong-nan-69", 
        "https://www.zhihu.com/people/lang-wen-bing-han", 
        "https://www.zhihu.com/people/zhang-hua-83-48-15", 
        "https://www.zhihu.com/people/bai-bai-96", 
        "https://www.zhihu.com/people/zheng-si-wen", 
        "https://www.zhihu.com/people/ao-jiao-de-tu-dou-zhu", 
        "https://www.zhihu.com/people/someone-36-92", 
        "https://www.zhihu.com/people/xiao-xuan-dou-27", 
        "https://www.zhihu.com/people/hao-hao-xian-sheng-42-66", 
        "https://www.zhihu.com/people/beepnow", 
        "https://www.zhihu.com/people/lipaopao", 
        "https://www.zhihu.com/people/szabcd", 
        "https://www.zhihu.com/people/visomsucker", 
        "https://www.zhihu.com/people/liu-kan-shui-91", 
        "https://www.zhihu.com/people/feerman", 
        "https://www.zhihu.com/people/dong-ray-53", 
        "https://www.zhihu.com/people/KKEE-ASL", 
        "https://www.zhihu.com/people/wen-nuan-61-6", 
        "https://www.zhihu.com/people/liang-sa", 
        "https://www.zhihu.com/people/lomo-32", 
        "https://www.zhihu.com/people/xxxxxxooooo", 
        "https://www.zhihu.com/people/elespec", 
        "https://www.zhihu.com/people/xin-ba-60", 
        "https://www.zhihu.com/people/insight-jing", 
        "https://www.zhihu.com/people/qu-wen-di-fang", 
        "https://www.zhihu.com/people/ge-tong-fang", 
        "https://www.zhihu.com/people/qing-kong-89-76", 
        "https://www.zhihu.com/people/magictour", 
        "https://www.zhihu.com/people/rekcah", 
        "https://www.zhihu.com/people/hu-jery", 
        "https://www.zhihu.com/people/liu-dun-qiang-11", 
        "https://www.zhihu.com/people/tang-yi-95", 
        "https://www.zhihu.com/people/cang-er-83-5", 
        "https://www.zhihu.com/people/martin-woo-69", 
        "https://www.zhihu.com/people/guo-ze-yu-13", 
        "https://www.zhihu.com/people/caa-solas", 
        "https://www.zhihu.com/people/racylane-23"
    ], 
    "article": [
        {
            "url": "https://zhuanlan.zhihu.com/p/58966434", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 16, 
            "title": "免费下载医学文献全文，全自动翻译PDF全文并导出Word", 
            "content": "<p>使用方法欢迎观看B站视频：</p><a href=\"https://link.zhihu.com/?target=https%3A//www.bilibili.com/video/av46019045/\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">免费下载医学文献全文，全自动翻译PDF全文并导出Word</a><p>工欲善其事必先利其器，准备安装一些插件。</p><p>1、安装 Chrome 插件 <a href=\"https://link.zhihu.com/?target=https%3A//chrome.google.com/webstore/detail/scholarscope/lkfianapjmcmdpemdmkmkkkifdjglkpe%3Futm_source%3Dchrome-ntp-icon\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ScholarScope</a> </p><p>2、安装 Chrome 插件 <a href=\"https://link.zhihu.com/?target=https%3A//chrome.google.com/webstore/detail/lingocloud-interpreter/jmpepeebcbihafjjadogphmbgiffiajh%3Fhl%3Dzh-CN\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">彩云小译</a></p><p>3、安装 <a href=\"https://link.zhihu.com/?target=https%3A//chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Tampermonkey</a></p><p>4、油猴脚本安装 <a href=\"https://link.zhihu.com/?target=https%3A//greasyfork.org/zh-CN/scripts/35251-%25E6%2599%25BA%25E8%2583%25BD%25E5%2588%2592%25E8%25AF%258D%25E7%25BF%25BB%25E8%25AF%2591\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">划词翻译</a></p><p>5、油猴脚本安装 <a href=\"https://link.zhihu.com/?target=https%3A//greasyfork.org/zh-CN/scripts/370246-sci-hub-button\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Sci-hub button</a></p><p>翻译这里也推荐一个工具，<a href=\"https://link.zhihu.com/?target=https%3A//fanyi.transgod.cn/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">transgod</a> 支持 PDF 的上传翻译，且自动转换为 Word。</p><p></p>", 
            "topic": [
                {
                    "tag": "PubMed", 
                    "tagLink": "https://api.zhihu.com/topics/19698893"
                }, 
                {
                    "tag": "全文检索", 
                    "tagLink": "https://api.zhihu.com/topics/19606494"
                }
            ], 
            "comments": [
                {
                    "userName": "琴姐姐", 
                    "userLink": "https://www.zhihu.com/people/b9160f888bdb203b03806bcb28abbfc2", 
                    "content": "transgod没有搜到啊？", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "Ron Liu", 
                            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
                            "content": "<p><a href=\"http://link.zhihu.com/?target=https%3A//fanyi.transgod.cn/\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://</span><span class=\"visible\">fanyi.transgod.cn/</span><span class=\"invisible\"></span></a></p>", 
                            "likes": 2, 
                            "replyToAuthor": "琴姐姐"
                        }
                    ]
                }, 
                {
                    "userName": "赫拉克里斯", 
                    "userLink": "https://www.zhihu.com/people/f881a4517521cb49364ab0d90fdd2cb5", 
                    "content": "<p>文件上传有限制，不知道有没有突破限制的方法?</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "林夕", 
                    "userLink": "https://www.zhihu.com/people/22f7b172b23342435f815d9e1723112f", 
                    "content": "我昨晚安装了好久，都没有成功，请问怎么安装呀，B站上也没看明白", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Charlotte", 
                    "userLink": "https://www.zhihu.com/people/523eb96d7cf8e98809cf53ec13725052", 
                    "content": "<p>transgod好像被屏蔽了</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/58860102", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 17, 
            "title": "软路由安装 LEDE 及配置上海电信 IPTV", 
            "content": "<p>软路由安装 LEDE 后可以大大提高路由器的性能。安装LEDE的教程很多，这里主要介绍下直通的做法，和注意事项，<a href=\"https://link.zhihu.com/?target=http%3A//koolshare.cn/forum.php%3Fmod%3Dviewthread%26tid%3D132810%26highlight%3Desxi\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">基础教程</a>可以看这里，这里介绍一点其它的内容。</p><p>1、ESXI 切换直通</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-1a389f7d4c5377ed3ac77f8925bb9f3e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2960\" data-rawheight=\"1610\" class=\"origin_image zh-lightbox-thumb\" width=\"2960\" data-original=\"https://pic3.zhimg.com/v2-1a389f7d4c5377ed3ac77f8925bb9f3e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2960&#39; height=&#39;1610&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2960\" data-rawheight=\"1610\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2960\" data-original=\"https://pic3.zhimg.com/v2-1a389f7d4c5377ed3ac77f8925bb9f3e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-1a389f7d4c5377ed3ac77f8925bb9f3e_b.jpg\"/></figure><p>2、创建LEDE虚拟机</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-cf6ab9a440f9d8f86dabdc41e4f62fc2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2960\" data-rawheight=\"1616\" class=\"origin_image zh-lightbox-thumb\" width=\"2960\" data-original=\"https://pic3.zhimg.com/v2-cf6ab9a440f9d8f86dabdc41e4f62fc2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2960&#39; height=&#39;1616&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2960\" data-rawheight=\"1616\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2960\" data-original=\"https://pic3.zhimg.com/v2-cf6ab9a440f9d8f86dabdc41e4f62fc2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-cf6ab9a440f9d8f86dabdc41e4f62fc2_b.jpg\"/></figure><p>3、添加一块本地硬盘，把 LEDE 系统传上去，在 <a href=\"https://link.zhihu.com/?target=http%3A//firmware.koolshare.cn/LEDE_X64_fw867/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">koolshare</a> 官网可以找到最新版本。如果有网卡直通，内存设置的时候需要勾选“预留所有客户机内存 (全部锁定)”，不然会报错。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-c57a7acc3addb0fade70f44c196e8446_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1822\" data-rawheight=\"1292\" class=\"origin_image zh-lightbox-thumb\" width=\"1822\" data-original=\"https://pic3.zhimg.com/v2-c57a7acc3addb0fade70f44c196e8446_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1822&#39; height=&#39;1292&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1822\" data-rawheight=\"1292\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1822\" data-original=\"https://pic3.zhimg.com/v2-c57a7acc3addb0fade70f44c196e8446_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-c57a7acc3addb0fade70f44c196e8446_b.jpg\"/></figure><p>4、添加网络适配器，以及切换直通后的网卡。直通的网卡属于PCI设备。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-5fb2b8c567490f47ee60924db667dcf4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1768\" data-rawheight=\"1266\" class=\"origin_image zh-lightbox-thumb\" width=\"1768\" data-original=\"https://pic1.zhimg.com/v2-5fb2b8c567490f47ee60924db667dcf4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1768&#39; height=&#39;1266&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1768\" data-rawheight=\"1266\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1768\" data-original=\"https://pic1.zhimg.com/v2-5fb2b8c567490f47ee60924db667dcf4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-5fb2b8c567490f47ee60924db667dcf4_b.jpg\"/></figure><p>5、所有硬件都配置好之后，就可以启动 LEDE 了。默认密码是koolshare。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-0ad8ade97f3f56ba2501f75d48685549_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2942\" data-rawheight=\"1634\" class=\"origin_image zh-lightbox-thumb\" width=\"2942\" data-original=\"https://pic2.zhimg.com/v2-0ad8ade97f3f56ba2501f75d48685549_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2942&#39; height=&#39;1634&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2942\" data-rawheight=\"1634\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2942\" data-original=\"https://pic2.zhimg.com/v2-0ad8ade97f3f56ba2501f75d48685549_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-0ad8ade97f3f56ba2501f75d48685549_b.jpg\"/></figure><p>6、接下来就是网络接口的设置了，和 IPV6 相关的可以都删掉，WAN 改为 PPPOE 拨号，物理硬件指定一个直通的网口，LAN 的物理硬件配置为剩余的网口。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-c4a52ff0fe65ece5aa9cccf696e340cf_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2958\" data-rawheight=\"1488\" class=\"origin_image zh-lightbox-thumb\" width=\"2958\" data-original=\"https://pic4.zhimg.com/v2-c4a52ff0fe65ece5aa9cccf696e340cf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2958&#39; height=&#39;1488&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2958\" data-rawheight=\"1488\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2958\" data-original=\"https://pic4.zhimg.com/v2-c4a52ff0fe65ece5aa9cccf696e340cf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-c4a52ff0fe65ece5aa9cccf696e340cf_b.jpg\"/></figure><p>7、上海电信 IPTV 需要增加了 VLAN85 的一路接口，上海的 IPTV 需要 A/B 平面认证。VLAN85 既可以搞定，51是点播业务，用不到的可以不添加。然后添加防火墙。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-25cf70d19ba194b520f9ae7d2ba36649_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2940\" data-rawheight=\"1470\" class=\"origin_image zh-lightbox-thumb\" width=\"2940\" data-original=\"https://pic2.zhimg.com/v2-25cf70d19ba194b520f9ae7d2ba36649_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2940&#39; height=&#39;1470&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2940\" data-rawheight=\"1470\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2940\" data-original=\"https://pic2.zhimg.com/v2-25cf70d19ba194b520f9ae7d2ba36649_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-25cf70d19ba194b520f9ae7d2ba36649_b.jpg\"/></figure><p>同时配置 dhcp-option ，如下图：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-96eae7acf29fe48eccfa6f2ffcbf4dde_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2916\" data-rawheight=\"1446\" class=\"origin_image zh-lightbox-thumb\" width=\"2916\" data-original=\"https://pic3.zhimg.com/v2-96eae7acf29fe48eccfa6f2ffcbf4dde_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;2916&#39; height=&#39;1446&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"2916\" data-rawheight=\"1446\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"2916\" data-original=\"https://pic3.zhimg.com/v2-96eae7acf29fe48eccfa6f2ffcbf4dde_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-96eae7acf29fe48eccfa6f2ffcbf4dde_b.jpg\"/></figure><p>至此，所有内容准备完毕，IPTV 连接到软路由的任意 LAN 口，即可直接使用了。</p>", 
            "topic": [
                {
                    "tag": "软路由", 
                    "tagLink": "https://api.zhihu.com/topics/19626614"
                }, 
                {
                    "tag": "IPTV", 
                    "tagLink": "https://api.zhihu.com/topics/19557219"
                }
            ], 
            "comments": [
                {
                    "userName": "知乎用户", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>电信IPTV内建PPPoE拨号，账号是正常宽带账号加IPTV后缀，密码一样。也能通过这样解决？</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "cjumna", 
                    "userLink": "https://www.zhihu.com/people/1391f14a33bdb91be21c7aef3b0c8c77", 
                    "content": "已经按照配置设置晚上 还是不能实现看iptv，我中间有交换机不带vlan功能的，是不是需要把交换换成vlan的？ 如果是lvan的交换机怎么设置？麻烦楼上给解答一下，谢谢", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/52966646", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 2, 
            "title": "『远课』直播小程序测试上线", 
            "content": "<p>经过断断续续 2 个月左右的开发，课程直播小程序『远课』测试上线。如果你刚好有下面的需求，不妨试试看：</p><p>1、在线直播授课，课程有 PPT，需要同步翻页。</p><p>2、不想单独装一个直播 APP。</p><p>3、简单的聊天互动，功能越简单越好。</p><p>『远课』小程序就是为这样的需求量身打造，因为创建直播课程太简单，所以你可以在直播开始前 10 秒进行课程创建，分享至好友/微信群即可，无需太多准备。这也是致敬张小龙上线小程序的初衷：工具属性，用完即走。</p><p class=\"ztext-empty-paragraph\"><br/></p><p> 一些功能的介绍</p><p>1. 开课</p><p>点击开课，即可发起课程。用户最近的两次进入过直播课程会在首页显示，方便快速进入；这里会有一些小细节，自己发起的直播和别人发起的直播图标会有细微差别。用心体会就能看到。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-4c776f4ccdfc8f86437fd71cdccaedc7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-4c776f4ccdfc8f86437fd71cdccaedc7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;1071&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic4.zhimg.com/v2-4c776f4ccdfc8f86437fd71cdccaedc7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-4c776f4ccdfc8f86437fd71cdccaedc7_b.jpg\"/></figure><p>2.上传图片</p><p>创建一场课程很简单，填写一些直播的简单信息，上传你直播需要的图片，就可以了。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-8fa78245672b193e6e42cbeaa1c89640_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-8fa78245672b193e6e42cbeaa1c89640_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;1071&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic1.zhimg.com/v2-8fa78245672b193e6e42cbeaa1c89640_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-8fa78245672b193e6e42cbeaa1c89640_b.jpg\"/></figure><p>3.开始直播</p><p>一场直播就这样创建好了，点击开始，即可推出直播数据流。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-36c2d1dd9496fbb76199d004545ee48a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-36c2d1dd9496fbb76199d004545ee48a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;1071&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-36c2d1dd9496fbb76199d004545ee48a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-36c2d1dd9496fbb76199d004545ee48a_b.jpg\"/></figure><p>4.分享直播</p><p>最后，分享本次直播的小程序码即可邀请你的用户观看。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-edfbce2850128325524aa6b6661f9ae2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-edfbce2850128325524aa6b6661f9ae2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1080&#39; height=&#39;1071&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"1080\" data-rawheight=\"1071\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1080\" data-original=\"https://pic3.zhimg.com/v2-edfbce2850128325524aa6b6661f9ae2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-edfbce2850128325524aa6b6661f9ae2_b.jpg\"/></figure><p>一些你看不到的功能</p><p>1、自动群发提醒，如果你提前公布了本次直播的**小程序码**，我们会在直播开始后3分钟，自动给关注的用户群发上线通知。方便更多的用户能看到你。</p><p>2、主播端可以随时增、删图片，调整图片顺序。图片支持缩放，双击会复位。</p><p>3、观众可以根据自己需求随意观看图片，当然，也可以选择和主播同步。</p><p>4、首页摇一摇，就可以给我们提供反馈意见。</p><p>微信扫一扫小程序码使用</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-bef672cf6d9e6a249ec7165ed021b9e4_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"344\" data-rawheight=\"344\" class=\"content_image\" width=\"344\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;344&#39; height=&#39;344&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"344\" data-rawheight=\"344\" class=\"content_image lazy\" width=\"344\" data-actualsrc=\"https://pic1.zhimg.com/v2-bef672cf6d9e6a249ec7165ed021b9e4_b.jpg\"/></figure><p>TODO</p><p>- [ ] 演讲模式，更大的 PPT 展示空间。</p><p>- [ ] 群直播小组，基于微信社交，一个更好玩的功能。</p><p>- [ ] 课程录制（企业版）。</p>", 
            "topic": [
                {
                    "tag": "微信", 
                    "tagLink": "https://api.zhihu.com/topics/19554470"
                }, 
                {
                    "tag": "课堂", 
                    "tagLink": "https://api.zhihu.com/topics/19606746"
                }, 
                {
                    "tag": "直播", 
                    "tagLink": "https://api.zhihu.com/topics/19616004"
                }
            ], 
            "comments": [
                {
                    "userName": "周遥遥", 
                    "userLink": "https://www.zhihu.com/people/bff0a1384bef0f9a07fb064f5104a69a", 
                    "content": "如果可以点名学生让他语音回答，那就完美了，哈哈哈", 
                    "likes": 1, 
                    "childComments": [
                        {
                            "userName": "Ron Liu", 
                            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
                            "content": "<p>嗯，初步功能刚做完，未来还有很多改进空间，谢谢建议</p><a class=\"comment_sticker\" href=\"https://pic2.zhimg.com/v2-90359a720808ff45062287127cfa1039.gif\" data-width=\"\" data-height=\"\">[爱心]</a>", 
                            "likes": 0, 
                            "replyToAuthor": "周遥遥"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/32247513", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 0, 
            "title": "怎么用微信的文档开发支付宝的小程序？", 
            "content": "<p>我们做了一个信用借的小程序，考虑到支付宝有芝麻信用，第一步优先想到了支付宝，程序中涉及订单取消、设备发放等场景，会需要主动发模版消息，于是，我们看到了「模版消息」这里，提到一个form_id</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-3236c9dd78ec82487c0bf080ce9daf02_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"3048\" data-rawheight=\"1923\" class=\"origin_image zh-lightbox-thumb\" width=\"3048\" data-original=\"https://pic3.zhimg.com/v2-3236c9dd78ec82487c0bf080ce9daf02_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;3048&#39; height=&#39;1923&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"3048\" data-rawheight=\"1923\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"3048\" data-original=\"https://pic3.zhimg.com/v2-3236c9dd78ec82487c0bf080ce9daf02_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-3236c9dd78ec82487c0bf080ce9daf02_b.jpg\"/></figure><p>于是我们就找到Form的文档，看到了这里，发现根本没有form_id这个内容。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-ab9e59ed06b89147dd45c024cefd9b88_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"3048\" data-rawheight=\"1923\" class=\"origin_image zh-lightbox-thumb\" width=\"3048\" data-original=\"https://pic1.zhimg.com/v2-ab9e59ed06b89147dd45c024cefd9b88_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;3048&#39; height=&#39;1923&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"3048\" data-rawheight=\"1923\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"3048\" data-original=\"https://pic1.zhimg.com/v2-ab9e59ed06b89147dd45c024cefd9b88_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-ab9e59ed06b89147dd45c024cefd9b88_b.jpg\"/></figure><p>于是，我们机智的找到了微信小程序的文档。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-57dd911b1403ea0be957b5eb8255117a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"3048\" data-rawheight=\"1923\" class=\"origin_image zh-lightbox-thumb\" width=\"3048\" data-original=\"https://pic3.zhimg.com/v2-57dd911b1403ea0be957b5eb8255117a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;3048&#39; height=&#39;1923&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"3048\" data-rawheight=\"1923\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"3048\" data-original=\"https://pic3.zhimg.com/v2-57dd911b1403ea0be957b5eb8255117a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-57dd911b1403ea0be957b5eb8255117a_b.jpg\"/></figure><p>最后我们参考微信的文档，开始开发支付宝的小程序。</p><p></p><p></p>", 
            "topic": [
                {
                    "tag": "支付宝", 
                    "tagLink": "https://api.zhihu.com/topics/19552417"
                }, 
                {
                    "tag": "模版", 
                    "tagLink": "https://api.zhihu.com/topics/19602787"
                }, 
                {
                    "tag": "微信", 
                    "tagLink": "https://api.zhihu.com/topics/19554470"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/30828390", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 1, 
            "title": "检验电子发票是否重复报销", 
            "content": "<p>目前电子发票的使用越来越多，因为公司没钱买系统，电子发票还是和传统发票一样使用：「邮件提交发票PDF文件+自行打印粘贴」，难免就会发生多次提交同一张发票的情况，逐月累计，文件越来越多，更难核查。</p><h2><b>解决思路：</b></h2><figure><noscript><img src=\"https://pic2.zhimg.com/v2-84a2c9c17f10953a60964928378be51d_b.jpg\" data-caption=\"\" data-rawwidth=\"1178\" data-rawheight=\"464\" class=\"origin_image zh-lightbox-thumb\" width=\"1178\" data-original=\"https://pic2.zhimg.com/v2-84a2c9c17f10953a60964928378be51d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1178&#39; height=&#39;464&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-rawwidth=\"1178\" data-rawheight=\"464\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1178\" data-original=\"https://pic2.zhimg.com/v2-84a2c9c17f10953a60964928378be51d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-84a2c9c17f10953a60964928378be51d_b.jpg\"/></figure><h2><b>具体做法：</b></h2><p>1、环境配置</p><p>PDF2JPG的方案很多，常见使用<a href=\"https://link.zhihu.com/?target=http%3A//www.imagemagick.org/script/index.php\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ImageMagick</a>做图像处理，<a href=\"https://link.zhihu.com/?target=https%3A//www.ghostscript.com/download/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Ghostscript</a>（gs）做PDF解析。</p><p>所以macOS下需要安装：</p><div class=\"highlight\"><pre><code class=\"language-powershell\"><span class=\"n\">brew</span> <span class=\"n\">install</span> <span class=\"n\">ghostscript</span>\n<span class=\"n\">brew</span> <span class=\"n\">install</span> <span class=\"n\">ImageMagick</span></code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p>2、代码</p><p>接下来就是截取发票左上角的二维码，解析二维码信息，目前的发票都能获取到：</p><blockquote>[&#34;发票代码&#34;,&#34;发票号码&#34;,&#34;金额&#34;,&#34;开票日期&#34;,&#34;校验码&#34;]</blockquote><p>代码如下：</p><div class=\"highlight\"><pre><code class=\"language-python3\"><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">re</span>\n<span class=\"kn\">import</span> <span class=\"nn\">io</span>\n<span class=\"kn\">from</span> <span class=\"nn\">PIL</span> <span class=\"k\">import</span> <span class=\"n\">Image</span> <span class=\"k\">as</span> <span class=\"n\">PI</span>\n<span class=\"kn\">from</span> <span class=\"nn\">wand.image</span> <span class=\"k\">import</span> <span class=\"n\">Image</span>\n<span class=\"kn\">from</span> <span class=\"nn\">pyzbar.pyzbar</span> <span class=\"k\">import</span> <span class=\"n\">decode</span>\n<span class=\"kn\">from</span> <span class=\"nn\">xlsx</span> <span class=\"k\">import</span> <span class=\"o\">*</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">dirlist</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">allfile</span><span class=\"p\">):</span> \n    <span class=\"n\">filelist</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">listdir</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">)</span> \n    <span class=\"k\">for</span> <span class=\"n\">filename</span> <span class=\"ow\">in</span> <span class=\"n\">filelist</span><span class=\"p\">:</span> \n        <span class=\"n\">filepath</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">filename</span><span class=\"p\">)</span> \n        <span class=\"k\">if</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">isdir</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">):</span> \n            <span class=\"n\">dirlist</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">,</span> <span class=\"n\">allfile</span><span class=\"p\">)</span> \n        <span class=\"k\">else</span><span class=\"p\">:</span> \n            <span class=\"n\">allfile</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">filepath</span><span class=\"p\">)</span> \n    <span class=\"k\">return</span> <span class=\"n\">allfile</span> \n\n<span class=\"k\">def</span> <span class=\"nf\">get_qrcode</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">):</span>\n    <span class=\"n\">file_path</span> <span class=\"o\">=</span> <span class=\"n\">path</span>\n    <span class=\"k\">with</span> <span class=\"n\">Image</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"o\">=</span><span class=\"n\">file_path</span><span class=\"p\">,</span><span class=\"n\">resolution</span><span class=\"o\">=</span><span class=\"mi\">300</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">img</span><span class=\"p\">:</span>\n        <span class=\"n\">img</span><span class=\"o\">.</span><span class=\"n\">crop</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">img</span><span class=\"o\">.</span><span class=\"n\">width</span><span class=\"o\">/</span><span class=\"mi\">4</span><span class=\"p\">),</span><span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">img</span><span class=\"o\">.</span><span class=\"n\">height</span><span class=\"o\">/</span><span class=\"mi\">4</span><span class=\"p\">))</span>\n        <span class=\"n\">raw</span> <span class=\"o\">=</span> <span class=\"n\">img</span><span class=\"o\">.</span><span class=\"n\">make_blob</span><span class=\"p\">(</span><span class=\"s2\">&#34;png&#34;</span><span class=\"p\">)</span>\n        <span class=\"n\">image</span> <span class=\"o\">=</span> <span class=\"n\">PI</span><span class=\"o\">.</span><span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">io</span><span class=\"o\">.</span><span class=\"n\">BytesIO</span><span class=\"p\">(</span><span class=\"n\">raw</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">convert</span><span class=\"p\">(</span><span class=\"s2\">&#34;RGBA&#34;</span><span class=\"p\">)</span>\n\n        <span class=\"k\">try</span><span class=\"p\">:</span>\n            <span class=\"n\">x</span><span class=\"p\">,</span><span class=\"n\">y</span> <span class=\"o\">=</span> <span class=\"n\">image</span><span class=\"o\">.</span><span class=\"n\">size</span>\n            <span class=\"n\">p</span> <span class=\"o\">=</span> <span class=\"n\">PI</span><span class=\"o\">.</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"s1\">&#39;RGB&#39;</span><span class=\"p\">,</span> <span class=\"n\">image</span><span class=\"o\">.</span><span class=\"n\">size</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"mi\">255</span><span class=\"p\">,</span><span class=\"mi\">255</span><span class=\"p\">,</span><span class=\"mi\">255</span><span class=\"p\">))</span>\n            <span class=\"n\">p</span><span class=\"o\">.</span><span class=\"n\">paste</span><span class=\"p\">(</span><span class=\"n\">image</span><span class=\"p\">,</span><span class=\"n\">image</span><span class=\"p\">)</span>\n            <span class=\"k\">return</span> <span class=\"nb\">bytes</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n        <span class=\"k\">except</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"nb\">bytes</span><span class=\"o\">.</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"n\">decode</span><span class=\"p\">(</span><span class=\"n\">image</span><span class=\"p\">)[</span><span class=\"mi\">0</span><span class=\"p\">][</span><span class=\"mi\">0</span><span class=\"p\">])</span>\n \n<span class=\"k\">def</span> <span class=\"nf\">parse_info</span><span class=\"p\">(</span><span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"n\">info_list</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">(</span><span class=\"s2\">&#34;,&#34;</span><span class=\"p\">)</span>\n    <span class=\"n\">out</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n    <span class=\"n\">out</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_code&#34;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">info_list</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"p\">]</span>\n    <span class=\"n\">out</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_number&#34;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">info_list</span><span class=\"p\">[</span><span class=\"mi\">3</span><span class=\"p\">]</span>\n    <span class=\"n\">out</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_cost&#34;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">info_list</span><span class=\"p\">[</span><span class=\"mi\">4</span><span class=\"p\">]</span>\n    <span class=\"n\">out</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_datetime&#34;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">info_list</span><span class=\"p\">[</span><span class=\"mi\">5</span><span class=\"p\">]</span>\n    <span class=\"n\">out</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_check_code&#34;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">info_list</span><span class=\"p\">[</span><span class=\"mi\">6</span><span class=\"p\">]</span>\n    <span class=\"k\">return</span> <span class=\"n\">out</span>\n \n<span class=\"n\">data_header</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s2\">&#34;路径&#34;</span><span class=\"p\">,</span><span class=\"s2\">&#34;发票代码&#34;</span><span class=\"p\">,</span><span class=\"s2\">&#34;发票号码&#34;</span><span class=\"p\">,</span><span class=\"s2\">&#34;金额&#34;</span><span class=\"p\">,</span><span class=\"s2\">&#34;开票日期&#34;</span><span class=\"p\">,</span><span class=\"s2\">&#34;校验码&#34;</span><span class=\"p\">]</span>\n<span class=\"n\">user_table</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n \n<span class=\"k\">try</span><span class=\"p\">:</span>\n    <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">xload</span><span class=\"p\">(</span><span class=\"s1\">&#39;data.xlsx&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;data&#39;</span><span class=\"p\">,</span><span class=\"n\">header</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"k\">except</span><span class=\"p\">:</span>\n    <span class=\"n\">xwrite</span><span class=\"p\">(</span><span class=\"s2\">&#34;data.xlsx&#34;</span><span class=\"p\">,{</span><span class=\"s2\">&#34;data&#34;</span><span class=\"p\">:</span><span class=\"n\">xheader</span><span class=\"p\">(</span><span class=\"n\">data_header</span><span class=\"p\">,</span><span class=\"n\">user_table</span><span class=\"p\">)})</span>\n    <span class=\"n\">data</span><span class=\"o\">=</span><span class=\"n\">xload</span><span class=\"p\">(</span><span class=\"s1\">&#39;data.xlsx&#39;</span><span class=\"p\">,</span><span class=\"s1\">&#39;data&#39;</span><span class=\"p\">,</span><span class=\"n\">header</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n \n<span class=\"n\">all_file</span> <span class=\"o\">=</span> <span class=\"n\">dirlist</span><span class=\"p\">(</span><span class=\"s2\">&#34;pdf&#34;</span><span class=\"p\">,</span> <span class=\"p\">[])</span>\n<span class=\"n\">exists</span> <span class=\"o\">=</span> <span class=\"n\">xlist_set</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">,</span><span class=\"mi\">0</span><span class=\"p\">)</span>\n \n<span class=\"k\">for</span> <span class=\"n\">item</span> <span class=\"ow\">in</span> <span class=\"n\">all_file</span><span class=\"p\">:</span>\n    <span class=\"n\">reg</span> <span class=\"o\">=</span> <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"nb\">compile</span><span class=\"p\">(</span><span class=\"s2\">&#34;\\.pdf$&#34;</span><span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"n\">reg</span><span class=\"o\">.</span><span class=\"n\">search</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">)):</span>\n \n        <span class=\"k\">if</span> <span class=\"n\">item</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">exists</span><span class=\"p\">:</span>\n            <span class=\"n\">row</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n            <span class=\"k\">try</span><span class=\"p\">:</span>\n                <span class=\"n\">code</span> <span class=\"o\">=</span> <span class=\"n\">get_qrcode</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">)</span>\n                <span class=\"n\">info</span> <span class=\"o\">=</span> <span class=\"n\">parse_info</span><span class=\"p\">(</span><span class=\"n\">code</span><span class=\"p\">)</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">)</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">info</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_code&#34;</span><span class=\"p\">])</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">info</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_number&#34;</span><span class=\"p\">])</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">info</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_cost&#34;</span><span class=\"p\">])</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">info</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_datetime&#34;</span><span class=\"p\">])</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">info</span><span class=\"p\">[</span><span class=\"s2\">&#34;receipt_check_code&#34;</span><span class=\"p\">])</span>\n \n            <span class=\"k\">except</span><span class=\"p\">:</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">)</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"s2\">&#34;未找到二维码信息&#34;</span><span class=\"p\">)</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n                <span class=\"n\">row</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">)</span>\n            <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n \n            <span class=\"nb\">print</span> <span class=\"p\">(</span><span class=\"n\">row</span><span class=\"p\">)</span>\n \n<span class=\"n\">xwrite</span><span class=\"p\">(</span><span class=\"s2\">&#34;data.xlsx&#34;</span><span class=\"p\">,{</span><span class=\"s2\">&#34;data&#34;</span><span class=\"p\">:</span><span class=\"n\">xheader</span><span class=\"p\">(</span><span class=\"n\">data_header</span><span class=\"p\">,</span><span class=\"n\">data</span><span class=\"p\">)})</span>     </code></pre></div><p class=\"ztext-empty-paragraph\"><br/></p><p>3、最后得到：</p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-71e34757e2d8bf0ce3f9f453cadefb9b_b.jpg\" data-caption=\"\" data-rawwidth=\"1432\" data-rawheight=\"558\" class=\"origin_image zh-lightbox-thumb\" width=\"1432\" data-original=\"https://pic4.zhimg.com/v2-71e34757e2d8bf0ce3f9f453cadefb9b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1432&#39; height=&#39;558&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-rawwidth=\"1432\" data-rawheight=\"558\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1432\" data-original=\"https://pic4.zhimg.com/v2-71e34757e2d8bf0ce3f9f453cadefb9b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-71e34757e2d8bf0ce3f9f453cadefb9b_b.jpg\"/></figure><h2><b>几个小细节：</b></h2><p>1、wand只支持ImageMagick6，如果手动安装ImageMagick，不能安装ImageMagick7</p><p>2、二维码的识别状况目前实测大概只有98%，识别率低于微信扫码。</p><p>3、部分PNG的图片，使用pyzbar解析效果很差，可以转换成JPEG后再识别。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b><i>Ref:</i></b></p><p><a href=\"https://link.zhihu.com/?target=http%3A//www.cnblogs.com/zhongtang/p/7148375.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">有关python下二维码识别用法及识别率对比分析</a></p><p><a href=\"https://link.zhihu.com/?target=https%3A//www.v2ex.com/t/211407\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">怎么用 Python 将 pdf， doc 等转换成 jpg</a></p><p></p>", 
            "topic": [
                {
                    "tag": "发票", 
                    "tagLink": "https://api.zhihu.com/topics/19571520"
                }, 
                {
                    "tag": "高效工作", 
                    "tagLink": "https://api.zhihu.com/topics/19550928"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": [
                {
                    "userName": "在路上的西瓜", 
                    "userLink": "https://www.zhihu.com/people/7f1a4e718ea1682f98e22b8778ec59e6", 
                    "content": "太难了，我还是自己做个表格，设置下函数就好了。", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "知乎用户", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "太麻烦了 微信小程序“发票小工具” 推荐你了解一下 超好用", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/27366331", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 25, 
            "title": "FFmpeg精确时间截取视频文件", 
            "content": "最近收到一个项目需求，是我工作以来，见过客户提出的最明确的需求：<blockquote>将视频讲解切割，每张幻灯的片断一个文件，按幻灯页码命名文件01.mp4，02.mp4，03.mp4……，以此类推；分辨率不超过320*180像素，单声道96kbps音质，控制每个文件尺寸不超过10M，另请发来对应的ppt文档，用来制作成视频与ppt同步翻页的课程。</blockquote><p>于是，承接前面一篇，<a href=\"https://zhuanlan.zhihu.com/p/26192947\" class=\"internal\">三分屏课件制作教程</a>，我考虑也能自动按照时间轴拆分所有视频文件。于是得到了下面这段分割代码。</p><div class=\"highlight\"><pre><code class=\"language-powershell\"><span class=\"n\">ffmpeg</span> <span class=\"n\">-ss</span> <span class=\"no\">[start]</span> <span class=\"n\">-t</span> <span class=\"no\">[duration]</span> <span class=\"n\">-accurate_seek</span> <span class=\"n\">-i</span> <span class=\"no\">[in]</span><span class=\"p\">.</span><span class=\"n\">mp4</span> <span class=\"n\">-codec</span> <span class=\"n\">copy</span> <span class=\"no\">[out]</span><span class=\"p\">.</span><span class=\"n\">mp4</span></code></pre></div>[start]:为需要截取内容的开始时间<br/>[duration]:为需要截取的时长<br/>[in]:为输入视频文件名<br/>[out]:为输出视频文件名<br/><br/>这种截取的好处是特别快，因为它不会对视频重新编码，直接截取相关时间，导出视频，但是这种方式会导致：如果视频结尾不是关键帧，那么视频最后就会出现一段空白。<br/><br/>这个时候，你可以加入[-avoid_negative_ts 1]变成这样：<br/><div class=\"highlight\"><pre><code class=\"language-text\">ffmpeg -ss [start] -t [duration] -accurate_seek -i [in].mp4 -codec copy  -avoid_negative_ts 1 [out].mp4</code></pre></div><p>这样截取视频之后，空白视频是没有了，但是时间不会精确截取，它会找到下一个关键帧，补全这个视频，所以，导致连续分割的视频之间存在细微的交集。<br/></p><br/>最后详细看了下FFmpeg的文档，如果你需要精确截取视频，避免关键帧的丢失并精确截取时间，这个时候最好是重新编码视频。就变成这样了：<br/><div class=\"highlight\"><pre><code class=\"language-powershell\"><span class=\"n\">ffmpeg</span> <span class=\"n\">-ss</span> <span class=\"no\">[start]</span> <span class=\"n\">-t</span> <span class=\"no\">[duration]</span> <span class=\"n\">-i</span> <span class=\"no\">[in]</span><span class=\"p\">.</span><span class=\"n\">mp4</span>  <span class=\"n\">-c</span><span class=\"err\">:</span><span class=\"n\">v</span> <span class=\"n\">libx264</span> <span class=\"n\">-c</span><span class=\"err\">:</span><span class=\"n\">a</span> <span class=\"n\">aac</span> <span class=\"n\">-strict</span> <span class=\"n\">experimental</span> <span class=\"n\">-b</span><span class=\"err\">:</span><span class=\"n\">a</span> <span class=\"n\">98k</span> <span class=\"no\">[out]</span><span class=\"p\">.</span><span class=\"n\">mp4</span></code></pre></div><p>最后，你可以写一段脚本，把整个视频拆分：<br/></p><div class=\"highlight\"><pre><code class=\"language-python\"><span class=\"kn\">import</span> <span class=\"nn\">os</span>\n<span class=\"kn\">import</span> <span class=\"nn\">json</span>\n\n<span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">&#34;timeline.json&#34;</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">f</span><span class=\"p\">:</span>\n    <span class=\"n\">times</span> <span class=\"o\">=</span> <span class=\"n\">json</span><span class=\"o\">.</span><span class=\"n\">loads</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">())</span>\n    \n<span class=\"n\">times</span> <span class=\"o\">=</span> <span class=\"n\">times</span><span class=\"p\">[</span><span class=\"s2\">&#34;timeline&#34;</span><span class=\"p\">]</span>\n\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">times</span><span class=\"p\">)):</span>\n    <span class=\"n\">start</span> <span class=\"o\">=</span> <span class=\"n\">times</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">][</span><span class=\"s2\">&#34;time&#34;</span><span class=\"p\">]</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"n\">length</span> <span class=\"o\">=</span> <span class=\"n\">times</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">][</span><span class=\"s2\">&#34;time&#34;</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">times</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">][</span><span class=\"s2\">&#34;time&#34;</span><span class=\"p\">]</span>\n    <span class=\"k\">except</span><span class=\"p\">:</span>\n        <span class=\"n\">length</span> <span class=\"o\">=</span> <span class=\"mi\">1000</span>\n    <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">system</span><span class=\"p\">(</span><span class=\"s1\">&#39;ffmpeg -ss </span><span class=\"si\">%s</span><span class=\"s1\"> -i small.mp4 -t </span><span class=\"si\">%s</span><span class=\"s1\"> -c:v libx264 -c:a aac -strict experimental -b:a 96k </span><span class=\"si\">%s</span><span class=\"s1\">.mp4&#39;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">start</span><span class=\"p\">,</span><span class=\"n\">length</span><span class=\"p\">,</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">)))</span></code></pre></div>", 
            "topic": [
                {
                    "tag": "FFmpeg", 
                    "tagLink": "https://api.zhihu.com/topics/19608940"
                }, 
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }
            ], 
            "comments": [
                {
                    "userName": "似是故人来", 
                    "userLink": "https://www.zhihu.com/people/81835044f83d504c74c4a1710ad76c15", 
                    "content": "请问开始时间能精确到帧吗？以秒为单位还是不太准？☺️", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "暗里着迷", 
                            "userLink": "https://www.zhihu.com/people/05083eb4d34f54885fb4ec92e315005d", 
                            "content": "<p>兄弟，这个需求解决了吗？我现在也有这个需求</p>", 
                            "likes": 0, 
                            "replyToAuthor": "似是故人来"
                        }, 
                        {
                            "userName": "知乎用户", 
                            "userLink": "https://www.zhihu.com/people/0", 
                            "content": "<p>00:00:00.666</p>", 
                            "likes": 0, 
                            "replyToAuthor": "暗里着迷"
                        }
                    ]
                }, 
                {
                    "userName": "知乎用户", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>我还见过客户要求关键帧间隔的呢……</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "晚睡早起的IT男", 
                    "userLink": "https://www.zhihu.com/people/70d77d48b13668df367db7f69ac38d10", 
                    "content": "用ffmpeg代码推udp流，mpegts格式，速率怎么控制？命令行方式可以指定-re选项，代码中怎么设置？", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Tongyong100", 
                    "userLink": "https://www.zhihu.com/people/3c0e220738333434c827b989a7d27fd0", 
                    "content": "试一下，我也遇到同样的精度要求", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "风言耀光", 
                    "userLink": "https://www.zhihu.com/people/c7d25ec4607b60925fa482612bcaf2aa", 
                    "content": "谢谢楼主", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26194499", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 2, 
            "title": "非设计人员如何做出好看的设计", 
            "content": "从iOS 10开始，设计原则更加“大而简，简而精”。安利一个<a href=\"https://link.zhihu.com/?target=http%3A//ios.uigreat.com/pages/Chapter1.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">iOS10人机界面指南</a>，这里可以看到最新的iOS设计原则和基本规范。很多人认为设计美丑是设计师的事情，其实不然，遵循一些设计要求和规范，有一些简单的思路，非设计人员也可以做出很实用的设计。<p>思路：</p><p>1、Element</p><p>2、Express emotion</p><p>3、Emphasis</p><p>4、Break the routine</p><p>5、Tuneful</p><p>示例：</p><p>这是一个很糟糕的设计，但是让你如何修改，可能你会无从下手。</p><figure><noscript><img src=\"https://pic1.zhimg.com/v2-ce2073b2ed3373a09ca184721f745938_b.jpg\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic1.zhimg.com/v2-ce2073b2ed3373a09ca184721f745938_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1200&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic1.zhimg.com/v2-ce2073b2ed3373a09ca184721f745938_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-ce2073b2ed3373a09ca184721f745938_b.jpg\"/></figure><p>第一步：居中，调整刺眼的颜色。</p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-de83d0e59272defc74e023929b87f8fa_b.jpg\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic3.zhimg.com/v2-de83d0e59272defc74e023929b87f8fa_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1200&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic3.zhimg.com/v2-de83d0e59272defc74e023929b87f8fa_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-de83d0e59272defc74e023929b87f8fa_b.jpg\"/></figure><p>第二步：去掉多余的设计，去掉圆角。</p><figure><noscript><img src=\"https://pic2.zhimg.com/v2-3c9a861d6d0b3204da50c2d192a2cf85_b.jpg\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic2.zhimg.com/v2-3c9a861d6d0b3204da50c2d192a2cf85_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1200&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic2.zhimg.com/v2-3c9a861d6d0b3204da50c2d192a2cf85_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-3c9a861d6d0b3204da50c2d192a2cf85_b.jpg\"/></figure><p>第三步：增强画面元素逻辑关系，使画面更清晰的表达。这时，画面就变得可以看了。</p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-10f9766f1854c1942bf437281b48c863_b.jpg\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic4.zhimg.com/v2-10f9766f1854c1942bf437281b48c863_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1200&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic4.zhimg.com/v2-10f9766f1854c1942bf437281b48c863_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-10f9766f1854c1942bf437281b48c863_b.jpg\"/></figure><p>第四步：这个时候，可以添加更多的细节，让画面更加丰富。</p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-7cc1e55f3f2ac5eeeef27d34c007bbcb_b.jpg\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic4.zhimg.com/v2-7cc1e55f3f2ac5eeeef27d34c007bbcb_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1200&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic4.zhimg.com/v2-7cc1e55f3f2ac5eeeef27d34c007bbcb_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-7cc1e55f3f2ac5eeeef27d34c007bbcb_b.jpg\"/></figure><p>第五步：打破成规，实现一个沉浸式的体验。<br/></p><figure><noscript><img src=\"https://pic1.zhimg.com/v2-c79cc84f667c30cb5667ffc92eb38054_b.jpg\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic1.zhimg.com/v2-c79cc84f667c30cb5667ffc92eb38054_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1200&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic1.zhimg.com/v2-c79cc84f667c30cb5667ffc92eb38054_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-c79cc84f667c30cb5667ffc92eb38054_b.jpg\"/></figure><p>第六步：优化，实心按钮改成线条模式，使画面更整体。上下添加渐变阴影，保证在浅色背景下文字正常显示。</p><p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-ab7c9153bc1fa8946471420f912d19b7_b.jpg\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb\" width=\"1920\" data-original=\"https://pic4.zhimg.com/v2-ab7c9153bc1fa8946471420f912d19b7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1920&#39; height=&#39;1200&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1920\" data-rawheight=\"1200\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1920\" data-original=\"https://pic4.zhimg.com/v2-ab7c9153bc1fa8946471420f912d19b7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ab7c9153bc1fa8946471420f912d19b7_b.jpg\"/></figure>至此，一个简单的设计就出来了。上述内容来自 Kevin Chow的视频整理。</p>", 
            "topic": [
                {
                    "tag": "设计", 
                    "tagLink": "https://api.zhihu.com/topics/19551557"
                }, 
                {
                    "tag": "思路", 
                    "tagLink": "https://api.zhihu.com/topics/19593456"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26260302", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 0, 
            "title": "微信编辑，你怎么压缩一张图片宽度到900px？", 
            "content": "做过微信图文消息编辑的，都知道微信封面图片官方推荐的尺寸是900px*500px，因为这是iPhone收取图文后展示封面图的大小。所以在日常中，我们经常需要压缩图片宽度到900。这样所有图片宽度就会完全一致，不管是在微信，简书，知乎，都可以保持图片宽度的一致性。<p>同时，因为Macbook是Retina屏幕的缘故，⌘+⇧+4 默认截图png会很大，正常2-5M不等，统一规格的图片压缩也能有效降低图片大小。排版微信，插入PPT，都会方面不少。<br/></p><p>压缩图片的方式很多，大型的，可以用PS；小型的，Mac也有很多工具。但是每次都需要开一个软件，显然不是我等效率人士的做法，接下来，教大家如何使用Alfred（什么？没听说过Alfred，可以看看少数派这篇文章，<a href=\"https://link.zhihu.com/?target=https%3A//sspai.com/post/27900\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">OS X 效率启动器 Alfred 详解与使用技巧</a>）自己写一个扩展，一键压缩图片（支持单图和多图），使用效果如下（点击图片，Gif会动）。</p><br/><figure><noscript><img src=\"https://pic2.zhimg.com/v2-d1b73d6ccf1a163ea31dcd287b18ceb1_b.gif\" data-rawwidth=\"774\" data-rawheight=\"438\" data-thumbnail=\"https://pic2.zhimg.com/v2-d1b73d6ccf1a163ea31dcd287b18ceb1_b.jpg\" class=\"origin_image zh-lightbox-thumb\" width=\"774\" data-original=\"https://pic2.zhimg.com/v2-d1b73d6ccf1a163ea31dcd287b18ceb1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;774&#39; height=&#39;438&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"774\" data-rawheight=\"438\" data-thumbnail=\"https://pic2.zhimg.com/v2-d1b73d6ccf1a163ea31dcd287b18ceb1_b.jpg\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"774\" data-original=\"https://pic2.zhimg.com/v2-d1b73d6ccf1a163ea31dcd287b18ceb1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-d1b73d6ccf1a163ea31dcd287b18ceb1_b.gif\"/></figure><p>思路：</p><p>1、通过automator workflow获取Finder中选择的文件路径。</p><p>2、使用Python的PIL压缩图片。</p><p>3、图片压缩完成提示。</p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-6cb82357d48245285c72ce35eb39bd66_b.png\" data-rawwidth=\"1962\" data-rawheight=\"814\" class=\"origin_image zh-lightbox-thumb\" width=\"1962\" data-original=\"https://pic3.zhimg.com/v2-6cb82357d48245285c72ce35eb39bd66_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;1962&#39; height=&#39;814&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"1962\" data-rawheight=\"814\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"1962\" data-original=\"https://pic3.zhimg.com/v2-6cb82357d48245285c72ce35eb39bd66_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-6cb82357d48245285c72ce35eb39bd66_b.png\"/></figure><p>这里就不贴代码了，<a href=\"https://link.zhihu.com/?target=https%3A//github.com/svcvit/Alfred.ImageX\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Github 地址</a>在这里。</p><p>接下来，很多事情都可以一键完成了：</p><p>1、压缩图片，同时加入logo，打上水印。</p><p>2、自动上传图片到图床，到Ftp，生成远程链接。</p><p>3、等等。</p><p>至此，日常中你需要的图片处理相关操作，基本都可以一键完成。</p>", 
            "topic": [
                {
                    "tag": "Alfred（app）", 
                    "tagLink": "https://api.zhihu.com/topics/19631528"
                }, 
                {
                    "tag": "图片处理", 
                    "tagLink": "https://api.zhihu.com/topics/19588432"
                }, 
                {
                    "tag": "微信公众账号运营", 
                    "tagLink": "https://api.zhihu.com/topics/19698116"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26192947", 
            "userName": "Ron Liu", 
            "userLink": "https://www.zhihu.com/people/b02128d0bf092ef4fa3246c1190202c6", 
            "upvote": 9, 
            "title": "三分屏课件制作教程", 
            "content": "在网络发展到今天，知识的传递变得简单，各种网络学校也层出不穷，但是基础的模式还是不变：一个好的老师，一套好的片子，一段好的教学。<br/><br/>在线学习中，<b>讲者的语音</b>，<b>讲者的PPT</b>，成为了在线课程最核心的内容。<figure><noscript><img src=\"https://pic4.zhimg.com/v2-fd20a500955e0a01c5cbaff7babbf0cf_b.jpg\" data-rawwidth=\"468\" data-rawheight=\"351\" class=\"origin_image zh-lightbox-thumb\" width=\"468\" data-original=\"https://pic4.zhimg.com/v2-fd20a500955e0a01c5cbaff7babbf0cf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;468&#39; height=&#39;351&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"468\" data-rawheight=\"351\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"468\" data-original=\"https://pic4.zhimg.com/v2-fd20a500955e0a01c5cbaff7babbf0cf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-fd20a500955e0a01c5cbaff7babbf0cf_b.jpg\"/></figure><p>Microsoft Producer是很早一批制作三分屏课件的工具，不过这个软件应该在windows 2003年就停止更新了。甚至到win7系统，都无法正常安装这个软件了。它的优势是可以直接用PPT的排练计时功能，直接导入时间点。</p><p>因为没有特别好用的工具，所以课件的制作都比较麻烦，包括时间点的记录，视频剪辑，最后做一套播放程序，这也耗费了大量人工时间。就此，我们重新整理了业务需求和流程，换一种思路做了一套解决方案，实现手机端的视频PPT同步播放。</p><p><figure><noscript><img src=\"https://pic2.zhimg.com/v2-2afe952d7f3c1091e47a28471a893799_b.jpg\" data-rawwidth=\"414\" data-rawheight=\"736\" class=\"content_image\" width=\"414\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;414&#39; height=&#39;736&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"414\" data-rawheight=\"736\" class=\"content_image lazy\" width=\"414\" data-actualsrc=\"https://pic2.zhimg.com/v2-2afe952d7f3c1091e47a28471a893799_b.jpg\"/></figure><b>三分屏课件制作思路</b><br/><br/>1、拍摄讲者视频，制作video1<br/>2、ScreenFlow录制屏幕PPT，制作video2<br/>3、通过ffmpeg每秒截取video2的视频关键帧<br/>4、通过图片相似度对比，自动计算图片重复情况，删除重复图片，生成翻页时间点。<br/><br/><b>ffmpeg截取关键帧</b><br/><br/>Mac用户直接下载编译好的<a href=\"https://link.zhihu.com/?target=http%3A//www.ffmpegmac.net/resources/Lion_Mountain_Lion_Mavericks_Yosemite_El-Captain_20.02.2017.zip\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">ffmpeg</a>，放入 /usr/local/bin文件夹下即可使用</p><div class=\"highlight\"><pre><code class=\"language-text\">ffmpeg -i slide.mp4 -f image2 -vf fps=fps=1 out%d.png</code></pre></div><p><br/><b>图片相似度计算</b><br/></p><p><a href=\"https://link.zhihu.com/?target=http%3A//blog.csdn.net/zmazon/article/details/8618775\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">图片相似度计算有很多算法</a>，包括 aHash 用平均哈希法识别相似图片；pHash 通过对图片矩阵进行离散余弦变换来识别相似图片；dHash 基于渐变实现的图片相似度算法； 用计算直方图实现识别相似图片。另外一些<a href=\"https://link.zhihu.com/?target=http%3A//www.ruanyifeng.com/blog/2011/07/principle_of_similar_image_search.html\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">算法参考</a>。<br/></p><br/><p><b>平均哈希算法（aHash）</b></p><p>此算法是基于比较灰度图每个像素与平均值来实现的，最适用于缩略图，放大图搜索。<br/>步骤：<br/>1、缩放图片：为了保留结构去掉细节，去除大小、横纵比的差异，把图片统一缩放到8*8，共64个像素的图片。<br/><br/>2、转化为灰度图：把缩放后的图片转化为256阶的灰度图。<br/>附上灰度图相关算法（R = red， G = green， B = blue）<br/>1.浮点算法：Gray=R*0.3+G*0.59+B*0.11<br/>2.整数方法：Gray=(R*30+G*59+B*11)/100<br/>3.移位方法：Gray =(R*76+G*151+B*28)&gt;&gt;8;<br/>4.平均值法：Gray=（R+G+B）/3;<br/>5.仅取绿色：Gray=G；<br/><br/>3、计算平均值： 计算进行灰度处理后图片的所有像素点的平均值。<br/><br/>4、比较像素灰度值：遍历灰度图片每一个像素，如果大于平均值记录为1，否则为0。<br/><br/>5、得到信息指纹：组合64个bit位，顺序随意保持一致性即可。<br/><br/>6、对比指纹：计算两幅图片的指纹，计算汉明距离（从一个指纹到另一个指纹需要变几次），汉明距离越大则说明图片越不一致，反之，汉明距离越小则说明图片越相似，当距离为0时，说明完全相同。（通常认为距离&gt;10 就是两张完全不同的图片）。<br/><br/></p><p><b>感知哈希算法（pHash）</b></p><p>平均哈希算法过于严格，不够精确，更适合搜索缩略图，为了获得更精确的结果可以选择感知哈希算法，它采用的是DCT（离散余弦变换）来降低频率的方法。<br/><br/>步骤：<br/><br/>1.缩小图片：32 * 32是一个较好的大小，这样方便DCT计算。<br/><br/>2.转化为灰度图：把缩放后的图片转化为256阶的灰度图。（具体算法见平均哈希算法步骤） <br/><br/>3.计算DCT:DCT把图片分离成分率的集合。<br/><br/>4.缩小DCT：DCT是32*32，保留左上角的8*8，这些代表的图片的最低频率。<br/><br/>5.计算平均值：计算缩小DCT后的所有像素点的平均值。<br/><br/>6.进一步减小DCT：大于平均值记录为1，反之记录为0。<br/><br/>7.得到信息指纹：组合64个信息位，顺序随意保持一致性即可。<br/><br/>8.对比指纹：计算两幅图片的指纹，计算汉明距离（从一个指纹到另一个指纹需要变几次），汉明距离越大则说明图片越不一致，反之，汉明距离越小则说明图片越相似，当距离为0时，说明完全相同。（通常认为距离&gt;10 就是两张完全不同的图片）。<br/><br/>此算法可参考开源项目pHash，下载地址： <a href=\"https://link.zhihu.com/?target=http%3A//www.phash.org/download/\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">Home of pHash, the open source perceptual hash library</a></p><p><b>差异哈希算法（dHash）</b></p><p>相比pHash，dHash的速度要快的多，相比aHash，dHash在效率几乎相同的情况下的效果要更好，它是基于渐变实现的。</p><p>步骤：</p><p>1.缩小图片：收缩到9*8的大小，一遍它有72的像素点。</p><p>2.转化为灰度图：把缩放后的图片转化为256阶的灰度图。（具体算法见平均哈希算法步骤）。</p><p>3.计算差异值：dHash算法工作在相邻像素之间，这样每行9个像素之间产生了8个不同的差异，一共8行，则产生了64个差异值。</p><p>4.获得指纹：如果左边的像素比右边的更亮，则记录为1，否则为0。</p><p><b>通过Python识别相似图片</b></p><p>我是计算直方图实现识别相似图片。把图片分隔成16个小块，然后分别比较，最后综合比较结果，从而提高比较的准确率。<br/></p><div class=\"highlight\"><pre><code class=\"language-python\"><span class=\"kn\">from</span> <span class=\"nn\">PIL</span> <span class=\"kn\">import</span> <span class=\"n\">Image</span>\n<span class=\"kn\">import</span> <span class=\"nn\">os</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">calculate</span><span class=\"p\">(</span><span class=\"n\">image1</span><span class=\"p\">,</span><span class=\"n\">image2</span><span class=\"p\">):</span>\n    <span class=\"n\">g</span> <span class=\"o\">=</span> <span class=\"n\">image1</span><span class=\"o\">.</span><span class=\"n\">histogram</span><span class=\"p\">()</span>\n    <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">image2</span><span class=\"o\">.</span><span class=\"n\">histogram</span><span class=\"p\">()</span>\n    <span class=\"k\">assert</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">)</span> <span class=\"o\">==</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">),</span><span class=\"s2\">&#34;error&#34;</span>\n\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n    <span class=\"k\">for</span> <span class=\"n\">index</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">)):</span>\n        <span class=\"k\">if</span> <span class=\"n\">g</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">]</span> <span class=\"o\">!=</span> <span class=\"n\">s</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">]:</span>\n            <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"mi\">1</span> <span class=\"o\">-</span> <span class=\"nb\">abs</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">]</span> <span class=\"o\">-</span> <span class=\"n\">s</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">])</span><span class=\"o\">/</span><span class=\"nb\">max</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">],</span><span class=\"n\">s</span><span class=\"p\">[</span><span class=\"n\">index</span><span class=\"p\">])</span> <span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">data</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"nb\">sum</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span><span class=\"o\">/</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">g</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">split_imgae</span><span class=\"p\">(</span><span class=\"n\">image</span><span class=\"p\">,</span><span class=\"n\">part_size</span><span class=\"p\">):</span>\n    <span class=\"n\">pw</span><span class=\"p\">,</span><span class=\"n\">ph</span> <span class=\"o\">=</span> <span class=\"n\">part_size</span>\n    <span class=\"n\">w</span><span class=\"p\">,</span><span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"n\">image</span><span class=\"o\">.</span><span class=\"n\">size</span>\n\n    <span class=\"n\">sub_image_list</span> <span class=\"o\">=</span> <span class=\"p\">[]</span>\n\n    <span class=\"k\">assert</span> <span class=\"n\">w</span> <span class=\"o\">%</span> <span class=\"n\">pw</span> <span class=\"o\">==</span> <span class=\"n\">h</span> <span class=\"o\">%</span> <span class=\"n\">ph</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"s2\">&#34;error&#34;</span>\n\n    <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"n\">w</span><span class=\"p\">,</span><span class=\"n\">pw</span><span class=\"p\">):</span>\n        <span class=\"k\">for</span> <span class=\"n\">j</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"n\">h</span><span class=\"p\">,</span><span class=\"n\">ph</span><span class=\"p\">):</span>\n            <span class=\"n\">sub_image</span> <span class=\"o\">=</span> <span class=\"n\">image</span><span class=\"o\">.</span><span class=\"n\">crop</span><span class=\"p\">((</span><span class=\"n\">i</span><span class=\"p\">,</span><span class=\"n\">j</span><span class=\"p\">,</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"n\">pw</span><span class=\"p\">,</span><span class=\"n\">j</span><span class=\"o\">+</span><span class=\"n\">ph</span><span class=\"p\">))</span><span class=\"o\">.</span><span class=\"n\">copy</span><span class=\"p\">()</span>\n            <span class=\"n\">sub_image_list</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span><span class=\"n\">sub_image</span><span class=\"p\">)</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">sub_image_list</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">classfiy_histogram_with_split</span><span class=\"p\">(</span><span class=\"n\">image1</span><span class=\"p\">,</span><span class=\"n\">image2</span><span class=\"p\">,</span><span class=\"n\">size</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"mi\">256</span><span class=\"p\">,</span><span class=\"mi\">256</span><span class=\"p\">),</span><span class=\"n\">part_size</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"mi\">64</span><span class=\"p\">,</span><span class=\"mi\">64</span><span class=\"p\">)):</span>\n    <span class=\"n\">image1</span> <span class=\"o\">=</span> <span class=\"n\">image1</span><span class=\"o\">.</span><span class=\"n\">resize</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">convert</span><span class=\"p\">(</span><span class=\"s2\">&#34;RGB&#34;</span><span class=\"p\">)</span>\n    <span class=\"n\">sub_image1</span> <span class=\"o\">=</span> <span class=\"n\">split_imgae</span><span class=\"p\">(</span><span class=\"n\">image1</span><span class=\"p\">,</span><span class=\"n\">part_size</span><span class=\"p\">)</span>\n\n    <span class=\"n\">image2</span> <span class=\"o\">=</span> <span class=\"n\">image2</span><span class=\"o\">.</span><span class=\"n\">resize</span><span class=\"p\">(</span><span class=\"n\">size</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"n\">convert</span><span class=\"p\">(</span><span class=\"s2\">&#34;RGB&#34;</span><span class=\"p\">)</span>\n    <span class=\"n\">sub_image2</span> <span class=\"o\">=</span> <span class=\"n\">split_imgae</span><span class=\"p\">(</span><span class=\"n\">image2</span><span class=\"p\">,</span><span class=\"n\">part_size</span><span class=\"p\">)</span>\n\n    <span class=\"n\">sub_data</span> <span class=\"o\">=</span> <span class=\"mi\">0</span><span class=\"p\">;</span>\n    <span class=\"k\">for</span> <span class=\"n\">im1</span><span class=\"p\">,</span><span class=\"n\">im2</span> <span class=\"ow\">in</span> <span class=\"nb\">zip</span><span class=\"p\">(</span><span class=\"n\">sub_image1</span><span class=\"p\">,</span><span class=\"n\">sub_image2</span><span class=\"p\">):</span>\n        <span class=\"n\">sub_data</span> <span class=\"o\">+=</span> <span class=\"n\">calculate</span><span class=\"p\">(</span><span class=\"n\">im1</span><span class=\"p\">,</span> <span class=\"n\">im2</span><span class=\"p\">)</span>\n\n    <span class=\"n\">x</span> <span class=\"o\">=</span> <span class=\"n\">size</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span><span class=\"o\">/</span><span class=\"n\">part_size</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n    <span class=\"n\">y</span> <span class=\"o\">=</span> <span class=\"n\">size</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span><span class=\"o\">/</span><span class=\"n\">part_size</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">]</span>\n\n    <span class=\"n\">pre</span> <span class=\"o\">=</span> <span class=\"nb\">round</span><span class=\"p\">((</span><span class=\"n\">sub_data</span><span class=\"o\">/</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"o\">*</span><span class=\"n\">y</span><span class=\"p\">)</span> <span class=\"p\">),</span><span class=\"mi\">3</span> <span class=\"p\">)</span>\n    <span class=\"k\">return</span>  <span class=\"n\">pre</span></code></pre></div><b>清理多余文件</b><p>把所有相似度超过70%的图片直接删除，只保留唯一图片即可。但是，根据视频质量的差异，可能有的图片相似度要用到90%。</p><div class=\"highlight\"><pre><code class=\"language-python\"><span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">system</span><span class=\"p\">(</span><span class=\"s1\">&#39;ffmpeg -i slide.mp4 -f image2 -vf fps=fps=1 out</span><span class=\"si\">%d</span><span class=\"s1\">.png&#39;</span><span class=\"p\">)</span>\n\n\n<span class=\"n\">im1</span> <span class=\"o\">=</span> <span class=\"n\">Image</span><span class=\"o\">.</span><span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">&#34;out1.png&#34;</span><span class=\"p\">)</span>\n<span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"nb\">range</span><span class=\"p\">(</span><span class=\"mi\">5000</span><span class=\"p\">):</span>\n    <span class=\"k\">try</span><span class=\"p\">:</span>\n        <span class=\"n\">im2</span> <span class=\"o\">=</span> <span class=\"n\">Image</span><span class=\"o\">.</span><span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">&#34;out</span><span class=\"si\">%s</span><span class=\"s2\">.png&#34;</span> <span class=\"o\">%</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n        <span class=\"n\">diff</span> <span class=\"o\">=</span> <span class=\"n\">classfiy_histogram_with_split</span><span class=\"p\">(</span><span class=\"n\">im1</span><span class=\"p\">,</span> <span class=\"n\">im2</span><span class=\"p\">)</span>\n        <span class=\"k\">print</span> <span class=\"p\">(</span><span class=\"n\">diff</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">diff</span> <span class=\"o\">&gt;</span> <span class=\"mf\">0.7</span><span class=\"p\">:</span>\n            <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">remove</span><span class=\"p\">(</span><span class=\"s2\">&#34;out</span><span class=\"si\">%s</span><span class=\"s2\">.png&#34;</span> <span class=\"o\">%</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">im1</span> <span class=\"o\">=</span> <span class=\"n\">Image</span><span class=\"o\">.</span><span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">&#34;out</span><span class=\"si\">%s</span><span class=\"s2\">.png&#34;</span> <span class=\"o\">%</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">i</span><span class=\"o\">+</span><span class=\"mi\">2</span><span class=\"p\">))</span>\n    <span class=\"k\">except</span><span class=\"p\">:</span>\n        <span class=\"k\">pass</span></code></pre></div><p>至此，基本可以省去大部分人工核对时间节点的问题，而且也能更好的处理PPT翻页的问题。但是这样做还有几点需要注意：<br/></p><p>1、拍摄要求：ppt禁止翻页动画，否则会影响图片识别精度。<br/>2、视频讲解过程不能停顿，后期如果剪辑会破坏时间线。</p>", 
            "topic": [
                {
                    "tag": "Python", 
                    "tagLink": "https://api.zhihu.com/topics/19552832"
                }, 
                {
                    "tag": "图片处理", 
                    "tagLink": "https://api.zhihu.com/topics/19588432"
                }, 
                {
                    "tag": "课件", 
                    "tagLink": "https://api.zhihu.com/topics/19579773"
                }
            ], 
            "comments": [
                {
                    "userName": "陈姝霖", 
                    "userLink": "https://www.zhihu.com/people/fb6012cd085a1bd396a9e7388f2131ac", 
                    "content": "学不会😂", 
                    "likes": 1, 
                    "childComments": []
                }, 
                {
                    "userName": "Manest佯", 
                    "userLink": "https://www.zhihu.com/people/c97deb3161ec49882fdb51b68cdc916c", 
                    "content": "问题来了，网站上的三分屏怎么下载", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }
    ], 
    "url": "https://zhuanlan.zhihu.com/mandal"
}
