{
    "title": "阿keen干货间", 
    "description": "“各种不务正业之后想到自己的职业于是回过头写两篇干货证明自己学过。”", 
    "followers": [
        "https://www.zhihu.com/people/mu-zi-30-60", 
        "https://www.zhihu.com/people/hylan", 
        "https://www.zhihu.com/people/zhihu123456-12-52", 
        "https://www.zhihu.com/people/zheng-feng-80-24", 
        "https://www.zhihu.com/people/yue-yue-yoga", 
        "https://www.zhihu.com/people/hai-bian-de-mou-mou-mou", 
        "https://www.zhihu.com/people/ni-cai-99-74", 
        "https://www.zhihu.com/people/sztinker", 
        "https://www.zhihu.com/people/wuyufeng672289", 
        "https://www.zhihu.com/people/6679963ha-ha", 
        "https://www.zhihu.com/people/aria-99-11", 
        "https://www.zhihu.com/people/guo-yue-feng", 
        "https://www.zhihu.com/people/batigooal", 
        "https://www.zhihu.com/people/dong-ri-de-huan-jue-5", 
        "https://www.zhihu.com/people/xiao-xi-12-48", 
        "https://www.zhihu.com/people/yang-fei-17-11", 
        "https://www.zhihu.com/people/li-ling-12-18-63", 
        "https://www.zhihu.com/people/leonardo-young", 
        "https://www.zhihu.com/people/li-sheng-56-72-69", 
        "https://www.zhihu.com/people/huiwuluo", 
        "https://www.zhihu.com/people/huang-you-ming", 
        "https://www.zhihu.com/people/yin-hua-zhi-23", 
        "https://www.zhihu.com/people/sheng-gao", 
        "https://www.zhihu.com/people/monkey-18-76", 
        "https://www.zhihu.com/people/joe-73-73-81", 
        "https://www.zhihu.com/people/dong-gan-zi", 
        "https://www.zhihu.com/people/qi-zhao-xiao-huang-jiu-shi-pao", 
        "https://www.zhihu.com/people/ku-gua-bu-ku-5", 
        "https://www.zhihu.com/people/ceng-ying-tong-40", 
        "https://www.zhihu.com/people/wang-chao-65-12-5", 
        "https://www.zhihu.com/people/william-zhu-82", 
        "https://www.zhihu.com/people/hades-28-98", 
        "https://www.zhihu.com/people/dersieger", 
        "https://www.zhihu.com/people/hh-zz-77-1", 
        "https://www.zhihu.com/people/andytsing", 
        "https://www.zhihu.com/people/ye-cha-4", 
        "https://www.zhihu.com/people/bricy", 
        "https://www.zhihu.com/people/zhao-hu-41-13", 
        "https://www.zhihu.com/people/li-xiao-dong-2-67", 
        "https://www.zhihu.com/people/ikara-tasi", 
        "https://www.zhihu.com/people/ren-tian-you-37", 
        "https://www.zhihu.com/people/qi-che-ren-82", 
        "https://www.zhihu.com/people/smartcat", 
        "https://www.zhihu.com/people/tigerman-61", 
        "https://www.zhihu.com/people/mcjun-88", 
        "https://www.zhihu.com/people/chen-kui-1-39", 
        "https://www.zhihu.com/people/zhang-guo-liang-72", 
        "https://www.zhihu.com/people/wu-jie-39-52-3", 
        "https://www.zhihu.com/people/ha-ha-40-2-38", 
        "https://www.zhihu.com/people/hu-qing-zheng-6", 
        "https://www.zhihu.com/people/yong-hu-5136409168", 
        "https://www.zhihu.com/people/mu-yang-96", 
        "https://www.zhihu.com/people/li-ke-te-43", 
        "https://www.zhihu.com/people/hahaha-92-99", 
        "https://www.zhihu.com/people/zzvvzz"
    ], 
    "article": [
        {
            "url": "https://zhuanlan.zhihu.com/p/48707696", 
            "userName": "机器人阿keen", 
            "userLink": "https://www.zhihu.com/people/4dc1cc8f1aecc3bad301be15a79aecce", 
            "upvote": 4, 
            "title": "浅谈机器人定位导航技术(四)", 
            "content": "<p>上一期小编大致介绍了基于粒子滤波的SLAM方法，接下来小编将简单介绍下基于图优化方式的SLAM方法。</p><p><b>什么是图优化？</b></p><p>做算法的小伙伴们都知道图是由顶点（vertex）和边（edge）构成，在SLAM问题中，机器人的状态是顶点，状态的关系构成边。举个例子，二维平面下，可以将机器人不同时刻下的位姿构成顶点，位姿和位姿间的转换矩阵就成了边。调整顶点使之尽量满足边构成的约束，就是对Graph based SLAM问题的求解过程。构建图的过程一般被称为前端（front-end），调整顶点使之尽量满足边构成约束的过程则被称为后端（back-end）。</p><p><b>SLAM问题如何构建成图？</b></p><p>SLAM的核心是根据已有的观测数据，计算机器人的运动轨迹和地图。假设在时刻<i>t</i>，机器人的位姿为<i>xt</i>，传感器观测数据为<i>zt</i>，误差为e<i>t</i>。传感器的观测方程为：</p><p><img src=\"https://www.zhihu.com/equation?tex=z_t%3Dh%28x_t+%29%2Be_t%09\" alt=\"z_t=h(x_t )+e_t\t\" eeimg=\"1\"/> (1)</p><p>如果以<i>xt</i>为优化变量，以 <img src=\"https://www.zhihu.com/equation?tex=min%E2%94%ACx%E2%81%A1%E3%80%96F_t+%E3%80%97+%28x_t+%29%3D%E2%80%96e_t+%E2%80%96\" alt=\"min┬x⁡〖F_t 〗 (x_t )=‖e_t ‖\" eeimg=\"1\"/> 为优化的目标函数，就可以求得<i>xt</i>的估计值。这就是用优化来求解SLAM的思路。</p><p>在图中，以顶点表示优化变量，以边表示观测方程。由于边可以连接一个或多个顶点，所以我们把它的形式写成更广义的 <i>zt</i>=<i>h</i>(<i>xt</i>1,<i>xt</i>2,…)。</p><p>对于一个机器人而言，可能拥有多种传感器，例如激光雷达，IMU，里程计，摄像头等等，这些传感器均可以构成相应的顶点和边，并进行图优化求解。</p><p><b>如何进行图优化？</b></p><p>现在让我们来仔细看一看图优化是怎么做的。假设一个带有<i>n</i>条边的图，其目标函数可以写成：</p><p class=\"ztext-empty-paragraph\"><br/></p><p><img src=\"https://www.zhihu.com/equation?tex=min%E2%94%ACx%E2%81%A1%E2%88%91_%28t%3D1%29%5En%E2%96%92%E3%80%96e_t+%28x_t%2Cz_t+%29%5ET+%CE%A9_t+%E3%80%97+e_t+%28x_t%2Cz_t%29+\" alt=\"min┬x⁡∑_(t=1)^n▒〖e_t (x_t,z_t )^T Ω_t 〗 e_t (x_t,z_t) \" eeimg=\"1\"/> (2)</p><p>这是一个误差e<i>t</i>的最小二乘表达式。Ω<i>t</i>是信息矩阵，是协方差矩阵的逆，表示各分量的不一致性。由于<i>z</i>t是已知的，为了数学上的简洁，我们再把它写成<i>et</i>(<i>xt</i>)的形式。于是总体优化问题变为<i>n</i>条边加和的形式:</p><p class=\"ztext-empty-paragraph\"><br/></p><p><img src=\"https://www.zhihu.com/equation?tex=min%E2%81%A1%E3%80%96F%28x%29%3D%E2%88%91_%28t%3D1%29%5En%E2%96%92%E3%80%96e_t+%E3%80%96%28x_t%29%E3%80%97%5ET+%CE%A9_t+e_t+%28x_t%29%E3%80%97%E3%80%97\" alt=\"min⁡〖F(x)=∑_(t=1)^n▒〖e_t 〖(x_t)〗^T Ω_t e_t (x_t)〗〗\" eeimg=\"1\"/> (3)</p><p>现在，我们有了一个很多个节点和边的图，构成了一个庞大的优化问题。我们并不想展开它的数学形式，只关心它的优化解。那么，为了求解优化，需要知道两样东西：一个初始点和一个迭代方向。为了数学上的方便，先考虑第<i>t</i>条边<i>et</i>(<i>xt</i>)。</p><p>我们假设它的初始点为 <img src=\"https://www.zhihu.com/equation?tex=x+%CC%83_t\" alt=\"x ̃_t\" eeimg=\"1\"/> ，并且给它一个 <img src=\"https://www.zhihu.com/equation?tex=%CE%94x\" alt=\"Δx\" eeimg=\"1\"/> 的增量，那么边的估计值就变为 <img src=\"https://www.zhihu.com/equation?tex=F_t+%28x+%CC%83_t%2B%CE%94x%29%EF%BC%8C\" alt=\"F_t (x ̃_t+Δx)，\" eeimg=\"1\"/> ，而误差值则从 <img src=\"https://www.zhihu.com/equation?tex=+e_t+%28x+%CC%83_t%29+%E5%8F%98%E4%B8%BAe_t+%28x+%CC%83_t%2B%CE%94x%29%E3%80%82\" alt=\" e_t (x ̃_t) 变为e_t (x ̃_t+Δx)。\" eeimg=\"1\"/> 首先对误差项进行一阶展开：</p><p><img src=\"https://www.zhihu.com/equation?tex=e_t+%28x+%CC%83_t%2B%CE%94x%29%E2%89%88e_t+%28x+%CC%83_t%29%2B%28de_t%29%2F%28dx_t+%29+%CE%94x%3De_t%2BJ_t+%CE%94x++++%284%29\" alt=\"e_t (x ̃_t+Δx)≈e_t (x ̃_t)+(de_t)/(dx_t ) Δx=e_t+J_t Δx    (4)\" eeimg=\"1\"/> </p><p class=\"ztext-empty-paragraph\"><br/></p><p><img src=\"https://www.zhihu.com/equation?tex=J_t\" alt=\"J_t\" eeimg=\"1\"/> 是关于 <img src=\"https://www.zhihu.com/equation?tex=x_t\" alt=\"x_t\" eeimg=\"1\"/> 的导数，矩阵形式下为雅可比阵。这里在估计点附近作了一次线性假设，函数值用一阶导数来逼近，于是有：</p><p><img src=\"https://www.zhihu.com/equation?tex=F_t+%28x+%CC%83_t%2B%CE%94x%29++%3De_t+%28x+%CC%83_t%2B%CE%94x%29%5ET+%CE%A9_t+e_t+%28x+%CC%83_t%2B%CE%94x%29\" alt=\"F_t (x ̃_t+Δx)  =e_t (x ̃_t+Δx)^T Ω_t e_t (x ̃_t+Δx)\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=++++++++++++++++++++%E2%89%88%28e_t%2BJ_t+%CE%94x%29%5ET+%CE%A9_t+%28e_t%2BJ_t+%CE%94x%29\" alt=\"                    ≈(e_t+J_t Δx)^T Ω_t (e_t+J_t Δx)\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=%3D%E3%80%96e_t%E3%80%97%5ET+%CE%A9_t+e_t%2B2%E3%80%96e_t%E3%80%97%5ET+%CE%A9_t+J_t+%E2%88%86x%2B%E2%88%86x%5ET+%E3%80%96J_t%E3%80%97%5ET+%CE%A9_t+J_t+%E2%88%86x\" alt=\"=〖e_t〗^T Ω_t e_t+2〖e_t〗^T Ω_t J_t ∆x+∆x^T 〖J_t〗^T Ω_t J_t ∆x\" eeimg=\"1\"/> </p><p><img src=\"https://www.zhihu.com/equation?tex=%3DF_t+%28x+%CC%83_t+%29%2B2%E3%80%96e_t%E3%80%97%5ET+%CE%A9_t+J_t+%E2%88%86x%2B%E3%80%96%E2%88%86x%E3%80%97%5ET+H_t+%E2%88%86x+++++%285%29\" alt=\"=F_t (x ̃_t )+2〖e_t〗^T Ω_t J_t ∆x+〖∆x〗^T H_t ∆x     (5)\" eeimg=\"1\"/> </p><p class=\"ztext-empty-paragraph\"><br/></p><p>故F_t的增量可表示为：</p><p><img src=\"https://www.zhihu.com/equation?tex=+%E3%80%96%E2%88%86F%E3%80%97_t%3D2%E3%80%96e_t%E3%80%97%5ET+%CE%A9_t+J_t+%E2%88%86x%2B%E3%80%96%E2%88%86x%E3%80%97%5ET+H_t+%E2%88%86x+%09%09+++++%286%29+\" alt=\" 〖∆F〗_t=2〖e_t〗^T Ω_t J_t ∆x+〖∆x〗^T H_t ∆x \t\t     (6) \" eeimg=\"1\"/> </p><p class=\"ztext-empty-paragraph\"><br/></p><p><img src=\"https://www.zhihu.com/equation?tex=%E8%A6%81%E6%B1%82%E8%A7%A3%E3%80%96%E2%88%86F%E3%80%97_t%E7%9A%84%E6%9E%81%E5%B0%8F%E5%80%BC%EF%BC%8C%E4%BB%A4%E5%AE%83%E5%AF%B9%E4%BA%8E%E2%88%86x%E7%9A%84%E5%AF%BC%E6%95%B0%E4%B8%BA%E9%9B%B6%EF%BC%8C%E6%9C%89%EF%BC%9A++\" alt=\"要求解〖∆F〗_t的极小值，令它对于∆x的导数为零，有：  \" eeimg=\"1\"/> </p><p class=\"ztext-empty-paragraph\"><br/></p><p><img src=\"https://www.zhihu.com/equation?tex=%E3%80%96d%E2%88%86F%E3%80%97_t%2Fd%E2%88%86x%3D2%E3%80%96e_t%E3%80%97%5ET+%CE%A9_t+J_t%2B2H_t+%E2%88%86x%3D0+++++++++%287%29\" alt=\"〖d∆F〗_t/d∆x=2〖e_t〗^T Ω_t J_t+2H_t ∆x=0         (7)\" eeimg=\"1\"/> </p><p>最终，问题变为了一个一阶线性方程组的求解：</p><p><img src=\"https://www.zhihu.com/equation?tex=H_t+%E2%88%86x%3D-%E3%80%96e_t%E3%80%97%5ET+%CE%A9_t+J_t++++++++++++++%288%29\" alt=\"H_t ∆x=-〖e_t〗^T Ω_t J_t              (8)\" eeimg=\"1\"/> </p><p>如果考虑所有的顶点和边，则方程可变为:</p><p><img src=\"https://www.zhihu.com/equation?tex=H%E2%88%86x%3D-e%5ET+%CE%A9J+++++++++++++++++%289%29\" alt=\"H∆x=-e^T ΩJ                 (9)\" eeimg=\"1\"/> </p><p>对于一个实际的SLAM实例，用于求解的顶点和边可能有成千上万条，在每一步迭代中都需要求解一个雅可比矩阵和海森矩阵，会有几十万个待估参数，这在以前被认为是无法求解的。</p><p>不过后来SLAM研究者逐渐认识到，SLAM问题构建的图，并非是全连通图，它往往是很稀疏的。</p><p>例如一个地图里大部分路标点，只会在很少的时刻被机器人看见，从而建立起一些边，大多数时候它们是看不见的。体现在数学公式中，虽然总体目标函数<i>F</i>(<i>x</i>)有很多项，但某个顶点<i>xt</i>就只会出现在和它有关的边里面。</p><p>这样求解的时候，无关边的雅可比矩阵就是个零矩阵了，只有少数相连的边才会有非零值。同理，海森矩阵也会是稀疏矩阵。现代计算机可以很容易求解这个问题。</p><p><b>总结</b></p><p>对于一个SLAM问题进行图优化求解主要分为以下几个步骤：</p><p>1 根据实际问题抽象出问题的顶点和边，例如二维激光雷达SLAM问题中，以机器人各时刻的位姿作为顶点，激光雷达匹配获得的各时刻机器人的位姿变换矩阵为边；</p><p>2 往图里加入实际的节点和边，选择初始值，开始进行迭代；</p><p>3 每步迭代中计算对于当前估计值的雅可比矩阵和海森矩阵；</p><p>4 求解系数矩阵方程(9)，得到梯度方向，代入方程(3)求解；</p><p>5 判断是否满足结束条件，如果不满足继续返回步骤3，如果满足则返回优化值。</p><p>至此，本系列关于SLAM问题中的定位和建图问题已经介绍完毕，后面会介绍导航的相关内容。</p>", 
            "topic": [
                {
                    "tag": "同时定位和地图构建（SLAM）", 
                    "tagLink": "https://api.zhihu.com/topics/20033502"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/41891097", 
            "userName": "机器人阿keen", 
            "userLink": "https://www.zhihu.com/people/4dc1cc8f1aecc3bad301be15a79aecce", 
            "upvote": 11, 
            "title": "探究机器人是如何实现自主移动的—浅谈机器人定位导航技术(三)", 
            "content": "<p>上一期小编大致介绍了基于概率模型的SLAM方法中卡尔曼滤波的相关内容，除了卡尔曼滤波，概率模型的SLAM方法中还有一种方法应用也十分广泛。接下来小编将给大家详细介绍下<b>粒子滤波。</b></p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>什么是粒子滤波？</b></p><p><b>粒子滤波(particle filtering)又称序贯蒙特卡洛方法(Sequential Monte Carlo method)，是一种利用所求状态空间中大量样本点来近似待估计的分布，从而求解贝叶斯迭代问题的一种方法。</b>“粒子滤波器”一词最初是由德尔-莫拉尔(Del Moral)于1996年提出，主要用于流体力学中的平均场相互作问题的求解上。而“序贯蒙特卡洛方法”是由刘(Liu)和陈(Chen)在1998提出的。蒙特卡洛是位于摩洛哥的世界驰名的赌城，用来给描述概率问题的方法命名实在是太适合不过了。</p><p class=\"ztext-empty-paragraph\"><br/></p><p>下面回到SLAM的概率模型上来，对于一个经典的SLAM问题需要解决以下问题：通过对机器人的控制量u0:k及历史观测到的数据z1:k去估计机器人在各时刻的位姿x0:k以及地图m。假设该过程符合隐马尔科夫模型的假设，即k时刻的状态仅依赖于其前一时刻k-1的状态，与其他时刻的状态及观测无关，也与时刻k无关；同时任意时刻的观测只依赖于该时刻的马尔科夫链的状态，与其他观测及状态无关。则可以用下面的式子来表示k时刻的后验概率：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-e9ddd4f94e946a2ae44bcfaf763283dd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"599\" data-rawheight=\"114\" class=\"origin_image zh-lightbox-thumb\" width=\"599\" data-original=\"https://pic2.zhimg.com/v2-e9ddd4f94e946a2ae44bcfaf763283dd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;599&#39; height=&#39;114&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"599\" data-rawheight=\"114\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"599\" data-original=\"https://pic2.zhimg.com/v2-e9ddd4f94e946a2ae44bcfaf763283dd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-e9ddd4f94e946a2ae44bcfaf763283dd_b.jpg\"/></figure><p>上式中，分子可以分为两个部分，第一部分表示观测的条件概率，第二部分为先验概率，该部分可分解为:</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-155d73c6d83df80fdfdd010810ac78d2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"514\" data-rawheight=\"55\" class=\"origin_image zh-lightbox-thumb\" width=\"514\" data-original=\"https://pic3.zhimg.com/v2-155d73c6d83df80fdfdd010810ac78d2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;514&#39; height=&#39;55&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"514\" data-rawheight=\"55\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"514\" data-original=\"https://pic3.zhimg.com/v2-155d73c6d83df80fdfdd010810ac78d2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-155d73c6d83df80fdfdd010810ac78d2_b.jpg\"/></figure><p>而分母不依赖于位姿x，故在一次迭代中可以认为是常量。上一章讲述的卡尔曼滤波通过将运动方程和观测方程近似为高斯模型使得该问题可以直接给出解析解。而当机器人概率分布不再是高斯或者无法近似为高斯模型时，则可以通过撒粒子的方式去模拟机器人的状态分布，即为粒子滤波。这究竟是如何做到的呢，且听我慢慢道来。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>蒙特卡洛方法</b></p><p>蒙特卡洛方法是著名数学家冯-诺伊曼于20世纪40年代命名的，主要用于第二次世界大战中研制原子弹的“曼哈顿计划”，其本质就是用随机数来解决数学问题的而一种方法。其实这种方法很早就已经存在，1777年，法国数学家布丰（Georges Louis Leclere de Buffon）就提出了用投针实验的方法求圆周率π，这被认为是蒙特卡罗方法的起源。假设有一个半径为r=1的圆，它内切于一个边长为r正方形，那么它们的面积比为：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-1a2cd4338e95b8b952b63ee5e377f701_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"318\" data-rawheight=\"97\" class=\"content_image\" width=\"318\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;318&#39; height=&#39;97&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"318\" data-rawheight=\"97\" class=\"content_image lazy\" width=\"318\" data-actualsrc=\"https://pic2.zhimg.com/v2-1a2cd4338e95b8b952b63ee5e377f701_b.jpg\"/></figure><p>为了求解π的值，我们均匀地在正方形中采样n个点，pi=（xi，yi）, (i=1…n)，并假设落入到圆中的点（满足xi2 + yi2 ≤1）数为m，则两者地面积比可以近似为：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-8a90b3baf8a7fcc0253e6f6d8cc35f0f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"261\" data-rawheight=\"81\" class=\"content_image\" width=\"261\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;261&#39; height=&#39;81&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"261\" data-rawheight=\"81\" class=\"content_image lazy\" width=\"261\" data-actualsrc=\"https://pic4.zhimg.com/v2-8a90b3baf8a7fcc0253e6f6d8cc35f0f_b.jpg\"/></figure><p>如下图所示：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-cbcff35488cf604e37dfeb59da95d389_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"415\" data-rawheight=\"241\" class=\"content_image\" width=\"415\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;415&#39; height=&#39;241&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"415\" data-rawheight=\"241\" class=\"content_image lazy\" width=\"415\" data-actualsrc=\"https://pic2.zhimg.com/v2-cbcff35488cf604e37dfeb59da95d389_b.jpg\"/></figure><p>当采样的样本数足够大时，可以近似的认为π=4×m/n。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序贯重要性采样</b></p><p>蒙特卡洛方法的思想大致了解了，那么如何应用在SLAM问题中呢？对于式（1）中的问题，对于目标函数f(xk)，在状态xk的期望可以表示为：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-992d354f5d9353651fe5c42c992103db_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"494\" data-rawheight=\"90\" class=\"origin_image zh-lightbox-thumb\" width=\"494\" data-original=\"https://pic4.zhimg.com/v2-992d354f5d9353651fe5c42c992103db_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;494&#39; height=&#39;90&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"494\" data-rawheight=\"90\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"494\" data-original=\"https://pic4.zhimg.com/v2-992d354f5d9353651fe5c42c992103db_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-992d354f5d9353651fe5c42c992103db_b.jpg\"/></figure><p>根据后验概率密度分布p(xk|z1:k,u1:k,x0)采样N个样本，这里的每个样本即为一个粒子，期望就可以近似为：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-d7fe8322bff8fe61be175d0a6b8dcdce_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"433\" data-rawheight=\"88\" class=\"origin_image zh-lightbox-thumb\" width=\"433\" data-original=\"https://pic3.zhimg.com/v2-d7fe8322bff8fe61be175d0a6b8dcdce_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;433&#39; height=&#39;88&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"433\" data-rawheight=\"88\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"433\" data-original=\"https://pic3.zhimg.com/v2-d7fe8322bff8fe61be175d0a6b8dcdce_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-d7fe8322bff8fe61be175d0a6b8dcdce_b.jpg\"/></figure><p>由于不知道后验概率p(xk|z1:k,u0:k,x0)的实际分布，故不能直接根据后验概率直接采样，于是采用一种所谓的重要性采样的方法，构造一个建议函数(proposal distribution)q(xk|z1:k,u0:k,x0)，使公式变为：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-49eecd4ab5c02d4d93f5e74063226d84_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"618\" data-rawheight=\"212\" class=\"origin_image zh-lightbox-thumb\" width=\"618\" data-original=\"https://pic1.zhimg.com/v2-49eecd4ab5c02d4d93f5e74063226d84_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;618&#39; height=&#39;212&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"618\" data-rawheight=\"212\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"618\" data-original=\"https://pic1.zhimg.com/v2-49eecd4ab5c02d4d93f5e74063226d84_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-49eecd4ab5c02d4d93f5e74063226d84_b.jpg\"/></figure><p>其中：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-2a8ea964822f6bc0b27f5f027838f45b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"523\" data-rawheight=\"107\" class=\"origin_image zh-lightbox-thumb\" width=\"523\" data-original=\"https://pic4.zhimg.com/v2-2a8ea964822f6bc0b27f5f027838f45b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;523&#39; height=&#39;107&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"523\" data-rawheight=\"107\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"523\" data-original=\"https://pic4.zhimg.com/v2-2a8ea964822f6bc0b27f5f027838f45b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-2a8ea964822f6bc0b27f5f027838f45b_b.jpg\"/></figure><p>这个W(xk)是重要性权重。由于p(z1:k, u0:k,x0)为常量，故式可进一步改写为： </p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-398e119acc1730bb42ace2f8d116ff0d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"707\" data-rawheight=\"116\" class=\"origin_image zh-lightbox-thumb\" width=\"707\" data-original=\"https://pic2.zhimg.com/v2-398e119acc1730bb42ace2f8d116ff0d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;707&#39; height=&#39;116&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"707\" data-rawheight=\"116\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"707\" data-original=\"https://pic2.zhimg.com/v2-398e119acc1730bb42ace2f8d116ff0d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-398e119acc1730bb42ace2f8d116ff0d_b.jpg\"/></figure><p>这样就将概率密度函数替换为了建议分布函数，假设建议分布已知，采用蒙特卡洛方法，根据建议分布函数q(xk|z1:k,u1:k,x0)进行采样，则可以求得近似的期望。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-d327ec1156b41b4165583497847597dd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"605\" data-rawheight=\"194\" class=\"origin_image zh-lightbox-thumb\" width=\"605\" data-original=\"https://pic2.zhimg.com/v2-d327ec1156b41b4165583497847597dd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;605&#39; height=&#39;194&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"605\" data-rawheight=\"194\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"605\" data-original=\"https://pic2.zhimg.com/v2-d327ec1156b41b4165583497847597dd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-d327ec1156b41b4165583497847597dd_b.jpg\"/></figure><p>根据式10可以发现将采样分布替换为建议分布后，期望公式6从求均值变成了加权平均的形式，式11为归一化后的重要性权重。</p><p class=\"ztext-empty-paragraph\"><br/></p><p>接下来的问题就变为如何找到这样一个建议分布，使得既可以方便地根据建议分布进行采样，又可以方便求解重要性权重。而实际上，在多维空间中找到一个这样的建议分布函数比较困难，不过可以通过迭代的方式去求解重要性权重，于是就提出了序贯重要性采样（Sequential Importance Sampling）的方法。为了方便推导，这里将粒子认为是状态序列的样本，推导在对所有状态序列计算的后验上进行。假设建议分布函数为如下形式：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-755ffe002830e02e4cf94a12aa8f1ec6_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"654\" data-rawheight=\"72\" class=\"origin_image zh-lightbox-thumb\" width=\"654\" data-original=\"https://pic3.zhimg.com/v2-755ffe002830e02e4cf94a12aa8f1ec6_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;654&#39; height=&#39;72&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"654\" data-rawheight=\"72\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"654\" data-original=\"https://pic3.zhimg.com/v2-755ffe002830e02e4cf94a12aa8f1ec6_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-755ffe002830e02e4cf94a12aa8f1ec6_b.jpg\"/></figure><p>假设目标状态转移过程符合隐马尔可夫链的假设，则目标状态序列的后验概率可以分解为：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-9da6782ff820ed6e1ddb6207d9a06e47_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"602\" data-rawheight=\"102\" class=\"origin_image zh-lightbox-thumb\" width=\"602\" data-original=\"https://pic4.zhimg.com/v2-9da6782ff820ed6e1ddb6207d9a06e47_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;602&#39; height=&#39;102&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"602\" data-rawheight=\"102\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"602\" data-original=\"https://pic4.zhimg.com/v2-9da6782ff820ed6e1ddb6207d9a06e47_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-9da6782ff820ed6e1ddb6207d9a06e47_b.jpg\"/></figure><p>故可通过以下方式迭代更新重要性权重：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-c226639f99744c1020a7a04abfb46f5f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"618\" data-rawheight=\"299\" class=\"origin_image zh-lightbox-thumb\" width=\"618\" data-original=\"https://pic4.zhimg.com/v2-c226639f99744c1020a7a04abfb46f5f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;618&#39; height=&#39;299&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"618\" data-rawheight=\"299\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"618\" data-original=\"https://pic4.zhimg.com/v2-c226639f99744c1020a7a04abfb46f5f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-c226639f99744c1020a7a04abfb46f5f_b.jpg\"/></figure><p>式14中，分子的两项分别是观测模型噪声和运动模型噪声的分布，式14计算出的权重并未进行归一化，要计算目标函数的期望，需要对重要性权重进行归一化：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-b5641ac97a5fb4e2238cc6c14db5a965_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"297\" data-rawheight=\"103\" class=\"content_image\" width=\"297\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;297&#39; height=&#39;103&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"297\" data-rawheight=\"103\" class=\"content_image lazy\" width=\"297\" data-actualsrc=\"https://pic2.zhimg.com/v2-b5641ac97a5fb4e2238cc6c14db5a965_b.jpg\"/></figure><p>由此，可获得基于序贯重要性采样粒子滤波的一般方法：</p><p>第一步，在分布q(xk|xik-1,uk,z1:k)中采样N个点；</p><p>第二步，根据式14计算新采样分布各粒子的重要性权重Wik；</p><p>第三步，根据式15归一化各权重,求解目标函数期望。</p><p class=\"ztext-empty-paragraph\"><br/></p><p>序贯重要性采样在实际应用中遇到了很多问题，如粒子权重退化的问题，重要性概率密度的选择问题等等。针对这些问题，又提出了名为序贯重要性重采样（Sequential Importance Resampling）的方法。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>序贯重要性重采样</b></p><p>在重要性重采样的应用中，存在一个退化的问题。经过几次迭代以后，很多粒子的权重都变得很小，可以忽略了，只有少数粒子的权重比较大。若重要性权重采用式8的形式，则粒子权值的方差随着时间增大，状态空间中的有效粒子数较少。随着无效采样粒子数目的增加，使得大量的计算浪费在对估计后验滤波概率分布几乎不起作用的粒子上，最终导致估计性能的下降。于是引入了有效粒子数Neff这个指标来衡量粒子退化程度：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-5354fa7a3e9f27b1a2f430f483494523_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"373\" data-rawheight=\"91\" class=\"content_image\" width=\"373\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;373&#39; height=&#39;91&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"373\" data-rawheight=\"91\" class=\"content_image lazy\" width=\"373\" data-actualsrc=\"https://pic4.zhimg.com/v2-5354fa7a3e9f27b1a2f430f483494523_b.jpg\"/></figure><p>实际计算中，有效粒子数可以近似为:</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-367d1069b294b764495def53c62662e5_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"284\" data-rawheight=\"85\" class=\"content_image\" width=\"284\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;284&#39; height=&#39;85&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"284\" data-rawheight=\"85\" class=\"content_image lazy\" width=\"284\" data-actualsrc=\"https://pic2.zhimg.com/v2-367d1069b294b764495def53c62662e5_b.jpg\"/></figure><p>当有效粒子数小于一个给定的阈值后，则开启重采样过程，舍弃掉权重小的粒子并从权重大的粒子中进行新的抽样。一个简单的重采样过程是以各粒子的权重作为概率分布函数，从中进行抽样，抽样后的粒子权重均为1/N，相应的权重大的粒子在新的粒子集中占比就会比较多。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>Rao-Blackwellized滤波器</b></p><p>在上面的讨论中，细心的同学可能会发现在粒子滤波的推导时，概率密度函数中舍弃掉了地图项m，这是基于Rao-Blackwellized滤波器的思想，他是现代FastSlam理论的基石。简单来说，在已知一致性的全SLAM问题中，地图中任意两个不相交的特征集合之间是条件无关的。换句话说，如果由“神谕”指出了机器人的真正路径，那么就能独立的估计地图中所有特征的位置。这些估计的相关性仅有机器人的位姿不确定性产生。关于R-B滤波器和FastSLAM的详细内容这里就不展开了，有兴趣的同学可以查看相关文献资料。</p><p class=\"ztext-empty-paragraph\"><br/></p><p><b>总结</b></p><p>以上就是本期关于粒子滤波的内容了，<b>目前粒子滤波已经被广泛应用于二维平面的SLAM算法中，并已经成功的实现了商业化，经典的Gmapping就是采用了粒子滤波算法。</b>虽然粒子滤波可以起到很好的建图效果，但它也存在一定的局限性，其中最重要的就是没有回环检测的功能，当机器人回到已走过的场景时，无法通过回环的检测去修正地图信息，表现为地图无法“闭环”。下一期小编将介绍<b>基于优化的SLAM方法</b>，它从原理上解决了闭环的问题。</p>", 
            "topic": [
                {
                    "tag": "科技", 
                    "tagLink": "https://api.zhihu.com/topics/19556664"
                }, 
                {
                    "tag": "机器人", 
                    "tagLink": "https://api.zhihu.com/topics/19551273"
                }, 
                {
                    "tag": "人工智能", 
                    "tagLink": "https://api.zhihu.com/topics/19551275"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/37565843", 
            "userName": "机器人阿keen", 
            "userLink": "https://www.zhihu.com/people/4dc1cc8f1aecc3bad301be15a79aecce", 
            "upvote": 21, 
            "title": "【干货】机电系统专题一——电机篇", 
            "content": "<p>前言：作为一个天赋异禀的程序员，贴几篇干货向世界证明我的头发没有白掉。</p><p>预警：纯干货，现在跑还来得及。</p><p>正文：好了你跑不了了。</p><p>公司是做商用服务机器人的，所以这篇主要讲一讲我们可爱的擎朗智能机器人是怎么灵活动次打次的。限于部分知识过于专业性，为了便于大家理解，机电系统专题共分为电机篇、驱动篇和运动控制篇三个部分讲解，下面就以电机篇开讲了。</p><p><b>1．选择什么样的电机</b></p><p> 传统的小功率电机基本都是直流电机，因其体积小，重量轻，控制简单。随着电机和驱动控制技术的发展，交流电机已然成为主力，比如小到机械式硬盘、航模电机，中到电动自行车、电动汽车，大到风力发电、矿井提升机。我们这里主要讨论的是几百瓦等级的电动自行车用电机，比较适合PEANUT这种机型的产品，通常分为两类：中置电机和轮毂电机。他们各自的优缺点如下表所示。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-c435bca9eb1b2c9deccc4095550bd886_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"663\" data-rawheight=\"344\" class=\"origin_image zh-lightbox-thumb\" width=\"663\" data-original=\"https://pic3.zhimg.com/v2-c435bca9eb1b2c9deccc4095550bd886_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;663&#39; height=&#39;344&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"663\" data-rawheight=\"344\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"663\" data-original=\"https://pic3.zhimg.com/v2-c435bca9eb1b2c9deccc4095550bd886_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-c435bca9eb1b2c9deccc4095550bd886_b.jpg\"/></figure><p>其中效率是指电机本身的能源效率，但通常中置电机要配合机械传动系统，所以效率比直驱型的轮毂电机要低一些，而且因为传动类零件易磨损，需要定期保养。</p><p><b>2．电机为什么能转起来</b></p><p> 利用电磁定律，同步电机中产生的转矩等于两个现有磁场的矢量交叉乘积，用一个简洁优美的数学表达式概括：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ffa0e45204e0fc62ee52b836410894c7_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"142\" data-rawheight=\"25\" class=\"content_image\" width=\"142\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;142&#39; height=&#39;25&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"142\" data-rawheight=\"25\" class=\"content_image lazy\" width=\"142\" data-actualsrc=\"https://pic4.zhimg.com/v2-ffa0e45204e0fc62ee52b836410894c7_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>  这个表达式显示，如果定子和转子磁场垂直时转矩为最大值。要保证转子在整个圆周转矩都是最大值，那就需要控制定子磁场随转子同步旋转，用交流电机统一理论来描述：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-031ee06cf67b74c0d6345e233c524a9a_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"299\" data-rawheight=\"174\" class=\"content_image\" width=\"299\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;299&#39; height=&#39;174&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"299\" data-rawheight=\"174\" class=\"content_image lazy\" width=\"299\" data-actualsrc=\"https://pic3.zhimg.com/v2-031ee06cf67b74c0d6345e233c524a9a_b.jpg\"/></figure><p>以上φA，φB，φC分别是A、B、C三相定子线圈产生的磁场，而这个磁场位置是静止的，幅值随时间按正弦规律变化，即脉振磁场，θ是A相线圈的空间位置，B、C两相与A相沿电机圆周均匀分布。由公式可以得出三相合成磁场最大值时，θ=ωt ，即合成磁场是幅值恒定（φ合=3/2φM）的旋转磁场。既然已经有了可以旋转的磁场，转子的位置又通过编码器获得，只需要驱动控制器控制定子合成的旋转磁场与转子磁场始终保持垂直，那么转子就能以最大转矩旋转起来了。可能上述公式较抽象，那通过下面动图就可以直接理解了。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-a3425b7817a628618d5b12163d203cdb_b.jpg\" data-size=\"normal\" data-rawwidth=\"415\" data-rawheight=\"234\" class=\"content_image\" width=\"415\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;415&#39; height=&#39;234&#39;&gt;&lt;/svg&gt;\" data-size=\"normal\" data-rawwidth=\"415\" data-rawheight=\"234\" class=\"content_image lazy\" width=\"415\" data-actualsrc=\"https://pic4.zhimg.com/v2-a3425b7817a628618d5b12163d203cdb_b.jpg\"/><figcaption>双击图片可查看动图</figcaption></figure><p>图中黄、绿、蓝箭头矢量分别对应A、B、C三相磁动势，空间位置不变，幅值随时间变化，合成磁动势（红色箭头矢量）幅值不变沿圆周旋转。</p><p><b>3．实体电机的数学模型是什么样的呢</b></p><p> 交流电机三相电压、电流和磁通可根据复杂空间矢量进行分析，对于电流，空间矢量定义如下。假定ia，ib，ic分别是定子三相瞬时电流，则定子电流合成矢量</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-761efe0ad9991053b81a7012b12de322_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"21\" data-rawheight=\"30\" class=\"content_image\" width=\"21\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;21&#39; height=&#39;30&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"21\" data-rawheight=\"30\" class=\"content_image lazy\" width=\"21\" data-actualsrc=\"https://pic3.zhimg.com/v2-761efe0ad9991053b81a7012b12de322_b.jpg\"/></figure><p>被定义为</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-299a895be3a2d005c1e54887a9e6956c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"131\" data-rawheight=\"27\" class=\"content_image\" width=\"131\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;131&#39; height=&#39;27&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"131\" data-rawheight=\"27\" class=\"content_image lazy\" width=\"131\" data-actualsrc=\"https://pic1.zhimg.com/v2-299a895be3a2d005c1e54887a9e6956c_b.jpg\"/></figure><p>其中，</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-4dacd7bd303583d86c229278693036e1_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"52\" data-rawheight=\"34\" class=\"content_image\" width=\"52\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;52&#39; height=&#39;34&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"52\" data-rawheight=\"34\" class=\"content_image lazy\" width=\"52\" data-actualsrc=\"https://pic2.zhimg.com/v2-4dacd7bd303583d86c229278693036e1_b.jpg\"/></figure><p>和</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-160aa733f38ea6463376a02bc1f14d1e_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"52\" data-rawheight=\"34\" class=\"content_image\" width=\"52\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;52&#39; height=&#39;34&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"52\" data-rawheight=\"34\" class=\"content_image lazy\" width=\"52\" data-actualsrc=\"https://pic3.zhimg.com/v2-160aa733f38ea6463376a02bc1f14d1e_b.jpg\"/></figure><p>为空间运算符，下图显示了定子电流空间矢量关系。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-733d785673dafbf8013d87caec493fbd_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"213\" class=\"content_image\" width=\"200\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;200&#39; height=&#39;213&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"200\" data-rawheight=\"213\" class=\"content_image lazy\" width=\"200\" data-actualsrc=\"https://pic2.zhimg.com/v2-733d785673dafbf8013d87caec493fbd_b.jpg\"/></figure><p>图示三相位系统是时变系统，为了方便控制需要变换成类似直流电机的特性，这个变换可被分成两个步骤：</p><p>• 三相坐标系（a，b，c）变换成两相静止坐标系（clarke 变换），其输出一个两坐标时变系统</p><p>• 两相静止坐标系（α，ß）变换成两相旋转坐标系（Park变换），其输出一个两坐标非时变系统</p><p>Clarke变换：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-903e8ce359bd57ed50ad10f156398fa2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"217\" data-rawheight=\"94\" class=\"content_image\" width=\"217\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;217&#39; height=&#39;94&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"217\" data-rawheight=\"94\" class=\"content_image lazy\" width=\"217\" data-actualsrc=\"https://pic3.zhimg.com/v2-903e8ce359bd57ed50ad10f156398fa2_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-4ec66ea9459d970f498314c8174e41ec_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"170\" data-rawheight=\"167\" class=\"content_image\" width=\"170\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;170&#39; height=&#39;167&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"170\" data-rawheight=\"167\" class=\"content_image lazy\" width=\"170\" data-actualsrc=\"https://pic1.zhimg.com/v2-4ec66ea9459d970f498314c8174e41ec_b.jpg\"/></figure><p>Park变换：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-288d8cfbc333be099cf6ac0da9163fe0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"215\" data-rawheight=\"56\" class=\"content_image\" width=\"215\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;215&#39; height=&#39;56&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"215\" data-rawheight=\"56\" class=\"content_image lazy\" width=\"215\" data-actualsrc=\"https://pic1.zhimg.com/v2-288d8cfbc333be099cf6ac0da9163fe0_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-9004cfc406cbf9057d43ebed1392cb02_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"215\" data-rawheight=\"150\" class=\"content_image\" width=\"215\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;215&#39; height=&#39;150&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"215\" data-rawheight=\"150\" class=\"content_image lazy\" width=\"215\" data-actualsrc=\"https://pic3.zhimg.com/v2-9004cfc406cbf9057d43ebed1392cb02_b.jpg\"/></figure><p>经过以上变换后，d，q轴分量就变成一个常量，因此常量isd（磁通分量）和isq（转矩分量）电流分量可被单独控制。下面就在dq旋转坐标系中建立电机的数学模型。</p><p>电机在dq旋转坐标系中定子电压和定子磁链方程为</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-7c04644e0de24e670ad2606c1e98dd9b_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"286\" data-rawheight=\"147\" class=\"content_image\" width=\"286\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;286&#39; height=&#39;147&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"286\" data-rawheight=\"147\" class=\"content_image lazy\" width=\"286\" data-actualsrc=\"https://pic4.zhimg.com/v2-7c04644e0de24e670ad2606c1e98dd9b_b.jpg\"/></figure><p>Ud，Uq为d、q轴的定子电压；</p><p>Ld，Lq为d、q轴的电枢电感，对一般隐极电机Ld=Lq=L；</p><p>id，iq为d、q轴的电枢电流；</p><p>ψd，ψq为d、q的定子磁链；</p><p>ּRs为电枢绕组电阻；</p><p>ψf为用磁钢产生的磁链，为常量；</p><p>ω为电机电角速度，ω=pωr，p为电机的极对数，ωr为电机转子角速度；</p><p>由（1）推出：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-e2478af4bd0f07e9c5bba7676a9f96d2_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"414\" data-rawheight=\"92\" class=\"content_image\" width=\"414\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;414&#39; height=&#39;92&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"414\" data-rawheight=\"92\" class=\"content_image lazy\" width=\"414\" data-actualsrc=\"https://pic3.zhimg.com/v2-e2478af4bd0f07e9c5bba7676a9f96d2_b.jpg\"/></figure><p>交流电机在dq轴旋转坐标系中电磁转矩方程为</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-2e4420e6bc648e5864f6c301b63b48e8_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"356\" data-rawheight=\"27\" class=\"content_image\" width=\"356\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;356&#39; height=&#39;27&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"356\" data-rawheight=\"27\" class=\"content_image lazy\" width=\"356\" data-actualsrc=\"https://pic1.zhimg.com/v2-2e4420e6bc648e5864f6c301b63b48e8_b.jpg\"/></figure><p>交流电机的转子动力学方程为</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-3064a76252351a5af1bb20774a11a249_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"331\" data-rawheight=\"45\" class=\"content_image\" width=\"331\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;331&#39; height=&#39;45&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"331\" data-rawheight=\"45\" class=\"content_image lazy\" width=\"331\" data-actualsrc=\"https://pic2.zhimg.com/v2-3064a76252351a5af1bb20774a11a249_b.jpg\"/></figure><p>Te为电机的电磁转矩；</p><p>TL为电机的负载转矩；</p><p>B为电机的转动的阻尼系数；</p><p>J为电机的转动惯量；</p><p>由式（3）（4）可以推出</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-53703aa8a2b2ff975afaa69f84aa2257_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"338\" data-rawheight=\"46\" class=\"content_image\" width=\"338\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;338&#39; height=&#39;46&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"338\" data-rawheight=\"46\" class=\"content_image lazy\" width=\"338\" data-actualsrc=\"https://pic4.zhimg.com/v2-53703aa8a2b2ff975afaa69f84aa2257_b.jpg\"/></figure><p>状态方程为</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-79e04888b453cbed164b29011cbf4f92_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"131\" data-rawheight=\"21\" class=\"content_image\" width=\"131\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;131&#39; height=&#39;21&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"131\" data-rawheight=\"21\" class=\"content_image lazy\" width=\"131\" data-actualsrc=\"https://pic3.zhimg.com/v2-79e04888b453cbed164b29011cbf4f92_b.jpg\"/></figure><p>选取</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-3039a17d487260067c59b1b735042d1d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"150\" data-rawheight=\"83\" class=\"content_image\" width=\"150\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;150&#39; height=&#39;83&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"150\" data-rawheight=\"83\" class=\"content_image lazy\" width=\"150\" data-actualsrc=\"https://pic2.zhimg.com/v2-3039a17d487260067c59b1b735042d1d_b.jpg\"/></figure><p>由式（2）（5）推出</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-377a8218ce48799b94910f92449409ac_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"407\" data-rawheight=\"139\" class=\"content_image\" width=\"407\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;407&#39; height=&#39;139&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"407\" data-rawheight=\"139\" class=\"content_image lazy\" width=\"407\" data-actualsrc=\"https://pic1.zhimg.com/v2-377a8218ce48799b94910f92449409ac_b.jpg\"/></figure><p>好了，到现在为止我们已经有了精确的电机数学模型，下一节我们将讨论驱动器是如何控制磁场实现电机旋转的，尽请期待吧。</p><p></p>", 
            "topic": [
                {
                    "tag": "工程学", 
                    "tagLink": "https://api.zhihu.com/topics/19572885"
                }, 
                {
                    "tag": "电气工程", 
                    "tagLink": "https://api.zhihu.com/topics/19676903"
                }, 
                {
                    "tag": "电机", 
                    "tagLink": "https://api.zhihu.com/topics/19667696"
                }
            ], 
            "comments": [
                {
                    "userName": "渐行渐远渐无声", 
                    "userLink": "https://www.zhihu.com/people/4d04b05b3e65b712438f6ecf7dd77174", 
                    "content": "求更新啊", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }
    ], 
    "url": "https://zhuanlan.zhihu.com/c_195690634"
}
