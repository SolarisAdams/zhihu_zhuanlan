{
    "title": "数据呀呀", 
    "description": "", 
    "followers": [
        "https://www.zhihu.com/people/alohamu-ze", 
        "https://www.zhihu.com/people/ke-dou-jun-34", 
        "https://www.zhihu.com/people/xiao-xiao-shi-wo-kao-shen", 
        "https://www.zhihu.com/people/alfa-21-5", 
        "https://www.zhihu.com/people/yang-troy-89", 
        "https://www.zhihu.com/people/yifan-12", 
        "https://www.zhihu.com/people/highds21", 
        "https://www.zhihu.com/people/peng-lian-65", 
        "https://www.zhihu.com/people/er-yi-51-47", 
        "https://www.zhihu.com/people/xpc-19", 
        "https://www.zhihu.com/people/belamamgo", 
        "https://www.zhihu.com/people/qsl1071518164", 
        "https://www.zhihu.com/people/shi-lin-45-66", 
        "https://www.zhihu.com/people/youml", 
        "https://www.zhihu.com/people/diamond007", 
        "https://www.zhihu.com/people/su-da-gong-zi", 
        "https://www.zhihu.com/people/kriss-sunkk", 
        "https://www.zhihu.com/people/hu-ling-6-14", 
        "https://www.zhihu.com/people/rayleigh", 
        "https://www.zhihu.com/people/sihe66666", 
        "https://www.zhihu.com/people/wang-jin-ping-92-47", 
        "https://www.zhihu.com/people/ai-chi-you-zi-de-xiao-xi-gua", 
        "https://www.zhihu.com/people/yue-xia-de-lou-lan", 
        "https://www.zhihu.com/people/gkzls", 
        "https://www.zhihu.com/people/lisa-62-51", 
        "https://www.zhihu.com/people/echo-80-65", 
        "https://www.zhihu.com/people/zou-qi-xiao-95", 
        "https://www.zhihu.com/people/liu-da-hai-40", 
        "https://www.zhihu.com/people/tao-yi-li", 
        "https://www.zhihu.com/people/jiang-xin-22-65", 
        "https://www.zhihu.com/people/johnzhang-10", 
        "https://www.zhihu.com/people/boy-foolish", 
        "https://www.zhihu.com/people/jie-geng-37-82", 
        "https://www.zhihu.com/people/liwenna-67", 
        "https://www.zhihu.com/people/Sophia_xiaoyao", 
        "https://www.zhihu.com/people/wang-lu-24-59", 
        "https://www.zhihu.com/people/ding-ling-32-67", 
        "https://www.zhihu.com/people/jiangliumuan", 
        "https://www.zhihu.com/people/llyy-46-12", 
        "https://www.zhihu.com/people/cc456-62", 
        "https://www.zhihu.com/people/yanis-ding", 
        "https://www.zhihu.com/people/ping-guo-guan-tou-90", 
        "https://www.zhihu.com/people/littlesheep-81", 
        "https://www.zhihu.com/people/shan-shang-you-jin", 
        "https://www.zhihu.com/people/ren-you-tu", 
        "https://www.zhihu.com/people/wang-zhou-43-16-48", 
        "https://www.zhihu.com/people/bo-zheng-jian", 
        "https://www.zhihu.com/people/li-xiao-xiao-23", 
        "https://www.zhihu.com/people/cowseden", 
        "https://www.zhihu.com/people/bao-jun-35-69", 
        "https://www.zhihu.com/people/chen-lin-95-96-79", 
        "https://www.zhihu.com/people/jing-gang-shan-92", 
        "https://www.zhihu.com/people/zjtotoro", 
        "https://www.zhihu.com/people/coben", 
        "https://www.zhihu.com/people/cui-ying-pu-35", 
        "https://www.zhihu.com/people/wayswang", 
        "https://www.zhihu.com/people/qi-liao-dou-hua", 
        "https://www.zhihu.com/people/cao-lei-57-86", 
        "https://www.zhihu.com/people/min-er-bu-xuan", 
        "https://www.zhihu.com/people/yimengtianya1", 
        "https://www.zhihu.com/people/zhan-yi-36", 
        "https://www.zhihu.com/people/yu-xin-10-21", 
        "https://www.zhihu.com/people/wu-wu-77-51-67", 
        "https://www.zhihu.com/people/lie-deng-shi-ren", 
        "https://www.zhihu.com/people/bai-er-ma-zi", 
        "https://www.zhihu.com/people/luo-xiao-jian-57", 
        "https://www.zhihu.com/people/wang-ze-song-12", 
        "https://www.zhihu.com/people/gong-xiao-di-34", 
        "https://www.zhihu.com/people/jin-biao-2", 
        "https://www.zhihu.com/people/sheng-zhen-60", 
        "https://www.zhihu.com/people/lucillegyl", 
        "https://www.zhihu.com/people/mie-da-mian-yang", 
        "https://www.zhihu.com/people/zhangtongrong", 
        "https://www.zhihu.com/people/guo-si-chao", 
        "https://www.zhihu.com/people/du-ming-xin-yue", 
        "https://www.zhihu.com/people/zhang-yang-32-97", 
        "https://www.zhihu.com/people/chenxix-91", 
        "https://www.zhihu.com/people/wzc365", 
        "https://www.zhihu.com/people/xiao-qi-e-77-51", 
        "https://www.zhihu.com/people/xiao-li-tong-xue-29", 
        "https://www.zhihu.com/people/yeyi_", 
        "https://www.zhihu.com/people/luo-yuan-quan", 
        "https://www.zhihu.com/people/ri-shi-33", 
        "https://www.zhihu.com/people/tang-gong-min-50", 
        "https://www.zhihu.com/people/duan-xian-shui-ting-92", 
        "https://www.zhihu.com/people/lu-tao-tao-73", 
        "https://www.zhihu.com/people/liu-gan-79-78", 
        "https://www.zhihu.com/people/maverick7", 
        "https://www.zhihu.com/people/xyn070506", 
        "https://www.zhihu.com/people/gao-lei-83-69", 
        "https://www.zhihu.com/people/greenteanotears", 
        "https://www.zhihu.com/people/xi-ci-89-83", 
        "https://www.zhihu.com/people/dou-long-chao-7", 
        "https://www.zhihu.com/people/li-ruo-yan-74", 
        "https://www.zhihu.com/people/feng-yan-47-57-39", 
        "https://www.zhihu.com/people/yang-31-87-14", 
        "https://www.zhihu.com/people/ypeng-30", 
        "https://www.zhihu.com/people/mr-xiong-hai-zi-99", 
        "https://www.zhihu.com/people/wang-wen-da-1", 
        "https://www.zhihu.com/people/zhang-cheng-bin-10", 
        "https://www.zhihu.com/people/chao-ren-bu-hui-fei-52", 
        "https://www.zhihu.com/people/xiao-qian-88-33-7", 
        "https://www.zhihu.com/people/lanenlai", 
        "https://www.zhihu.com/people/llm-27-88", 
        "https://www.zhihu.com/people/xun-yang-xiao-yu", 
        "https://www.zhihu.com/people/wu-tong-71-6", 
        "https://www.zhihu.com/people/jason-20-17-14", 
        "https://www.zhihu.com/people/MaverickChan", 
        "https://www.zhihu.com/people/max-bay-21", 
        "https://www.zhihu.com/people/Micro_Kun", 
        "https://www.zhihu.com/people/wu-ye-ming", 
        "https://www.zhihu.com/people/wei-84-56-44", 
        "https://www.zhihu.com/people/bvxj", 
        "https://www.zhihu.com/people/dong-feng-zao-ji", 
        "https://www.zhihu.com/people/chen-dong-hai-18", 
        "https://www.zhihu.com/people/yang-yu-58042", 
        "https://www.zhihu.com/people/snowball-in-the-sun", 
        "https://www.zhihu.com/people/solin-qiu", 
        "https://www.zhihu.com/people/xu-xuan-45-80", 
        "https://www.zhihu.com/people/cp-ren", 
        "https://www.zhihu.com/people/leo-lee-66", 
        "https://www.zhihu.com/people/tu-dou-75-95", 
        "https://www.zhihu.com/people/yu-bing-74-48", 
        "https://www.zhihu.com/people/hao-ren-79-93", 
        "https://www.zhihu.com/people/Lancelot_Ken", 
        "https://www.zhihu.com/people/jay_zhou", 
        "https://www.zhihu.com/people/tang-long-30-1", 
        "https://www.zhihu.com/people/liu-jin-83-89-77", 
        "https://www.zhihu.com/people/kydd", 
        "https://www.zhihu.com/people/xiong-shu", 
        "https://www.zhihu.com/people/fovvvvvv", 
        "https://www.zhihu.com/people/wang-zhao-jie-26", 
        "https://www.zhihu.com/people/mu-tou-36-87", 
        "https://www.zhihu.com/people/carryxu", 
        "https://www.zhihu.com/people/hua-si-yuan", 
        "https://www.zhihu.com/people/yang-ye-79", 
        "https://www.zhihu.com/people/levloveyoung", 
        "https://www.zhihu.com/people/camark", 
        "https://www.zhihu.com/people/culpa-43", 
        "https://www.zhihu.com/people/ma-shao-guang", 
        "https://www.zhihu.com/people/kang-kang-29-67", 
        "https://www.zhihu.com/people/niu-hao-97", 
        "https://www.zhihu.com/people/xiaolong-xie", 
        "https://www.zhihu.com/people/xie-xie-31-20", 
        "https://www.zhihu.com/people/chen-hui-13-85", 
        "https://www.zhihu.com/people/ewfvfb", 
        "https://www.zhihu.com/people/jzcao", 
        "https://www.zhihu.com/people/meng-tong-xue-34", 
        "https://www.zhihu.com/people/jiang-qing-86", 
        "https://www.zhihu.com/people/li-hao-60-5-98", 
        "https://www.zhihu.com/people/simooooooon-27", 
        "https://www.zhihu.com/people/sa-ma-er-han-han-wang", 
        "https://www.zhihu.com/people/ling-xiao-hua-90", 
        "https://www.zhihu.com/people/yu-jen-chen", 
        "https://www.zhihu.com/people/zhang-kun-81-28", 
        "https://www.zhihu.com/people/yong-yuan-de-zizou", 
        "https://www.zhihu.com/people/nnzy", 
        "https://www.zhihu.com/people/jeevanyue", 
        "https://www.zhihu.com/people/li-zhi-bin-48", 
        "https://www.zhihu.com/people/qiu-mei-mei-10", 
        "https://www.zhihu.com/people/vincent0618", 
        "https://www.zhihu.com/people/lao-bai-de-bai", 
        "https://www.zhihu.com/people/soar-98", 
        "https://www.zhihu.com/people/transformer", 
        "https://www.zhihu.com/people/hahaha1219", 
        "https://www.zhihu.com/people/15757128309", 
        "https://www.zhihu.com/people/xin-liu-29-27", 
        "https://www.zhihu.com/people/xie-kang-35-72", 
        "https://www.zhihu.com/people/feng-bao-zhi-ling-78", 
        "https://www.zhihu.com/people/mo-bo-38", 
        "https://www.zhihu.com/people/a-meng-de-hai-jiao", 
        "https://www.zhihu.com/people/mao-da-wang-99", 
        "https://www.zhihu.com/people/metaboot", 
        "https://www.zhihu.com/people/fu-wen-liang", 
        "https://www.zhihu.com/people/huang-xin-yi-64-66", 
        "https://www.zhihu.com/people/hhthf", 
        "https://www.zhihu.com/people/wang-le-li-la", 
        "https://www.zhihu.com/people/ydd323", 
        "https://www.zhihu.com/people/-eureka", 
        "https://www.zhihu.com/people/mu-mu-86-46-63", 
        "https://www.zhihu.com/people/yao-yu-qing-44", 
        "https://www.zhihu.com/people/wo-shi-pei-pei-xue-jie", 
        "https://www.zhihu.com/people/tang-yong-81", 
        "https://www.zhihu.com/people/lin-yi-87-48", 
        "https://www.zhihu.com/people/na-zhang-24-17", 
        "https://www.zhihu.com/people/dong-tao-23", 
        "https://www.zhihu.com/people/mu-chen-ai-94", 
        "https://www.zhihu.com/people/liu-zhu-83-35", 
        "https://www.zhihu.com/people/812hia", 
        "https://www.zhihu.com/people/advstock", 
        "https://www.zhihu.com/people/kuroko-33", 
        "https://www.zhihu.com/people/di-hu-zi", 
        "https://www.zhihu.com/people/e-de-gu-ji", 
        "https://www.zhihu.com/people/guo-zhu-65-52", 
        "https://www.zhihu.com/people/ni-bu-ni", 
        "https://www.zhihu.com/people/zhao-xin-12-45"
    ], 
    "article": [
        {
            "url": "https://zhuanlan.zhihu.com/p/73121745", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 1, 
            "title": "机器学习模型评估指标1之分类模型", 
            "content": "<p>给小姐姐介绍男朋友，她可能会关心，身高，年龄，工作？进而通过这3个<b>指标</b>来衡量见或者不见。<i>（正经脸，其实大部分会先问帅不帅，这个可难量化哦。陈道明帅吗？古天乐帅吗？宝强哥哥帅吗？^_^）</i></p><p>对于模型，为了了解模型的泛化能力，我们也需要用<b>某些或者某个指标</b>来衡量好或者不够好，并通过这个指标来进一步调参逐步优化我们的模型。</p><p>模型主要有分类问题，回归问题。判定标准一样吗？用什么方式判定？怎么选择合适的评估标准？首先先整理下分类的评估指标</p><p class=\"ztext-empty-paragraph\"><br/></p><p>目录</p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756050\" class=\"internal\">1、混淆矩阵... 1</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756051\" class=\"internal\">2、准确率（Accuracy）... 2</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756052\" class=\"internal\">3、精确率（Precision）... 2</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756053\" class=\"internal\">4、召回率（Recall）TPR. 3</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756054\" class=\"internal\">5、FPR（假警报率）... 3</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756055\" class=\"internal\">6、特异度（Specificity）-TNR (Acc-) 3</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756056\" class=\"internal\">7、G-mean. 3</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756057\" class=\"internal\">8、F1 score. 3</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756058\" class=\"internal\">9、ROC曲线... 4</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756059\" class=\"internal\">10、AUC.. 5</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756060\" class=\"internal\">11、PR曲线... 6</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756061\" class=\"internal\">12. KS. 8</a></p><p><a href=\"https://zhuanlan.zhihu.com/p/73121745/edit#_Toc13756062\" class=\"internal\">13. Lift 和Gain图... 9</a></p><p>在介绍之前，我们先重新明确一下这些图表的名称，中文、英文、简称，全部来熟悉一下：</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-fdf5605599188551ff85c611dd76e5ed_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"579\" data-rawheight=\"266\" class=\"origin_image zh-lightbox-thumb\" width=\"579\" data-original=\"https://pic2.zhimg.com/v2-fdf5605599188551ff85c611dd76e5ed_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;579&#39; height=&#39;266&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"579\" data-rawheight=\"266\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"579\" data-original=\"https://pic2.zhimg.com/v2-fdf5605599188551ff85c611dd76e5ed_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-fdf5605599188551ff85c611dd76e5ed_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>1、混淆矩阵(基础)：</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-158fe4ba7fc263943401216471f0a511_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"508\" data-rawheight=\"140\" class=\"origin_image zh-lightbox-thumb\" width=\"508\" data-original=\"https://pic2.zhimg.com/v2-158fe4ba7fc263943401216471f0a511_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;508&#39; height=&#39;140&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"508\" data-rawheight=\"140\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"508\" data-original=\"https://pic2.zhimg.com/v2-158fe4ba7fc263943401216471f0a511_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-158fe4ba7fc263943401216471f0a511_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>混肴矩阵</p><p>tip : 怎么更容易的记住混肴矩阵？ </p><p>由上图可看出，prediction 的true 对应的是positive，False 对应的是 negetive ,</p><p>                        Actual True=TP+FN ，(False Negetive 负负得正， 错误的负类 就是 正类)</p><h3>2、准确率（Accuracy）</h3><p><b>模型正确预测的比例</b></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-818aae5a4a953bf59a395710d623d36c_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"456\" data-rawheight=\"91\" class=\"origin_image zh-lightbox-thumb\" width=\"456\" data-original=\"https://pic1.zhimg.com/v2-818aae5a4a953bf59a395710d623d36c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;456&#39; height=&#39;91&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"456\" data-rawheight=\"91\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"456\" data-original=\"https://pic1.zhimg.com/v2-818aae5a4a953bf59a395710d623d36c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-818aae5a4a953bf59a395710d623d36c_b.jpg\"/></figure><h3>3、精确率（Precision）</h3><p>精确率只针对<b>预测正确的正样本</b>。预测出是正的里面有多少真正是正的。可理解为查准率。为正确预测的正例数 /预测正例总数</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ba117d931eb6d340268014a2a4b4f3f7_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"337\" data-rawheight=\"56\" class=\"content_image\" width=\"337\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;337&#39; height=&#39;56&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"337\" data-rawheight=\"56\" class=\"content_image lazy\" width=\"337\" data-actualsrc=\"https://pic4.zhimg.com/v2-ba117d931eb6d340268014a2a4b4f3f7_b.png\"/></figure><h3>4、召回率（Recall）TPR</h3><p>召回率针对实际正确样本中，模型预测出多少。为正确预测的正例数 /实际正例总数</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-17c6ef3e698f3efcb69e1b09643d4996_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"368\" data-rawheight=\"55\" class=\"content_image\" width=\"368\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;368&#39; height=&#39;55&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"368\" data-rawheight=\"55\" class=\"content_image lazy\" width=\"368\" data-actualsrc=\"https://pic3.zhimg.com/v2-17c6ef3e698f3efcb69e1b09643d4996_b.png\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>5、FPR（假警报率）</h3><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-811c1101bda9b9e61865f35bcfb829bd_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"580\" data-rawheight=\"82\" class=\"origin_image zh-lightbox-thumb\" width=\"580\" data-original=\"https://pic2.zhimg.com/v2-811c1101bda9b9e61865f35bcfb829bd_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;580&#39; height=&#39;82&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"580\" data-rawheight=\"82\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"580\" data-original=\"https://pic2.zhimg.com/v2-811c1101bda9b9e61865f35bcfb829bd_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-811c1101bda9b9e61865f35bcfb829bd_b.png\"/></figure><h3>6、特异度（Specificity）-TNR (Acc-)</h3><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-810e6be15453b7240626f60097a75658_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"515\" data-rawheight=\"73\" class=\"origin_image zh-lightbox-thumb\" width=\"515\" data-original=\"https://pic1.zhimg.com/v2-810e6be15453b7240626f60097a75658_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;515&#39; height=&#39;73&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"515\" data-rawheight=\"73\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"515\" data-original=\"https://pic1.zhimg.com/v2-810e6be15453b7240626f60097a75658_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-810e6be15453b7240626f60097a75658_b.png\"/></figure><h3>7、G-mean</h3><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-12676637d1d30421750c12a41165f045_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"536\" data-rawheight=\"59\" class=\"origin_image zh-lightbox-thumb\" width=\"536\" data-original=\"https://pic2.zhimg.com/v2-12676637d1d30421750c12a41165f045_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;536&#39; height=&#39;59&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"536\" data-rawheight=\"59\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"536\" data-original=\"https://pic2.zhimg.com/v2-12676637d1d30421750c12a41165f045_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-12676637d1d30421750c12a41165f045_b.png\"/></figure><p>在数据不平衡的时候，这个指标很有参考价值。</p><h3>8、F1 score</h3><p>F1 score 是对精度和召回率的调和平均，</p><p>当认为查准率和查全率一样重要时，权重相同时：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-680b7b0de7576b4c7824927b6dffc8dc_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"358\" data-rawheight=\"67\" class=\"content_image\" width=\"358\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;358&#39; height=&#39;67&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"358\" data-rawheight=\"67\" class=\"content_image lazy\" width=\"358\" data-actualsrc=\"https://pic1.zhimg.com/v2-680b7b0de7576b4c7824927b6dffc8dc_b.jpg\"/></figure><p>当查准率查全率的重要性不同时，即权重不同时：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-29910bb4a22e403c99a2cc31f843383d_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"695\" data-rawheight=\"169\" class=\"origin_image zh-lightbox-thumb\" width=\"695\" data-original=\"https://pic2.zhimg.com/v2-29910bb4a22e403c99a2cc31f843383d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;695&#39; height=&#39;169&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"695\" data-rawheight=\"169\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"695\" data-original=\"https://pic2.zhimg.com/v2-29910bb4a22e403c99a2cc31f843383d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-29910bb4a22e403c99a2cc31f843383d_b.jpg\"/></figure><h3>9、ROC曲线</h3><p>横坐标为False Positive Rate(FPR假正率)，纵坐标为True Positive Rate(TPR真正率)。</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-8ebe7bd45e04753e83ff85ba40739a6c_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"554\" data-rawheight=\"47\" class=\"origin_image zh-lightbox-thumb\" width=\"554\" data-original=\"https://pic1.zhimg.com/v2-8ebe7bd45e04753e83ff85ba40739a6c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;554&#39; height=&#39;47&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"554\" data-rawheight=\"47\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"554\" data-original=\"https://pic1.zhimg.com/v2-8ebe7bd45e04753e83ff85ba40739a6c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-8ebe7bd45e04753e83ff85ba40739a6c_b.png\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>如图</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-05b52e0b11b356754eba024edcdf7b74_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"530\" data-rawheight=\"388\" class=\"origin_image zh-lightbox-thumb\" width=\"530\" data-original=\"https://pic1.zhimg.com/v2-05b52e0b11b356754eba024edcdf7b74_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;530&#39; height=&#39;388&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"530\" data-rawheight=\"388\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"530\" data-original=\"https://pic1.zhimg.com/v2-05b52e0b11b356754eba024edcdf7b74_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-05b52e0b11b356754eba024edcdf7b74_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>ROC曲线中的四个点和一条线:</p><p>点(0,1)：即FPR=0, TPR=1，意味着FN＝0且FP＝0，将所有的样本都正确分类。</p><p>点(1,0)：即FPR=1，TPR=0，最差分类器，避开了所有正确答案。</p><p>点(0,0)：即FPR=TPR=0，FP＝TP＝0，分类器把每个实例都预测为负类。</p><p>点(1,1)：分类器把每个实例都预测为正类。</p><p>总之：ROC曲线越接近左上角，该分类器的性能越好。而且一般来说，如果ROC是光滑的，那么基本可以判断没有太大的overfitting</p><h3>10、AUC</h3><p>AUC（Area Under Curve）被定义为ROC曲线下的面积(ROC的积分)，连接对角线，它的面积正好是0.5。对角线的实际含义是：<b>随机判断响应与不响应，正负样本覆盖率应该都是50%，表示随机效果。</b>ROC曲线越陡越好，所以理想值就是1，一个正方形，而最差的随机判断都有0.5，所以一般AUC的值是<b>介于0.5到1之间</b>的。</p><p><b>AUC的一般判断标准</b></p><p><b>0.5 - 0.7：</b>效果较低</p><p><b>0.7 - 0.85：</b>效果一般</p><p><b>0.85 - 0.95：</b>效果很好</p><p><b>0.95 - 1：</b>效果非常好，但一般不太可能</p><p>(面积)越大的分类器，性能越好，如图：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-44d7a8c08c9a9ee7eae330f5961ea510_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"556\" data-rawheight=\"261\" class=\"origin_image zh-lightbox-thumb\" width=\"556\" data-original=\"https://pic1.zhimg.com/v2-44d7a8c08c9a9ee7eae330f5961ea510_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;556&#39; height=&#39;261&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"556\" data-rawheight=\"261\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"556\" data-original=\"https://pic1.zhimg.com/v2-44d7a8c08c9a9ee7eae330f5961ea510_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-44d7a8c08c9a9ee7eae330f5961ea510_b.jpg\"/></figure><h3>11、PR曲线</h3><p>PR曲线的横坐标是精确率P，纵坐标是召回率R。评价标准和ROC一样，先看平滑不平滑（蓝线明显好些）。</p><p>一般来说，在同一测试集，上面的比下面的好（绿线比红线好）。当P和R的值接近时，F1值最大，此时画连接(0,0)和(1,1)的线，线和PRC重合的地方的F1是这条线最大的F1（光滑的情况下），此时的F1对于PRC就好像AUC对于ROC一样。</p><figure data-size=\"normal\"><noscript><img src=\"https://pic4.zhimg.com/v2-ed9ef170b63fc2161088aea6526a783f_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"509\" data-rawheight=\"405\" class=\"origin_image zh-lightbox-thumb\" width=\"509\" data-original=\"https://pic4.zhimg.com/v2-ed9ef170b63fc2161088aea6526a783f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;509&#39; height=&#39;405&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"509\" data-rawheight=\"405\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"509\" data-original=\"https://pic4.zhimg.com/v2-ed9ef170b63fc2161088aea6526a783f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-ed9ef170b63fc2161088aea6526a783f_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>有时候模型没有单纯的谁比谁好（比如图二的蓝线和青线），所以选择模型还是要结合具体的使用场景。下面是两个场景：</p><p>1，地震的预测 对于地震的预测，我们希望的是RECALL非常高，也就是说每次地震我们都希望预测出来。这个时候我们可以牺牲PRECISION。情愿发出1000次警报，把10次地震都预测正确了，也不要预测100次对了8次漏了两次。</p><p>2，嫌疑人定罪 基于不错怪一个好人的原则，对于嫌疑人的定罪我们希望是非常准确的。即时有时候放过了一些罪犯（recall低），但也是值得的。</p><p>对于分类器来说，本质上是给一个概率，此时，我们再选择一个CUTOFF点（阀值），高于这个点的判正，低于的判负。那么这个点的选择就需要结合你的具体场景去选择。反过来，场景会决定训练模型时的标准，比如第一个场景中，我们就只看RECALL=99.9999%（地震全中）时的PRECISION，其他指标就变得没有了意义。</p><p>当正负样本数量差距不大的情况下，ROC和PR的趋势是差不多的，但是在正负样本分布极不均衡的情况下，PRC比ROC更能真实的反映出实际情况，因为此时ROC曲线看起来似乎很好，但是却在PR上效果一般。</p><p>但通常，如果想要找到二者之间的一个<b>平衡点</b>，我们就需要一个新的指标：<b>F1分数</b>。F1分数同时考虑了查准率和查全率，让二者同时达到最高，取一个平衡。</p><p class=\"ztext-empty-paragraph\"><br/></p><h3>12. KS</h3><p>KS(Kolmogorov-Smirnov)值越大，表示模型能够将正、负样本分开的程度越大。</p><p>                                                            KS=max(TPR−FPR)</p><p>KS曲线和ROC曲线都用到了TPR，FPR。KS曲线是把TPR和FPR都作为纵坐标，而样本数作为横坐标。</p><p>作图步骤：</p><p>1. 根据学习器的预测结果（注意，是正例的概率值，非0/1变量）对样本进行排序（从大到小）-----这就是截断点依次选取的顺序</p><p>2. 按顺序选取截断点，并计算TPR和FPR ---也可以只选取n个截断点，分别在1/n，2/n，3/n等位置</p><p>3. 横轴为样本的占比百分比（最大100%），纵轴分别为TPR和FPR，可以得到KS曲线</p><p>4. TPR和FPR曲线分隔最开的位置就是最好的”截断点“，最大间隔距离就是KS值，通常&gt;0.2即可认为模型有比较好偶的预测准确性</p><p>例图：</p><p class=\"ztext-empty-paragraph\"><br/></p><figure data-size=\"normal\"><noscript><img src=\"https://pic1.zhimg.com/v2-0fa36334502a247a5a18322e21a649c0_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"540\" data-rawheight=\"232\" class=\"origin_image zh-lightbox-thumb\" width=\"540\" data-original=\"https://pic1.zhimg.com/v2-0fa36334502a247a5a18322e21a649c0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;540&#39; height=&#39;232&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"540\" data-rawheight=\"232\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"540\" data-original=\"https://pic1.zhimg.com/v2-0fa36334502a247a5a18322e21a649c0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-0fa36334502a247a5a18322e21a649c0_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><h3>13. Lift 和Gain图</h3><p>前三个指标应用场景更多一些。</p><p>Lift图衡量的是，与不利用模型相比，模型的预测能力“变好”了多少，lift(提升指数)越大，模型的运行效果越好。即“运用该模型”和“未运用该模型”所得结果的比值。</p><p>例子：要向选定的1000人邮寄调查问卷（TN+FP+FN+TP=1000）。大概20%的人会把填好的问卷寄回给你，即1000人中有200人会对你的问卷作出回应（response，TP+FN=200），用统计学的术语，我们说baseline response rate是20%（TP+FN / TN+FP+FN+TP =20%）。 </p><p>假设你利用这些过去的数据建立了模型，这个模型把这1000人分了类，现在你可以从你的千人名单中挑选出反应最积极的100人来（FP+TP=100），这 10%的人的反应率 (response rate)为60%（TP/FN+TP=60%）。那么，对这100人的群体（我们称之为Top 10%），通过运用我们的模型，相对的提升(lift value)就为60%/20%=3；换句话说，与不运用模型而随机选择相比，运用模型而挑选，效果提升了3倍。 </p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-5a38864ed398be1d130207604b35e8c1_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"167\" data-rawheight=\"124\" class=\"content_image\" width=\"167\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;167&#39; height=&#39;124&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"167\" data-rawheight=\"124\" class=\"content_image lazy\" width=\"167\" data-actualsrc=\"https://pic2.zhimg.com/v2-5a38864ed398be1d130207604b35e8c1_b.png\"/></figure><p>Gain图是描述整体精准度的指标。</p><p>计算公式：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-4812f90f0b1dd0a4de1f31ba0aec284e_b.png\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"159\" data-rawheight=\"63\" class=\"content_image\" width=\"159\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;159&#39; height=&#39;63&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"159\" data-rawheight=\"63\" class=\"content_image lazy\" width=\"159\" data-actualsrc=\"https://pic3.zhimg.com/v2-4812f90f0b1dd0a4de1f31ba0aec284e_b.png\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p>作图步骤：</p><p>1. 根据学习器的预测结果（注意，是正例的概率值，非0/1变量）对样本进行排序（从大到小）-----这就是截断点依次选取的顺序</p><p>2. 按顺序选取截断点，并计算Lift和Gain ---也可以只选取n个截断点，分别在1/n，2/n，3/n等位置</p><p>例图：</p><figure data-size=\"normal\"><noscript><img src=\"https://pic2.zhimg.com/v2-2f396c131598330a511b81705883e241_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"720\" data-rawheight=\"352\" class=\"origin_image zh-lightbox-thumb\" width=\"720\" data-original=\"https://pic2.zhimg.com/v2-2f396c131598330a511b81705883e241_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;720&#39; height=&#39;352&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"720\" data-rawheight=\"352\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"720\" data-original=\"https://pic2.zhimg.com/v2-2f396c131598330a511b81705883e241_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-2f396c131598330a511b81705883e241_b.jpg\"/></figure><figure data-size=\"normal\"><noscript><img src=\"https://pic3.zhimg.com/v2-b73439c9f4525bbf749e2c32049e4186_b.jpg\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"720\" data-rawheight=\"331\" class=\"origin_image zh-lightbox-thumb\" width=\"720\" data-original=\"https://pic3.zhimg.com/v2-b73439c9f4525bbf749e2c32049e4186_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;720&#39; height=&#39;331&#39;&gt;&lt;/svg&gt;\" data-caption=\"\" data-size=\"normal\" data-rawwidth=\"720\" data-rawheight=\"331\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"720\" data-original=\"https://pic3.zhimg.com/v2-b73439c9f4525bbf749e2c32049e4186_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-b73439c9f4525bbf749e2c32049e4186_b.jpg\"/></figure><p class=\"ztext-empty-paragraph\"><br/></p><p> 站在前人的肩膀上，可以看得更远，参考博客：</p><a href=\"https://link.zhihu.com/?target=https%3A//blog.csdn.net/shy19890510/article/details/79501582\" data-draft-node=\"block\" data-draft-type=\"link-card\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">推荐博客 https://blog.csdn.net/shy19890510/article/details/79501582</a><a href=\"https://link.zhihu.com/?target=https%3A//www.jianshu.com/p/1afbda3a04ab\" data-draft-node=\"block\" data-draft-type=\"link-card\" data-image=\"https://pic2.zhimg.com/v2-40d652cd2da4a03e0bc4adc79a2775f9_180x120.jpg\" data-image-width=\"723\" data-image-height=\"600\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">牢记分类指标：准确率、精确率、召回率、F1 score以及ROC</a><p></p>", 
            "topic": [
                {
                    "tag": "机器学习", 
                    "tagLink": "https://api.zhihu.com/topics/19559450"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/27237649", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 38, 
            "title": "从战术上藐视数据分析", 
            "content": "<h2><b>面试中被问及的问题：</b></h2>\n\n<ul><ul><ul><li>什么是相关分析和回归分析</li><li>异常值判定</li><li>什么是聚类算法，它有哪些算法，写出其中一个原理及计算步骤</li><li>正态分析公式，及两个变量，变化规律是怎么样的</li><li>对于数据分析是怎么理解的，怎么进行数据分析</li><li>其中数据清理你会怎么做</li><li>自学，你通过什么样的方式学习数据分析的（R,SQL等）</li></ul></ul></ul><h2><b>对于学习和找工作的认知</b></h2>\n\n<p>         学习是为了更好的输出，通过面试积累来调整自己学习的方向，检验自己的知识吸收成果。在找工作之前，我先培养自己具备两种意识</p>\n\n<ul><ul><ul><li>最高效，低成本的学习是在工作中进行反复训练。</li><li>并不是非得到达一个什么样的学习高度才可以去寻找相应岗位的工作，多多尝试。</li></ul></ul></ul><p>       相信大部分同学的想法也是一致的。而我自己践行这个意识的做法是，学习相关内容，不求精专，一个月后尝试开始第一轮面试和学习计划调整（个人路径，大家根据自我认识调整）。通过这一轮的面试，制定了数据分析项目实施训练，这是加入大数据分析社群的初衷。对，就是为了做训练项目，去对比分析自己和别人的训练项目差异，优劣。上一轮目标做好了，再开始投递第2轮简历，突出自己的优势，适当包装，招聘方会以他们认为你所拥有的价值买单。</p>\n\n<p>         我这两种意识是为了克服自己的不自信，潜意识里告知自己不难，找到工作很简单，找工作有时候存在运气这个因素，从战术上藐视它，从战略上重视她。根据自我认知进行学习调整，目标达成，一点点积累和成长。学习是件极具个体差异的事，怎么去填充都是需要自己去摸索适合自己的学习方式。</p>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": [
                {
                    "userName": "离心泵设计工程师", 
                    "userLink": "https://www.zhihu.com/people/76c9f5644c593cdc235a61fcf0bdfff1", 
                    "content": "会不会有弄虚作假的感觉", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "黄马克", 
                            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
                            "content": "<p>通过学习先获得入门票，再进阶，并不等同于作假哦·</p>", 
                            "likes": 0, 
                            "replyToAuthor": "离心泵设计工程师"
                        }
                    ]
                }, 
                {
                    "userName": "岑川", 
                    "userLink": "https://www.zhihu.com/people/68f67d83c3d452605ee0017118ab4b85", 
                    "content": "这波可以", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "互动势力", 
                    "userLink": "https://www.zhihu.com/people/38a70488eea245bd411a4a6db85fc953", 
                    "content": "厉害了，我们公司数据分析也应该这么做。", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "文艺种草菇", 
                    "userLink": "https://www.zhihu.com/people/99da2190ae0e331ad0cb0afb1f9cfafb", 
                    "content": "<p>你好，我也在自学数据分析，请问你统计知识这一块大概学了多久？每天一共学习多长时间？谢谢</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "井岗山", 
                    "userLink": "https://www.zhihu.com/people/e5bc0fcb35ea0c8a1fd0ba17bb6c6ed9", 
                    "content": "我不太明白 你写的 学习和找工作的认知 那块！ 什么意思 没明白你在说什么", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "孔令淦", 
                    "userLink": "https://www.zhihu.com/people/fbe816f7ab1321d8b5271125e74b547b", 
                    "content": "<p>嗯，在战争中学习战争，操作方法很实用！学习了，谢谢！</p><p>另提示下，标题和最后一段的引用写反了，毛主席的原话是『战略上藐视，战术上重视』。^_^</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "撸狗boy", 
                    "userLink": "https://www.zhihu.com/people/6b7fb5fb2839c1a4b5a3cd4ec775e14a", 
                    "content": "<p>正态分析公式（正态分布的概率密度函数）？</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26912734", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 10, 
            "title": "时间是最好的检验者", 
            "content": "<p>      向前进代表的是一个方向，偶尔还是需要停下来，回头望望自己走过的路，开始数据分析学习2个月了。毕业3年，想重新转行到另外一个未知的领域，面对的压力起初让自己犹豫忐忑，一次次重复确认自己的想法，嗯，我一定要转向数据分析，再根据自己的情况，我选择了脱产自学的方式。</p><p>       技术行业领域，培训机构会根据企业要求培训相关人员，所以我一开始研究了培训机构的课程，发现要求JAVA语言基础，再学习数据分析。这部分花了将近一个月时间在学习JAVA上面，从最基础的变量赋值，循环语句，到通过查找资料写一个简单的服务器与客户端通信，额，现在一个月没接触它了，得复习复习了，印象最深刻的是各种输入流输出流及自己学习状态的改变。</p><p>       回想一下刚从学校出来，我们首先适应工作环境，调整工作状态，现在是要重新再调整回学习状态，在这个阶段经常产生自我怀疑，注意力不集中，学习效率低，各种看不懂。怎么办？首先我先接受这是正常的状态，肯定自己的能力，再从意识上对自己强调它的重要性，自律，拿出可以约束自己行为的方法。关掉WIFI，关掉微信，是我每天开始学习状态时必先操作的内容。代码看不懂怎么办，跟着书上的例子一个个敲过去，应用搜索查找答案，周末找朋友帮忙解释下以自己能力无法解决的问题，有时候会觉得应用搜索找到自己想要答案太慢，太耗费时间，然而并非如此，这也是一个技能，并不是每一次你需要帮助的时候都会有人出现，当你掌握这个技能之后，也会更加懂得什么样的问题可以问，什么样的问题更适合自己搜索。在这个过程当中慢慢的也就进入了学习状态。网络资源很丰富，有很多学习和代码训练网站，当你可以完成一个任务的时候，不管大小，对于自己来说，都是一个奖赏，我很享受这样的愉悦感。</p><p>      学习过程当中也不断在了解数据分析方面的要求与细分。知道数据分析入门前期学习内容，做了重点思维导图。这也是当初我做社群计划时的导图<figure><noscript><img src=\"https://pic2.zhimg.com/v2-a0a73630d40fbe359e8f8d0d00724d89_b.png\" data-rawheight=\"503\" data-rawwidth=\"805\" class=\"origin_image zh-lightbox-thumb\" width=\"805\" data-original=\"https://pic2.zhimg.com/v2-a0a73630d40fbe359e8f8d0d00724d89_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;805&#39; height=&#39;503&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"503\" data-rawwidth=\"805\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"805\" data-original=\"https://pic2.zhimg.com/v2-a0a73630d40fbe359e8f8d0d00724d89_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-a0a73630d40fbe359e8f8d0d00724d89_b.png\"/></figure>SQL：SQL语言学习的时候，以数据分析要求为主，重点是关心怎么使用就足够了。<br/>重点：where / group by / order by / left join / right join / inner join / null / not null / having / distinct / like / union / avg / sum / min / max 掌握基础语法，中级语法和常用函数，能够实现数据提取查询功能</p><p>R：R语言学习也花了将近一个月的时间，不聪明的人勤学总也会学会的。代码已经敲完了第1-8章。R语言基础语法，数据结构，基础数据管理（缺失值，日期值，数据类型转换，排序合并，选择变量），高级数据管理（字符处理，自编函数，整合与重铸，dplyr包，plyr包的学习）可视化操作(plot函数，直方图，箱线图，概率密度，饼图，ggplot2包)。数据挖掘建模评估，之后的学习方向为这部分内容</p><p>R和PYTHON 是或的关系，所以目前并没有开始PYTHON方面的学习。</p><p>概率部分的学习，了解假设检验，T值，Z值，描述性统计。</p><p>      总结了下自己的学习内容，发现还只是触碰到一点皮毛，以上内容继续深入学习，并补充机器学习部分知识。</p><p>      现在开始尝试投简历找工作，面对招聘岗位要求一脸茫然。之前对于转行技术岗位的不了解，导致自己的简历做得很渣渣，多谢凌岸同学给的帮助，让我了解应该怎么样提高这个部分的内容。社群计划并没有落后，每周任务都提前完成。今天接到第一个相关岗位面试邀约，是金融行业数据分析岗位，不管结果如何明天都给自己点鼓励。</p>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": [
                {
                    "userName": "不在意", 
                    "userLink": "https://www.zhihu.com/people/2dc4882690e899bc480aba06576e109a", 
                    "content": "<p>加油！</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "猴子", 
                    "userLink": "https://www.zhihu.com/people/c9b28ce4b50bf0444d17d010224cb06f", 
                    "content": "面试期间多在网上找些面试题来做。加油，看好你", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "猴子", 
                    "userLink": "https://www.zhihu.com/people/c9b28ce4b50bf0444d17d010224cb06f", 
                    "content": "对了，你可以把你的知乎地址写入简历里，这是证明你学习能力的最好方式", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "黄马克", 
                            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
                            "content": "好的", 
                            "likes": 0, 
                            "replyToAuthor": "猴子"
                        }
                    ]
                }, 
                {
                    "userName": "欣婧", 
                    "userLink": "https://www.zhihu.com/people/8af325a5f576fe2bd6838888d535b6b8", 
                    "content": "加油，努力的人会有好运", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "知乎用户", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>加油</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26906957", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 26, 
            "title": "泰坦尼克号生存率预测-排名1080", 
            "content": "<p>简介：泰坦尼克号（RMS Titanic，又称铁达尼号）是一艘<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E5%25A5%25A5%25E6%259E%2597%25E5%258C%25B9%25E5%2585%258B\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">奥林匹克</a>级邮轮，于1912年4月<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E5%25A4%2584%25E5%25A5%25B3%25E8%2588%25AA\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">处女航</a>时撞上冰山后沉没。泰坦尼克号由位于<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E7%2588%25B1%25E5%25B0%2594%25E5%2585%25B0%25E5%25B2%259B\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">爱尔兰岛</a><a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E8%25B4%259D%25E5%25B0%2594%25E6%25B3%2595%25E6%2596%25AF%25E7%2589%25B9\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">贝尔法斯特</a>的哈兰德与<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E6%25B2%2583%25E5%25B0%2594%25E5%25A4%25AB\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">沃尔夫</a>造船厂兴建，是当时最大的客运轮船。在它的处女航中，泰坦尼克号从英国<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E5%258D%2597%25E5%25AE%2589%25E6%2599%25AE%25E6%2595%25A6/33940\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">南安普敦</a>出发，途经法国<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E7%2591%259F%25E5%25A0%25A1\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">瑟堡</a>-奥克特维尔以及<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E7%2588%25B1%25E5%25B0%2594%25E5%2585%25B0/40941\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">爱尔兰</a><a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E6%2598%2586%25E5%25A3%25AB%25E6%2595%25A6\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">昆士敦</a>，计划中的目的地为美国纽约。1912年4月14日，船上时间夜里11时40分，泰坦尼克号撞上<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E5%2586%25B0%25E5%25B1%25B1/6379\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">冰山</a>；4月15日凌晨2时20分，船体断裂成两截后沉入<a href=\"https://link.zhihu.com/?target=http%3A//baike.baidu.com/item/%25E5%25A4%25A7%25E8%25A5%25BF%25E6%25B4%258B/10883\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">大西洋</a>。泰坦尼克号海难为和平时期死伤人数最惨重的海难之一。船上1500多人丧生。</p><p>kaggle将此数据作为预测生存率数据集。以下为整理建模预测过程</p><p>首先下载数据-------<a href=\"https://link.zhihu.com/?target=https%3A//www.kaggle.com/c/titanic/data\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">泰坦尼克号数据集</a></p><div class=\"highlight\"><pre><code class=\"language-text\">#加载包及导入数据\n\nlibrary(&#39;ggplot2&#39;) # 可视化\nlibrary(&#39;ggthemes&#39;) # 可视化\nlibrary(&#39;scales&#39;) # 可视化\nlibrary(&#39;dplyr&#39;) # 数据处理\nlibrary(&#39;mice&#39;) # 缺失值处理\nlibrary(&#39;randomForest&#39;) # 建模\nlibrary(&#39;Amelia&#39;)#缺失值\nlibrary(&#39;ipred&#39;)#建模\n##载入数据\ntrain &lt;- read.csv(&#39;C:/Users/ximen/Documents/MYR/P5/train.csv&#39;,\n                  stringsAsFactors = F,header=T,na.strings=c(&#34;&#34;))\ntest  &lt;- read.csv(&#39;C:/Users/ximen/Documents/MYR/P5/test.csv&#39;,\n                  stringsAsFactors = F,header=T,na.strings=c(&#34;&#34;))\nfull  &lt;- bind_rows(train, test) # 将训练和测试集合并\n\n</code></pre></div><div class=\"highlight\"><pre><code class=\"language-text\">#查看数据集\n&gt; str(full)\n&#39;data.frame&#39;:\t1309 obs. of  20 variables:\n $ PassengerId: Factor w/ 1309 levels &#34;1&#34;,&#34;2&#34;,&#34;3&#34;,&#34;4&#34;,..: 1 2 3 4 5 6 7 8 9 10 ...\n $ Survived   : int  0 1 1 1 0 0 0 0 1 1 ...\n $ Pclass     : Factor w/ 3 levels &#34;1&#34;,&#34;2&#34;,&#34;3&#34;: 3 1 3 1 3 3 1 3 3 2 ...\n $ Name       : chr  &#34;Braund, Mr. Owen Harris&#34; &#34;Cumings, Mrs. John Bradley (Florence Briggs Thayer)&#34; &#34;Heikkinen, Miss. Laina&#34; &#34;Futrelle, Mrs. Jacques Heath (Lily May Peel)&#34; ...\n $ Sex        : Factor w/ 2 levels &#34;female&#34;,&#34;male&#34;: 2 1 1 1 2 2 2 2 1 1 ...\n $ Age        : num  22 38 26 35 35 27 54 2 27 14 ...\n $ SibSp      : int  1 1 0 1 0 0 0 3 0 1 ...\n $ Parch      : int  0 0 0 0 0 0 0 1 2 0 ...\n $ Ticket     : chr  &#34;A/5 21171&#34; &#34;PC 17599&#34; &#34;STON/O2. 3101282&#34; &#34;113803&#34; ...\n $ Fare       : num  7.25 71.28 7.92 53.1 8.05 ...\n $ Cabin      : chr  NA &#34;C85&#34; NA &#34;C123&#34; ...\n $ Embarked   : Factor w/ 3 levels &#34;C&#34;,&#34;Q&#34;,&#34;S&#34;: 3 1 3 3 3 2 3 3 3 1 ...\n</code></pre></div><p>\n\nSurvived ：\n取值0和1（0表示死亡，1表示获救）<br/>\nPclass ：乘客的船仓等级（1，2，3）<br/>\nName ：乘客姓名<br/>\nSex ：乘客性别<br/>\nAge ：乘客年龄<br/>\nSibSp ：船上配偶或兄妹的人数<br/>\nParch ：船上父母或孩子的人数<br/>\nTicket ：票号<br/>\nFare ：票价<br/>\nCabin ：乘客船舱号<br/>\nEmbarked ：出发港口</p><div class=\"highlight\"><pre><code class=\"language-text\">#从变量-名称列里提取名称抬头\nfull$Title &lt;- gsub(&#39;(.*, )|(\\\\..*)&#39;, &#39;&#39;, full$Name)\n# 展示名称及性别列联表\ntable(full$Sex, full$Title)\n# 将比较少出现的名称抬头合并为一个组\nrare_title &lt;- c(&#39;Dona&#39;, &#39;Lady&#39;, &#39;the Countess&#39;,&#39;Capt&#39;, &#39;Col&#39;, &#39;Don&#39;, \n                &#39;Dr&#39;, &#39;Major&#39;, &#39;Rev&#39;, &#39;Sir&#39;, &#39;Jonkheer&#39;)\n# 修改下部分抬头名称\nfull$Title[full$Title == &#39;Mlle&#39;]        &lt;- &#39;Miss&#39; \nfull$Title[full$Title == &#39;Ms&#39;]          &lt;- &#39;Miss&#39;\nfull$Title[full$Title == &#39;Mme&#39;]         &lt;- &#39;Mrs&#39; \nfull$Title[full$Title %in% rare_title]  &lt;- &#39;Rare Title&#39;\n\n# 再观察下名称及性别列联表\n\n&gt; table(full$Sex, full$Title)\n        \n         Master Miss  Mr Mrs Rare Title\n  female      0  264   0 198          4\n  male       61    0 757   0         25</code></pre></div><br/><div class=\"highlight\"><pre><code class=\"language-text\">#提取乘客名字\nfull$Surname &lt;- sapply(full$Name,  \n                       function(x) strsplit(x, split = &#39;[,.]&#39;)[[1]][1])\n# 创建一个家庭成员大小变量（数量包含乘客本身）\nfull$Fsize &lt;- full$SibSp + full$Parch + 1\n# 创建家庭变量，姓氏_家庭人数\nfull$Family &lt;- paste(full$Surname, full$Fsize, sep=&#39;_&#39;)\n# 观察家庭大小及成员生存状态是否存在相关\nggplot(full[1:891,], aes(x = Fsize, fill = factor(Survived))) +\n  geom_bar(stat=&#39;count&#39;, position=&#39;dodge&#39;) +\n  scale_x_continuous(breaks=c(1:11)) +\n  labs(x = &#39;Family Size&#39;) +\ntheme_few()\n \n</code></pre></div><figure><noscript><img src=\"https://pic2.zhimg.com/v2-a5abb03805f33492ae70bf1230c367a9_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic2.zhimg.com/v2-a5abb03805f33492ae70bf1230c367a9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic2.zhimg.com/v2-a5abb03805f33492ae70bf1230c367a9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-a5abb03805f33492ae70bf1230c367a9_b.jpg\"/></figure><br/><div class=\"highlight\"><pre><code class=\"language-text\"># 将家庭大小离散化\nfull$FsizeD[full$Fsize == 1] &lt;- &#39;singleton&#39;\nfull$FsizeD[full$Fsize &lt; 5 &amp; full$Fsize &gt; 1] &lt;- &#39;small&#39;\nfull$FsizeD[full$Fsize &gt; 4] &lt;- &#39;large&#39;\n\n# 展示家庭大小及生存关系的马赛克图\nmosaicplot(table(full$FsizeD, full$Survived), \n           main=&#39;Family Size by Survival&#39;, shade=TRUE)\n</code></pre></div><p><figure><noscript><img src=\"https://pic1.zhimg.com/v2-72da74a2139f86e4cad7ff5b6fcba9f0_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-72da74a2139f86e4cad7ff5b6fcba9f0_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-72da74a2139f86e4cad7ff5b6fcba9f0_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-72da74a2139f86e4cad7ff5b6fcba9f0_b.jpg\"/></figure></p><h1><b>缺失值处理：</b></h1><div class=\"highlight\"><pre><code class=\"language-text\"># 查看数据集缺失数据\nmissmap(full, main = &#34;Missing values vs observed&#34;)\n#具体缺失参数，空值\nsapply(full,function(x) sum(is.na(x)))\n\nfull$Deck&lt;-factor(sapply(full$Cabin, function(x) strsplit(x, NULL)[[1]][1]))\n</code></pre></div><p><figure><noscript><img src=\"https://pic2.zhimg.com/v2-2a078cdd7a85af61309cef17ffc3c685_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic2.zhimg.com/v2-2a078cdd7a85af61309cef17ffc3c685_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic2.zhimg.com/v2-2a078cdd7a85af61309cef17ffc3c685_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-2a078cdd7a85af61309cef17ffc3c685_b.jpg\"/></figure></p><p>变量Cabin和age有较多的缺失值，survived的缺失值是由于合并了测试集而产生的。用sapply函数显示full数据集各个变量缺失值情况及变量的因子长度</p><p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-81c70096c6393e64db9e6aed997b2eaa_b.png\" data-rawwidth=\"539\" data-rawheight=\"83\" class=\"origin_image zh-lightbox-thumb\" width=\"539\" data-original=\"https://pic3.zhimg.com/v2-81c70096c6393e64db9e6aed997b2eaa_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;539&#39; height=&#39;83&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"539\" data-rawheight=\"83\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"539\" data-original=\"https://pic3.zhimg.com/v2-81c70096c6393e64db9e6aed997b2eaa_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-81c70096c6393e64db9e6aed997b2eaa_b.png\"/></figure></p><p>数据集的数量有限，应尽量保持数据集的完整性。从上可看出各变量缺失值个数，Embarked有2个缺失值，年龄有263个缺失值，Fare有1个缺失值，Cabin变量暂时忽略不使用，survived缺失是因测试数据集引起不必理会。接下来将对这3个变量进行缺失值填补。</p><p><b>1,</b><b>处理</b>embarked<b>缺失</b></p><div class=\"highlight\"><pre><code class=\"language-text\">#处理embarked变量缺失值,首先确定缺失值观测值所在行数\nwhich(full$Embarked %in% NA)\n#输出缺失值信息\nfull[full$PassengerId==62,]\nfull[full$PassengerId==830,]\n</code></pre></div><p><figure><noscript><img src=\"https://pic1.zhimg.com/v2-100d08a48a8693f34e381fe249e766a8_b.png\" data-rawwidth=\"291\" data-rawheight=\"43\" class=\"content_image\" width=\"291\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;291&#39; height=&#39;43&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"291\" data-rawheight=\"43\" class=\"content_image lazy\" width=\"291\" data-actualsrc=\"https://pic1.zhimg.com/v2-100d08a48a8693f34e381fe249e766a8_b.png\"/></figure><figure><noscript><img src=\"https://pic2.zhimg.com/v2-e22fe870235212be1f069e864e28f57d_b.png\" data-rawwidth=\"557\" data-rawheight=\"157\" class=\"origin_image zh-lightbox-thumb\" width=\"557\" data-original=\"https://pic2.zhimg.com/v2-e22fe870235212be1f069e864e28f57d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;557&#39; height=&#39;157&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"557\" data-rawheight=\"157\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"557\" data-original=\"https://pic2.zhimg.com/v2-e22fe870235212be1f069e864e28f57d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-e22fe870235212be1f069e864e28f57d_b.png\"/></figure></p><p>从上面输出的结果可以发现，这两名乘客都属于第一类等级客户，支付的票价都是80美金。票价与登船港口根据我们的生活经验可知是具有相关性的。当我们乘坐高铁时，也是如此，在不同的车站出发，以不同的价格，乘坐不同等级座位。通过相关变量绘制箱线图</p><div class=\"highlight\"><pre><code class=\"language-text\">#选取非空数据绘制箱线图\nembark_fare &lt;- full %&gt;%\n  filter(PassengerId != 62 &amp; PassengerId != 830)\n\n# 可视化票价，港口，及乘客客场等级图\nggplot(embark_fare, aes(x = Embarked, y = Fare, fill = factor(Pclass))) +\n  geom_boxplot() +\n  geom_hline(aes(yintercept=80), \n             colour=&#39;red&#39;, linetype=&#39;dashed&#39;, lwd=2) +\n  scale_y_continuous(labels=dollar_format()) +\n  theme_few()\n</code></pre></div><figure><noscript><img src=\"https://pic4.zhimg.com/v2-a4c6ccc7b7b46af72271a196dfee2ecf_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-a4c6ccc7b7b46af72271a196dfee2ecf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-a4c6ccc7b7b46af72271a196dfee2ecf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-a4c6ccc7b7b46af72271a196dfee2ecf_b.jpg\"/></figure><p>由上图可得，1等因子，票价在80，最接近的是C登船口，可以将缺失值替换为C。</p><div class=\"highlight\"><pre><code class=\"language-text\">#将C登船口赋值给空值\nfull$Embarked[c(62, 830)] &lt;- &#39;C&#39;\n</code></pre></div><p><b>2,Fare变量缺失值</b></p><div class=\"highlight\"><pre><code class=\"language-text\">#处理Fare变量缺失值\na&lt;-which(full$Fare %in% NA)\n#输出缺失值信息\nfull[full$PassengerId==a,]\n#绘制概率密度图\nggplot(full[full$Pclass == &#39;3&#39; &amp; full$Embarked == &#39;S&#39;, ], \n       aes(x = Fare)) +\n  geom_density(fill = &#39;#99d6ff&#39;, alpha=0.4) + \n  geom_vline(aes(xintercept=median(Fare, na.rm=T)),\n             colour=&#39;red&#39;, linetype=&#39;dashed&#39;, lwd=1) +\n  scale_x_continuous(labels=dollar_format()) +\n  theme_few()\n</code></pre></div><p><br/><figure><noscript><img src=\"https://pic4.zhimg.com/v2-3f61ac0a611dd7fe1a04ac16b503af0b_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-3f61ac0a611dd7fe1a04ac16b503af0b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-3f61ac0a611dd7fe1a04ac16b503af0b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-3f61ac0a611dd7fe1a04ac16b503af0b_b.jpg\"/></figure>此观测值是由S登船口上船的，第3类客户，绘制概率密度图，数据大部分聚集在0-20美金区间，由图可将中位数替换缺失值。</p><br/><div class=\"highlight\"><pre><code class=\"language-text\">full$Fare[1044] &lt;- median(full[full$Pclass == &#39;3&#39; &amp;\n                          full$Embarked == &#39;S&#39;, ]$Fare, na.rm = TRUE)\n</code></pre></div><p><b>3,AGE变量缺失值</b></p><div class=\"highlight\"><pre><code class=\"language-text\"># mice包主要用于插补数据，先将变量因子化处理\nfactor_vars &lt;- c(&#39;PassengerId&#39;,&#39;Pclass&#39;,&#39;Sex&#39;,&#39;Embarked&#39;,\n                 &#39;Title&#39;,&#39;Surname&#39;,&#39;Family&#39;,&#39;FsizeD&#39;)\n\nfull[factor_vars] &lt;- lapply(full[factor_vars], function(x) as.factor(x))\n\n# 设置随机变量种子\nset.seed(129)\n\n# 删除除创建的变量之外的其他变量，\nmethod=随机森林（rf）\nmice_mod &lt;- mice(full[, !names(full) %in% \nc(&#39;PassengerId&#39;,&#39;Name&#39;,&#39;Ticket&#39;,&#39;Cabin&#39;,&#39;Family&#39;,&#39;Surname&#39;,&#39;Survived&#39;)], method=&#39;rf&#39;) \n# 保存完整的输出\nmice_output &lt;- complete(mice_mod)\n# 绘制图形\npar(mfrow=c(1,2))\nhist(full$Age, freq=F, main=&#39;Age: Original Data&#39;, \n     col=&#39;darkgreen&#39;, ylim=c(0,0.04))\nhist(mice_output$Age, freq=F, main=&#39;Age: MICE Output&#39;, \n     col=&#39;lightgreen&#39;, ylim=c(0,0.04))\n</code></pre></div><figure><noscript><img src=\"https://pic4.zhimg.com/v2-01fe2177bdf0025df823717e692dafbf_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-01fe2177bdf0025df823717e692dafbf_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-01fe2177bdf0025df823717e692dafbf_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-01fe2177bdf0025df823717e692dafbf_b.jpg\"/></figure><br/><div class=\"highlight\"><pre><code class=\"language-text\"># 将模型输出值替换原数据集年龄的值\nfull$Age &lt;- mice_output$Age\n</code></pre></div><p>再次观察下缺失值是否都填补完整。</p><div class=\"highlight\"><pre><code class=\"language-text\">&gt; sapply(full,function(x) sum(is.na(x)))\nPassengerId    Survived      Pclass        Name         Sex         Age \n          0         418           0           0           0           0 \n      SibSp       Parch      Ticket        Fare       Cabin    Embarked \n          0           0           0           0        1014           0 \n      Title     Surname       Fsize      Family      FsizeD        Deck \n          0           0           0           0           0        1014 \n      Child      Mother \n          0           0 \n</code></pre></div><br/><p>现在我们拥有一个完整的数据集。接下来再思考一下，哪些属性会影响生存状态。会被优先救助？</p><br/><div class=\"highlight\"><pre><code class=\"language-text\">ggplot(full[1:891,], aes(Age, fill = factor(Survived))) + \n  geom_histogram() + \n  facet_grid(.~Sex) + \n  theme_few()\n</code></pre></div><p><figure><noscript><img src=\"https://pic2.zhimg.com/v2-05321aaea7369005c779dcb53ae2cf39_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic2.zhimg.com/v2-05321aaea7369005c779dcb53ae2cf39_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic2.zhimg.com/v2-05321aaea7369005c779dcb53ae2cf39_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-05321aaea7369005c779dcb53ae2cf39_b.jpg\"/></figure>明显性别变量不同生存率不等，进一步看下具体差异</p><div class=\"highlight\"><pre><code class=\"language-text\">&gt; table(full$Sex, full$Survived)\n        \n           0   1\n  female  81 233\n  male   468 109\n&gt; mytable&lt;-xtabs(~Sex+Survived,data=full)\n\n#频数列联表（百分比）\n&gt; addmargins(prop.table(mytable)*100)\n        Survived\nSex               0          1        Sum\n  female   9.090909  26.150393  35.241302\n  male    52.525253  12.233446  64.758698\n  Sum     61.616162  38.383838 100.000000\n</code></pre></div><br/><p>船上有38%的人员生存下来，而女性的比例明显比男性高出一倍。那么如果是18岁以下的成员呢？</p><div class=\"highlight\"><pre><code class=\"language-text\">&gt; full$Child[full$Age &lt; 18] &lt;- &#39;Child&#39;\n&gt; full$Child[full$Age &gt;= 18] &lt;- &#39;Adult&#39;\n&gt; table(full$Child, full$Survived)\n       \n          0   1\n  Adult 481 272\n  Child  68  70\n</code></pre></div><p>\n\n18岁以下人员获得了50%的生存机会。再观察下如果是一位母亲，她的生存几率会不会更高</p><div class=\"highlight\"><pre><code class=\"language-text\"># 添加变量母亲\nfull$Mother &lt;- &#39;Not Mother&#39;\nfull$Mother[full$Sex == &#39;female&#39; &amp; full$Parch &gt; 0 &amp; \n              full$Age &gt; 18 &amp; full$Title != &#39;Miss&#39;] &lt;- &#39;Mother&#39;\n&gt; # 母亲属性与生存的列联表\n&gt; table(full$Mother, full$Survived)\n            \n               0   1\n  Mother      16  39\n  Not Mother 533 303\n</code></pre></div><p>数据表现我们的想法是有理可依的，可添加此两个变量作为特征值</p><div class=\"highlight\"><pre><code class=\"language-text\">#因子化\nfull$Child  &lt;- factor(full$Child)\nfull$Mother &lt;- factor(full$Mother)\n</code></pre></div><p><b>建模：</b></p><div class=\"highlight\"><pre><code class=\"language-text\"># 拆分数据集，进行预测训练\ntrain &lt;- full[1:891,]\ntest &lt;- full[892:1309,]\n\n# 设置随机种子\nset.seed(754)\n\n# 构建模型，保留有用变量\nrf_model &lt;- randomForest(factor(Survived) ~ Pclass + Sex + \n                           Age + SibSp + Parch + \n                           Fare + Embarked + Title + \n                           FsizeD+ Child + Mother,\n                         data = train)\n\n# 使用测试数据集进行预测\nprediction &lt;- predict(rf_model, test)\n\n# 保存测试ID和测试结果生存与否\nsolution &lt;- data.frame(PassengerID = test$PassengerId,\n                       Survived = prediction)\n\n# 写出结果文件\nwrite.csv(solution, file = &#39;rf_mod_Solution.csv&#39;, row.names = F)\n\n</code></pre></div><p>上传。可看到排名为3549<figure><noscript><img src=\"https://pic3.zhimg.com/v2-e739ef785b068e252c5b3d13a8192bca_b.png\" data-rawwidth=\"555\" data-rawheight=\"150\" class=\"origin_image zh-lightbox-thumb\" width=\"555\" data-original=\"https://pic3.zhimg.com/v2-e739ef785b068e252c5b3d13a8192bca_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;555&#39; height=&#39;150&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"555\" data-rawheight=\"150\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"555\" data-original=\"https://pic3.zhimg.com/v2-e739ef785b068e252c5b3d13a8192bca_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-e739ef785b068e252c5b3d13a8192bca_b.png\"/></figure></p><p>在建立模型之前都是在整理数据，整好数据之后可以帮助我们快速的使用更好的方式建立模型。显然3549的排名并不是非常理想。尝试使用其他的方式</p><div class=\"highlight\"><pre><code class=\"language-text\">#利用bagging技术进行建模\nBAG=bagging((Survived) ~ Pclass+Age+Sex+SibSp+Parch + \n              Fare + Embarked + Title + Fsize  + FsizeD,\n            data = train,mfinal=900000)\n#对于预测数据做回归预测\nPredictio &lt;- predict(BAG, test)\n\nsub&lt;- data.frame(PassengerId = test$PassengerId, Survive = Predictio)\nsub$Survived[sub$Survive&lt;0.5]&lt;-0\nsub$Survived[sub$Survive&gt;=0.5]&lt;-1\nsub1=sub[,-2]\nsummary(sub1)\n\n PassengerId     Survived     \n 892    :  1   Min.   :0.0000  \n 893    :  1   1st Qu.:0.0000  \n 894    :  1   Median :0.0000  \n 895    :  1   Mean   :0.3756  \n 896    :  1   3rd Qu.:1.0000  \n 897    :  1   Max.   :1.0000  \n (Other):412 \nwrite.csv(sub1, file = &#34;best.csv&#34;, row.names = FALSE)\n</code></pre></div><p>训练集有38%的乘客获得生存机会，此数据已经非常接近了。</p><p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-a51d3c7449a6da3b4f7ac9a752b4073e_b.png\" data-rawwidth=\"993\" data-rawheight=\"116\" class=\"origin_image zh-lightbox-thumb\" width=\"993\" data-original=\"https://pic3.zhimg.com/v2-a51d3c7449a6da3b4f7ac9a752b4073e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;993&#39; height=&#39;116&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"993\" data-rawheight=\"116\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"993\" data-original=\"https://pic3.zhimg.com/v2-a51d3c7449a6da3b4f7ac9a752b4073e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-a51d3c7449a6da3b4f7ac9a752b4073e_b.png\"/></figure>上传结果排名1080。机器学习理论知识，是在此次训练当中欠缺的地方，之后的学习方向会往这方面偏移。数据分析的思路非常重要，生活经验有时会误导我们判断。比如小孩和母亲这两个特征值。它们的重要性检测水平甚至低于登船的港口号。以下是观测重要性代码。<br/></p><div class=\"highlight\"><pre><code class=\"language-text\">#观察变量重要性\nimportance    &lt;- importance(rf_model)\nvarImportance &lt;- data.frame(Variables = row.names(importance), \n                            Importance = round(\n                              importance[ ,&#39;MeanDecreaseGini&#39;],2))\n\n# 对重要性排序\nrankImportance &lt;- varImportance %&gt;%\n  mutate(Rank = paste0(&#39;#&#39;,dense_rank(desc(Importance))))\n\n# 画出重要程度图\nggplot(rankImportance, aes(x = reorder(Variables, Importance), \n                           y = Importance, fill = Importance)) +\n  geom_bar(stat=&#39;identity&#39;) + \n  geom_text(aes(x = Variables, y = 0.5, label = Rank),\n            hjust=0, vjust=0.55, size = 4, colour = &#39;red&#39;) +\n  labs(x = &#39;Variables&#39;) +\n  coord_flip() + \n  theme_few()\n</code></pre></div><figure><noscript><img src=\"https://pic1.zhimg.com/v2-97568b9bf4361b62ae88fd5c1139b9cc_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-97568b9bf4361b62ae88fd5c1139b9cc_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-97568b9bf4361b62ae88fd5c1139b9cc_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-97568b9bf4361b62ae88fd5c1139b9cc_b.jpg\"/></figure>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }, 
                {
                    "tag": "泰坦尼克号（电影）", 
                    "tagLink": "https://api.zhihu.com/topics/19661034"
                }
            ], 
            "comments": [
                {
                    "userName": "猴子", 
                    "userLink": "https://www.zhihu.com/people/c9b28ce4b50bf0444d17d010224cb06f", 
                    "content": "在kaggle上学习还是很不错的，实践的真不错", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "风清扬", 
                    "userLink": "https://www.zhihu.com/people/1bd2918d64fe19d382dcad15264d6be4", 
                    "content": "可是我看不懂啊", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "张泽恩", 
                    "userLink": "https://www.zhihu.com/people/51c31e735d6eb8f4d691289bd4ab2b0b", 
                    "content": "很棒啊", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "江海洋", 
                    "userLink": "https://www.zhihu.com/people/61ec124030106cce5fc3825682dd0ca4", 
                    "content": "<p>为什么和Kaggle上的一篇好像=。=</p><p><a href=\"http://link.zhihu.com/?target=https%3A//www.kaggle.com/mrisdal/exploring-survival-on-the-titanic/comments/notebook\" class=\" external\" target=\"_blank\" rel=\"nofollow noreferrer\"><span class=\"invisible\">https://www.</span><span class=\"visible\">kaggle.com/mrisdal/expl</span><span class=\"invisible\">oring-survival-on-the-titanic/comments/notebook</span><span class=\"ellipsis\"></span></a></p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "黄马克", 
                            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
                            "content": "模仿megan的案例操作实践的…你的链接是？", 
                            "likes": 0, 
                            "replyToAuthor": "江海洋"
                        }, 
                        {
                            "userName": "江海洋", 
                            "userLink": "https://www.zhihu.com/people/61ec124030106cce5fc3825682dd0ca4", 
                            "content": "<p>链接应该是megan的报告。。然而不知怎么被玩坏了=。=（看不懂她的，准备跟着你的操作实践一下哈哈~~）</p>", 
                            "likes": 1, 
                            "replyToAuthor": "黄马克"
                        }
                    ]
                }, 
                {
                    "userName": "园原杏里", 
                    "userLink": "https://www.zhihu.com/people/bf0f0635e57ea12b7340081d2e858012", 
                    "content": "kaggle的tutorial，这个案例用来入门数据分析蛮经典的", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "qihoo", 
                    "userLink": "https://www.zhihu.com/people/393d77a6c8f3123ef63b5ec464535e41", 
                    "content": "有python版的吗", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "Jason Maan", 
                    "userLink": "https://www.zhihu.com/people/6c395b3eab5cbf648697f92503345f8a", 
                    "content": "想咨询一下您从开始做这个生存预测到最后做完一共用了几天？", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26761822", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 35, 
            "title": "用R带你了解全球恐怖袭击呈现趋势", 
            "content": "使用kaggle数据集。1970~2015年恐怖袭击事件源文件<br/><br/>确定可视化分析目标<br/><ul><li>反恐多年，成效如何，呈现的发展态势是怎么样的</li><li>全球恐怖袭击案例主要分布在哪些区域</li><li>美国地区分布</li><li>攻击对象</li><li>导入数据<figure><noscript><img src=\"https://pic1.zhimg.com/v2-7381312e290bebc5d94f9fa75ef9c098_b.png\" data-rawwidth=\"450\" data-rawheight=\"23\" class=\"origin_image zh-lightbox-thumb\" width=\"450\" data-original=\"https://pic1.zhimg.com/v2-7381312e290bebc5d94f9fa75ef9c098_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;450&#39; height=&#39;23&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"450\" data-rawheight=\"23\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"450\" data-original=\"https://pic1.zhimg.com/v2-7381312e290bebc5d94f9fa75ef9c098_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7381312e290bebc5d94f9fa75ef9c098_b.png\"/></figure><br/>总有137个变量。<figure><noscript><img src=\"https://pic2.zhimg.com/v2-9caaa79cff758c35889b18d1e3de5e31_b.png\" data-rawwidth=\"617\" data-rawheight=\"194\" class=\"origin_image zh-lightbox-thumb\" width=\"617\" data-original=\"https://pic2.zhimg.com/v2-9caaa79cff758c35889b18d1e3de5e31_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;617&#39; height=&#39;194&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"617\" data-rawheight=\"194\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"617\" data-original=\"https://pic2.zhimg.com/v2-9caaa79cff758c35889b18d1e3de5e31_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-9caaa79cff758c35889b18d1e3de5e31_b.png\"/></figure><br/>根据分析目标，从中选取需要的变量<figure><noscript><img src=\"https://pic4.zhimg.com/v2-948cb9511a2cad2ade67ac73fda9b5d7_b.png\" data-rawwidth=\"630\" data-rawheight=\"204\" class=\"origin_image zh-lightbox-thumb\" width=\"630\" data-original=\"https://pic4.zhimg.com/v2-948cb9511a2cad2ade67ac73fda9b5d7_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;630&#39; height=&#39;204&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"630\" data-rawheight=\"204\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"630\" data-original=\"https://pic4.zhimg.com/v2-948cb9511a2cad2ade67ac73fda9b5d7_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-948cb9511a2cad2ade67ac73fda9b5d7_b.png\"/></figure>变量依次为：     事件ID，年，月，日，国家标号，国家文本，</li><ul><ul><ul><ul><ul><li>纬度，经度，（画地图使用的映射）</li><li>地区标号，地区文本，城市，事件是否成功，攻击类型编号，</li><li>攻击类型文本，目标类型编号，目标类型文本，武器编号，</li><li>武器类型文本 </li></ul></ul></ul></ul></ul></ul><p>日期处理：<br/>想法1：为了合并年月日变量为日期格式，使用tidyr包，即合并列<br/>newgtd.df&lt;-unite(newgtd.df,date,iyear,imonth,iday,sep= &#34;-&#34;)</p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-293221303113a081af7f457f0f83463f_b.png\" data-rawwidth=\"365\" data-rawheight=\"177\" class=\"content_image\" width=\"365\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;365&#39; height=&#39;177&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"365\" data-rawheight=\"177\" class=\"content_image lazy\" width=\"365\" data-actualsrc=\"https://pic4.zhimg.com/v2-293221303113a081af7f457f0f83463f_b.png\"/></figure><br/>发现date格式为yyyy-m-d  暂时找不到方法将0添加进去。此路不通放弃<br/>2 观察数据更换为eventid提取前8位数，<br/>直接提取报错<figure><noscript><img src=\"https://pic3.zhimg.com/v2-2b0fc74a7aa3b0ef9b0eb7755aa5fcb2_b.png\" data-rawwidth=\"564\" data-rawheight=\"116\" class=\"origin_image zh-lightbox-thumb\" width=\"564\" data-original=\"https://pic3.zhimg.com/v2-2b0fc74a7aa3b0ef9b0eb7755aa5fcb2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;564&#39; height=&#39;116&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"564\" data-rawheight=\"116\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"564\" data-original=\"https://pic3.zhimg.com/v2-2b0fc74a7aa3b0ef9b0eb7755aa5fcb2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-2b0fc74a7aa3b0ef9b0eb7755aa5fcb2_b.png\"/></figure><br/>需要先进行转换<br/>d&lt;-iconv(newgtd.df$eventid, &#34;latin1&#34;, &#34;UTF-8&#34;)<br/>newgtd.df$date&lt;-substr(d,1,8)<br/>head(newgtd.df$date,5)<figure><noscript><img src=\"https://pic2.zhimg.com/v2-30c813883c9d5876aead7aca8b2ab081_b.png\" data-rawwidth=\"497\" data-rawheight=\"57\" class=\"origin_image zh-lightbox-thumb\" width=\"497\" data-original=\"https://pic2.zhimg.com/v2-30c813883c9d5876aead7aca8b2ab081_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;497&#39; height=&#39;57&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"497\" data-rawheight=\"57\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"497\" data-original=\"https://pic2.zhimg.com/v2-30c813883c9d5876aead7aca8b2ab081_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-30c813883c9d5876aead7aca8b2ab081_b.png\"/></figure><br/>日期修改完成后的数据<figure><noscript><img src=\"https://pic2.zhimg.com/v2-138d7385380c2cfe2a452f32df56a1f1_b.png\" data-rawwidth=\"539\" data-rawheight=\"187\" class=\"origin_image zh-lightbox-thumb\" width=\"539\" data-original=\"https://pic2.zhimg.com/v2-138d7385380c2cfe2a452f32df56a1f1_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;539&#39; height=&#39;187&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"539\" data-rawheight=\"187\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"539\" data-original=\"https://pic2.zhimg.com/v2-138d7385380c2cfe2a452f32df56a1f1_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-138d7385380c2cfe2a452f32df56a1f1_b.png\"/></figure><br/>删除空白数据<figure><noscript><img src=\"https://pic1.zhimg.com/v2-c99dd0033fff4f8c787c50b7eb4eb004_b.png\" data-rawwidth=\"313\" data-rawheight=\"31\" class=\"content_image\" width=\"313\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;313&#39; height=&#39;31&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"313\" data-rawheight=\"31\" class=\"content_image lazy\" width=\"313\" data-actualsrc=\"https://pic1.zhimg.com/v2-c99dd0033fff4f8c787c50b7eb4eb004_b.png\"/></figure><br/>修改前是114022，删除空白数据后是110841.删除3181行数据<br/><br/>可视化分析：<br/><b>1，反恐多年，成效如何，呈现的发展态势是怎么样的</b><br/>     1970到2015年的，以月份为单位,恐怖袭击发展态势<figure><noscript><img src=\"https://pic1.zhimg.com/v2-d8dfb36acf9071915c61662f4579c198_b.png\" data-rawwidth=\"618\" data-rawheight=\"133\" class=\"origin_image zh-lightbox-thumb\" width=\"618\" data-original=\"https://pic1.zhimg.com/v2-d8dfb36acf9071915c61662f4579c198_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;618&#39; height=&#39;133&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"618\" data-rawheight=\"133\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"618\" data-original=\"https://pic1.zhimg.com/v2-d8dfb36acf9071915c61662f4579c198_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-d8dfb36acf9071915c61662f4579c198_b.png\"/></figure><br/><figure><noscript><img src=\"https://pic1.zhimg.com/v2-534c200dc27923cc91eb35be6cfffef8_b.png\" data-rawwidth=\"616\" data-rawheight=\"321\" class=\"origin_image zh-lightbox-thumb\" width=\"616\" data-original=\"https://pic1.zhimg.com/v2-534c200dc27923cc91eb35be6cfffef8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;616&#39; height=&#39;321&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"616\" data-rawheight=\"321\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"616\" data-original=\"https://pic1.zhimg.com/v2-534c200dc27923cc91eb35be6cfffef8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-534c200dc27923cc91eb35be6cfffef8_b.png\"/></figure><br/>从图上可以看出恐怖袭击事件在前期是以缓慢增长的态势，在中期有个极具下降的趋势，然而好景不长，在之后，能看出恐怖袭击案件是以指数增长趋势发展。<br/>我们可以局部放大下，下图是从2007到2015案件发展散点图。后期呈现下降趋势，反恐计划还是有所奏效的<figure><noscript><img src=\"https://pic1.zhimg.com/v2-fe71f8832afb96309d548e293bcd29f8_b.png\" data-rawwidth=\"597\" data-rawheight=\"347\" class=\"origin_image zh-lightbox-thumb\" width=\"597\" data-original=\"https://pic1.zhimg.com/v2-fe71f8832afb96309d548e293bcd29f8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;597&#39; height=&#39;347&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"597\" data-rawheight=\"347\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"597\" data-original=\"https://pic1.zhimg.com/v2-fe71f8832afb96309d548e293bcd29f8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-fe71f8832afb96309d548e293bcd29f8_b.png\"/></figure><br/><b>2   全球恐怖袭击事件主要分布区域</b><p><figure><noscript><img src=\"https://pic4.zhimg.com/v2-56a52743c0dee39b9566f4737650ee97_b.png\" data-rawwidth=\"645\" data-rawheight=\"232\" class=\"origin_image zh-lightbox-thumb\" width=\"645\" data-original=\"https://pic4.zhimg.com/v2-56a52743c0dee39b9566f4737650ee97_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;645&#39; height=&#39;232&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"645\" data-rawheight=\"232\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"645\" data-original=\"https://pic4.zhimg.com/v2-56a52743c0dee39b9566f4737650ee97_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-56a52743c0dee39b9566f4737650ee97_b.png\"/></figure><figure><noscript><img src=\"https://pic1.zhimg.com/v2-be42f73a7c4748ec4d19227ff4ded754_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-be42f73a7c4748ec4d19227ff4ded754_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-be42f73a7c4748ec4d19227ff4ded754_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-be42f73a7c4748ec4d19227ff4ded754_b.jpg\"/></figure><br/>可以看出，恐怖袭击案件最高发地区为东欧，中东南非，西欧，亚洲南。<br/><br/>在这些区域当中，我们还可以了解哪些是造成恐怖袭击发生率高的，它是以怎么样的发展形势产生的<br/>实现代码：<br/><figure><noscript><img src=\"https://pic1.zhimg.com/v2-3ca27c11b309a15135f66c3af66a2970_b.png\" data-rawwidth=\"597\" data-rawheight=\"101\" class=\"origin_image zh-lightbox-thumb\" width=\"597\" data-original=\"https://pic1.zhimg.com/v2-3ca27c11b309a15135f66c3af66a2970_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;597&#39; height=&#39;101&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"597\" data-rawheight=\"101\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"597\" data-original=\"https://pic1.zhimg.com/v2-3ca27c11b309a15135f66c3af66a2970_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-3ca27c11b309a15135f66c3af66a2970_b.png\"/></figure><br/>从下图可以看出从2010开始，各地恐怖袭击事件发生的次数明显比之前多。东欧，中东南非，西欧，亚洲东南部恐怖事件发生率比较陡峭。拉高了全球恐怖袭击总体趋势。<figure><noscript><img src=\"https://pic2.zhimg.com/v2-8ad7199e0b4dc0a98eab700a540a37f9_b.jpg\" data-rawwidth=\"609\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"609\" data-original=\"https://pic2.zhimg.com/v2-8ad7199e0b4dc0a98eab700a540a37f9_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;609&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"609\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"609\" data-original=\"https://pic2.zhimg.com/v2-8ad7199e0b4dc0a98eab700a540a37f9_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-8ad7199e0b4dc0a98eab700a540a37f9_b.jpg\"/></figure><br/>3 从之前的全球分布图，可以看出我国的恐怖袭击事件还是相对较少的。那美国作为世界霸主，它的发生发布情况，是怎么样的呢<figure><noscript><img src=\"https://pic1.zhimg.com/v2-778d8137835d4e3fe9ac23d5c1f02704_b.png\" data-rawwidth=\"617\" data-rawheight=\"351\" class=\"origin_image zh-lightbox-thumb\" width=\"617\" data-original=\"https://pic1.zhimg.com/v2-778d8137835d4e3fe9ac23d5c1f02704_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;617&#39; height=&#39;351&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"617\" data-rawheight=\"351\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"617\" data-original=\"https://pic1.zhimg.com/v2-778d8137835d4e3fe9ac23d5c1f02704_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-778d8137835d4e3fe9ac23d5c1f02704_b.png\"/></figure>实现代码：<figure><noscript><img src=\"https://pic3.zhimg.com/v2-c02b4a24fcb2f612836ad9112609eb66_b.png\" data-rawwidth=\"507\" data-rawheight=\"236\" class=\"origin_image zh-lightbox-thumb\" width=\"507\" data-original=\"https://pic3.zhimg.com/v2-c02b4a24fcb2f612836ad9112609eb66_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;507&#39; height=&#39;236&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"507\" data-rawheight=\"236\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"507\" data-original=\"https://pic3.zhimg.com/v2-c02b4a24fcb2f612836ad9112609eb66_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-c02b4a24fcb2f612836ad9112609eb66_b.png\"/></figure><figure><noscript><img src=\"https://pic1.zhimg.com/v2-3d73e2b71b82f66fc400a49fd245159c_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-3d73e2b71b82f66fc400a49fd245159c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic1.zhimg.com/v2-3d73e2b71b82f66fc400a49fd245159c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-3d73e2b71b82f66fc400a49fd245159c_b.jpg\"/></figure><br/>美国东部和加州为恐怖事件高发地区<br/><br/>4   应对恐怖袭击，安保是项重要工作，知己知彼，我们需要了解恐怖袭击主要攻击的手段类型，主要攻击目标，使用的武器<figure><noscript><img src=\"https://pic4.zhimg.com/v2-146d51f48101f93141c2f388a109a987_b.jpg\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-146d51f48101f93141c2f388a109a987_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;614&#39; height=&#39;356&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"614\" data-rawheight=\"356\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"614\" data-original=\"https://pic4.zhimg.com/v2-146d51f48101f93141c2f388a109a987_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-146d51f48101f93141c2f388a109a987_b.jpg\"/></figure><br/>攻击类型有：未知手段  劫持人质(绑架)  设施/基础设施的攻击 轰炸/爆炸 暗杀 武装突袭<br/>袭击目标：商业，教育机构，政府(外交)，政府，军队，警方，公民和财产，交通运输，公共设施，政党破坏<br/>武器类型：爆炸，枪支火拼，纵火。<br/>从图上可以看出，轰炸，爆炸 是犯罪分子最常使用的犯罪武器，经常攻击的目标是商业，军队，警方和普通公民。可以加强基础设施建设，增加军队警队投入预算。<br/><br/><br/>结束语：选择了一个几乎是文本型的数据集，折腾了好几天才画出上面的图。对这方面的了解也不多，分析的内容也不够到位。<br/>学习的最好方式还是应用，刚开始打算先看一遍那些包 再进行操作，用了2天时间，第一天是蒙的，第2天以为自己懂了，第3天操作，才发现然而什么并不懂。还好在这个过程当中，遇到一些问题都能够顺利解决。从这个案例当中汲取最深刻的教训是数据一定要清理干净，完整。否则你想象不到它会出来个什么样的天书。</p><br/><p><b>画地图的一点小记录：</b></p><p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-c441275704ef2e08e87efd0babe322ce_b.png\" data-rawwidth=\"660\" data-rawheight=\"227\" class=\"origin_image zh-lightbox-thumb\" width=\"660\" data-original=\"https://pic3.zhimg.com/v2-c441275704ef2e08e87efd0babe322ce_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;660&#39; height=&#39;227&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"660\" data-rawheight=\"227\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"660\" data-original=\"https://pic3.zhimg.com/v2-c441275704ef2e08e87efd0babe322ce_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-c441275704ef2e08e87efd0babe322ce_b.png\"/></figure>ggplot2包中自带有画地图的参数。使用介绍在书的5.7节。上图代码实现的效果是上面-蓝点全球恐怖事件发生图。</p><ol><li>首先经纬度数据需要是数值型的数据，导入时，系统默认是字符型，所以先进行更换数据类型</li><li>数据之前清理，只是删除了空白数据，对于变量里面异常数据并不能做到很好检测识别和剔除。刚开始画图怎么画都不对，数据的异常点比较特殊。所以我直接把大于1000的都删除了。结果就显示正常了。所以要观察下经纬度是否是落在正常的区间</li><li>ggplot画图时，aes设置了X=精度，Y=纬度映射，再加上borders 绘制全球地图边界&#34;world&#34;，美国是&#34;state&#34;。再加上散点图，蓝色，透明度为三十份之一。</li><li>scale_y_continuous（breaks=NULL） 不画Y轴辅助线</li></ol>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": [
                {
                    "userName": "猴子", 
                    "userLink": "https://www.zhihu.com/people/c9b28ce4b50bf0444d17d010224cb06f", 
                    "content": "实践的非常不错，知识只有在使用中才能学会。如果孟在文中补充下面几个内容就更好了：1）数据来源地址2）缺少对你提取数据字段的详细描述，这会降低后面代码的理解3）重点再介绍下如何制作地图显示的，社群里很多会员感兴趣。", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "海致BDP", 
                    "userLink": "https://www.zhihu.com/people/dd1e82ce689a7b7d8734bf857d7ecee5", 
                    "content": "<p>之前用我们工具BDP也做过<a href=\"http://link.zhihu.com/?target=https%3A//me.bdp.cn/share/index.html%3FshareId%3Dsdo_38d0ddb235b35f523b44c36a1f42f03b\" class=\" wrap external\" target=\"_blank\" rel=\"nofollow noreferrer\">全球恐怖袭击数据可视化</a>，还是非常形象的~</p>", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "CurtainU", 
                    "userLink": "https://www.zhihu.com/people/58ad5571bcef38cc98f6bc1ac60a97dc", 
                    "content": "<p>大神，你好，可否提供本文的源码，谢谢啦，1248741476@qq.com</p>", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26755602", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 3, 
            "title": "ggplot包之qplot", 
            "content": "<p><u>ggplot2<br/>Elegant Graphics for Data Analysis</u></p><p><u>这本书的内容太多了，暂时先翻译自己对于qplot部分内容的理解。不正之处，还望指正，不胜感激。O(∩_∩)O谢谢</u></p><br/><p>首先是qplot 函数的语法与基础绘图系统类似，简短易输入，通常用于探索性数据分析<br/></p><ul><li>qplot基础应用-如果已经熟悉plot</li><li>怎么映射变量到图形属性，像颜色，大小，形状</li><li>怎么通过不同的几何对象创建不同类型的图形 及怎么组合在同一个图上</li></ul><br/>qplot（）<br/><ul><li> qplot(carat, price, data = dsmall, colour = color)  系统默认颜色参数来显示不同的点</li><li>qplot(carat, price, data = dsmall, shape = cut)    图形分割好坏图形显示</li><li>qplot(carat, price, data = diamonds, alpha = I(1/100))--使用包含透明度的图形重叠模式，当只有一个图形在图上时，显示透明，越来越多的点在此集合颜色的深度越来越深。分母是代表有多少数据集中在此时，颜色为最深。（假设色阶区间【0,1】，上面是将其分为100份）</li><li>qplot创建常量 如颜色，大小等需要用=I()   colour = I(&#34;red&#34;)</li><li>几何对象</li><ul><li>geom = &#34;point&#34;，绘制散点图，默认设置</li><li>geom = &#34;smooth&#34;增加平滑曲线，并显示标准误差，关闭置信区间 se = FALSE</li><li>geom = &#34;boxplot&#34; 增加箱线图</li><li>geom = &#34;path&#34; and geom = &#34;line&#34; 添加时间序列图</li></ul></ul>                           如：qplot(carat, price, data = dsmall, geom = c(&#34;point&#34;, &#34;smooth&#34;))<br/>                                   绘制散点图，加上平滑曲线带置信区间<br/><ul><ul><li>对于1维</li><ul><li> 连续型geom = &#34;histogram&#34;，默认直方图</li><li> 连续型geom =&#34;freqpoly&#34;，频率多边形</li><li> 连续型geom = &#34;density&#34;，密度曲线</li><li> 离散型geom = &#34;bar&#34;  条形图</li></ul><li>method = &#34;loess&#34;，span =（0-1），表示添加曲线的平滑程度，=1，平滑程度最高<figure><noscript><img src=\"https://pic2.zhimg.com/v2-ea6c3c10915e46bab8bea30c17e698ad_b.png\" data-rawheight=\"236\" data-rawwidth=\"598\" class=\"origin_image zh-lightbox-thumb\" width=\"598\" data-original=\"https://pic2.zhimg.com/v2-ea6c3c10915e46bab8bea30c17e698ad_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;598&#39; height=&#39;236&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"236\" data-rawwidth=\"598\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"598\" data-original=\"https://pic2.zhimg.com/v2-ea6c3c10915e46bab8bea30c17e698ad_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-ea6c3c10915e46bab8bea30c17e698ad_b.png\"/></figure></li><li>method = &#34;gam&#34;, formula= y ∼ s(x)  ，添加一可加模型。跟线性相关线有点类似。数据量大的话使用=y ~ s(x, bs = &#34;cs&#34;)。建议超过1000.如图<figure><noscript><img src=\"https://pic3.zhimg.com/v2-d470cd8e7827cff0c7bc3fe3236d149e_b.png\" data-rawheight=\"343\" data-rawwidth=\"605\" class=\"origin_image zh-lightbox-thumb\" width=\"605\" data-original=\"https://pic3.zhimg.com/v2-d470cd8e7827cff0c7bc3fe3236d149e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;605&#39; height=&#39;343&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"343\" data-rawwidth=\"605\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"605\" data-original=\"https://pic3.zhimg.com/v2-d470cd8e7827cff0c7bc3fe3236d149e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-d470cd8e7827cff0c7bc3fe3236d149e_b.png\"/></figure></li><li>method = &#34;lm&#34;，默认使用直线。 formula = y ~ poly(x, 2)，二项式的，加载splines 包package and use a natural ：formula = y ~ ns(x, 2)，2的值可以替换，代表的是自由度<figure><noscript><img src=\"https://pic1.zhimg.com/v2-a15ce7f01ad9d6218ca14b8a6b03a3d4_b.png\" data-rawheight=\"114\" data-rawwidth=\"568\" class=\"origin_image zh-lightbox-thumb\" width=\"568\" data-original=\"https://pic1.zhimg.com/v2-a15ce7f01ad9d6218ca14b8a6b03a3d4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;568&#39; height=&#39;114&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"114\" data-rawwidth=\"568\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"568\" data-original=\"https://pic1.zhimg.com/v2-a15ce7f01ad9d6218ca14b8a6b03a3d4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-a15ce7f01ad9d6218ca14b8a6b03a3d4_b.png\"/></figure></li><li>method = &#34;rlm&#34;跟lm差不多，但是增加了抗差拟合模型所以输出可能没那么匹配</li><li>geom = &#34;jitter&#34;, geom = &#34;boxplot&#34;,也可加alpha 调整透明度<figure><noscript><img src=\"https://pic1.zhimg.com/v2-4b02101c019c29e528312880175d9ac8_b.png\" data-rawheight=\"176\" data-rawwidth=\"596\" class=\"origin_image zh-lightbox-thumb\" width=\"596\" data-original=\"https://pic1.zhimg.com/v2-4b02101c019c29e528312880175d9ac8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;596&#39; height=&#39;176&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"176\" data-rawwidth=\"596\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"596\" data-original=\"https://pic1.zhimg.com/v2-4b02101c019c29e528312880175d9ac8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-4b02101c019c29e528312880175d9ac8_b.png\"/></figure></li></ul><br/><ul><li>直方图，xlim X轴为0-3区间，binwidth 直方图宽度<figure><noscript><img src=\"https://pic2.zhimg.com/v2-f3fe5aac2c35cf8d790263eb7c3ca119_b.png\" data-rawheight=\"311\" data-rawwidth=\"600\" class=\"origin_image zh-lightbox-thumb\" width=\"600\" data-original=\"https://pic2.zhimg.com/v2-f3fe5aac2c35cf8d790263eb7c3ca119_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;600&#39; height=&#39;311&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"311\" data-rawwidth=\"600\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"600\" data-original=\"https://pic2.zhimg.com/v2-f3fe5aac2c35cf8d790263eb7c3ca119_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-f3fe5aac2c35cf8d790263eb7c3ca119_b.png\"/></figure></li></ul></ul><ul><ul><li>颜色和填充，colour代表用不同颜色的线来表示,   fill表示用不同颜色填充条形。<figure><noscript><img src=\"https://pic4.zhimg.com/v2-159c822308746447830a474155cb3a4b_b.png\" data-rawheight=\"404\" data-rawwidth=\"598\" class=\"origin_image zh-lightbox-thumb\" width=\"598\" data-original=\"https://pic4.zhimg.com/v2-159c822308746447830a474155cb3a4b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;598&#39; height=&#39;404&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"404\" data-rawwidth=\"598\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"598\" data-original=\"https://pic4.zhimg.com/v2-159c822308746447830a474155cb3a4b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-159c822308746447830a474155cb3a4b_b.png\"/></figure></li><li>条形图。<figure><noscript><img src=\"https://pic1.zhimg.com/v2-55272ed4cfe728c1e26c4db295f34824_b.png\" data-rawheight=\"73\" data-rawwidth=\"609\" class=\"origin_image zh-lightbox-thumb\" width=\"609\" data-original=\"https://pic1.zhimg.com/v2-55272ed4cfe728c1e26c4db295f34824_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;609&#39; height=&#39;73&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"73\" data-rawwidth=\"609\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"609\" data-original=\"https://pic1.zhimg.com/v2-55272ed4cfe728c1e26c4db295f34824_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-55272ed4cfe728c1e26c4db295f34824_b.png\"/></figure></li><li>时间序列 geom=line。date是一个时间参数。<figure><noscript><img src=\"https://pic1.zhimg.com/v2-feb64b60629da4ab6b2e9a32a6ae39f8_b.png\" data-rawheight=\"273\" data-rawwidth=\"606\" class=\"origin_image zh-lightbox-thumb\" width=\"606\" data-original=\"https://pic1.zhimg.com/v2-feb64b60629da4ab6b2e9a32a6ae39f8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;606&#39; height=&#39;273&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"273\" data-rawwidth=\"606\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"606\" data-original=\"https://pic1.zhimg.com/v2-feb64b60629da4ab6b2e9a32a6ae39f8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-feb64b60629da4ab6b2e9a32a6ae39f8_b.png\"/></figure></li><li>增加路径图。先将时间换算再进行操作<figure><noscript><img src=\"https://pic1.zhimg.com/v2-bd8a878c93fff19eb1766b028c2efa10_b.png\" data-rawheight=\"336\" data-rawwidth=\"589\" class=\"origin_image zh-lightbox-thumb\" width=\"589\" data-original=\"https://pic1.zhimg.com/v2-bd8a878c93fff19eb1766b028c2efa10_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;589&#39; height=&#39;336&#39;&gt;&lt;/svg&gt;\" data-rawheight=\"336\" data-rawwidth=\"589\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"589\" data-original=\"https://pic1.zhimg.com/v2-bd8a878c93fff19eb1766b028c2efa10_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-bd8a878c93fff19eb1766b028c2efa10_b.png\"/></figure></li><li>其他：log=&#34;x&#34; 对X轴取对数, log=&#34;xy&#34; 对XY轴都取对数</li></ul></ul>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": [
                {
                    "userName": "猴子", 
                    "userLink": "https://www.zhihu.com/people/c9b28ce4b50bf0444d17d010224cb06f", 
                    "content": "这一关的数据分析英语学习，下一关会用的上", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "黄马克", 
                            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
                            "content": "<p>好的</p>", 
                            "likes": 0, 
                            "replyToAuthor": "猴子"
                        }
                    ]
                }, 
                {
                    "userName": "蒙太奇的猫", 
                    "userLink": "https://www.zhihu.com/people/d48a35b6df6e4b3526efa7de2a49e94f", 
                    "content": "加油", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26702390", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 4, 
            "title": "plyr包", 
            "content": "<p>plyr是一个解决共同问题的工具;将一个大的数据结构分为若干个均等的小数据集，每个数据集使用同样的函数处理，组合并返回所有小数据集的结果。</p>\n\n<p>R的基础包也提供一些分裂和组合的函数组，但使用plyr会更简单快速。但也有局限性</p>\n\n<p>数据拆分成不重复的小数据集，但数据需要重复使用时就不能使用</p>\n\n<h2><b>主函数介绍</b></h2>\n\n<p><b>输入有array,dataframe,list三种格式</b></p>\n\n<p><b>输出有array,dataframe,list,discareded四种格式</b></p>\n\n<p>主要的函数都是以<b><u>* *ply（）</u></b>开头的，首字母可以是(d、l、a)，第二个字母可以是(d、l、a、_)，不同的字母表示不同的数据格式，d表示数据框格式，l表示列表，a表示数组，_则表示没有输出。<b>第一个*代表输入的是什么格式的数据，第2个星代表的是输出是以什么样的格式保存。</b></p>\n\n<p>eg：</p>\n\n<p><u>aa</u>ply()输入是数组（包括矩阵和向量），输出的也是数组<figure><noscript><img src=\"https://pic4.zhimg.com/v2-02faa0f7ba2d78961a5225feb03eaccf_b.png\" data-rawwidth=\"384\" data-rawheight=\"242\" class=\"content_image\" width=\"384\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;384&#39; height=&#39;242&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"384\" data-rawheight=\"242\" class=\"content_image lazy\" width=\"384\" data-actualsrc=\"https://pic4.zhimg.com/v2-02faa0f7ba2d78961a5225feb03eaccf_b.png\"/></figure></p><p><u>da</u>ply（）输入是数据框，输出是数组（尝试用数组作为拆分数据集，报错）<figure><noscript><img src=\"https://pic1.zhimg.com/v2-3201be543ccb9ba3d0fe761b8cdd293c_b.png\" data-rawwidth=\"563\" data-rawheight=\"57\" class=\"origin_image zh-lightbox-thumb\" width=\"563\" data-original=\"https://pic1.zhimg.com/v2-3201be543ccb9ba3d0fe761b8cdd293c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;563&#39; height=&#39;57&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"563\" data-rawheight=\"57\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"563\" data-original=\"https://pic1.zhimg.com/v2-3201be543ccb9ba3d0fe761b8cdd293c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-3201be543ccb9ba3d0fe761b8cdd293c_b.png\"/></figure></p><p><b>根据数据集及想要的结果选择合适的plyr函数操作处理</b></p><p><b>———————————————————————————————————————</b></p>\n\n<p><b>a*ply(data,.margins,fun,.progress=&#34;none&#34;)</b></p>\n\n<ul><ul><ul><li>l  data是要处理的数据，矩阵，数组<br/></li><li>l  margins=1,以行，=2以列进行处理，也可以是自定义的方式进行分割数据<br/></li><li>l  fun 是处理每个分割后数据集的函数<br/></li><li>l  progress=&#34;none&#34;，是不显示进度条<br/></li></ul></ul></ul><p>对于2维数据，有以下分组方式<figure><noscript><img src=\"https://pic3.zhimg.com/v2-6857004abf6de8bead6fd69be0554eba_b.png\" data-rawwidth=\"295\" data-rawheight=\"224\" class=\"content_image\" width=\"295\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;295&#39; height=&#39;224&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"295\" data-rawheight=\"224\" class=\"content_image lazy\" width=\"295\" data-actualsrc=\"https://pic3.zhimg.com/v2-6857004abf6de8bead6fd69be0554eba_b.png\"/></figure></p><p>对于3维数组，有7种分裂方式<figure><noscript><img src=\"https://pic2.zhimg.com/v2-28f1ac8d645187cc07c8ed2eeef71041_b.png\" data-rawwidth=\"605\" data-rawheight=\"347\" class=\"origin_image zh-lightbox-thumb\" width=\"605\" data-original=\"https://pic2.zhimg.com/v2-28f1ac8d645187cc07c8ed2eeef71041_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;605&#39; height=&#39;347&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"605\" data-rawheight=\"347\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"605\" data-original=\"https://pic2.zhimg.com/v2-28f1ac8d645187cc07c8ed2eeef71041_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-28f1ac8d645187cc07c8ed2eeef71041_b.png\"/></figure></p>\n\n<p>d*ply(data.frame,.variables,.fun,.<b>progress=&#34;none&#34;</b>)</p>\n\n<p>              .variables指定要分割的变量名称</p>\n\n<p>l*ply(list,fun) </p>\n\n<p>m*ply(data,.fun=NULL,inform=FLASE)-------------把array或者dataframe的参数数值放进函数当中，得到dataframe(mdply),array(maply)list(mlply)<figure><noscript><img src=\"https://pic3.zhimg.com/v2-fce70c678806cf892960b3ee577b2932_b.png\" data-rawwidth=\"610\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb\" width=\"610\" data-original=\"https://pic3.zhimg.com/v2-fce70c678806cf892960b3ee577b2932_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;610&#39; height=&#39;420&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"610\" data-rawheight=\"420\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"610\" data-original=\"https://pic3.zhimg.com/v2-fce70c678806cf892960b3ee577b2932_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-fce70c678806cf892960b3ee577b2932_b.png\"/></figure></p>\n\n<br/><h2><b>辅助函数：以函数作为输入，以新的函数作为输出</b></h2>\n\n<p><b>splat()</b>:该函数把原函数中多个参数打包为一个list作为参数，然后输出新的函数</p>\n\n<p>优点：当你想把数据框或者数组里的一行的数据作为参数赋给一个函数，用splat()函数就可以省去人为把数据框拆分的麻烦</p>\n\n<p>例子：</p>\n\n<ul><ul><ul><li>hp_per_cyl&lt;-function(hp,cyl,...) hp/cyl<br/></li><li>splat(hp_per_cyl)(mtcars[1,])    #第一行<br/></li><li>splat(hp_per_cyl)(mtcars)         #所有行<br/></li><li>m*ply(a_matrix,FUN)的作用和a*ply(a_matrix,1,splat(FUN))一样<br/></li></ul></ul></ul><p>例子：</p>\n\n<ul><ul><ul><li>data=data.frame(n=c(5,10,10),mean=c(5,5,5),sd=c(1,2,2))<br/></li><li>mlply(data,rnorm)<br/></li><li>alply(data,1,splat(rnorm))<br/></li></ul></ul></ul><p><b>failwith()</b>作用：修正一个函数，使得当该函数出现错误时返回一个默认值</p>\n\n<p>参数：default；f是要修正的函数；quiet是设定错误信息是否显示，默认值为FALSE，为显示设定要返回的默认值是错误信息</p>\n\n\n\n<p><b>each()</b>：作用：用一系列的函数作用在输入的数据上，并返回一个已命名的向量</p>\n\n<p>不足：不能给作用的函数指定附加的参数</p>\n\n<p>each(min, max)(x) 等价于 function(x) c(min = min(x), max =\nmax(x))。</p>\n\n\n\n<p><b>colwise()</b>：作用：把作用于数据框行向量的函数(如mean,median)转化为作用于数据框列向量的函 数，可以结合base R的函数使用，与d*ply一起使用時十分方便</p>\n\n<p>参数：.fun是要转化的函数；.cols可以是测试数据框的列是否应包含的判别函数或者是要包含的列的名称</p>\n\n<p>另外还有衍生的catcolwise()和numcolwise()函数，它们分别针对的时函数只在离散和数值型的变量上操作</p>\n\n<p>例子：统计baseball各列向量的缺失值个数</p>\n\n<ul><ul><ul><li>nmissing&lt;-function(x)sum(is.na(x))<br/></li><li>colwise(nmissing)(baseball)<br/></li><li> ddply(baseball,.(year),colwise(nmissing)) #以年这列来分类统计各列的缺失值情况<br/></li><li>ddply(baseball,.(year),colwise(nmissing),.(sb,cs,so)) #同上，并且显示需要的列的信息<br/></li><li>ddply(baseball,.(year),colwise(nmissing,c(&#34;sb&#34;,&#34;cs&#34;,&#34;so&#34;)))#同上<br/></li><li>ddply(baseball,.(year),colwise(nmissing,~sb+cs+so))   #同上<br/></li></ul></ul></ul><p><b>arrange()</b>： 可以方便的给dataframe排序。</p>\n\n<p>                    arrange(df,.(var1),.(var2))</p>\n\n<p>                   作用：按照列给数据框排序</p>\n\n<p>                   参数：df为数据框；.var是要按照排序的变量</p>\n\n<p><b>rename()</b>：按变量名而不是变量位置重命名。</p>\n\n<p><b>count()</b>：返回unique值，等价于length(unique(**))。</p>\n\n<p><b>match_df()</b>：方便的配合count()等，选出符合条件的行，有点像merge(…,all=F)的感觉。</p>\n\n<p><b>join()</b>：合并</p>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26681446", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 11, 
            "title": "R语言第八章-回归拟合及诊断方式", 
            "content": "回归：<br/>第8章的学习内容：<br/><ol><ol><li>首先学会拟合和解释回归模型，学会鉴别模型潜在问题的方法，并学习如何解决他们。</li><li>在变量选择上面，对于可用的预测变量，如何确定哪些变量是最终模型变量</li><li>模型在现实世界中的表现到底如何</li><li>预测变量的重要性排序</li></ol></ol><br/>第8章介绍对数值型结果变量和单个或对多个预测变量间的关系进行建模的回归方法。从多方面看，回归分析是统计学的核心，它其实是一个广义的概念，通指那些用一个或多个预测变量（也称自变量或解释变量）来预测响应变量（也称因变量，效标变量或结果变量）的方法。通常，回归分析可以用来挑选与响应变量相关的解释变量，可以描述两者的关系，也可以生成一个等式，通过解释变量来预测响应变量<br/> 一元回归，一个自变量对于因变量的影响；多元即是多个自变量对因变量的影响。<br/>所以不管是一元线性回归还是多元性性回归，他们的目的就是求出因变量和一个或多个自变量的关系<br/><br/>1<br/>学习简单线性回归，多项式回归和多元线性回归拟合的方法是什么呢？<br/>-------普通最小二乘回归法（OLS）<br/>OLS回归是通过预测变量的加权和来预测量化的因变量，其中权重是通过数据估计而得到的参数。<br/>找到最优方程<br/><br/>重点：发现问题，设计一个有用的，可以测量的响应变量，以及收集合适的数据（思路大于工具）<br/>一元回归：一个因变量，一个自变量<figure><noscript><img src=\"https://pic2.zhimg.com/v2-15efb7b81c97a31ba54650d2ab60a6b5_b.png\" data-rawwidth=\"537\" data-rawheight=\"293\" class=\"origin_image zh-lightbox-thumb\" width=\"537\" data-original=\"https://pic2.zhimg.com/v2-15efb7b81c97a31ba54650d2ab60a6b5_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;537&#39; height=&#39;293&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"537\" data-rawheight=\"293\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"537\" data-original=\"https://pic2.zhimg.com/v2-15efb7b81c97a31ba54650d2ab60a6b5_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-15efb7b81c97a31ba54650d2ab60a6b5_b.png\"/></figure><br/><br/>没有限制小数点的位数。。截距为-87.51667，斜率为3.45<figure><noscript><img src=\"https://pic4.zhimg.com/v2-45e5a54d29397420d99cac161072e867_b.png\" data-rawwidth=\"616\" data-rawheight=\"195\" class=\"origin_image zh-lightbox-thumb\" width=\"616\" data-original=\"https://pic4.zhimg.com/v2-45e5a54d29397420d99cac161072e867_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;616&#39; height=&#39;195&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"616\" data-rawheight=\"195\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"616\" data-original=\"https://pic4.zhimg.com/v2-45e5a54d29397420d99cac161072e867_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-45e5a54d29397420d99cac161072e867_b.png\"/></figure><br/><br/>PS：fitted()的结果是你得到相应的模型后，(x1,x2,...,xn)相应的值，也就是(y1,y2,...,yn)的值<br/>residuals()---残差 =实际值-拟合值<br/><br/>多项式回归：只有一个预测变量，但包含变量的幂次方<figure><noscript><img src=\"https://pic4.zhimg.com/v2-52af0c155ba3d1ab6fa3927da50834ff_b.png\" data-rawwidth=\"540\" data-rawheight=\"353\" class=\"origin_image zh-lightbox-thumb\" width=\"540\" data-original=\"https://pic4.zhimg.com/v2-52af0c155ba3d1ab6fa3927da50834ff_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;540&#39; height=&#39;353&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"540\" data-rawheight=\"353\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"540\" data-original=\"https://pic4.zhimg.com/v2-52af0c155ba3d1ab6fa3927da50834ff_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-52af0c155ba3d1ab6fa3927da50834ff_b.png\"/></figure><br/><br/>    左图是一元回归方程的拟合曲线，从图上发现最大残差在身高矮和高的地方出现那么用多项式可以提高回归的预测精度<figure><noscript><img src=\"https://pic4.zhimg.com/v2-dd4d2ffbc334b46f0820f9acb0b76c57_b.png\" data-rawwidth=\"486\" data-rawheight=\"312\" class=\"origin_image zh-lightbox-thumb\" width=\"486\" data-original=\"https://pic4.zhimg.com/v2-dd4d2ffbc334b46f0820f9acb0b76c57_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;486&#39; height=&#39;312&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"486\" data-rawheight=\"312\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"486\" data-original=\"https://pic4.zhimg.com/v2-dd4d2ffbc334b46f0820f9acb0b76c57_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-dd4d2ffbc334b46f0820f9acb0b76c57_b.png\"/></figure><br/><br/>书上简单回归和多项式回归所用的函数不一样<br/>函数lines()其作用是在已有图上加线，命令为lines(x,y),其功能相当于plot(x,y,type=&#34;1&#34;)<br/>函数abline()可以在图上加直线，其使用方法有四种格式。<br/>（1）abline(a,b)<br/>表示画一条y=a+bx的直线<br/>（2）abline(h=y)<br/>表示画出一条过所有点得水平直线<br/>（3）abline(v=x)<br/>表示画出一条过所有点的竖直直线<br/>（4）abline(lm.obj)<br/>表示绘出线性模型得到的线性方程（用多项式测试过报错）<br/><br/>3次多项式可用：<br/>fit3&lt;-lm(weight~height+I(height^2)+I(height^3),data=women)<br/>作者发现使用比3次更高的项几乎没有必要，所以先暂时掌握到此<br/>car包中的scatterplot()可以很容易，方便地绘制二元关系图。<figure><noscript><img src=\"https://pic3.zhimg.com/v2-e1e8a65778a0ce3cc09121cc9af8ad06_b.png\" data-rawwidth=\"448\" data-rawheight=\"259\" class=\"origin_image zh-lightbox-thumb\" width=\"448\" data-original=\"https://pic3.zhimg.com/v2-e1e8a65778a0ce3cc09121cc9af8ad06_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;448&#39; height=&#39;259&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"448\" data-rawheight=\"259\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"448\" data-original=\"https://pic3.zhimg.com/v2-e1e8a65778a0ce3cc09121cc9af8ad06_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-e1e8a65778a0ce3cc09121cc9af8ad06_b.png\"/></figure><figure><noscript><img src=\"https://pic2.zhimg.com/v2-afaa5859e4ebdc6f22f2ced3e9229721_b.png\" data-rawwidth=\"591\" data-rawheight=\"515\" class=\"origin_image zh-lightbox-thumb\" width=\"591\" data-original=\"https://pic2.zhimg.com/v2-afaa5859e4ebdc6f22f2ced3e9229721_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;591&#39; height=&#39;515&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"591\" data-rawheight=\"515\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"591\" data-original=\"https://pic2.zhimg.com/v2-afaa5859e4ebdc6f22f2ced3e9229721_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-afaa5859e4ebdc6f22f2ced3e9229721_b.png\"/></figure><br/><br/>多元线性回归：含有多个因变量 （预测变量）<br/>       lm()函数需要一个数据框，这里的数据state.x77是矩阵，需要先进行转换，在应用函数之前，对函数里面参数的类型要清楚，如果报错，可以先从此着手查找问题原因。<br/>先进行如下转换：<figure><noscript><img src=\"https://pic2.zhimg.com/v2-141867324cbbe5b0ffac2865f5444e51_b.png\" data-rawwidth=\"621\" data-rawheight=\"171\" class=\"origin_image zh-lightbox-thumb\" width=\"621\" data-original=\"https://pic2.zhimg.com/v2-141867324cbbe5b0ffac2865f5444e51_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;621&#39; height=&#39;171&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"621\" data-rawheight=\"171\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"621\" data-original=\"https://pic2.zhimg.com/v2-141867324cbbe5b0ffac2865f5444e51_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-141867324cbbe5b0ffac2865f5444e51_b.png\"/></figure><br/><br/>包含感兴趣的变量。<br/>首先对于这几个变量之间的关系可以先进行检测，未指定小数点保留2位<figure><noscript><img src=\"https://pic1.zhimg.com/v2-96869916be265a6fe629ae6243506eb4_b.png\" data-rawwidth=\"544\" data-rawheight=\"187\" class=\"origin_image zh-lightbox-thumb\" width=\"544\" data-original=\"https://pic1.zhimg.com/v2-96869916be265a6fe629ae6243506eb4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;544&#39; height=&#39;187&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"544\" data-rawheight=\"187\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"544\" data-original=\"https://pic1.zhimg.com/v2-96869916be265a6fe629ae6243506eb4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-96869916be265a6fe629ae6243506eb4_b.png\"/></figure><br/><br/>拟合曲线的参数可以用smoother.args=list(lty=2)替换<br/>                                  PS： scatterplot(x, y, <br/>                                   smoother=loessLine, smoother.args=list(), smooth, span,<br/>                                   spread=!by.groups, reg.line=lm,<br/>                                  请注意scatterplot()函数的红色字体部分！！！<br/>                                  smoother=loessLine表示光滑曲线由loessLine()函数<br/>                                  而smoother.args=list()则规定了光滑曲线的其它参数，<br/>                                  而loessLine()函数的默认参数为：<br/>smoother.args=list(lty=1,lwd=2, lty.spread=2, lwd.spread=1, span=0.5, degree=2,<br/>                           family=&#34;symmetric&#34;, iterations=4)<br/>                             #lty.spread和lwd.spread指定了spread=TRUE时添加线条的类型和宽度。<br/>                          所以lty.smooth=2的命令可由smoother.args=list(lty=2)来实现。<br/><br/>即&gt; scatterplot(yeild~N,data=ndata,lty.smooth=2,spread=FALSE,pch=19)<br/>可修改为&gt; scatterplot(yeild~N,data=ndata,smoother.args=list(lty=2),spread=FALSE,pch=19)<br/>其它的像scatterplotMatrix()函数亦是如此。 <br/>显示效果<figure><noscript><img src=\"https://pic1.zhimg.com/v2-8d1ca443107ca3390c2475cd28d9e6e8_b.png\" data-rawwidth=\"586\" data-rawheight=\"544\" class=\"origin_image zh-lightbox-thumb\" width=\"586\" data-original=\"https://pic1.zhimg.com/v2-8d1ca443107ca3390c2475cd28d9e6e8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;586&#39; height=&#39;544&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"586\" data-rawheight=\"544\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"586\" data-original=\"https://pic1.zhimg.com/v2-8d1ca443107ca3390c2475cd28d9e6e8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-8d1ca443107ca3390c2475cd28d9e6e8_b.png\"/></figure><br/><br/>scatterplotMatrix()函数默认在非对角线区域绘制变量间的散点图，并添加平滑（loess）和线性拟合曲线，对角线区域绘制每个变量的密度图和轴须图。（对角其实就是变量自身的比较）<br/>多元线性回归<figure><noscript><img src=\"https://pic3.zhimg.com/v2-26a6b90574c4c6dbfe607ae606788446_b.png\" data-rawwidth=\"489\" data-rawheight=\"343\" class=\"origin_image zh-lightbox-thumb\" width=\"489\" data-original=\"https://pic3.zhimg.com/v2-26a6b90574c4c6dbfe607ae606788446_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;489&#39; height=&#39;343&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"489\" data-rawheight=\"343\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"489\" data-original=\"https://pic3.zhimg.com/v2-26a6b90574c4c6dbfe607ae606788446_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-26a6b90574c4c6dbfe607ae606788446_b.png\"/></figure><br/><br/>estimate 代表的是回归系数，含义为：一个预测变量增加一个单位，其他预测变量保持不变的情况下，因变量将要增加的数量。如，文盲率回归系数为4.14，在其他参数不变时，文盲率上升百分之1，谋杀率将会上升百分之4.14.<br/>根据假设检验，前提是不相关，=0. 从上面的参数也可以看出，人口和文盲率对于谋杀率回归系数显著为零的概率很小，其他参数并没有显著不为0.表明不呈线性相关。<br/>相关系数检验法检验的是整个模型的拟合程度，越大越好。参数体现在R-Squared。百分之56.7<br/><br/>有些变量并不是独立的，这就涉及交互项的预测变量。<br/>有交互项的多元线性回归<br/> 以mtcars数据框中的汽车数据为例，将汽车重量和马力作为预测变量，并包含交互项来拟合回归模型<figure><noscript><img src=\"https://pic3.zhimg.com/v2-120d89afba491b838ead5a66fdc8c6d2_b.png\" data-rawwidth=\"508\" data-rawheight=\"333\" class=\"origin_image zh-lightbox-thumb\" width=\"508\" data-original=\"https://pic3.zhimg.com/v2-120d89afba491b838ead5a66fdc8c6d2_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;508&#39; height=&#39;333&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"508\" data-rawheight=\"333\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"508\" data-original=\"https://pic3.zhimg.com/v2-120d89afba491b838ead5a66fdc8c6d2_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-120d89afba491b838ead5a66fdc8c6d2_b.png\"/></figure><br/><br/>普遍意义：若两个预测变量的交互项显著，说明响应变量与其中一个预测变量的关系依赖于另外一个预测变量的水平。<br/>此例说明：每加仑汽油行驶英里数与汽车马力的关系依车重不同而不同<br/><br/>通过effects包里面的effect（）函数，可以用图形展示交互项的结果。<br/>格式：plot(effect(term,mod,xlecels),multiline=TRUE)<br/>                                          -----------实例应用R   P170<br/>8.3回归模型诊断：<br/>为了评估回归模型适用性的必要工具，主要为了帮助发现并纠正问题。<br/>解释OLS模型系数，是根据统计假设条件<br/><ol><ol><ol><li>正态性，对于固定的自变量值，因变量值成正态分布。</li><li>独立性，Yi值之间相互独立。</li><li>线性，因变量与自变量之间为线性相关。</li><li>同方差性，因变量的方差不随自变量的水平不同而变化。</li></ol></ol></ol>标准方法;<br/>plot(lm())<br/><ol><ol><ol><li>正态性，应满足NormalQ-Q图上的点落在呈45度角的直线上。</li><li>线性，图Residuals vs Fitted应为线性</li><li>同方差性，Scale-Location图水平线周围的点应为随机分布</li><li>残差与杠杆图（Residuals vs Leverage）从图形上可以鉴别出离群点，高杠杆值点，强影响点</li></ol></ol></ol><br/>改进的方法：<br/>car包中提供多个拟合和评价回归模型的函数:<br/><ol><li>正态性：</li></ol>qqPlot（）提供了更为精确的正态假设检验方法。它画出了n-p-1个自由度的t分布下的学生 化残差图形<br/>qqPlot(lm(),labels=row.names(frame),id.method=&#34;identify&#34;,simulate=TRUE,main=&#34;q-q&#34;)<br/><ol><li>误差的独立性;</li></ol>使用car包中Durbin-Watson函数,能够检测误差的序列相关性。<br/>durbinWatsonTest(frame)<br/>根据P值来判定结果。（假设检验，第7章）<br/><ol><li>线性：</li></ol>通过成分残差图，也称为偏残差图，可以观察因变量与自变量之间是否呈非线性关系，或者是否有不同于已设定线性模型的系统偏差。<br/>使用crPlots(frame)函数<br/><ol><li>同方差性：</li></ol>使用ncvTest()生成一个计分检验<br/>原假设H0=H1，备选假设H0 !=H1（方差误差随拟合值水平变化而变化）。<br/>若检验显著，P值小于0.05时， 我们认为因为偶然性而造成差异的概率比较小。则说明存在异方差性。<br/>spreadLevelPlot()函数创建一个天津了最佳拟合曲线的散点图。展示标准化残差绝对值和拟合值的关系（其中的点应在水平的最佳拟合曲线周围呈水平随机分布）<br/><br/>线性模型假设综合验证<br/>gvlma包中gvlma（）函数能对线性模型假设进行综合验证<br/><br/>8.4回归模型异常观测值<br/>离群点：<br/><ol><ol><ol><li>置信区间带外的点即可被认为是离群点</li><li>标准化残差值大于2或者小于2的点可能是离群</li></ol></ol></ol>outlierTest(frame)  显示离群点<br/><br/>高杠杆值点：<br/>由许多异常的预测变量值组合起来的，与响应变量值没有关系可通过帽子统计量（hat statistic）判断<br/>hat.plot &lt;- function(frame){<br/>    p &lt;- length(coefficients(frame))<br/>    n &lt;- length(fitted(frame))<br/>    plot(hatvalues(frame), main = &#34;Index Plot of Hat Values&#34;)<br/>    abline(h = c(2, 3) * p/n, col = &#34;red&#34;, lty = 2)<br/>    identify(1:n, hatvalues(frame), names(hatvalues(frame)))<br/>}<br/>       hat.plot(frame)<br/>强影响点:    对模型参数估计值影响有些比例失衡的点<br/>改进措施：<br/><ol><li>删除观测点</li></ol>删除观测点，需对模型进行重新拟合<br/><ol><li>变量变换</li></ol><ul><ul><ul><li>当模型不符合正态性，线性或者同方差性，使用car包中powerTransform函数</li><li>违反线性假设时，使用car包中boxTidwell函数</li><li>改善异方差性，使用car包中spreadLevelPlot函数</li></ul></ul></ul><ol><li>添加或删除变量</li></ol> \t\t                岭回归--专门用来处理多重共线性问题<br/><ol><li>使用其他回归方法</li></ol><ul><ul><ul><li>如果存在离群点或强影响点，可以使用稳健回归模型</li><li>如果违背正态性假设，可以使用非参数回归模型</li><li>如果存在显著的非线性，尝试使用非线性回归模型</li><li>如果违背了误差独立性假设，可用其他专门研究误差结构的模型，如时间序列，或者多层次回归。</li><li>广义线性模型，能适用于许多OLS回归假设不成立的情况。</li></ul></ul></ul><br/>选择“最佳”回归模型<br/><br/>1<b>模型比较</b>：用anova函数可以比较两个嵌套模型的拟合优度。（用所得到的数据带入检验统计量，得到统计量的值，再来和标准值作对比，或算出p-value，来判断是原假设（h0）还是备择假设（h1））<br/>AIC赤池信息准则，越小越好。使用AIC（）函数实现<br/><br/>2<b>变量选择</b>：逐步回归法，和全子集回归法<br/>逐步回归法：<figure><noscript><img src=\"https://pic1.zhimg.com/v2-7519f713581c050ec18cce655fea18f8_b.png\" data-rawwidth=\"429\" data-rawheight=\"63\" class=\"origin_image zh-lightbox-thumb\" width=\"429\" data-original=\"https://pic1.zhimg.com/v2-7519f713581c050ec18cce655fea18f8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;429&#39; height=&#39;63&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"429\" data-rawheight=\"63\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"429\" data-original=\"https://pic1.zhimg.com/v2-7519f713581c050ec18cce655fea18f8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-7519f713581c050ec18cce655fea18f8_b.png\"/></figure><br/>向前逐步回归 stepAIC(frame,direction=&#34;forward&#34;)<br/>向后逐步回归stepAIC(fit1,direction = &#34;backward&#34;)<br/>向前向后逐步回归stepAIC(fit1,direction = &#34;stepwise&#34;)<br/>逐步回归法局限性：不能保证模型就是最佳模型，因为不是每一个可能的模型都被评价了<br/><br/>3<b>全子集回归</b>：所有的可能模型都会被检验。<br/>使用leaps包中regsubsets函数实现。<figure><noscript><img src=\"https://pic3.zhimg.com/v2-547a61d642e1a5a52e7b7728eb721a66_b.png\" data-rawwidth=\"456\" data-rawheight=\"86\" class=\"origin_image zh-lightbox-thumb\" width=\"456\" data-original=\"https://pic3.zhimg.com/v2-547a61d642e1a5a52e7b7728eb721a66_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;456&#39; height=&#39;86&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"456\" data-rawheight=\"86\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"456\" data-original=\"https://pic3.zhimg.com/v2-547a61d642e1a5a52e7b7728eb721a66_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-547a61d642e1a5a52e7b7728eb721a66_b.png\"/></figure><br/>或者使用car包里面的subsets函数   (leaps,statistic = &#34;cp&#34;)<figure><noscript><img src=\"https://pic1.zhimg.com/v2-9a5a3fa5031ed82ce6e477acb8ab90a4_b.png\" data-rawwidth=\"606\" data-rawheight=\"194\" class=\"origin_image zh-lightbox-thumb\" width=\"606\" data-original=\"https://pic1.zhimg.com/v2-9a5a3fa5031ed82ce6e477acb8ab90a4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;606&#39; height=&#39;194&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"606\" data-rawheight=\"194\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"606\" data-original=\"https://pic1.zhimg.com/v2-9a5a3fa5031ed82ce6e477acb8ab90a4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-9a5a3fa5031ed82ce6e477acb8ab90a4_b.png\"/></figure><br/>当有大量预测变量时，全子集回归会很慢。<br/>核心是根据业务要求，主题去构建模型，变量自动选择只是一种辅助方式<br/><br/>深层次分析<br/>交叉验证：将一定比例数据挑选出来作为训练样本，另外的样本作保留样本，先在训练样本上获取回归方程，然后在保留样本上作预测。在K重交叉验证中，样本被分为K个子样本。轮流将K-1个子样本组合作为训练集，另外1个子样本作为保留集。获得K个预测方程，记录K个保留样本的预测表现结果。然后求平均值。【刀切法 N=k】<br/>  \t\t使用bootstrap包中的crossval函数<figure><noscript><img src=\"https://pic3.zhimg.com/v2-d514facc000fbcec8c17ef8f6e5b90ae_b.png\" data-rawwidth=\"550\" data-rawheight=\"283\" class=\"origin_image zh-lightbox-thumb\" width=\"550\" data-original=\"https://pic3.zhimg.com/v2-d514facc000fbcec8c17ef8f6e5b90ae_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;550&#39; height=&#39;283&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"550\" data-rawheight=\"283\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"550\" data-original=\"https://pic3.zhimg.com/v2-d514facc000fbcec8c17ef8f6e5b90ae_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-d514facc000fbcec8c17ef8f6e5b90ae_b.png\"/></figure><br/>相对重要性：在进行分析前，可用scale（）函数将数据标准化均值为0，标准差为1的数据集。这样R回归即可获得标准化回归系数（scale函数返回的是一个矩）<br/>              \t\t使用coef()函数。根据数据大小判断重要性<br/>相对权重：提供变量相关大小比例。<figure><noscript><img src=\"https://pic1.zhimg.com/v2-c56425f682f3561317808adad17fb8e4_b.png\" data-rawwidth=\"533\" data-rawheight=\"413\" class=\"origin_image zh-lightbox-thumb\" width=\"533\" data-original=\"https://pic1.zhimg.com/v2-c56425f682f3561317808adad17fb8e4_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;533&#39; height=&#39;413&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"533\" data-rawheight=\"413\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"533\" data-original=\"https://pic1.zhimg.com/v2-c56425f682f3561317808adad17fb8e4_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-c56425f682f3561317808adad17fb8e4_b.png\"/></figure><figure><noscript><img src=\"https://pic2.zhimg.com/v2-202cde24a9784ea0ad5afbb499422aed_b.png\" data-rawwidth=\"585\" data-rawheight=\"301\" class=\"origin_image zh-lightbox-thumb\" width=\"585\" data-original=\"https://pic2.zhimg.com/v2-202cde24a9784ea0ad5afbb499422aed_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;585&#39; height=&#39;301&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"585\" data-rawheight=\"301\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"585\" data-original=\"https://pic2.zhimg.com/v2-202cde24a9784ea0ad5afbb499422aed_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-202cde24a9784ea0ad5afbb499422aed_b.png\"/></figure><br/>第八章是学习用时最长的一章。<br/>这个章节讨论了如何拟合OLS回归模型，一元，多元 ，多项式回归方程的建立方式。<br/>之后是使用回归诊断判断模型的符合程度。是否符合统计假设，正态性，独立性，线性，同方差性。<br/>之后是对异常值的判断。<br/>模型诊断出问题之后的改进措施及选择“最佳”模型，使用逐步回归法或者全子集回归<br/>深层次的分析，之前回归方程是描述性分析。使用的是交叉验证的方式<br/>最后讨论了变量的相对重要性和相对权重。", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": []
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26655339", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 3, 
            "title": "简单数据分析实现与问题解决", 
            "content": "<p>安装openxlsx包，导入数据，输出数据信息</p>\n\n<figure><noscript><img src=\"https://pic1.zhimg.com/v2-570f1c3c282ae7f74eddd7862bad0958_b.png\" data-rawwidth=\"555\" data-rawheight=\"142\" class=\"origin_image zh-lightbox-thumb\" width=\"555\" data-original=\"https://pic1.zhimg.com/v2-570f1c3c282ae7f74eddd7862bad0958_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;555&#39; height=&#39;142&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"555\" data-rawheight=\"142\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"555\" data-original=\"https://pic1.zhimg.com/v2-570f1c3c282ae7f74eddd7862bad0958_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-570f1c3c282ae7f74eddd7862bad0958_b.png\"/></figure><p>为了便于操作将中文列名修改为英文：<figure><noscript><img src=\"https://pic4.zhimg.com/v2-e6ac6b1197f8e0bf839a6455cfb42e07_b.png\" data-rawwidth=\"538\" data-rawheight=\"445\" class=\"origin_image zh-lightbox-thumb\" width=\"538\" data-original=\"https://pic4.zhimg.com/v2-e6ac6b1197f8e0bf839a6455cfb42e07_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;538&#39; height=&#39;445&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"538\" data-rawheight=\"445\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"538\" data-original=\"https://pic4.zhimg.com/v2-e6ac6b1197f8e0bf839a6455cfb42e07_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-e6ac6b1197f8e0bf839a6455cfb42e07_b.png\"/></figure></p>\n\n\n\n<p>修改列名输出信息<figure><noscript><img src=\"https://pic3.zhimg.com/v2-7d7d4f9ef96f95b205bf3f8b13d9cb02_b.png\" data-rawwidth=\"554\" data-rawheight=\"142\" class=\"origin_image zh-lightbox-thumb\" width=\"554\" data-original=\"https://pic3.zhimg.com/v2-7d7d4f9ef96f95b205bf3f8b13d9cb02_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;554&#39; height=&#39;142&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"554\" data-rawheight=\"142\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"554\" data-original=\"https://pic3.zhimg.com/v2-7d7d4f9ef96f95b205bf3f8b13d9cb02_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-7d7d4f9ef96f95b205bf3f8b13d9cb02_b.png\"/></figure></p>\n\n\n\n<p>第五章的代码已经敲过，使用strsplit 函数\n可分列<figure><noscript><img src=\"https://pic4.zhimg.com/v2-6a41a3de736fe81ebac976290ae59b2f_b.png\" data-rawwidth=\"445\" data-rawheight=\"201\" class=\"origin_image zh-lightbox-thumb\" width=\"445\" data-original=\"https://pic4.zhimg.com/v2-6a41a3de736fe81ebac976290ae59b2f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;445&#39; height=&#39;201&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"445\" data-rawheight=\"201\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"445\" data-original=\"https://pic4.zhimg.com/v2-6a41a3de736fe81ebac976290ae59b2f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-6a41a3de736fe81ebac976290ae59b2f_b.png\"/></figure></p>\n\n\n\n<p>之后提取再赋值<figure><noscript><img src=\"https://pic2.zhimg.com/v2-0872c80adbe3f629b8ebe11d68b2ac0d_b.png\" data-rawwidth=\"569\" data-rawheight=\"141\" class=\"origin_image zh-lightbox-thumb\" width=\"569\" data-original=\"https://pic2.zhimg.com/v2-0872c80adbe3f629b8ebe11d68b2ac0d_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;569&#39; height=&#39;141&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"569\" data-rawheight=\"141\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"569\" data-original=\"https://pic2.zhimg.com/v2-0872c80adbe3f629b8ebe11d68b2ac0d_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-0872c80adbe3f629b8ebe11d68b2ac0d_b.png\"/></figure></p>\n\n\n\n<p>将字符串修改为日期值<figure><noscript><img src=\"https://pic4.zhimg.com/v2-d5301f85aa7e7c2fb811c50a8c5cb29f_b.png\" data-rawwidth=\"500\" data-rawheight=\"70\" class=\"origin_image zh-lightbox-thumb\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-d5301f85aa7e7c2fb811c50a8c5cb29f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;500&#39; height=&#39;70&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"500\" data-rawheight=\"70\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"500\" data-original=\"https://pic4.zhimg.com/v2-d5301f85aa7e7c2fb811c50a8c5cb29f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-d5301f85aa7e7c2fb811c50a8c5cb29f_b.png\"/></figure></p>\n\n\n\n<p>从上面输出的信息可以看出涉及金额的变量为数值型变量不需要进行转换</p>\n\n<p>接下来是排序，以时间排序，显示的并非降序</p><figure><noscript><img src=\"https://pic1.zhimg.com/v2-18493e048553924ca5c5cc72cf923f10_b.png\" data-rawwidth=\"559\" data-rawheight=\"177\" class=\"origin_image zh-lightbox-thumb\" width=\"559\" data-original=\"https://pic1.zhimg.com/v2-18493e048553924ca5c5cc72cf923f10_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;559&#39; height=&#39;177&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"559\" data-rawheight=\"177\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"559\" data-original=\"https://pic1.zhimg.com/v2-18493e048553924ca5c5cc72cf923f10_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-18493e048553924ca5c5cc72cf923f10_b.png\"/></figure><p>检查下time参数的类别<figure><noscript><img src=\"https://pic3.zhimg.com/v2-bb6a79a94dad7d41d8858d89a6c30f22_b.png\" data-rawwidth=\"363\" data-rawheight=\"66\" class=\"content_image\" width=\"363\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;363&#39; height=&#39;66&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"363\" data-rawheight=\"66\" class=\"content_image lazy\" width=\"363\" data-actualsrc=\"https://pic3.zhimg.com/v2-bb6a79a94dad7d41d8858d89a6c30f22_b.png\"/></figure></p>\n\n\n\n<p>再次修改为DATE类型再进行排序，出现警告，放弃不用time类别，time被修改回为字符串<figure><noscript><img src=\"https://pic1.zhimg.com/v2-e1d574332697fae3f7bebf7441f81d2c_b.png\" data-rawwidth=\"554\" data-rawheight=\"79\" class=\"origin_image zh-lightbox-thumb\" width=\"554\" data-original=\"https://pic1.zhimg.com/v2-e1d574332697fae3f7bebf7441f81d2c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;554&#39; height=&#39;79&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"554\" data-rawheight=\"79\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"554\" data-original=\"https://pic1.zhimg.com/v2-e1d574332697fae3f7bebf7441f81d2c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-e1d574332697fae3f7bebf7441f81d2c_b.png\"/></figure></p>\n\n\n\n<p>认为排序已经完成，对于接下来的数据分析没有影响，暂时先跳过，待会再进行处理</p>\n\n\n\n<p><b>业务目标</b><figure><noscript><img src=\"https://pic2.zhimg.com/v2-5b48048da0ff1b36dfff7ce2d2473d01_b.png\" data-rawwidth=\"420\" data-rawheight=\"471\" class=\"content_image\" width=\"420\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;420&#39; height=&#39;471&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"420\" data-rawheight=\"471\" class=\"content_image lazy\" width=\"420\" data-actualsrc=\"https://pic2.zhimg.com/v2-5b48048da0ff1b36dfff7ce2d2473d01_b.png\"/></figure>分析业务目标<br/></p>\n\n\n\n<p>接下来是分析处理数据：<figure><noscript><img src=\"https://pic2.zhimg.com/v2-2bcb12c64b03e5ea797ade04062ef371_b.png\" data-rawwidth=\"364\" data-rawheight=\"293\" class=\"content_image\" width=\"364\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;364&#39; height=&#39;293&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"364\" data-rawheight=\"293\" class=\"content_image lazy\" width=\"364\" data-actualsrc=\"https://pic2.zhimg.com/v2-2bcb12c64b03e5ea797ade04062ef371_b.png\"/></figure></p>\n\n\n\n<h2><b>业务指标</b><b>1</b><b>：</b></h2>\n\n<p>获取总消费次数<figure><noscript><img src=\"https://pic1.zhimg.com/v2-365cb9c5138818d014f9cd355e80bbd8_b.png\" data-rawwidth=\"531\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb\" width=\"531\" data-original=\"https://pic1.zhimg.com/v2-365cb9c5138818d014f9cd355e80bbd8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;531&#39; height=&#39;52&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"531\" data-rawheight=\"52\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"531\" data-original=\"https://pic1.zhimg.com/v2-365cb9c5138818d014f9cd355e80bbd8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-365cb9c5138818d014f9cd355e80bbd8_b.png\"/></figure></p><p>获取月份<figure><noscript><img src=\"https://pic1.zhimg.com/v2-518b9901416f57cff604a3759ab8be98_b.png\" data-rawwidth=\"486\" data-rawheight=\"109\" class=\"origin_image zh-lightbox-thumb\" width=\"486\" data-original=\"https://pic1.zhimg.com/v2-518b9901416f57cff604a3759ab8be98_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;486&#39; height=&#39;109&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"486\" data-rawheight=\"109\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"486\" data-original=\"https://pic1.zhimg.com/v2-518b9901416f57cff604a3759ab8be98_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-518b9901416f57cff604a3759ab8be98_b.png\"/></figure></p>\n\n\n\n\n\n<p>月份结果为总的3个月，因为之前有大致浏览了下EXCEL的数据，清楚这个数据是错误的<figure><noscript><img src=\"https://pic3.zhimg.com/v2-68baac6a9f7e7a71d60b554c8015420e_b.png\" data-rawwidth=\"479\" data-rawheight=\"155\" class=\"origin_image zh-lightbox-thumb\" width=\"479\" data-original=\"https://pic3.zhimg.com/v2-68baac6a9f7e7a71d60b554c8015420e_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;479&#39; height=&#39;155&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"479\" data-rawheight=\"155\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"479\" data-original=\"https://pic3.zhimg.com/v2-68baac6a9f7e7a71d60b554c8015420e_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-68baac6a9f7e7a71d60b554c8015420e_b.png\"/></figure><br/></p>\n\n\n\n<p>View函数也清楚看到KPI1数据并没有成功排序<figure><noscript><img src=\"https://pic1.zhimg.com/v2-e295e6932c3833bce22f0a86e5c8576c_b.png\" data-rawwidth=\"559\" data-rawheight=\"396\" class=\"origin_image zh-lightbox-thumb\" width=\"559\" data-original=\"https://pic1.zhimg.com/v2-e295e6932c3833bce22f0a86e5c8576c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;559&#39; height=&#39;396&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"559\" data-rawheight=\"396\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"559\" data-original=\"https://pic1.zhimg.com/v2-e295e6932c3833bce22f0a86e5c8576c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-e295e6932c3833bce22f0a86e5c8576c_b.png\"/></figure></p>\n\n\n\n<p>mydataframe 排序操作没有成功。<figure><noscript><img src=\"https://pic2.zhimg.com/v2-400e504e1a456597717572df0a267d89_b.png\" data-rawwidth=\"489\" data-rawheight=\"217\" class=\"origin_image zh-lightbox-thumb\" width=\"489\" data-original=\"https://pic2.zhimg.com/v2-400e504e1a456597717572df0a267d89_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;489&#39; height=&#39;217&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"489\" data-rawheight=\"217\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"489\" data-original=\"https://pic2.zhimg.com/v2-400e504e1a456597717572df0a267d89_r.jpg\" data-actualsrc=\"https://pic2.zhimg.com/v2-400e504e1a456597717572df0a267d89_b.png\"/></figure></p>\n\n\n\n\n\n<p>之前跳过的问题，导致后面的代码都运行出错。回到刚才的地方重新排序。<figure><noscript><img src=\"https://pic1.zhimg.com/v2-b8a286e245f3bab933a07095b0d2676c_b.png\" data-rawwidth=\"555\" data-rawheight=\"528\" class=\"origin_image zh-lightbox-thumb\" width=\"555\" data-original=\"https://pic1.zhimg.com/v2-b8a286e245f3bab933a07095b0d2676c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;555&#39; height=&#39;528&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"555\" data-rawheight=\"528\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"555\" data-original=\"https://pic1.zhimg.com/v2-b8a286e245f3bab933a07095b0d2676c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-b8a286e245f3bab933a07095b0d2676c_b.png\"/></figure></p>\n\n\n\n<p>修改了以上的值 重新运行整段代码，编译正确。</p>\n\n<p>R语言需要编程者告知日期存储的数据是怎么的形式的数据形状</p>\n\n<h2><b>业务指标</b><b>2<figure><noscript><img src=\"https://pic1.zhimg.com/v2-8186557ff3c68ec27b2201cae2613cb8_b.png\" data-rawwidth=\"452\" data-rawheight=\"469\" class=\"origin_image zh-lightbox-thumb\" width=\"452\" data-original=\"https://pic1.zhimg.com/v2-8186557ff3c68ec27b2201cae2613cb8_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;452&#39; height=&#39;469&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"452\" data-rawheight=\"469\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"452\" data-original=\"https://pic1.zhimg.com/v2-8186557ff3c68ec27b2201cae2613cb8_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-8186557ff3c68ec27b2201cae2613cb8_b.png\"/></figure></b></h2>\n\n\n\n\n\n\n\n<h2><b>业务指标</b><b>3<figure><noscript><img src=\"https://pic4.zhimg.com/v2-35da14d9689f97a62c899bacdc28228b_b.png\" data-rawwidth=\"377\" data-rawheight=\"267\" class=\"content_image\" width=\"377\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;377&#39; height=&#39;267&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"377\" data-rawheight=\"267\" class=\"content_image lazy\" width=\"377\" data-actualsrc=\"https://pic4.zhimg.com/v2-35da14d9689f97a62c899bacdc28228b_b.png\"/></figure></b></h2>\n\n<figure><noscript><img src=\"https://pic4.zhimg.com/v2-3b4144524188aab85dd11f076352901b_b.png\" data-rawwidth=\"556\" data-rawheight=\"38\" class=\"origin_image zh-lightbox-thumb\" width=\"556\" data-original=\"https://pic4.zhimg.com/v2-3b4144524188aab85dd11f076352901b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;556&#39; height=&#39;38&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"556\" data-rawheight=\"38\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"556\" data-original=\"https://pic4.zhimg.com/v2-3b4144524188aab85dd11f076352901b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-3b4144524188aab85dd11f076352901b_b.png\"/></figure><h2><b>业务指标</b><b>4—</b><b>消费趋势<figure><noscript><img src=\"https://pic4.zhimg.com/v2-f1940731f79904805471ad6fda3d256b_b.png\" data-rawwidth=\"559\" data-rawheight=\"114\" class=\"origin_image zh-lightbox-thumb\" width=\"559\" data-original=\"https://pic4.zhimg.com/v2-f1940731f79904805471ad6fda3d256b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;559&#39; height=&#39;114&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"559\" data-rawheight=\"114\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"559\" data-original=\"https://pic4.zhimg.com/v2-f1940731f79904805471ad6fda3d256b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-f1940731f79904805471ad6fda3d256b_b.png\"/></figure></b></h2>\n\n\n\n<p>X\n= a vector, INDEX = list of one or more factor, FUN = Function or operation\nthat needs to be applied, … optional\narguments for the function<figure><noscript><img src=\"https://pic4.zhimg.com/v2-5f59e2bd65687676417d5828ac231a5f_b.png\" data-rawwidth=\"558\" data-rawheight=\"133\" class=\"origin_image zh-lightbox-thumb\" width=\"558\" data-original=\"https://pic4.zhimg.com/v2-5f59e2bd65687676417d5828ac231a5f_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;558&#39; height=&#39;133&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"558\" data-rawheight=\"133\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"558\" data-original=\"https://pic4.zhimg.com/v2-5f59e2bd65687676417d5828ac231a5f_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-5f59e2bd65687676417d5828ac231a5f_b.png\"/></figure><figure><noscript><img src=\"https://pic1.zhimg.com/v2-6eca53bf91838326a0df0d1856b80a0c_b.png\" data-rawwidth=\"558\" data-rawheight=\"322\" class=\"origin_image zh-lightbox-thumb\" width=\"558\" data-original=\"https://pic1.zhimg.com/v2-6eca53bf91838326a0df0d1856b80a0c_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;558&#39; height=&#39;322&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"558\" data-rawheight=\"322\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"558\" data-original=\"https://pic1.zhimg.com/v2-6eca53bf91838326a0df0d1856b80a0c_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-6eca53bf91838326a0df0d1856b80a0c_b.png\"/></figure></p>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": [
                {
                    "userName": "猴子", 
                    "userLink": "https://www.zhihu.com/people/c9b28ce4b50bf0444d17d010224cb06f", 
                    "content": "通过解决问题的过程，也提高了自己的解决问题的能力，这就是成长", 
                    "likes": 0, 
                    "childComments": []
                }, 
                {
                    "userName": "知乎用户", 
                    "userLink": "https://www.zhihu.com/people/0", 
                    "content": "<p>数据素材能提供一下下载么？</p>", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "黄马克", 
                            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
                            "content": "<p>你好，关注公众号  猴子聊人物  里有</p>", 
                            "likes": 0, 
                            "replyToAuthor": "知乎用户"
                        }
                    ]
                }, 
                {
                    "userName": "wb Wang", 
                    "userLink": "https://www.zhihu.com/people/89cbdeffb3373e9b75c46a1a14593071", 
                    "content": "给啥软件安装的openxlsx包？", 
                    "likes": 0, 
                    "childComments": [
                        {
                            "userName": "黄马克", 
                            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
                            "content": "<p>R软件</p>", 
                            "likes": 0, 
                            "replyToAuthor": "wb Wang"
                        }
                    ]
                }
            ]
        }, 
        {
            "url": "https://zhuanlan.zhihu.com/p/26637866", 
            "userName": "黄马克", 
            "userLink": "https://www.zhihu.com/people/39c57aa653e1a6963d57cd65a34afc45", 
            "upvote": 8, 
            "title": "数据结构学习与认识", 
            "content": "<b>数据结构是什么？</b>数据结构是为了帮助我们更好，更快的把算法实现。<br/><br/><b>前期准备：</b><br/>使用软件：R，Rstudio<br/>Rstudio   ：R和Rstudio关系  R是运行环境，Rstudio是开发工具。<br/>Rstudio --创建新项目-创建新文件-编写代码-执行代码<br/><br/><b>学习过程：</b><br/><b>1</b>：R可以处理的数据类型：数值型，字符型，逻辑型，负数型（虚数）和原生型（字节）:<br/><b>2</b>：根据不同的要求选择合适的数据结构存储数据<br/><ul><ul><li> 向量--将相同数据类型放在同一个数据空间中，length(向量)长度，name[]</li><li>矩阵--2维，数据类型相同</li><li>数组-多维，矩阵的自然推广，例如  三维，（2,4,3）可理解为3层-- 2行4列矩阵</li></ul></ul><br/><ul><ul><li>数据框--理解为一个类，包含不同模式的数据</li><li>列表--存储函数的返回结果，可包含数据库，列表等</li><li>因子--用字符型变量创建因子 (为了辅助我们以文本字符串排序或选择)</li></ul></ul><ol><ol><ol><ol><li>如何定义--有序型：factor(向量，ordered=TRUE）------名义型：factor(向量)<br/></li><li>如何使用--一般应用在数据框，或者列表当中作为变量<br/></li></ol></ol></ol></ol><p>                                -------------------------------------(PS:不想将变量变为因子 加，stringAsFactor=FALSE)--------------</p><p><br/><b>3</b>：选取数据<br/></p><ol><ol><li>使用下标的方式来选取数据</li><li>使用$</li><li>使用[，“某变量”]</li></ol></ol><p><b>实践应用：</b></p><br/><b>1</b> <b>，</b>导入数据<br/><br/>读取EXCEL时出现乱码<br/><figure><noscript><img src=\"https://pic4.zhimg.com/v2-9c834619597a8828240fa86e753a783b_b.png\" data-rawwidth=\"544\" data-rawheight=\"110\" class=\"origin_image zh-lightbox-thumb\" width=\"544\" data-original=\"https://pic4.zhimg.com/v2-9c834619597a8828240fa86e753a783b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;544&#39; height=&#39;110&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"544\" data-rawheight=\"110\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"544\" data-original=\"https://pic4.zhimg.com/v2-9c834619597a8828240fa86e753a783b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-9c834619597a8828240fa86e753a783b_b.png\"/></figure><br/>用R语言的xlsx包里面的read.xlsx( )导入含有中文的excel文件时，会因为以下问题出现乱码：<br/><ol><ol><ol><li>没有插入encoding的正确参数(一般为UTF-8)<br/></li><li>文件的编码方式应该与encoding一致（因为Excel一般默认GB2312）<br/></li><li>excel文件含有中文名<br/></li><li>excel文件中含有表格格式<br/></li></ol></ol></ol><p>可使用方法<u>mydataFrame&lt;- read.xlsx2(file,sheet)</u></p><p><br/>或者<u>mydataFrame&lt;- read.xlsx(file,sheet,encoding=&#34;UTF-8&#34;)</u><br/></p><ul><ul><ul><li>PS（不带表格第一行的方式，mydata&lt;-read.xlsx(workbook,2,encoding=&#34;UTF-8&#34;,header=F)）<br/></li></ul></ul></ul><p>结果如下：</p><br/><br/><b><figure><noscript><img src=\"https://pic2.zhimg.com/v2-98838031be83425259ad2087396288e5_b.png\" data-rawwidth=\"397\" data-rawheight=\"118\" class=\"content_image\" width=\"397\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;397&#39; height=&#39;118&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"397\" data-rawheight=\"118\" class=\"content_image lazy\" width=\"397\" data-actualsrc=\"https://pic2.zhimg.com/v2-98838031be83425259ad2087396288e5_b.png\"/></figure>2，</b>观察是否 是合适的数据结构 存储数据<br/><ul><ul><ul><li>病人编号适合数值向量</li><li>姓名是字符串向量</li><li>年龄数值型向量</li><li>糖尿病类型适合用名义型因子（便于对比）</li><li>病情适合使用有序型因子<figure><noscript><img src=\"https://pic3.zhimg.com/v2-8ec8a4f1ed64aa830e1d7e6f1d289402_b.png\" data-rawwidth=\"556\" data-rawheight=\"121\" class=\"origin_image zh-lightbox-thumb\" width=\"556\" data-original=\"https://pic3.zhimg.com/v2-8ec8a4f1ed64aa830e1d7e6f1d289402_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;556&#39; height=&#39;121&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"556\" data-rawheight=\"121\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"556\" data-original=\"https://pic3.zhimg.com/v2-8ec8a4f1ed64aa830e1d7e6f1d289402_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-8ec8a4f1ed64aa830e1d7e6f1d289402_b.png\"/></figure></li><ul><ul><li>PS：（病情与病情.1为同一个变量，因子顺序却是不一样的，病情可用leves来指定程度级别）<figure><noscript><img src=\"https://pic3.zhimg.com/v2-ea559b65ec4cb7a92afb9a9e68fda94a_b.png\" data-rawwidth=\"483\" data-rawheight=\"44\" class=\"origin_image zh-lightbox-thumb\" width=\"483\" data-original=\"https://pic3.zhimg.com/v2-ea559b65ec4cb7a92afb9a9e68fda94a_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;483&#39; height=&#39;44&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"483\" data-rawheight=\"44\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"483\" data-original=\"https://pic3.zhimg.com/v2-ea559b65ec4cb7a92afb9a9e68fda94a_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-ea559b65ec4cb7a92afb9a9e68fda94a_b.png\"/></figure></li></ul></ul></ul></ul></ul><p>结果如下：<figure><noscript><img src=\"https://pic4.zhimg.com/v2-dca6a9d9c14907e102002d37338cab4b_b.png\" data-rawwidth=\"551\" data-rawheight=\"129\" class=\"origin_image zh-lightbox-thumb\" width=\"551\" data-original=\"https://pic4.zhimg.com/v2-dca6a9d9c14907e102002d37338cab4b_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;551&#39; height=&#39;129&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"551\" data-rawheight=\"129\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"551\" data-original=\"https://pic4.zhimg.com/v2-dca6a9d9c14907e102002d37338cab4b_r.jpg\" data-actualsrc=\"https://pic4.zhimg.com/v2-dca6a9d9c14907e102002d37338cab4b_b.png\"/></figure></p><br/>完成简单数据分析<br/><ul><li>nrow(mydata) 输出多少病人<figure><noscript><img src=\"https://pic3.zhimg.com/v2-5a4adbeb1c075edc9e92edbc39dd65ea_b.png\" data-rawwidth=\"180\" data-rawheight=\"38\" class=\"content_image\" width=\"180\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;180&#39; height=&#39;38&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"180\" data-rawheight=\"38\" class=\"content_image lazy\" width=\"180\" data-actualsrc=\"https://pic3.zhimg.com/v2-5a4adbeb1c075edc9e92edbc39dd65ea_b.png\"/></figure><br/>使用列联表，更直观的看出不同类型糖尿病人治疗效果之间的差异<figure><noscript><img src=\"https://pic2.zhimg.com/v2-313b2632e2c085d4acb247ac895a3ab5_b.png\" data-rawwidth=\"337\" data-rawheight=\"88\" class=\"content_image\" width=\"337\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;337&#39; height=&#39;88&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"337\" data-rawheight=\"88\" class=\"content_image lazy\" width=\"337\" data-actualsrc=\"https://pic2.zhimg.com/v2-313b2632e2c085d4acb247ac895a3ab5_b.png\"/></figure><br/></li></ul><p>也可看出患1型病人有多少<figure><noscript><img src=\"https://pic3.zhimg.com/v2-19f8c1d0f6bf4ae46802f9359f8934a6_b.png\" data-rawwidth=\"258\" data-rawheight=\"75\" class=\"content_image\" width=\"258\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;258&#39; height=&#39;75&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"258\" data-rawheight=\"75\" class=\"content_image lazy\" width=\"258\" data-actualsrc=\"https://pic3.zhimg.com/v2-19f8c1d0f6bf4ae46802f9359f8934a6_b.png\"/></figure></p><p>或者可以使用length函数</p><figure><noscript><img src=\"https://pic3.zhimg.com/v2-65e45d7944df8230d0ae389ef8f73a32_b.png\" data-rawwidth=\"406\" data-rawheight=\"54\" class=\"content_image\" width=\"406\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;406&#39; height=&#39;54&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"406\" data-rawheight=\"54\" class=\"content_image lazy\" width=\"406\" data-actualsrc=\"https://pic3.zhimg.com/v2-65e45d7944df8230d0ae389ef8f73a32_b.png\"/></figure><br/><br/><b>以上为自己写代码的思路和应用方法</b><br/><br/><b>以下为案例程序对比分析：</b><figure><noscript><img src=\"https://pic1.zhimg.com/v2-d61134cfe46647cae6493c102c57f5ec_b.png\" data-rawwidth=\"457\" data-rawheight=\"76\" class=\"origin_image zh-lightbox-thumb\" width=\"457\" data-original=\"https://pic1.zhimg.com/v2-d61134cfe46647cae6493c102c57f5ec_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;457&#39; height=&#39;76&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"457\" data-rawheight=\"76\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"457\" data-original=\"https://pic1.zhimg.com/v2-d61134cfe46647cae6493c102c57f5ec_r.jpg\" data-actualsrc=\"https://pic1.zhimg.com/v2-d61134cfe46647cae6493c102c57f5ec_b.png\"/></figure><br/>不将变量作为因子，可能在此例子当中，并不需要用到排序等，所以进行简单操作了。<br/>获取1型病人的方法之一<figure><noscript><img src=\"https://pic3.zhimg.com/v2-709d9f633570703a7b454f6a234bd8ee_b.png\" data-rawwidth=\"491\" data-rawheight=\"131\" class=\"origin_image zh-lightbox-thumb\" width=\"491\" data-original=\"https://pic3.zhimg.com/v2-709d9f633570703a7b454f6a234bd8ee_r.jpg\"/></noscript><img src=\"data:image/svg+xml;utf8,&lt;svg xmlns=&#39;http://www.w3.org/2000/svg&#39; width=&#39;491&#39; height=&#39;131&#39;&gt;&lt;/svg&gt;\" data-rawwidth=\"491\" data-rawheight=\"131\" class=\"origin_image zh-lightbox-thumb lazy\" width=\"491\" data-original=\"https://pic3.zhimg.com/v2-709d9f633570703a7b454f6a234bd8ee_r.jpg\" data-actualsrc=\"https://pic3.zhimg.com/v2-709d9f633570703a7b454f6a234bd8ee_b.png\"/></figure>", 
            "topic": [
                {
                    "tag": "数据分析", 
                    "tagLink": "https://api.zhihu.com/topics/19559424"
                }
            ], 
            "comments": [
                {
                    "userName": "猴子", 
                    "userLink": "https://www.zhihu.com/people/c9b28ce4b50bf0444d17d010224cb06f", 
                    "content": "每个编程语言数据结构都是基础", 
                    "likes": 0, 
                    "childComments": []
                }
            ]
        }
    ], 
    "url": "https://zhuanlan.zhihu.com/hyking"
}
